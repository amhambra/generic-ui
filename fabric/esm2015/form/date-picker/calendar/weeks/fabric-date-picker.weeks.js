import { Injectable } from '@angular/core';
import * as i0 from "@angular/core";
export class FabricDatePickerWeeks {
    getDaysInMonths(year, month) {
        this.resetWeeks();
        const numberOfDaysInMonth = (new Date(year, month + 1, 0)).getDate();
        for (let i = 1; i <= numberOfDaysInMonth; i++) {
            this.createWeeks(new Date(year, month, i));
        }
        return this.weeks;
    }
    createWeeks(date) {
        const day = date.getDate();
        if (this.weeks[0].length === 0 && day === 1) {
            this.createWeek(date, this.weeks[0]);
        }
        if (this.weeks[1].length === 0 && day > this.getLastDayNumber(this.weeks[0])) {
            this.createWeek(this.getLastDayDate(this.weeks[0]), this.weeks[1]);
        }
        if (this.weeks[2].length === 0 && day > this.getLastDayNumber(this.weeks[1])) {
            this.createWeek(this.getLastDayDate(this.weeks[1]), this.weeks[2]);
        }
        if (this.weeks[3].length === 0 && day > this.getLastDayNumber(this.weeks[2])) {
            this.createWeek(this.getLastDayDate(this.weeks[2]), this.weeks[3]);
        }
        if (this.weeks[4].length === 0 && day >= this.getLastDayNumber(this.weeks[3])) {
            this.createWeek(this.getLastDayDate(this.weeks[3]), this.weeks[4]);
        }
        if (this.weeks[5].length === 0 && day >= this.getLastDayNumber(this.weeks[4])) {
            this.createWeek(this.getLastDayDate(this.weeks[4]), this.weeks[5]);
        }
        this.weeks = [this.weeks[0], this.weeks[1], this.weeks[2], this.weeks[3], this.weeks[4], this.weeks[5]];
    }
    createWeek(date, week) {
        for (let i = 1; i <= 7; i++) {
            const isFirstDaySunday = date.getDay() === 0 && this.weeks[0].length === 0;
            let day;
            if (isFirstDaySunday) {
                day = date.getDate() - 6;
            }
            else {
                day = date.getDate() - date.getDay() + i;
            }
            const dayOfWeek = new Date(date.setDate(day));
            if (week.length < 7) {
                week.push(dayOfWeek);
            }
        }
    }
    getLastDayNumber(week) {
        if (week.length === 7) {
            return week[week.length - 1].getDate();
        }
        return 0;
    }
    getLastDayDate(week) {
        const lastDay = week[week.length - 1].getDate();
        return new Date(week[week.length - 1].setDate(lastDay));
    }
    resetWeeks() {
        this.weeks = [];
        this.weeks[0] = [];
        this.weeks[1] = [];
        this.weeks[2] = [];
        this.weeks[3] = [];
        this.weeks[4] = [];
        this.weeks[5] = [];
    }
}
FabricDatePickerWeeks.ɵfac = function FabricDatePickerWeeks_Factory(t) { return new (t || FabricDatePickerWeeks)(); };
FabricDatePickerWeeks.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: FabricDatePickerWeeks, factory: FabricDatePickerWeeks.ɵfac });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(FabricDatePickerWeeks, [{
        type: Injectable
    }], null, null); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFicmljLWRhdGUtcGlja2VyLndlZWtzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vYnVpbGQtY2xpL3Byb2plY3RzL2d1aS1mYWJyaWMvc3JjL2Zvcm0vZGF0ZS1waWNrZXIvY2FsZW5kYXIvd2Vla3MvZmFicmljLWRhdGUtcGlja2VyLndlZWtzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7O0FBRzNDLE1BQU0sT0FBTyxxQkFBcUI7SUFJakMsZUFBZSxDQUFDLElBQVksRUFBRSxLQUFhO1FBQzFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNsQixNQUFNLG1CQUFtQixHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUVyRSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksbUJBQW1CLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDOUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDM0M7UUFDRCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDbkIsQ0FBQztJQUVPLFdBQVcsQ0FBQyxJQUFVO1FBQzdCLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUUzQixJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxFQUFFO1lBQzVDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNyQztRQUNELElBQUksSUFBSSxD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O1FBQ25CLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ25CLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ25CLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ25CLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ3BCLENBQUM7OzBGQTlFVyxxQkFBcUI7MkVBQXJCLHFCQUFxQixXQUFyQixxQkFBcUI7dUZBQXJCLHFCQUFxQjtjQURqQyxVQUFVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgRmFicmljRGF0ZVBpY2tlcldlZWtzIHtcblxuXHRwcml2YXRlIHdlZWtzOiBBcnJheTxBcnJheTxEYXRlPj47XG5cblx0Z2V0RGF5c0luTW9udGhzKHllYXI6IG51bWJlciwgbW9udGg6IG51bWJlcik6IEFycmF5PEFycmF5PERhdGU+PiB7XG5cdFx0dGhpcy5yZXNldFdlZWtzKCk7XG5cdFx0Y29uc3QgbnVtYmVyT2ZEYXlzSW5Nb250aCA9IChuZXcgRGF0ZSh5ZWFyLCBtb250aCArIDEsIDApKS5nZXREYXRlKCk7XG5cblx0XHRmb3IgKGxldCBpID0gMTsgaSA8PSBudW1iZXJPZkRheXNJbk1vbnRoOyBpKyspIHtcblx0XHRcdHRoaXMuY3JlYXRlV2Vla3MobmV3IERhdGUoeWVhciwgbW9udGgsIGkpKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMud2Vla3M7XG5cdH1cblxuXHRwcml2YXRlIGNyZWF0ZVdlZWtzKGRhdGU6IERhdGUpOiB2b2lkIHtcblx0XHRjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKTtcblxuXHRcdGlmICh0aGlzLndlZWtzWzBdLmxlbmd0aCA9PT0gMCAmJiBkYXkgPT09IDEpIHtcblx0XHRcdHRoaXMuY3JlYXRlV2VlayhkYXRlLCB0aGlzLndlZWtzWzBdKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMud2Vla3NbMV0ubGVuZ3RoID09PSAwICYmIGRheSA+IHRoaXMuZ2V0TGFzdERheU51bWJlcih0aGlzLndlZWtzWzBdKSkge1xuXHRcdFx0dGhpcy5jcmVhdGVXZWVrKHRoaXMuZ2V0TGFzdERheURhdGUodGhpcy53ZWVrc1swXSksIHRoaXMud2Vla3NbMV0pO1xuXHRcdH1cblx0XHRpZiAodGhpcy53ZWVrc1syXS5sZW5ndGggPT09IDAgJiYgZGF5ID4gdGhpcy5nZXRMYXN0RGF5TnVtYmVyKHRoaXMud2Vla3NbMV0pKSB7XG5cdFx0XHR0aGlzLmNyZWF0ZVdlZWsodGhpcy5nZXRMYXN0RGF5RGF0ZSh0aGlzLndlZWtzWzFdKSwgdGhpcy53ZWVrc1syXSk7XG5cdFx0fVxuXHRcdGlmICh0aGlzLndlZWtzWzNdLmxlbmd0aCA9PT0gMCAmJiBkYXkgPiB0aGlzLmdldExhc3REYXlOdW1iZXIodGhpcy53ZWVrc1syXSkpIHtcblx0XHRcdHRoaXMuY3JlYXRlV2Vlayh0aGlzLmdldExhc3REYXlEYXRlKHRoaXMud2Vla3NbMl0pLCB0aGlzLndlZWtzWzNdKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMud2Vla3NbNF0ubGVuZ3RoID09PSAwICYmIGRheSA+PSB0aGlzLmdldExhc3REYXlOdW1iZXIodGhpcy53ZWVrc1szXSkpIHtcblx0XHRcdHRoaXMuY3JlYXRlV2Vlayh0aGlzLmdldExhc3REYXlEYXRlKHRoaXMud2Vla3NbM10pLCB0aGlzLndlZWtzWzRdKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMud2Vla3NbNV0ubGVuZ3RoID09PSAwICYmIGRheSA+PSB0aGlzLmdldExhc3REYXlOdW1iZXIodGhpcy53ZWVrc1s0XSkpIHtcblx0XHRcdHRoaXMuY3JlYXRlV2Vlayh0aGlzLmdldExhc3REYXlEYXRlKHRoaXMud2Vla3NbNF0pLCB0aGlzLndlZWtzWzVdKTtcblx0XHR9XG5cblx0XHR0aGlzLndlZWtzID0gW3RoaXMud2Vla3NbMF0sIHRoaXMud2Vla3NbMV0sIHRoaXMud2Vla3NbMl0sIHRoaXMud2Vla3NbM10sIHRoaXMud2Vla3NbNF0sIHRoaXMud2Vla3NbNV1dO1xuXHR9XG5cblx0cHJpdmF0ZSBjcmVhdGVXZWVrKGRhdGU6IERhdGUsIHdlZWs6IEFycmF5PERhdGU+KTogdm9pZCB7XG5cblx0XHRmb3IgKGxldCBpID0gMTsgaSA8PSA3OyBpKyspIHtcblx0XHRcdGNvbnN0IGlzRmlyc3REYXlTdW5kYXkgPSBkYXRlLmdldERheSgpID09PSAwICYmIHRoaXMud2Vla3NbMF0ubGVuZ3RoID09PSAwO1xuXHRcdFx0bGV0IGRheTtcblxuXHRcdFx0aWYgKGlzRmlyc3REYXlTdW5kYXkpIHtcblx0XHRcdFx0ZGF5ID0gZGF0ZS5nZXREYXRlKCkgLSA2O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGF5ID0gZGF0ZS5nZXREYXRlKCkgLSBkYXRlLmdldERheSgpICsgaTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGRheU9mV2VlayA9IG5ldyBEYXRlKGRhdGUuc2V0RGF0ZShkYXkpKTtcblxuXHRcdFx0aWYgKHdlZWsubGVuZ3RoIDwgNykge1xuXHRcdFx0XHR3ZWVrLnB1c2goZGF5T2ZXZWVrKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGdldExhc3REYXlOdW1iZXIod2VlazogQXJyYXk8RGF0ZT4pOiBudW1iZXIge1xuXHRcdGlmICh3ZWVrLmxlbmd0aCA9PT0gNykge1xuXHRcdFx0cmV0dXJuIHdlZWtbd2Vlay5sZW5ndGggLSAxXS5nZXREYXRlKCk7XG5cdFx0fVxuXHRcdHJldHVybiAwO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXRMYXN0RGF5RGF0ZSh3ZWVrOiBBcnJheTxEYXRlPik6IERhdGUge1xuXHRcdGNvbnN0IGxhc3REYXkgPSB3ZWVrW3dlZWsubGVuZ3RoIC0gMV0uZ2V0RGF0ZSgpO1xuXHRcdHJldHVybiBuZXcgRGF0ZSh3ZWVrW3dlZWsubGVuZ3RoIC0gMV0uc2V0RGF0ZShsYXN0RGF5KSk7XG5cdH1cblxuXHRwcml2YXRlIHJlc2V0V2Vla3MoKTogdm9pZCB7XG5cdFx0dGhpcy53ZWVrcyA9IFtdO1xuXHRcdHRoaXMud2Vla3NbMF0gPSBbXTtcblx0XHR0aGlzLndlZWtzWzFdID0gW107XG5cdFx0dGhpcy53ZWVrc1syXSA9IFtdO1xuXHRcdHRoaXMud2Vla3NbM10gPSBbXTtcblx0XHR0aGlzLndlZWtzWzRdID0gW107XG5cdFx0dGhpcy53ZWVrc1s1XSA9IFtdO1xuXHR9XG59XG4iXX0=