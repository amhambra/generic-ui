import { Injectable } from '@angular/core';
export class FabricDatePickerWeeks {
    getDaysInMonths(year, month) {
        this.resetWeeks();
        const numberOfDaysInMonth = (new Date(year, month + 1, 0)).getDate();
        for (let i = 1; i <= numberOfDaysInMonth; i++) {
            this.createWeeks(new Date(year, month, i));
        }
        return this.weeks;
    }
    createWeeks(date) {
        const day = date.getDate();
        if (this.weeks[0].length === 0 && day === 1) {
            this.createWeek(date, this.weeks[0]);
        }
        if (this.weeks[1].length === 0 && day > this.getLastDayNumber(this.weeks[0])) {
            this.createWeek(this.getLastDayDate(this.weeks[0]), this.weeks[1]);
        }
        if (this.weeks[2].length === 0 && day > this.getLastDayNumber(this.weeks[1])) {
            this.createWeek(this.getLastDayDate(this.weeks[1]), this.weeks[2]);
        }
        if (this.weeks[3].length === 0 && day > this.getLastDayNumber(this.weeks[2])) {
            this.createWeek(this.getLastDayDate(this.weeks[2]), this.weeks[3]);
        }
        if (this.weeks[4].length === 0 && day >= this.getLastDayNumber(this.weeks[3])) {
            this.createWeek(this.getLastDayDate(this.weeks[3]), this.weeks[4]);
        }
        if (this.weeks[5].length === 0 && day >= this.getLastDayNumber(this.weeks[4])) {
            this.createWeek(this.getLastDayDate(this.weeks[4]), this.weeks[5]);
        }
        this.weeks = [this.weeks[0], this.weeks[1], this.weeks[2], this.weeks[3], this.weeks[4], this.weeks[5]];
    }
    createWeek(date, week) {
        for (let i = 1; i <= 7; i++) {
            const isFirstDaySunday = date.getDay() === 0 && this.weeks[0].length === 0;
            let day;
            if (isFirstDaySunday) {
                day = date.getDate() - 6;
            }
            else {
                day = date.getDate() - date.getDay() + i;
            }
            const dayOfWeek = new Date(date.setDate(day));
            if (week.length < 7) {
                week.push(dayOfWeek);
            }
        }
    }
    getLastDayNumber(week) {
        if (week.length === 7) {
            return week[week.length - 1].getDate();
        }
        return 0;
    }
    getLastDayDate(week) {
        const lastDay = week[week.length - 1].getDate();
        return new Date(week[week.length - 1].setDate(lastDay));
    }
    resetWeeks() {
        this.weeks = [];
        this.weeks[0] = [];
        this.weeks[1] = [];
        this.weeks[2] = [];
        this.weeks[3] = [];
        this.weeks[4] = [];
        this.weeks[5] = [];
    }
}
FabricDatePickerWeeks.decorators = [
    { type: Injectable }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFicmljLWRhdGUtcGlja2VyLndlZWtzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vYnVpbGQtY2xpL3Byb2plY3RzL2d1aS1mYWJyaWMvc3JjL2Zvcm0vZGF0ZS1waWNrZXIvY2FsZW5kYXIvd2Vla3MvZmFicmljLWRhdGUtcGlja2VyLndlZWtzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFHM0MsTUFBTSxPQUFPLHFCQUFxQjtJQUlqQyxlQUFlLENBQUMsSUFBWSxFQUFFLEtBQWE7UUFDMUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ2xCLE1BQU0sbUJBQW1CLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBRXJFLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxtQkFBbUIsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUM5QyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUMzQztRQUNELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNuQixDQUFDO0lBRU8sV0FBVyxDQUFDLElBQVU7UUFDN0IsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBRTNCLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLEVBQUU7WUFDNUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3JDO1FBQ0QsSUFBSSxJQUFJLENB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UUFDbkIsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDbkIsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDbkIsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDbkIsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDcEIsQ0FBQzs7O1lBL0VELFVBQVUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBGYWJyaWNEYXRlUGlja2VyV2Vla3Mge1xuXG5cdHByaXZhdGUgd2Vla3M6IEFycmF5PEFycmF5PERhdGU+PjtcblxuXHRnZXREYXlzSW5Nb250aHMoeWVhcjogbnVtYmVyLCBtb250aDogbnVtYmVyKTogQXJyYXk8QXJyYXk8RGF0ZT4+IHtcblx0XHR0aGlzLnJlc2V0V2Vla3MoKTtcblx0XHRjb25zdCBudW1iZXJPZkRheXNJbk1vbnRoID0gKG5ldyBEYXRlKHllYXIsIG1vbnRoICsgMSwgMCkpLmdldERhdGUoKTtcblxuXHRcdGZvciAobGV0IGkgPSAxOyBpIDw9IG51bWJlck9mRGF5c0luTW9udGg7IGkrKykge1xuXHRcdFx0dGhpcy5jcmVhdGVXZWVrcyhuZXcgRGF0ZSh5ZWFyLCBtb250aCwgaSkpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy53ZWVrcztcblx0fVxuXG5cdHByaXZhdGUgY3JlYXRlV2Vla3MoZGF0ZTogRGF0ZSk6IHZvaWQge1xuXHRcdGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpO1xuXG5cdFx0aWYgKHRoaXMud2Vla3NbMF0ubGVuZ3RoID09PSAwICYmIGRheSA9PT0gMSkge1xuXHRcdFx0dGhpcy5jcmVhdGVXZWVrKGRhdGUsIHRoaXMud2Vla3NbMF0pO1xuXHRcdH1cblx0XHRpZiAodGhpcy53ZWVrc1sxXS5sZW5ndGggPT09IDAgJiYgZGF5ID4gdGhpcy5nZXRMYXN0RGF5TnVtYmVyKHRoaXMud2Vla3NbMF0pKSB7XG5cdFx0XHR0aGlzLmNyZWF0ZVdlZWsodGhpcy5nZXRMYXN0RGF5RGF0ZSh0aGlzLndlZWtzWzBdKSwgdGhpcy53ZWVrc1sxXSk7XG5cdFx0fVxuXHRcdGlmICh0aGlzLndlZWtzWzJdLmxlbmd0aCA9PT0gMCAmJiBkYXkgPiB0aGlzLmdldExhc3REYXlOdW1iZXIodGhpcy53ZWVrc1sxXSkpIHtcblx0XHRcdHRoaXMuY3JlYXRlV2Vlayh0aGlzLmdldExhc3REYXlEYXRlKHRoaXMud2Vla3NbMV0pLCB0aGlzLndlZWtzWzJdKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMud2Vla3NbM10ubGVuZ3RoID09PSAwICYmIGRheSA+IHRoaXMuZ2V0TGFzdERheU51bWJlcih0aGlzLndlZWtzWzJdKSkge1xuXHRcdFx0dGhpcy5jcmVhdGVXZWVrKHRoaXMuZ2V0TGFzdERheURhdGUodGhpcy53ZWVrc1syXSksIHRoaXMud2Vla3NbM10pO1xuXHRcdH1cblx0XHRpZiAodGhpcy53ZWVrc1s0XS5sZW5ndGggPT09IDAgJiYgZGF5ID49IHRoaXMuZ2V0TGFzdERheU51bWJlcih0aGlzLndlZWtzWzNdKSkge1xuXHRcdFx0dGhpcy5jcmVhdGVXZWVrKHRoaXMuZ2V0TGFzdERheURhdGUodGhpcy53ZWVrc1szXSksIHRoaXMud2Vla3NbNF0pO1xuXHRcdH1cblx0XHRpZiAodGhpcy53ZWVrc1s1XS5sZW5ndGggPT09IDAgJiYgZGF5ID49IHRoaXMuZ2V0TGFzdERheU51bWJlcih0aGlzLndlZWtzWzRdKSkge1xuXHRcdFx0dGhpcy5jcmVhdGVXZWVrKHRoaXMuZ2V0TGFzdERheURhdGUodGhpcy53ZWVrc1s0XSksIHRoaXMud2Vla3NbNV0pO1xuXHRcdH1cblxuXHRcdHRoaXMud2Vla3MgPSBbdGhpcy53ZWVrc1swXSwgdGhpcy53ZWVrc1sxXSwgdGhpcy53ZWVrc1syXSwgdGhpcy53ZWVrc1szXSwgdGhpcy53ZWVrc1s0XSwgdGhpcy53ZWVrc1s1XV07XG5cdH1cblxuXHRwcml2YXRlIGNyZWF0ZVdlZWsoZGF0ZTogRGF0ZSwgd2VlazogQXJyYXk8RGF0ZT4pOiB2b2lkIHtcblxuXHRcdGZvciAobGV0IGkgPSAxOyBpIDw9IDc7IGkrKykge1xuXHRcdFx0Y29uc3QgaXNGaXJzdERheVN1bmRheSA9IGRhdGUuZ2V0RGF5KCkgPT09IDAgJiYgdGhpcy53ZWVrc1swXS5sZW5ndGggPT09IDA7XG5cdFx0XHRsZXQgZGF5O1xuXG5cdFx0XHRpZiAoaXNGaXJzdERheVN1bmRheSkge1xuXHRcdFx0XHRkYXkgPSBkYXRlLmdldERhdGUoKSAtIDY7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkYXkgPSBkYXRlLmdldERhdGUoKSAtIGRhdGUuZ2V0RGF5KCkgKyBpO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgZGF5T2ZXZWVrID0gbmV3IERhdGUoZGF0ZS5zZXREYXRlKGRheSkpO1xuXG5cdFx0XHRpZiAod2Vlay5sZW5ndGggPCA3KSB7XG5cdFx0XHRcdHdlZWsucHVzaChkYXlPZldlZWspO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgZ2V0TGFzdERheU51bWJlcih3ZWVrOiBBcnJheTxEYXRlPik6IG51bWJlciB7XG5cdFx0aWYgKHdlZWsubGVuZ3RoID09PSA3KSB7XG5cdFx0XHRyZXR1cm4gd2Vla1t3ZWVrLmxlbmd0aCAtIDFdLmdldERhdGUoKTtcblx0XHR9XG5cdFx0cmV0dXJuIDA7XG5cdH1cblxuXHRwcml2YXRlIGdldExhc3REYXlEYXRlKHdlZWs6IEFycmF5PERhdGU+KTogRGF0ZSB7XG5cdFx0Y29uc3QgbGFzdERheSA9IHdlZWtbd2Vlay5sZW5ndGggLSAxXS5nZXREYXRlKCk7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKHdlZWtbd2Vlay5sZW5ndGggLSAxXS5zZXREYXRlKGxhc3REYXkpKTtcblx0fVxuXG5cdHByaXZhdGUgcmVzZXRXZWVrcygpOiB2b2lkIHtcblx0XHR0aGlzLndlZWtzID0gW107XG5cdFx0dGhpcy53ZWVrc1swXSA9IFtdO1xuXHRcdHRoaXMud2Vla3NbMV0gPSBbXTtcblx0XHR0aGlzLndlZWtzWzJdID0gW107XG5cdFx0dGhpcy53ZWVrc1szXSA9IFtdO1xuXHRcdHRoaXMud2Vla3NbNF0gPSBbXTtcblx0XHR0aGlzLndlZWtzWzVdID0gW107XG5cdH1cbn1cbiJdfQ==