import { Optional } from '../optional';
export class KeyMap {
    constructor() {
        this.keys = new Map();
        this.values = new WeakMap();
    }
    find(key) {
        const internalKey = this.getInternalKey(key);
        if (internalKey !== undefined) {
            return Optional.of(this.values.get(internalKey));
        }
        else {
            return Optional.empty();
        }
    }
    has(key) {
        const internalKey = this.getInternalKey(key);
        return this.values.has(internalKey);
    }
    set(key, value) {
        this.keys.set(key.toString(), key);
        this.values.set(key, value);
    }
    size() {
        return this.keys.size;
    }
    remove(key) {
        if (this.hasInternalKey(key)) {
            this.keys.delete(key.toString());
            this.values.delete(key);
        }
    }
    removeAll() {
        this.keys.forEach((value) => {
            this.values.delete(value);
        });
        this.keys.clear();
    }
    getInternalKey(key) {
        return this.keys.get(key.toString());
    }
    hasInternalKey(key) {
        return this.keys.has(key.toString());
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia2V5LW1hcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2J1aWxkLWNsaS9wcm9qZWN0cy9ndWktaGVybWVzL3NyYy9jb21tb24vY29sbGVjdGlvbi9rZXktbWFwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFFdkMsTUFBTSxPQUFPLE1BQU07SUFBbkI7UUFFa0IsU0FBSSxHQUFHLElBQUksR0FBRyxFQUFhLENBQUM7UUFFNUIsV0FBTSxHQUFHLElBQUksT0FBTyxFQUFRLENBQUM7SUFtRC9DLENBQUM7SUFqREEsSUFBSSxDQUFDLEdBQU07UUFFVixNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRTdDLElBQUksV0FBVyxLQUFLLFNBQVMsRUFBRTtZQUM5QixPQUFPLFFBQVEsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztTQUNqRDthQUFNO1lBQ04sT0FBTyxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDeEI7SUFDRixDQUFDO0lBRUQsR0FBRyxDQUFDLEdBQU07UUFFVCxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRTdDLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDckMsQ0FBQztJQUVELEdBQUcsQ0FBQyxHQUFNLEVBQUUsS0FBUTtRQUNuQixJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDbkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRCxJQUFJO1FBQ0gsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztJQUN2QixDQUFDO0lBRUQsTUFBTSxDQUFDLEdBQU07UUFDWixJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDN0IsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7WUFDakMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDeEI7SUFDRixDQUFDO0lBRUQsU0FBUztRQUNSLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDM0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDM0IsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ25CLENBQUM7SUFFTyxjQUFjLENBQUMsR0FBTTtRQUM1QixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFTyxjQUFjLENBQUMsR0FBTTtRQUM1QixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7Q0FFRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtleSB9IGZyb20gJy4va2V5JztcbmltcG9ydCB7IE9wdGlvbmFsIH0gZnJvbSAnLi4vb3B0aW9uYWwnO1xuXG5leHBvcnQgY2xhc3MgS2V5TWFwPEsgZXh0ZW5kcyBLZXksIFQ+IHtcblxuXHRwcml2YXRlIHJlYWRvbmx5IGtleXMgPSBuZXcgTWFwPHN0cmluZywgSz4oKTtcblxuXHRwcml2YXRlIHJlYWRvbmx5IHZhbHVlcyA9IG5ldyBXZWFrTWFwPEssIFQ+KCk7XG5cblx0ZmluZChrZXk6IEspOiBPcHRpb25hbDxUPiB7XG5cblx0XHRjb25zdCBpbnRlcm5hbEtleSA9IHRoaXMuZ2V0SW50ZXJuYWxLZXkoa2V5KTtcblxuXHRcdGlmIChpbnRlcm5hbEtleSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gT3B0aW9uYWwub2YodGhpcy52YWx1ZXMuZ2V0KGludGVybmFsS2V5KSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBPcHRpb25hbC5lbXB0eSgpO1xuXHRcdH1cblx0fVxuXG5cdGhhcyhrZXk6IEspOiBib29sZWFuIHtcblxuXHRcdGNvbnN0IGludGVybmFsS2V5ID0gdGhpcy5nZXRJbnRlcm5hbEtleShrZXkpO1xuXG5cdFx0cmV0dXJuIHRoaXMudmFsdWVzLmhhcyhpbnRlcm5hbEtleSk7XG5cdH1cblxuXHRzZXQoa2V5OiBLLCB2YWx1ZTogVCk6IHZvaWQge1xuXHRcdHRoaXMua2V5cy5zZXQoa2V5LnRvU3RyaW5nKCksIGtleSk7XG5cdFx0dGhpcy52YWx1ZXMuc2V0KGtleSwgdmFsdWUpO1xuXHR9XG5cblx0c2l6ZSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLmtleXMuc2l6ZTtcblx0fVxuXG5cdHJlbW92ZShrZXk6IEspOiB2b2lkIHtcblx0XHRpZiAodGhpcy5oYXNJbnRlcm5hbEtleShrZXkpKSB7XG5cdFx0XHR0aGlzLmtleXMuZGVsZXRlKGtleS50b1N0cmluZygpKTtcblx0XHRcdHRoaXMudmFsdWVzLmRlbGV0ZShrZXkpO1xuXHRcdH1cblx0fVxuXG5cdHJlbW92ZUFsbCgpOiB2b2lkIHtcblx0XHR0aGlzLmtleXMuZm9yRWFjaCgodmFsdWUpID0+IHtcblx0XHRcdHRoaXMudmFsdWVzLmRlbGV0ZSh2YWx1ZSk7XG5cdFx0fSk7XG5cdFx0dGhpcy5rZXlzLmNsZWFyKCk7XG5cdH1cblxuXHRwcml2YXRlIGdldEludGVybmFsS2V5KGtleTogSyk6IEsge1xuXHRcdHJldHVybiB0aGlzLmtleXMuZ2V0KGtleS50b1N0cmluZygpKTtcblx0fVxuXG5cdHByaXZhdGUgaGFzSW50ZXJuYWxLZXkoa2V5OiBLKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMua2V5cy5oYXMoa2V5LnRvU3RyaW5nKCkpO1xuXHR9XG5cbn1cbiJdfQ==