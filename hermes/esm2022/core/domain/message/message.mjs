import { RandomStringGenerator } from '../../../common/random-string.generator';
export class Message {
    aggregateId;
    messageType;
    messageId;
    constructor(aggregateId, messageType, messageId = RandomStringGenerator.generate()) {
        this.aggregateId = aggregateId;
        this.messageType = messageType;
        this.messageId = messageId;
    }
    getMessageType() {
        return this.messageType;
    }
    getAggregateId() {
        return this.aggregateId;
    }
    getMessageId() {
        return this.messageId;
    }
    toString() {
        return this.messageType;
    }
    equalsByType(message) {
        return this.getMessageType() === message.getMessageType();
    }
    equals(message) {
        return (this.getMessageType() === message.getMessageType()) && (this.messageId === message.messageId);
    }
    ofMessageType(arg) {
        if (Array.isArray(arg)) {
            const found = arg.find((messageType) => this.isMessageType(messageType));
            return !!found;
        }
        else {
            return this.isMessageType(arg);
        }
    }
    isMessageType(messageType) {
        return this.getMessageType() === messageType;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2J1aWxkLWNsaS9wcm9qZWN0cy9ndWktaGVybWVzL3NyYy9jb3JlL2RvbWFpbi9tZXNzYWdlL21lc3NhZ2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0seUNBQXlDLENBQUM7QUFFaEYsTUFBTSxPQUFnQixPQUFPO0lBRVc7SUFDYjtJQUNGO0lBRnhCLFlBQXVDLFdBQWMsRUFDM0IsV0FBbUIsRUFDckIsWUFBb0IscUJBQXFCLENBQUMsUUFBUSxFQUFFO1FBRnJDLGdCQUFXLEdBQVgsV0FBVyxDQUFHO1FBQzNCLGdCQUFXLEdBQVgsV0FBVyxDQUFRO1FBQ3JCLGNBQVMsR0FBVCxTQUFTLENBQTJDO0lBQzVFLENBQUM7SUFFRCxjQUFjO1FBQ2IsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQ3pCLENBQUM7SUFFRCxjQUFjO1FBQ2IsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQ3pCLENBQUM7SUFFRCxZQUFZO1FBQ1gsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxRQUFRO1FBQ1AsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQ3pCLENBQUM7SUFFRCxZQUFZLENBQUMsT0FBbUI7UUFDL0IsT0FBTyxJQUFJLENBQUMsY0FBYyxFQUFFLEtBQUssT0FBTyxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQzNELENBQUM7SUFFRCxNQUFNLENBQUMsT0FBbUI7UUFDekIsT0FBTyxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsS0FBSyxPQUFPLENBQUMsY0FBYyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEtBQUssT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3ZHLENBQUM7SUFJRCxhQUFhLENBQUMsR0FBMkI7UUFFeEMsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBRXZCLE1BQU0sS0FBSyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxXQUFtQixFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7WUFFakYsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDO1NBRWY7YUFBTTtZQUNOLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUMvQjtJQUNGLENBQUM7SUFFTyxhQUFhLENBQUMsV0FBbUI7UUFDeEMsT0FBTyxJQUFJLENBQUMsY0FBYyxFQUFFLEtBQUssV0FBVyxDQUFDO0lBQzlDLENBQUM7Q0FDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFnZ3JlZ2F0ZUlkIH0gZnJvbSAnLi4vLi4vYXBpL3RhY3RpY2FsL2FnZ3JlZ2F0ZS9hZ2dyZWdhdGUtaWQnO1xuXG5pbXBvcnQgeyBSYW5kb21TdHJpbmdHZW5lcmF0b3IgfSBmcm9tICcuLi8uLi8uLi9jb21tb24vcmFuZG9tLXN0cmluZy5nZW5lcmF0b3InO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgTWVzc2FnZTxJIGV4dGVuZHMgQWdncmVnYXRlSWQ+IHtcblxuXHRwcm90ZWN0ZWQgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBhZ2dyZWdhdGVJZDogSSxcblx0XHRcdFx0XHRcdCAgcHJvdGVjdGVkIHJlYWRvbmx5IG1lc3NhZ2VUeXBlOiBzdHJpbmcsXG5cdFx0XHRcdFx0XHQgIHByaXZhdGUgcmVhZG9ubHkgbWVzc2FnZUlkOiBzdHJpbmcgPSBSYW5kb21TdHJpbmdHZW5lcmF0b3IuZ2VuZXJhdGUoKSkge1xuXHR9XG5cblx0Z2V0TWVzc2FnZVR5cGUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5tZXNzYWdlVHlwZTtcblx0fVxuXG5cdGdldEFnZ3JlZ2F0ZUlkKCk6IEkge1xuXHRcdHJldHVybiB0aGlzLmFnZ3JlZ2F0ZUlkO1xuXHR9XG5cblx0Z2V0TWVzc2FnZUlkKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMubWVzc2FnZUlkO1xuXHR9XG5cblx0dG9TdHJpbmcoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5tZXNzYWdlVHlwZTtcblx0fVxuXG5cdGVxdWFsc0J5VHlwZShtZXNzYWdlOiBNZXNzYWdlPEk+KTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0TWVzc2FnZVR5cGUoKSA9PT0gbWVzc2FnZS5nZXRNZXNzYWdlVHlwZSgpO1xuXHR9XG5cblx0ZXF1YWxzKG1lc3NhZ2U6IE1lc3NhZ2U8ST4pOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKHRoaXMuZ2V0TWVzc2FnZVR5cGUoKSA9PT0gbWVzc2FnZS5nZXRNZXNzYWdlVHlwZSgpKSAmJiAodGhpcy5tZXNzYWdlSWQgPT09IG1lc3NhZ2UubWVzc2FnZUlkKTtcblx0fVxuXG5cdG9mTWVzc2FnZVR5cGUobWVzc2FnZVR5cGU6IHN0cmluZyk6IGJvb2xlYW47XG5cdG9mTWVzc2FnZVR5cGUobWVzc2FnZVR5cGVzOiBBcnJheTxzdHJpbmc+KTogYm9vbGVhbjtcblx0b2ZNZXNzYWdlVHlwZShhcmc6IHN0cmluZyB8IEFycmF5PHN0cmluZz4pOiBib29sZWFuIHtcblxuXHRcdGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblxuXHRcdFx0Y29uc3QgZm91bmQgPSBhcmcuZmluZCgobWVzc2FnZVR5cGU6IHN0cmluZykgPT4gdGhpcy5pc01lc3NhZ2VUeXBlKG1lc3NhZ2VUeXBlKSk7XG5cblx0XHRcdHJldHVybiAhIWZvdW5kO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiB0aGlzLmlzTWVzc2FnZVR5cGUoYXJnKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGlzTWVzc2FnZVR5cGUobWVzc2FnZVR5cGU6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLmdldE1lc3NhZ2VUeXBlKCkgPT09IG1lc3NhZ2VUeXBlO1xuXHR9XG59XG4iXX0=