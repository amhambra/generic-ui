import { SummariesPublisher } from '../api/summaries.publisher';
import { StructureSummariesPanelConfigConverter } from '../domain-read/config/structure.summaries-panel.config-converter';
import { StructureSummariesConfigArchive } from '../domain-read/config/structure.summaries-config.archive';
import { SummariesDispatcher } from './summaries.dispatcher';
export class SummariesDomainPublisher extends SummariesPublisher {
    constructor(summariesDispatcher, configConverter, structureSummariesConfigArchive) {
        super();
        this.summariesDispatcher = summariesDispatcher;
        this.configConverter = configConverter;
        this.structureSummariesConfigArchive = structureSummariesConfigArchive;
    }
    setSummariesEnabled(enabled, structureId) {
        this.summariesDispatcher.setSummariesEnabled(enabled, structureId);
    }
    setConfig(config, structureId) {
        const summariesPanelConfig = this.configConverter.convert(config);
        this.setSummariesEnabled(config.enabled, structureId);
        this.structureSummariesConfigArchive.next(structureId, summariesPanelConfig);
    }
}
SummariesDomainPublisher.services = [SummariesDispatcher, StructureSummariesPanelConfigConverter, StructureSummariesConfigArchive];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3VtbWFyaWVzLmRvbWFpbi1wdWJsaXNoZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9idWlsZC1jbGkvcHJvamVjdHMvbmd4LWxpc3Qvc3JjL2NvcmUvc3RydWN0dXJlL3N1bW1hcmllcy9kb21haW4vc3VtbWFyaWVzLmRvbWFpbi1wdWJsaXNoZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFFaEUsT0FBTyxFQUFFLHNDQUFzQyxFQUFFLE1BQU0sa0VBQWtFLENBQUM7QUFDMUgsT0FBTyxFQUFFLCtCQUErQixFQUFFLE1BQU0sMERBQTBELENBQUM7QUFDM0csT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFHN0QsTUFBTSxPQUFPLHdCQUF5QixTQUFRLGtCQUFrQjtJQUUvRCxZQUE2QixtQkFBd0MsRUFDakQsZUFBdUQsRUFDdkQsK0JBQWdFO1FBQ25GLEtBQUssRUFBRSxDQUFDO1FBSG9CLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBcUI7UUFDakQsb0JBQWUsR0FBZixlQUFlLENBQXdDO1FBQ3ZELG9DQUErQixHQUEvQiwrQkFBK0IsQ0FBaUM7SUFFcEYsQ0FBQztJQUlELG1CQUFtQixDQUFDLE9BQWdCLEVBQUUsV0FBd0I7UUFDN0QsSUFBSSxDQUFDLG1CQUFtQixDQUFDLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQztJQUNwRSxDQUFDO0lBRUQsU0FBUyxDQUFDLE1BQXVCLEVBQUUsV0FBd0I7UUFFMUQsTUFBTSxvQkFBb0IsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUVsRSxJQUFJLENBQUMsbUJBQW1CLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsK0JBQStCLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO0lBQzlFLENBQUM7O0FBWmUsaUNBQVEsR0FBRyxDQUFDLG1CQUFtQixFQUFFLHNDQUFzQyxFQUFFLCtCQUErQixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdHJ1Y3R1cmVJZCB9IGZyb20gJy4uLy4uL2NvcmUvYXBpL2dsb2JhbC9zdHJ1Y3R1cmUuaWQnO1xuaW1wb3J0IHsgU3VtbWFyaWVzUHVibGlzaGVyIH0gZnJvbSAnLi4vYXBpL3N1bW1hcmllcy5wdWJsaXNoZXInO1xuaW1wb3J0IHsgU3VtbWFyaWVzQ29uZmlnIH0gZnJvbSAnLi4vYXBpL2NvbmZpZy9zdW1tYXJpZXMtY29uZmlnJztcbmltcG9ydCB7IFN0cnVjdHVyZVN1bW1hcmllc1BhbmVsQ29uZmlnQ29udmVydGVyIH0gZnJvbSAnLi4vZG9tYWluLXJlYWQvY29uZmlnL3N0cnVjdHVyZS5zdW1tYXJpZXMtcGFuZWwuY29uZmlnLWNvbnZlcnRlcic7XG5pbXBvcnQgeyBTdHJ1Y3R1cmVTdW1tYXJpZXNDb25maWdBcmNoaXZlIH0gZnJvbSAnLi4vZG9tYWluLXJlYWQvY29uZmlnL3N0cnVjdHVyZS5zdW1tYXJpZXMtY29uZmlnLmFyY2hpdmUnO1xuaW1wb3J0IHsgU3VtbWFyaWVzRGlzcGF0Y2hlciB9IGZyb20gJy4vc3VtbWFyaWVzLmRpc3BhdGNoZXInO1xuXG5cbmV4cG9ydCBjbGFzcyBTdW1tYXJpZXNEb21haW5QdWJsaXNoZXIgZXh0ZW5kcyBTdW1tYXJpZXNQdWJsaXNoZXIge1xuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgc3VtbWFyaWVzRGlzcGF0Y2hlcjogU3VtbWFyaWVzRGlzcGF0Y2hlcixcblx0XHRcdFx0cHJpdmF0ZSByZWFkb25seSBjb25maWdDb252ZXJ0ZXI6IFN0cnVjdHVyZVN1bW1hcmllc1BhbmVsQ29uZmlnQ29udmVydGVyLFxuXHRcdFx0XHRwcml2YXRlIHJlYWRvbmx5IHN0cnVjdHVyZVN1bW1hcmllc0NvbmZpZ0FyY2hpdmU6IFN0cnVjdHVyZVN1bW1hcmllc0NvbmZpZ0FyY2hpdmUpIHtcblx0XHRzdXBlcigpO1xuXHR9XG5cblx0c3RhdGljIHJlYWRvbmx5IHNlcnZpY2VzID0gW1N1bW1hcmllc0Rpc3BhdGNoZXIsIFN0cnVjdHVyZVN1bW1hcmllc1BhbmVsQ29uZmlnQ29udmVydGVyLCBTdHJ1Y3R1cmVTdW1tYXJpZXNDb25maWdBcmNoaXZlXTtcblxuXHRzZXRTdW1tYXJpZXNFbmFibGVkKGVuYWJsZWQ6IGJvb2xlYW4sIHN0cnVjdHVyZUlkOiBTdHJ1Y3R1cmVJZCk6IHZvaWQge1xuXHRcdHRoaXMuc3VtbWFyaWVzRGlzcGF0Y2hlci5zZXRTdW1tYXJpZXNFbmFibGVkKGVuYWJsZWQsIHN0cnVjdHVyZUlkKTtcblx0fVxuXG5cdHNldENvbmZpZyhjb25maWc6IFN1bW1hcmllc0NvbmZpZywgc3RydWN0dXJlSWQ6IFN0cnVjdHVyZUlkKTogdm9pZCB7XG5cblx0XHRjb25zdCBzdW1tYXJpZXNQYW5lbENvbmZpZyA9IHRoaXMuY29uZmlnQ29udmVydGVyLmNvbnZlcnQoY29uZmlnKTtcblxuXHRcdHRoaXMuc2V0U3VtbWFyaWVzRW5hYmxlZChjb25maWcuZW5hYmxlZCwgc3RydWN0dXJlSWQpO1xuXHRcdHRoaXMuc3RydWN0dXJlU3VtbWFyaWVzQ29uZmlnQXJjaGl2ZS5uZXh0KHN0cnVjdHVyZUlkLCBzdW1tYXJpZXNQYW5lbENvbmZpZyk7XG5cdH1cblxufVxuIl19