import { SummariesPublisher } from '../api/summaries.publisher';
import { StructureSummariesPanelConfigConverter } from '../core-read/config/structure.summaries-panel.config-converter';
import { StructureSummariesConfigArchive } from '../core-read/config/structure.summaries-config.archive';
import { SummariesDispatcher } from './summaries.dispatcher';
export class SummariesDomainPublisher extends SummariesPublisher {
    summariesDispatcher;
    configConverter;
    structureSummariesConfigArchive;
    constructor(summariesDispatcher, configConverter, structureSummariesConfigArchive) {
        super();
        this.summariesDispatcher = summariesDispatcher;
        this.configConverter = configConverter;
        this.structureSummariesConfigArchive = structureSummariesConfigArchive;
    }
    static services = [SummariesDispatcher, StructureSummariesPanelConfigConverter, StructureSummariesConfigArchive];
    setSummariesEnabled(enabled, structureId) {
        this.summariesDispatcher.setSummariesEnabled(enabled, structureId);
    }
    setConfig(config, structureId) {
        const summariesPanelConfig = this.configConverter.convert(config);
        this.setSummariesEnabled(config.enabled, structureId);
        this.structureSummariesConfigArchive.next(structureId, summariesPanelConfig);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3VtbWFyaWVzLmRvbWFpbi1wdWJsaXNoZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9idWlsZC1jbGkvcHJvamVjdHMvbmd4LWxpc3Qvc3JjL2NvcmUvc3RydWN0dXJlL3N1bW1hcmllcy9zcmMvY29yZS9zdW1tYXJpZXMuZG9tYWluLXB1Ymxpc2hlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUVoRSxPQUFPLEVBQUUsc0NBQXNDLEVBQUUsTUFBTSxnRUFBZ0UsQ0FBQztBQUN4SCxPQUFPLEVBQUUsK0JBQStCLEVBQUUsTUFBTSx3REFBd0QsQ0FBQztBQUN6RyxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUc3RCxNQUFNLE9BQU8sd0JBQXlCLFNBQVEsa0JBQWtCO0lBRWxDO0lBQ1Q7SUFDQTtJQUZwQixZQUE2QixtQkFBd0MsRUFDakQsZUFBdUQsRUFDdkQsK0JBQWdFO1FBQ25GLEtBQUssRUFBRSxDQUFDO1FBSG9CLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBcUI7UUFDakQsb0JBQWUsR0FBZixlQUFlLENBQXdDO1FBQ3ZELG9DQUErQixHQUEvQiwrQkFBK0IsQ0FBaUM7SUFFcEYsQ0FBQztJQUVELE1BQU0sQ0FBVSxRQUFRLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxzQ0FBc0MsRUFBRSwrQkFBK0IsQ0FBQyxDQUFDO0lBRTFILG1CQUFtQixDQUFDLE9BQWdCLEVBQUUsV0FBd0I7UUFDN0QsSUFBSSxDQUFDLG1CQUFtQixDQUFDLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQztJQUNwRSxDQUFDO0lBRUQsU0FBUyxDQUFDLE1BQXVCLEVBQUUsV0FBd0I7UUFFMUQsTUFBTSxvQkFBb0IsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUVsRSxJQUFJLENBQUMsbUJBQW1CLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsK0JBQStCLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO0lBQzlFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdHJ1Y3R1cmVJZCB9IGZyb20gJy4uLy4uLy4uL3N0cnVjdHVyZS1jb3JlL3NyYy9hcGkvZ2xvYmFsL3N0cnVjdHVyZS5pZCc7XG5pbXBvcnQgeyBTdW1tYXJpZXNQdWJsaXNoZXIgfSBmcm9tICcuLi9hcGkvc3VtbWFyaWVzLnB1Ymxpc2hlcic7XG5pbXBvcnQgeyBTdW1tYXJpZXNDb25maWcgfSBmcm9tICcuLi9hcGkvY29uZmlnL3N1bW1hcmllcy1jb25maWcnO1xuaW1wb3J0IHsgU3RydWN0dXJlU3VtbWFyaWVzUGFuZWxDb25maWdDb252ZXJ0ZXIgfSBmcm9tICcuLi9jb3JlLXJlYWQvY29uZmlnL3N0cnVjdHVyZS5zdW1tYXJpZXMtcGFuZWwuY29uZmlnLWNvbnZlcnRlcic7XG5pbXBvcnQgeyBTdHJ1Y3R1cmVTdW1tYXJpZXNDb25maWdBcmNoaXZlIH0gZnJvbSAnLi4vY29yZS1yZWFkL2NvbmZpZy9zdHJ1Y3R1cmUuc3VtbWFyaWVzLWNvbmZpZy5hcmNoaXZlJztcbmltcG9ydCB7IFN1bW1hcmllc0Rpc3BhdGNoZXIgfSBmcm9tICcuL3N1bW1hcmllcy5kaXNwYXRjaGVyJztcblxuXG5leHBvcnQgY2xhc3MgU3VtbWFyaWVzRG9tYWluUHVibGlzaGVyIGV4dGVuZHMgU3VtbWFyaWVzUHVibGlzaGVyIHtcblxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IHN1bW1hcmllc0Rpc3BhdGNoZXI6IFN1bW1hcmllc0Rpc3BhdGNoZXIsXG5cdFx0XHRcdHByaXZhdGUgcmVhZG9ubHkgY29uZmlnQ29udmVydGVyOiBTdHJ1Y3R1cmVTdW1tYXJpZXNQYW5lbENvbmZpZ0NvbnZlcnRlcixcblx0XHRcdFx0cHJpdmF0ZSByZWFkb25seSBzdHJ1Y3R1cmVTdW1tYXJpZXNDb25maWdBcmNoaXZlOiBTdHJ1Y3R1cmVTdW1tYXJpZXNDb25maWdBcmNoaXZlKSB7XG5cdFx0c3VwZXIoKTtcblx0fVxuXG5cdHN0YXRpYyByZWFkb25seSBzZXJ2aWNlcyA9IFtTdW1tYXJpZXNEaXNwYXRjaGVyLCBTdHJ1Y3R1cmVTdW1tYXJpZXNQYW5lbENvbmZpZ0NvbnZlcnRlciwgU3RydWN0dXJlU3VtbWFyaWVzQ29uZmlnQXJjaGl2ZV07XG5cblx0c2V0U3VtbWFyaWVzRW5hYmxlZChlbmFibGVkOiBib29sZWFuLCBzdHJ1Y3R1cmVJZDogU3RydWN0dXJlSWQpOiB2b2lkIHtcblx0XHR0aGlzLnN1bW1hcmllc0Rpc3BhdGNoZXIuc2V0U3VtbWFyaWVzRW5hYmxlZChlbmFibGVkLCBzdHJ1Y3R1cmVJZCk7XG5cdH1cblxuXHRzZXRDb25maWcoY29uZmlnOiBTdW1tYXJpZXNDb25maWcsIHN0cnVjdHVyZUlkOiBTdHJ1Y3R1cmVJZCk6IHZvaWQge1xuXG5cdFx0Y29uc3Qgc3VtbWFyaWVzUGFuZWxDb25maWcgPSB0aGlzLmNvbmZpZ0NvbnZlcnRlci5jb252ZXJ0KGNvbmZpZyk7XG5cblx0XHR0aGlzLnNldFN1bW1hcmllc0VuYWJsZWQoY29uZmlnLmVuYWJsZWQsIHN0cnVjdHVyZUlkKTtcblx0XHR0aGlzLnN0cnVjdHVyZVN1bW1hcmllc0NvbmZpZ0FyY2hpdmUubmV4dChzdHJ1Y3R1cmVJZCwgc3VtbWFyaWVzUGFuZWxDb25maWcpO1xuXHR9XG5cbn1cbiJdfQ==