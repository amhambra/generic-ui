{"version":3,"sources":["../../../../../node_modules/tslib/tslib.es6.js","ng://@generic-ui/ngx-grid/gui/grid/ui-api/grid.api.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/data-type/data-type.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/column/grid.column-type.converter.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/aggregation.type.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/column/aggregation/grid.column-aggregation.converter.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/cell-view.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/column/grid.column-view.converter.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/column/sorting/grid.column-sorting.converter.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/column/cell-editing/grid.column-cell-editing.converter.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/column-align.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/column/align/grid.column-align.converter.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/column/grid.column.converter.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/schema-theme.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/theme/grid.theme.converter.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/schema/row-coloring.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/coloring/grid.row-coloring.converter.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/column/menu/grid.column-menu.converter.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/paging/mode/paging-display-mode.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/paging/grid.paging.converter.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/grid-gateway.ts","ng://@generic-ui/ngx-grid/common/cdk/generic-builder.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/paging/structure-paging-definition.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/structure-definition.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/grid-structure-definition.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/grid.providers.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/structure-parent-component.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/register/grid-id.generator.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/register/grid.register.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/console/grid.console.api.ts","ng://@generic-ui/ngx-grid/gui/grid/ui/grid/grid.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/structure-fabric.imports.ts","ng://@generic-ui/ngx-grid/common/cdk/reactive.ts","ng://@generic-ui/ngx-grid/common/cdk/smart-component.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/read/structure.repository.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/read/paging.repository.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure-id.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/global-structure-id.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/paging/paging-read-model.service.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/set/set-paging.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/change-pagesize/change-pagesize.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/next-page/next-page.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/prev-page/prev-page.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/paging.dispatcher.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/paging/paging-command.service.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/read/origin/structure.source-origin.repository.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/read/prepared/structure.prepared-items.repository.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/source/source-read-model.service.ts","ng://@generic-ui/ngx-grid/common/cdk/archive.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/paging/mode/structure-paging.display-mode.archive.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/paging/structure-paging.component.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/read/paging.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/paging/navigator/structure-paging-navigator.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/paging/select/structure-paging-select.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/paging/stats/structure-paging-stats.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/paging/alternative-paging/navigator/structure-alternative-paging-navigator.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/paging/alternative-paging/pages/structure-alternative-paging-pages.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/paging/structure-paging.module.ts","ng://@generic-ui/ngx-grid/common/cdk/number-formatter/number-formatter.pipe.ts","ng://@generic-ui/ngx-grid/common/cdk/number-formatter/number-formatter.module.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/panel/info/structure-info-modal.component.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/create-structure/structure-created.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/vertical-formation/set-enabled/vertical-scroll-enabled-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/infrastructure/in-memory/structure/in-memory.structure.store.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/formation/read/selected-rows/selected-rows-list.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/formation/read/formation.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/formation/formation.converter.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/read/schema-css-class.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/read/schema.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/read/schema-column-header.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/schema.converter.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/paging.converter.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/read/source.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/source.converter.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/read/vertical-formation/vertical-formation.read-model.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/read/vertical-formation/vertical-formation.converter.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/read/structure.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/item.entity.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/structure.converter.ts","ng://@generic-ui/ngx-grid/lib/structure/infrastructure/in-memory/structure/read/in-memory-structure.read-store.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/vertical-formation/set-row-height/row-height-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/theme/schema-theme-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/read/vertical-formation/vertical-formation.repository.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/structure/structure-read-model.service.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/composition-id.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/column-manager/dialog/structure.dialog-column-manager.component.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/read/schema-repository.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/schema/schema-read-model.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/schema/structure.theme.converter.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/column-manager/dialog/structure.dialog-column-manager.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/panel/info/structure.info-panel.component.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/composition.repository.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/global-composition-id.ts","ng://@generic-ui/ngx-grid/lib/composition/ui-api/composition-read-model.service.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/create-composition/create-composition.command.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/set-columns/set-columns.command.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/width/set-width/set-composition-width.command.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/width/set-container-width/set-composition-container-width.command.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/width/resize-width/set-composition-resize-width.command.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/sort/composition-change-sort-status.command.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/set-enabled/composition.set-column-enabled.command.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/move/left/composition.move-left-column.command.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/move/right/composition.move-right-column.command.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/composition.dispatcher.ts","ng://@generic-ui/ngx-grid/lib/composition/ui-api/composition.command-service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/column-manager/structure.column-manager.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/column-manager/menu/structure.menu-column-manager.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/column-manager/icon/structure.column-manager-icon.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/column-manager/structure.column-manager.module.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/panel/info/icon/structure.info-icon.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/panel/info/structure.info-panel.module.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/view/view-templates.component.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/edit/changed-value.emitter.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/edit/state/edit.event-type.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/edit/edit-communication.component.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/edit/template/input-edit-template.component.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/edit/template/number-edit-template.component.ts","ng://@generic-ui/ngx-grid/common/cdk/decorators.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/edit/template/string-edit-template.component.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/edit/edit-templates.component.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/edit/template/boolean-edit-template.component.ts","ng://@generic-ui/ngx-grid/lib/composition/ui/column-query.component.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/view/function/function-view.component.ts","ng://@generic-ui/ngx-grid/lib/composition/infrastructure/in-memory/in-memory.composition.store.ts","ng://@generic-ui/ngx-grid/lib/composition/infrastructure/in-memory/command/in-memory.composition.aggregate-store.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/composition.aggregate-repository.ts","ng://@generic-ui/ngx-grid/lib/composition/infrastructure/in-memory/command/in-memory.composition.aggregate-repository.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/template/template.factory.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/view/view-template.factory.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/view/view-template.repository.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/edit/edit-template.factory.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/edit/edit-template.repository.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/sort/sort-order.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/view.entity.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/abstract-column.entity.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/column.entity.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/definition/cell-template-with-context.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/definition/cell-context.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/data-type/field.id.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/definition/cell-template-with-accessor.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/definition/column-definition.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/definition/column-definition.factory.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/composition.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/composition.converter.ts","ng://@generic-ui/ngx-grid/lib/composition/infrastructure/in-memory/read/in-memory.composition.read-store.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/create-composition/composition-created.event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/width/resize-width/composition-resize-width-set.event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/set-columns/composition.columns-set.event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/width/set-container-width/composition-container-width-set.event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/width/set-width/composition-width-set.event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/sort/composition-change-sort-status.event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/set-enabled/composition.column-set-enabled.event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/move/left/composition.column-moved-left.event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/move/right/composition.column-moved-right.event.ts","ng://@generic-ui/ngx-grid/lib/composition/infrastructure/in-memory/read/in-memory.composition.repository.ts","ng://@generic-ui/ngx-grid/lib/composition/infrastructure/in-memory/in-memory.composition.providers.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/column.id.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/presentation/column.presentation.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/presentation/data-type/number-column.presentation.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/presentation/data-type/boolean-column.presentation.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/presentation/data-type/date-column.presentation.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/presentation/data-type/string-column.presentation.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/presentation/data-type/unknown-column.presentation.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/presentation/column.presentation.converter.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/column-entity.factory.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/composition.events.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/composition-event.converter.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/field/column-field.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/field/colum-field.factory.ts","ng://@generic-ui/ngx-grid/lib/composition/ui-api/composition.event-service.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/sort/toggle/sort-toggled.event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/field/column-field.id.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/sort/change-sort.params.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/sort/order/sort-order-set.event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/sort/composition-change-sort-status.event-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/init/fields-inited.event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/set-columns/column.params.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/set-columns/composition-fields-inited.event-handler.ts","ng://@generic-ui/ngx-grid/lib/composition/ui-api/composition.providers.ts","ng://@generic-ui/ngx-grid/common/cdk/sanitize/safe.pipe.ts","ng://@generic-ui/ngx-grid/common/cdk/sanitize/sanitize.module.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/width/composition-container-width.calculator.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/width/set-width/composition-width-set.aggregate-event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/width/set-container-width/composition-container-width-set.aggregate-event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/width/resize-width/composition-resize-width-set.aggregate-event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/set-enabled/composition.column-set-enabled.aggregate-event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/column-width/column-width-type.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/column-width/column-width.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/width/composition-width.calculator.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/column-width/column-width-collection.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/sort/composition-change-sort-status.aggregate-event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/active/active-column.container.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/active/active-column.entity.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/active/active-column.entity-converter.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/move/left/composition.column-moved-left.aggregate-event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/move/right/composition.column-moved-right.aggregate-event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/set-columns/columns-set.aggregate-event.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/composition.aggregate.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/composition.aggregate-factory.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/create-composition/create-composition.command-handler.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/set-enabled/composition.set-column-enabled.command-handler.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/set-columns/set-columns.command-handler.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/width/set-width/set-composition-width.command-handler.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/move/left/composition.move-left-column.command-handler.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/move/right/composition.move-right-column.command-handler.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/column/sort/composition-change-sort-status.command-handler.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/width/set-container-width/set-composition-container-width.command-handler.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/command/width/resize-width/set-composition-resize-width.command-handler.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/edit/template/date-edit-template.component.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/view/bar/bar-view.component.ts","ng://@generic-ui/ngx-grid/lib/composition/domain/read/view/percentage/percentage-view.component.ts","ng://@generic-ui/ngx-grid/lib/composition/ui-api/composition.module.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/structure-id.generator.ts","ng://@generic-ui/ngx-grid/common/cdk/logger/logger.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/page/page-changed.aggregate-event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/pagesize/pagesize-changed.aggregate-event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/paging.aggregate.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/paging.aggregate-factory.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/local/paging/local-paging-command.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/local/paging/local-paging-read-model.service.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/set/set-schema.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/grid/vertical/set-schema-vertical-grid.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/grid/horizontal/set-schema-horizontal-grid.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/theme/set-schema-theme.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/coloring/set/set-row-coloring.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/column-header/top/change-schema-top-header.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/column-header/bottom/change-schema-bottom-header.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/schema.dispatcher.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/schema/schema-command.service.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/schema-row-coloring.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/local/schema/local-schema-command.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/local/schema/local-schema-read-model.service.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/formation/command/set/set-formation.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/formation/command/toggle/toggle-selected-row.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/formation/command/formation.dispatcher.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/formation/formation-command.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/local/formation/local-formation-command.service.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/formation/read/formation-repository.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/formation/formation-read-model.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/local/formation/local-formation-read-model.service.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/filter/config/structure.set-config-filter.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/filter/toggle/structure.toggle-filter.command.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/structure/filter/structure.filter.command.service.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/loading/source-set-loading.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/origin/set-origin/set-origin.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/origin/edit/structure.edit-source-item.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/source.dispatcher.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/create-structure/create-structure.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/vertical-formation/set-enabled/set-vertical-scroll-enabled.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/vertical-formation/scroll-position/set-scroll-position.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/sort/set-config/set-sorting.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/sort/toggle/toggle-sort.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/filter/quick/structure.set-config-quick-filter.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/init/init-fields.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/sort/order/set-sort-order.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/vertical-formation/set-row-height/set-row-height.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/search/config/structure.set-config-searching.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/search/set-phrase/structure.set-search-phrase.command.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/read/searching/highlight/structure.search-highlight.archive.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/read/searching/placeholder/structure.search-placeholder.archive.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/search/structure.search.dispatcher.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/structure/structure-command.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/local/structure/local-structure-command.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/local/structure/local-structure-read-model.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/structure/field/structure.field.ui-archive.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/structure/field/structure.field.ui-repository.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/origin/edit/structure.edit-source-item.params.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/source/source-command.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/local/source/local-source-command.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/local/source/local-source-read-model.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/local/composition/local-composition-command.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/local/composition/local-composition-read-model.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/local/search/local-structure-search.dispatcher.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/local/local-providers.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/schema/schema-css-class.manager.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/edit/structure.cell-edit.archive.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/edit/structure.cell-edit.store.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/edit/structure.edit-mode.archive.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/panel/info/structure.info-panel-enabled.archive.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/panel/aggregation/structure.aggregation-panel.config.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/panel/aggregation/structure.aggregation.archive.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/panel/aggregation/structure.aggregation-panel.config-converter.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/set/structure.set-aggregation-enabled.command.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/structure/aggregation/structure.aggregation.command-service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/panel/aggregation/structure.aggregation-config.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/structure-component-token.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/edit/structure.cell-edit.state.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/gateway/structure.gateway.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/next-page/next-page.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/prev-page/prev-page.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/page/page-changed.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/change-pagesize/pagesize-changed.event.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/paging/paging-event.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/source/event/editem-item.values.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/origin/edit/structure.source-item-edited.event.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/source/event/source-event.service.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/formation/command/toggle/selected-row-toggled.event.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/formation/formation-event.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/header/menu/config/structure.column-menu-config.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/header/menu/config/structure.column-menu-config.archive.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/content/row/structure.row-select-enabled.archive.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/search/set-phrase/structure.search-phrase-set.domain-event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/read/searching/phrase/structure.search-phrase.repository.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/structure/search/structure-search-event.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/edit/structure.cell-edit-close-all.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/structure.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/header/menu/structure.column-config.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/header/menu/structure.column-config.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/header/columns/structure-header-columns.component.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/read/filter/structure.filter.repository.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/read/filter/structure.quick-filter.repository.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/structure/filter/structure.filter.read-model.repository.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/header/filters/structure-header-filters.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/header/structure-header.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/header/filters/structure.header-filter.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/content/structure-content.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/content/row/structure-row.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/content/cell/structure.cell.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/content/structure-container.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/header/quick-filters/structure.quick-filters.component.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/read/searching/enabled/structure.searching.repository.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/structure/search/structure-search.read-model.repository.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/structure/structure-tokens.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/blueprint/structure.blueprint.component.ts","ng://@generic-ui/ngx-grid/lib/structure/infrastructure/in-memory/structure/commad/in-memory.structure.aggregate-store.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/structure-aggregate.repository.ts","ng://@generic-ui/ngx-grid/lib/structure/infrastructure/in-memory/structure/commad/in-memory.structure-aggregate.repository.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/loading/set-source-loading.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/set/schema-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/grid/horizontal/schema-horizontal-grid-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/grid/vertical/schema-vertical-grid-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/column-header/top/schema-top-header-changed.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/column-header/bottom/schema-bottom-header-changed.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/coloring/set/row-coloring-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/set/paging-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/formation/command/set/formation-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/vertical-formation/scroll-position/scroll-position-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/origin/set-origin/origin-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/filter/toggle/structure.filter-toggled.event.ts","ng://@generic-ui/ngx-grid/lib/structure/infrastructure/in-memory/structure/read/in-memory.structure.repository.ts","ng://@generic-ui/ngx-grid/lib/structure/infrastructure/in-memory/structure/in-memory.structure.providers.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/vertical-formation/set-enabled/set-vertical-scroll-enabled.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/vertical-formation/scroll-position/set-scroll-position.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/init/init-fields.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/sort/toggle/toggle-sort.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/sort/set-config/sorting-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/sort/set-config/set-sorting.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/filter/config/structure.config-filter-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/filter/config/structure.set-config-filter.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/search/config/structure.config-searching-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/search/config/structure.set-config-searching.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/filter/quick/structure.config-quick-filter-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/filter/quick/structure.set-config-quick-filter.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/filter/toggle/structure.toggle-filter.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/structure.aggregations-changed.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/prepared/structure.prepared-entities-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/structure.source.domain-event.publisher.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/set/structure.aggregation-enabled-set.event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/set/structure.set-aggregation-enabled.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/vertical-formation/vertical-range.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/vertical-formation/vertical-formation.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/vertical-formation/vertical-formation.factory.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/field-id.generator.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/data-type/base.field.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/data-type/field.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/data-type/fields/unknown-field.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/data-type/fields/number-field.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/data-type/fields/string-field.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/data-type/fields/boolean-field.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/data-type/fields/date-field.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/matcher/field.matchers.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/data-type/field.factory.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/data-type/type.field.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/field.collection.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/field-collection.factory.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/filter/structure.filter.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/filter/filter.id.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/filter/filter.settings.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/filter/filter.manager.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/filter/filter.manager-factory.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/calculation/aggregation.calculators.token.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/calculation/aggregation.calculator.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/calculation/aggregated.values.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/calculation/boolean/boolean-aggregated.values.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/calculation/boolean/boolean-aggregation.calculator.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/calculation/date/date-aggregated.values.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/calculation/date/date-aggregation.calculator.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/calculation/number/number-aggregated.values.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/calculation/number/number-aggregation.calculator.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/calculation/string/string-aggregated.values.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/calculation/string/string-aggregation.calculator.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/calculation/unknown/unknown-aggregated.values.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/calculation/unknown/unknown-aggregation.calculator.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/structure.aggregations-changed.aggregate-event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/aggregation.manager.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/aggregation.manager.factory.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/aggregation/aggregation.providers.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/read/filter/structure.config-filter-set.event-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/read/searching/enabled/structure.config-searching-set.event-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/read/filter/structure.config-quick-filter-set.event-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/structure/field/structure.field.ui-model.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/structure/field/structure.field.ui-converter.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/structure/field/structure.fields-inited.event-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/structure/aggregation/structure.aggregation.ui-events-repository.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/origin/origin-item-entity.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/origin/edit/structure.source-item-edited.aggregate-event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/origin/structure.origin-changed.aggregate-event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/source.manager.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/source.manager-factory.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/sort/structure.sorter.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/sort/sorter.id.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/sort/sorter.collection.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/formation/command/formation-aggregate.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/column-header/column-header.entity.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/schema-aggregate.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/search/search.manager.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/prepared/structure.prepared-entities-set.aggregate-event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/field/init/fields-inited.aggregate-event.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/structure.aggregate.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/schema.aggregate-factory.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/formation/command/formation.aggregate-factory.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/search/search.manager-factory.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/structure.aggregate-factory.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/set/set-paging.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/next-page/next-page.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/prev-page/prev-page.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/paging/command/change-pagesize/change-pagesize.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/paging/paging.providers.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/grid/vertical/set-schema-vertical-grid.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/grid/horizontal/set-schema-horizontal-grid.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/theme/set-schema-theme.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/column-header/bottom/change-schema-bottom-header.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/column-header/top/change-schema-top-header.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/coloring/set/set-row-coloring.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/schema/command/set/set-schema.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/schema/schema.providers.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/formation/command/set/set-formation.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/formation/command/toggle/toggle-selected-row.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/formation/formation.providers.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/origin/set-origin/set-origin.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/origin/edit/structure.edit-source-item.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/read/origin/structure.origin-changed.event-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/read/source.repository.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/command/loading/source-set-loading.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/read/prepared/structure.prepared-items.event-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/source/source.providers.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/search/set-phrase/structure.set-search-phrase.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/sort/order/set-sort-order.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/vertical-formation/set-row-height/set-row-height.command-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/read/searching/phrase/structure.search-phrase-set.event-handler.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/structure/structure.providers.ts","ng://@generic-ui/ngx-grid/common/cdk/logger/console.logger.ts","ng://@generic-ui/ngx-grid/common/cdk/logger/logger.module.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/source/item.entity-factory.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/panel/top/structure.top-panel.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/panel/top/search/structure.search.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/panel/top/structure.top-panel.module.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/content/empty-source/structure-empty-source.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/header/menu/structure.column-config-trigger.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/header/menu/main/sort/structure.column-config-sort.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/header/menu/main/hide/structure.column-config-column-hide.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/header/menu/main/move/structure.column-config-column-move.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/header/menu/icon/structure.column-menu-icon.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/header/menu/structure.column-menu.module.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/panel/aggregation/structure.aggregation-panel.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/panel/aggregation/structure.aggregation-panel.module.ts","ng://@generic-ui/ngx-grid/lib/structure/domain/structure/command/create-structure/create-structure-command-handler.service.ts","ng://@generic-ui/ngx-grid/lib/structure/ui/content/cell/edit/structure.cell-edit.component.ts","ng://@generic-ui/ngx-grid/lib/structure/ui-api/structure.module.ts","ng://@generic-ui/ngx-grid/gui/grid/ui-api/grid.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__metadata","metadataKey","metadataValue","metadata","__values","o","m","Symbol","iterator","next","value","done","__read","e","ar","push","error","__spread","concat","UNKNOWN","NUMBER","STRING","BOOLEAN","DATE","CUSTOM","TEXT","CHIP","LINK","IMAGE","BOLD","ITALIC","CHECKBOX","BAR","PERCENTAGE_BAR","PERCENTAGE","FABRIC","MATERIAL","LIGHT","DARK","GENERIC","NONE","EVEN","ODD","ASC","DESC","BASIC","ADVANCED","RIGHT","CENTER","LEFT","GridColumnTypeConverter","convertType","type","convertTypeString","convertTypeEnum","enumType","GuiDataType","DataType","toLocaleLowerCase","COUNT","DISTINCT","SUM","AVERAGE","MIN","MAX","MEDIAN","TRUTHY","FALSY","EARLIEST","LATEST","GridColumnAggregationConverter","convert","aggregationConfig","columnAggregationConfig","undefined","enabled","aggregationTypes","convertAggregationTypes","configAggregationTypes","_this","forEach","aggregationType","convertAggregationType","AggregationType","FUNCTION","GridColumnViewConverter","view","convertString","convertEnum","CellView","GuiCellView","GridColumnSortingConverter","sortingConfig","GridColumnCellEditingConverter","config","GridColumnAlignConverter","align","GuiColumnAlign","ColumnAlign","GridColumnConverter","columnTypeConverter","columnAggregationConverter","columnViewConverter","columnSortingConverter","columnCellEditingConverter","columnAlignConverter","map","convertColumn","guiColumn","columnConfig","header","field","width","aggregation","sorting","cellEditing","matcher","GridThemeConverter","theme","SchemaTheme","GuiTheme","GridRowColoringConverter","rowColoring","RowColoring","GuiRowColoring","GridColumnMenuConverter","Injectable","GridPagingConverter","guiPaging","pagingConfig","page","pageSize","pageSizes","pagerTop","pagerBottom","display","displayMode","convertDisplay","pagingDisplay","PagingDisplayMode","GuiPagingDisplay","GridGateway","source","columns","pageChanged","EventEmitter","pageSizeChanged","itemsSelected","columnsChanged","containerWidthChanged","sourceEdited","cellEditEntered","cellEditCanceled","cellEditSubmitted","searchPhraseChanged","gridColumnConverter","gridThemeConverter","gridRowColoringConverter","gridColumnMenuConverter","gridPagingConverter","ngOnChanges","changes","currentValue","columnsConfig","themeConfig","rowColoringConfig","columnMenu","columnMenuConfig","paging","onPageChange","emit","onPageSizeChange","onItemSelect","item","onColumnsChange","onContainerWidthChange","containerWidth","onSourceEdit","onCellEditEnter","onCellEditSubmit","onCellEditCancel","onSearchPhrase","Input","Output","GenericBuilder","build","buildObject","StructurePagingDefinitionBuilder","_super","tslib_1.__extends","StructurePagingDefinition","withEnabled","StructurePagingDefinitionDefaultBuilder","defaultEnabled","isEnabled","Builder","DefaultBuilder","StructureDefinitionBuilder","headerEnabled","bottomPaging","topPaging","border","StructureDefinition","withHeader","withBottomPaging","withTopPaging","withBorder","StructureDefinitionDefaultBuilder","defaultHeaderEnabled","defaultBottomPaging","defaultTopPaging","isHeaderEnabled","isBorderEnabled","getBottomPaging","getTopPaging","gridStructureDefinition","gridProviders","provide","useValue","structureParentComponent","InjectionToken","GridIdGenerator","generateId","index","PREFIX","GridRegister","gridMap","Map","register","gridId","component","structureId","set","unregister","delete","getValues","get","GridConsoleApiProvider","gridComponent","changeColumnHeaderTop","columnHeaderTop","detectChanges","GridComponent","platformId","elementRef","changeDetectorRef","gridRegister","gridIdGenerator","ngOnInit","localGridId","exposeGridId","structureRef","getStructureId","isPlatformBrowser","window","gridConsoleConfig","ngOnDestroy","getElementRef","getGridId","nativeElement","setAttribute","Component","args","selector","template","providers","useExisting","host","[class]","[style.height]","encapsulation","ViewEncapsulation","None","Inject","PLATFORM_ID","ElementRef","ChangeDetectorRef","ViewChild","static","fabricImports","FabricBadgeModule","FabricButtonModule","FabricButtonGroupModule","FabricCheckboxModule","FabricChipModule","FabricDropdownModule","FabricRadioButtonModule","FabricRadioGroupModule","FabricProgressBarModule","FabricProgressSpinnerModule","FabricSelectModule","FabricSpinnerModule","FabricTabModule","FabricToggleButtonModule","FabricInputModule","FabricDialogModule","FabricInlineDialogModule","Reactive","unsubscribe$","Subject","unsubscribe","isStopped","complete","takeUntil","SmartComponent","StructureRepository","domainEventBus","ofEvent","forEvents","pipe","subscribe","event","subs","console","PagingRepository","structureRepository","on","onStructure","filter","structure","getId","toString","getPaging","StructureId","id","AggregateId","globalStructureId","PagingReadModelService","pagingRepository","onPaging","onSinglePaging","take","SetPagingCommand","getPagingConfig","Command","ChangePagesizeCommand","getPageSize","NextPageCommand","PrevPageCommand","PagingDispatcher","commandDispatcher","setPaging","dispatch","changePageSize","nextPage","prevPage","CommandDispatcher","PagingCommandService","pagingDispatcher","enable","disable","goToPage","pageNumber","currentPage","changePagerTop","changePagerBottom","StructureSourceOriginRepository","origin","origin$","ReplaySubject","setOrigin","onOrigin","asObservable","distinctUntilChanged","StructurePreparedItemsRepository","setItems","onPreparedItems","SourceReadModelService","structurePreparedItemsRepository","structureSourceOriginRepository","onEntities","getEntities","ents1","ents2","flag","ent","equals","onEntitiesSize","entities","onSingleEntities","onOriginSize","onLoading","getSource","isLoading","onPreparedEntities","Archive","archive$","BehaviorSubject","onValue","StructurePagingDisplayModeArchive","StructurePagingComponent","pagingQueryService","pagingCommandService","sourceQueryService","structurePagingDisplayModeArchive","alternativeDisplay","mode","size","sourceSize","changeDetection","ChangeDetectionStrategy","OnPush","Paging","isNextDisabled","isPrevDisabled","start","end","getPage","getPageSizes","isPagerTop","isPagerBottom","isNextPageDisabled","isPrevPageDisabled","getStart","getEnd","getSourceSize","calculateVisiblePages","numberOfVisiblePages","sample","slice","StructurePagingNavigatorComponent","nextPageChanged","prevPageChanged","prevDisabled","nextDisabled","calculatePrev","calculateNext","StructurePagingSelectComponent","StructurePagingStatsComponent","calculate","firstItemIndex","lastItemIndex","isSourceNotEmpty","StructureAlternativePagingNavigatorComponent","firstPage","lastPage","numberOfPages","Math","ceil","StructureAlternativePagingPagesComponent","pages","activePage","StructurePagingModule","NgModule","imports","CommonModule","FabricModule","declarations","exports","NumberFormatterPipe","transform","number","replace","Pipe","name","NumberFormatterModule","StructureInfoModalComponent","StructureCreatedEvent","aggregateId","DomainEvent","VerticalScrollEnabledSetEvent","InMemoryStructureStore","InMemoryStore","SelectedRowsList","rowIds","isRowSelected","entity","find","equalsById","getIds","Formation","selectedRows","selectedRowsList","getSelectedRows","FormationConverter","aggregate","rows","SchemaCssClass","verticalGrid","horizontalGrid","getRowColoring","Schema","height","containerHeight","verticalGridEnabled","horizontalGridEnabled","columnHeader","getTheme","getHeight","getContainerHeight","getWidth","isVerticalGridEnabled","isHorizontalGridEnabled","getColumnHeader","getCssClasses","SchemaColumnHeader","top","bottom","isTopHeaderEnabled","isBottomHeaderEnabled","SchemaConverter","convertColumnHeader","isHeaderOnTop","isHeaderOnBottom","PagingConverter","calculateStart","calculateEnd","Source","loading","SourceConverter","VerticalFormationReadModel","topMargin","viewportHeight","rowHeight","getTopMargin","getViewPortHeight","getRowHeight","VerticalFormationConverter","verticalFormation","calcFullHeight","Structure","uid","formation","schema","getFormation","getSchema","getVerticalFormation","getSelectedEntities","selectedIds","some","isLoaderVisible","isReadyToDisplay","isVerticalScrollEnabled","ReadModel","ItemEntity","data","position","version","RandomStringGenerator","generate","getData","getUiId","getVersion","getPosition","isEven","isOdd","Entity","StructureConverter","formationConverter","schemaConverter","pagingConverter","sourceConverter","verticalFormationConverter","formationAggregate","schemaAggregate","pagingAggregate","sourceQuery","sourceCoordinator","convertSource","originItem","rawData","InMemoryStructureReadStore","inMemoryProjectStore","structureConverter","toReadModel","InMemoryReadModelStore","RowHeightSetEvent","SchemaThemeSetEvent","VerticalFormationRepository","inMemoryStructureQueryStore","verticalFormation$","getAggregateId","getById","ifPresent","onVerticalScrollEnabled","onVerticalFormation","v","onRowHeight","idToVerticalFormation","has","DomainEventBus","StructureReadModelService","verticalFormationRepository","CompositionId","StructureDialogColumnManagerComponent","[class.gui-structure-dialog-column-manager]","SchemaRepository","SchemaReadModelService","schemaRepository","onSchema","onSingleSchema","onHeight","onContainerHeight","onCssClasses","onSingleTheme","onColumnHeader","StructureThemeConverter","convertTheme","schemaTheme","Theme","StructureDialogColumnManagerService","injector","schemaReadModelService","structureThemeConverter","fabricDialogService","open","compositionId","Injector","parent","FabricDialogService","StructureInfoPanelComponent","renderer","dialog","menuColumnManagerService","structureReadModelService","infoPanel","totalItemsSize","preparedItems","preparedItemsSize","openInfo","openColumnManager","Renderer2","CompositionRepository","ReadModelRepository","globalCompositionId","CompositionReadModelService","compositionRepository","onWidth","composition","onContainerWidth","getContainerWidth","onWidthForEachColumn","getAllColumns","onHeaderColumns","getActiveHeaderColumns","onAllColumns","getHeaderColumns","onSortOrder","fieldId","getFieldId","getSortStatus","onTemplateColumns","getTemplateColumns","onResizeWidth","isResizeWidthEnabled","CreateCompositionCommand","SetColumnsCommand","getParams","SetCompositionWidthCommand","SetCompositionContainerWidthCommand","SetCompositionResizeWidthCommand","getEnabled","CompositionChangeSortStatusCommand","sortParams","getCompositionId","getSortParams","CompositionSetColumnEnabledCommand","columnId","getColumnId","CompositionMoveLeftColumnCommand","CompositionMoveRightColumnCommand","CompositionDispatcher","createComposition","setColumns","params","setWidth","setContainerWidth","setResizeWidth","changeSort","setColumnEnabled","moveLeft","moveRight","CompositionCommandService","compositionDispatcher","enableColumn","disableColumn","StructureColumnManagerComponent","compositionCommandService","compositionReadModelService","enabledColumnsCount","reduce","accumulator","toggleColumn","column","stopPropagation","[class.gui-structure-column-manager]","StructureMenuColumnManagerComponent","[class.gui-structure-menu-column-manager]","StructureColumnManagerIconComponent","[class.gui-icon]","StructureColumnManagerModule","entryComponents","StructureInfoIconComponent","StructureInfoPanelModule","ViewTemplatesComponent","getTemplate","textTemplate","numberTemplate","chipTemplate","linkTemplate","imageTemplate","checkboxTemplate","boldTemplate","italicTemplate","customTemplate","functionTemplate","dateTemplate","barTemplate","percentageBarTemplate","percentageTemplate","read","TemplateRef","ChangedValueEmitter","subject$","SUBMIT","BLUR","CANCEL","EditCommunicationComponent","ENTER_KEY_CODE","ESC_KEY_CODE","submit","emitStatus","EditEventType","cancel","status","InputEditTemplateComponent","formBuilder","filterFieldName","filterForm","group","_a","setValue","observeChanges","ngAfterViewInit","inputElement","inputRef","focusField","emitValueChange","fromEvent","keyup$","keyCode","focus","controls","valueChanges","NumberEditTemplateComponent","fb","FormBuilder","Override","container","getPrototypeOf","Error","StringEditTemplateComponent","setSelectionRange","tslib_1.__decorate","EditTemplatesComponent","dataType","stringTemplate","booleanTemplate","emptyTemplate","BooleanEditTemplateComponent","toggle","changed","ColumnQueryComponent","ContentChild","FunctionViewComponent","sanitizer","safeHTML","bypassSecurityTrustHtml","element","DomSanitizer","InMemoryCompositionStore","InMemoryCompositionAggregateStore","inMemoryCompositionStore","aggregateStoreRegister","AggregateStoreRegister","InMemoryAggregateStore","CompositionAggregateRepository","AggregateRepository","InMemoryCompositionAggregateRepository","inMemoryCompositionAggregateStore","save","TemplateFactory","templatesComponentDefinition","componentFactoryResolver","templates","templatesComponent","createTemplatesComponent","getTemplates","destroy","componentFactory","resolveComponentFactory","generateMap","generateMapKeys","findAndSetTemplate","dt","instance","ViewTemplateFactory","keys","ComponentFactoryResolver","ViewTemplateRepository","columnTemplateFactory","findTemplate","EditTemplateFactory","EditTemplateRepository","editTemplateFactory","ViewEntity","columnView","templateFunction","fromDataType","getCellView","getTemplateFunction","AbstractColumnEntity","columnField","presentation","getDataType","setInitialAlign","getPresentation","getColumnConfig","getField","getHeader","setView","setHeader","getView","getAlign","getSortingEnabled","isCellEditingEnabled","ColumnEntity","sortStatus","SortOrder","getDefaultAlign","getDefaultView","setEnabled","setSortStatus","CellTemplateWithContext","viewTemplate","editTemplate","context","sortable","isSortEnabled","isAscSort","isDescSort","isNoSort","isAlignLeft","isAlignCenter","isAlignRight","CellContext","FieldId","CellTemplateWithAccessor","editable","templateFun","accessor","searchAccessor","columnFieldId","cellEditingEnabled","isBooleanDataType","getValue","searchPhrase","findValue","txt","lowerCasedText","loweredSearchPhrase","positions","found","indexOf","arr_1","split","pos","ph","join","ColumnDefinition","sort","setField","getHeaderCellTemplateWithContext","headerCellContext","headerTemplate","getContentCellTemplateWithAccessor","cellTemplate","getAccessor","getSearchAccessor","ColumnDefinitionFactory","viewTemplateRepository","editTemplateRepository","createFromColumnEntity","createFromActiveColumnEntity","columnDef","findViewTemplate","findEditTemplate","activeColumn","createColumns","Composition","ready","allColumns","activeColumns","resizeWidth","getActiveColumns","isReady","equalsByColumns","CompositionConverter","columnDefinitionFactory","getColumns","allColumnDefs","convertToColumnDef","activeColumnDefs","convertActiveColumnsToColumnDef","isResizeEnabled","columnDefs","InMemoryCompositionReadStore","compositionConverter","CompositionCreatedEvent","CompositionResizeWidthSetEvent","CompositionColumnsSetEvent","CompositionContainerWidthSetEvent","payload","CompositionWidthSetEvent","CompositionChangeSortStatusEvent","CompositionColumnSetEnabledEvent","CompositionColumnMovedLeftEvent","CompositionColumnMovedRightEvent","InMemoryCompositionRepository","inMemoryCompositionQueryStore","compositionIdToComposition","composition$","inMemoryCompositionCommandProviders","useClass","inMemoryCompositionQueryProviders","inMemoryCompositionProviders","ColumnId","NumberColumnPresentation","getInstance","NumberColumnPresentation_1","getPossibleViews","ValueObject","ColumnPresentation","BooleanColumnPresentation","BooleanColumnPresentation_1","DateColumnPresentation","DateColumnPresentation_1","StringColumnPresentation","StringColumnPresentation_1","UnknownColumnPresentation","UnknownColumnPresentation_1","ColumnPresentationConverter","ColumnEntityFactory","columnPresentationConverter","isArray","createColumn","getColumn","convertWidth","columnEntity","columnEntities","CompositionAggregateEvents","CompositionEventConverter","arg","convertEvents","convertEvent","aggregateEvents","aggregateEvent","getType","ColumnField","ColumnFieldFactory","CompositionEventService","onColumnsChanged","onContainerWidthChanged","getPayload","SortToggledEvent","directions","getDirections","ColumnFieldId","ChangeSortParams","direction","SortOrderSetEvent","CompositionChangeSortStatusEventHandler","handle","dir","DomainEventHandler","FieldsInitedEvent","fields","getFields","ColumnParams","CompositionFieldsInitedEventHandler","columnFieldFactory","columnFieldIds","convertColumnFieldIds","convertColumns","getAccessorMethod","getSearchAccessorMethod","commandProviders","readProviders","DOMAIN_EVENT_HANDLERS","multi","compositionProviders","SafePipe","bypassSecurityTrustStyle","bypassSecurityTrustScript","bypassSecurityTrustUrl","bypassSecurityTrustResourceUrl","SanitizeModule","CompositionContainerWidthCalculator","MIN_COLUMN_WIDTH","calculateMinWidth","columnWidths","segregateColumns","staticColumns","fluidColumns","sum","columnWidth","isTypeNumber","isTypeAuto","isTypePercentage","CompositionWidthSetAggregateEvent","AggregateEvent","CompositionContainerWidthSetAggregateEvent","CompositionResizeWidthSetAggregateEvent","CompositionColumnSetEnabledAggregateEvent","AUTO","ColumnWidth","baseWidth","setWidthAndType","getColumnType","ColumnWidthType","isPercentage","percentageToNumber","isStringNumber","clone","widthAsNumber","Number","isNaN","CompositionWidthCalculator","adjustMinimalWidth","newColumns","evenWidth_1","adjustPercentageWidth","_b","tslib_1.__values","_c","adjustAutoWidth","leftWidth","autoColumns","splitWidth","autoColumns_1","autoColumns_1_1","ColumnWidthCollection","baseColumnWidths","getColumnWidths","getColumnsWidth","getWidths","getMinWidth","columnConfigs","getMinColumnWidth","calculator","CompositionChangeSortStatusAggregateEvent","ActiveColumnContainer","gridWidth","columnWidthCollection","addColumn","splice","removeColumn","updatedWidths","param","this_1","sortParams_1","sortParams_1_1","findColumnIndex","move","fromIndex","toIndex","validateMoveIndex","findIndex","ActiveColumnEntity","fromEntity","ActiveColumnEntityConverter","convertMany","CompositionColumnMovedLeftAggregateEvent","CompositionColumnMovedRightAggregateEvent","ColumnsSetAggregateEvent","CompositionAggregate","columnFactory","columnsParams","resizeWidthEnabled","activeColumnEntityConverter","baseParams","baseColumns","getEnabledColumns","activeColumnContainer","containerInDOMWidth","addEvent","setContainerWidthWithEvent","recalculateColumns","setWidthWithEvent","setResizeWidthWithEvent","enabledIndex","prevState","columnToAdd","nextLeft","columnIndex","nextLeftIndex","leftColumn","nextRight","nextRightIndex","rightColumn","minWidth","RootAggregate","Boolean","Aggregate","CompositionAggregateFactory","CreateCompositionCommandHandler","compositionAggregateRepository","domainEventPublisher","getAggregateRepository","forCommand","publishDomainEvents","command","publish","DomainEventPublisher","CompositionSetColumnEnabledCommandHandler","compositionEventConverter","publishEvents","handleAggregate","events","getEvents","domainEvents","SetColumnsCommandHandler","setColumnsParams","SetCompositionWidthCommandHandler","CompositionMoveLeftColumnCommandHandler","CompositionMoveRightColumnCommandHandler","CompositionChangeSortStatusCommandHandler","SetCompositionContainerWidthCommandHandler","publishAggregateEvents","SetCompositionResizeWidthCommandHandler","DateEditTemplateComponent","opened","datePickerRef","querySelector","dialogOpened","BarViewComponent","showPercentage","[class.gui-bar-view]","PercentageViewComponent","[class.gui-percentage-view]","components","exportDeclarations","compositionKey","CompositionModule","ReactiveFormsModule","FabricDatePickerModule","HermesModule","defineAggregate","registerCommandHandler","FabricChipComponent","FabricCheckboxComponent","FabricButtonComponent","FabricInputComponent","StructureIdGenerator","increment","PageChangedAggregateEvent","PagesizeChangedAggregateEvent","PagingAggregate","logger","default","fromConfig","defaultPagingDefinition","isDisabled","change","warn","setSourceSize","ps","setPage","setPageSize","firstItem","lastItem","PagingAggregateFactory","createDefault","createFromConfig","Logger","LocalPagingCommandService","aggregateFactory","setDefaultPaging","defaultPaggingAggregate","LocalPagingReadModelService","Observable","SetSchemaCommand","SetSchemaVerticalGridCommand","SetSchemaHorizontalGridCommand","SetSchemaThemeCommand","SetRowColoringCommand","coloring","getColoring","ChangeSchemaTopHeaderCommand","ChangeSchemaBottomHeaderCommand","SchemaDispatcher","setSchema","changeVerticalGrid","changeHorizontalGrid","setTheme","setRowColoring","changeTopHeader","changeBottomHeader","SchemaCommandService","schemaDispatcher","schemaQueryService","setHeight","toggleVerticalGrid","css","grid","toggleHorizontalGrid","toggleTopHeader","toggleBottomHeader","LocalSchemaCommandService","setDefaultSchema","MAX_SAFE_INTEGER","LocalSchemaReadModelService","SetFormationCommand","ToggleSelectedRowCommand","selectedRow","getSelectedRow","FormationDispatcher","setDefault","toggleSelectedRow","FormationCommandService","formationDispatcher","setDefaultFormation","LocalFormationCommandService","FormationRepository","onFormation","FormationReadModelService","formationRepository","onSelectedRows","LocalFormationReadModelService","StructureSetConfigFilterCommand","filterConfig","getConfig","StructureToggleFilterCommand","externalFilterId","filterValue","getExternalFilterId","getFilterValue","StructureFilterCommandService","setFilteringEnabled","addFilter","externalFieldId","SourceSetLoadingCommand","SetOriginCommand","items","getItems","StructureEditSourceItemCommand","SourceDispatcher","setLoading","editItem","CreateStructureCommand","SetVerticalScrollEnabledCommand","SetScrollPositionCommand","SetSortingCommand","getSortingConfig","ToggleSortCommand","StructureSetConfigQuickFilterCommand","quickFiltersConfig","InitFieldsCommand","SetSortOrderCommand","sortOrder","getSortOrder","SetRowHeightCommand","StructureSetConfigSearchingCommand","searchConfig","StructureSetSearchPhraseCommand","phrase","getPhrase","StructureSearchHighlightArchive","idToHighlight","idToHighlight$","HIGHLIGHTING","StructureSearchPlaceholderArchive","idToPlaceholder","idToPlaceholder$","PLACEHOLDER","StructureSearchDispatcher","structureSearchHighlightArchive","structureSearchPlaceholderArchive","setSearchingConfig","highlighting","placeholder","search","StructureCommandService","structureFilterCommandService","sourceDispatcher","structureSearchDispatcher","createStructure","enableVerticalScroll","disableVerticalScroll","setScrollPosition","setSortingConfig","toggleSort","setSortOrder","setFilterConfig","setQuickFiltersConfig","initFields","setRowHeight","LocalStructureCommandService","LocalStructureReadModelService","StructureFieldUiArchive","AggregateArchive","StructureFieldUiRepository","structureFieldUiArchive","onFields","when","StructureEditSourceItemParams","itemId","getItemId","getColumnFieldId","SourceCommandService","structureFieldUiRepository","editItemByIndex","itemIndex","fieldIndex","itemId$","fieldId$","zip","array","LocalSourceCommandService","LocalSourceReadModelService","LocalCompositionCommandService","LocalCompositionReadModelService","LocalStructureSearchDispatcher","localProviders","SchemaCssClassManager","rendererFactory2","VERTICAL_GRID_CLASS_NAME","HORIZONTAL_GRID_CLASS_NAME","THEME_FABRIC_CLASS_NAME","THEME_MATERIAL_CLASS_NAME","THEME_LIGHT_CLASS_NAME","THEME_DARK_CLASS_NAME","THEME_GENERIC_CLASS_NAME","ROW_COLORING_ODD","ROW_COLORING_EVEN","cssClass","createRenderer","init","cssHostRef","classes","diff","updateState","renderCssClasses","diff_1","toggleCssClass","removeThemeCssClasses","addClass","resolveThemeClassName","removeRowColoringClasses","resolveRowColoringClassName","cssClassName","removeClass","className","SchemaRowColoring","RendererFactory2","StructureCellEditArchive","StructureCellEditStore","StructureEditModeArchive","StructureInfoPanelEnabledArchive","StructureAggregationPanelConfig","itTopEnabled","itBottomEnabled","StructureAggregationArchive","StructureAggregationPanelConfigConverter","StructureSetAggregationEnabledCommand","StructureAggregationCommandService","setAggregationEnabled","StructureAggregationConfigService","structureAggregationPanelConfigConverter","structureAggregationArchive","structureAggregationCommandService","aggregationPanelConfig","structureComponentToken","ENTER","StructureGateway","structureCommandService","pagingEventService","sourceCommandService","sourceEventService","schemaCommandService","compositionEventService","formationEventService","structureEditModeArchive","structureCellEditArchive","structureInfoPanelEnabledArchive","structureAggregationConfigService","structureCellEditStore","structureColumnMenuConfigArchive","structureRowSelectEnabledArchive","structureSearchEventService","simpleChanges","nextConfig","rowSelecting","editMode","autoResizeWidth","columnHeaderBottom","maxHeight","virtualScroll","filtering","quickFilters","searching","onItemSelected","skip","onSourceEdited","values","state","StructureCellEditState","NextPageEvent","PrevPageEvent","PageChangedEvent","PagesizeChangedEvent","PagingEventService","switchMap","EditemItemValues","after","before","StructureSourceItemEditedEvent","beforeItem","afterItem","getBeforeItem","getAfterItem","SourceEventService","SelectedRowToggledEvent","FormationEventService","structureQueryService","str","StructureColumnMenuConfig","columnsManager","isMainEnabled","isSortingEnabled","isFilteringEnabled","isColumnManagerEnabled","getMenus","menus","getMainMenu","getFilterMenu","getColumnMenu","getActiveMenu","MAIN","FILTER","COLUMNS","StructureColumnMenuConfigArchive","menuConfig","StructureRowSelectEnabledArchive","DEFAULT_ROW_SELECT","StructureSearchPhraseSetDomainEvent","StructureSearchPhraseRepository","phrase$","setPhrase","onPhrase","observePhrases","StructureSearchEventService","structureSearchPhraseRepository","StructureCellEditCloseAllService","closeAll$","closeAll","onCloseAll","structureIdFactory","generator","compositionIdFactory","structureComponentSelfProviders","useFactory","deps","StructureComponent","structureDefinition","compositionQueryService","schemaStylesManager","loaderEnabled","circleLoaderEnabled","initialLoaderAnimation","structureHeight","offsetWidth","timer","setStyle","[class.gui-structure-border]","[id]","StructureColumnConfigComponent","StructureColumnConfigService","inlineDialogService","placement","InlineDialogPlacement","Top","offset","close","FabricInlineDialogService","StructureHeaderColumnsComponent","globalSearching","isSortAsc","isSortDesc","isGlobalSortEnabled","StructureFilterRepository","enabled$","selectFilterEnabled","StructureQuickFilterRepository","selectQuickFilterEnabled","StructureFilterReadModelRepository","structureFilterRepository","structureQuickFilterRepository","onFilteringEnabled","onQuickFiltersEnabled","StructureHeaderFiltersComponent","cd","closed","filterMode","f","clearFilters","reset","turnOnFilterMode","turnOffFilterMode","StructureHeaderComponent","eventBus","structureFilterReadModelRepository","headerColumns","filterRowEnabled","containerRef","headerHeight","filtersRef","StructureHeaderFilterComponent","sub","editContext","StructureContentComponent","formationCommandService","formationQueryService","rowDetailOpened","rowsList","clearSelectedRows","strippedId","selectedRowEl","combineLatest","trackByFn","translateY","selectedElements","querySelectorAll","el","StructureRowComponent","detailsEnabled","StructureCellComponent","cellEditCloseAllService","inEditMode","enterEditMode","exitEditMode","cell","forceCheck","valueChanges$","status$","observeFieldStatus","observeValueChanges","publishEditEnter","markForCheck","submitChangesAndExit","updatedValue","actualValue","publishEditSubmit","publishEditCancel","publishEditState","StructureContainerComponent","ngZone","resizeDetector","structureParent","autoResizeWidthEnabled","scrollObservation$","combine","sourceSizeHeight","observe","recalculateContainer","enableScrollObservation","disableScrollObservation","runOutsideAngular","scrollTop","NgZone","ResizeDetector","Optional","StructureQuickFiltersComponent","StructureSearchingRepository","onSearchingEnabled","StructureSearchReadModelRepository","structureSearchingRepository","onSearchEnabled","STRUCTURE_CSS_CLASS_NAME","prefix","StructureBlueprintComponent","structureSearchReadModelRepository","searchEnabled","topAggregationPanelEnabled","bottomAggregationPanelEnabled","quickFiltersEnabled","infoPanelEnabled","headerCssClass","contentCssClass","pagingReadModel","getHeaderTopClasses","getHeaderBottomClasses","isColumnHeaderTopEnabled","isColumnHeaderBottomEnabled","isPagingTopEnabled","isPagingBottomEnabled","isSourceEmpty","InMemoryStructureAggregateStore","inMemoryStructureStore","StructureAggregateRepository","InMemoryStructureAggregateRepository","inMemoryStructureAggregateStore","SetSourceLoadingEvent","SchemaSetEvent","SchemaHorizontalGridSetEvent","SchemaVerticalGridSetEvent","SchemaTopHeaderChangedEvent","SchemaBottomHeaderChangedEvent","RowColoringSetEvent","PagingSetEvent","FormationSetEvent","ScrollPositionSetEvent","OriginSetEvent","getOrigin","StructureFilterToggledEvent","InMemoryStructureRepository","structureIdToStructure","structure$","inMemoryStructureCommandProviders","inMemoryStructureReadProviders","inMemoryStructureProviders","SetVerticalScrollEnabledCommandHandler","SetScrollPositionCommandHandler","InitFieldsCommandHandler","fieldTypes","createFields","ToggleSortCommandHandler","structureAggregateRepository","sorters","publishSortEvent","sorter","hasDirection","SortingSetEvent","SetSortingCommandHandler","StructureConfigFilterSetEvent","StructureSetConfigFilterCommandHandler","StructureConfigSearchingSetEvent","StructureSetConfigSearchingCommandHandler","searchingConfig","StructureConfigQuickFilterSetEvent","StructureSetConfigQuickFilterCommandHandler","StructureToggleFilterCommandHandler","toggleFilter","StructureAggregationsChangedEvent","getAggregations","StructurePreparedEntitiesSetEvent","getPreparedItems","StructureSourceDomainEventPublisher","publishEvent","structureOriginChangedAggregateEvent","domainEvent","structureSourceItemEditedAggregateEvent","structureAggregationsChangedAggregateEvent","structurePreparedEntitiesSetAggregateEvent","StructureAggregationEnabledSetEvent","StructureSetAggregationEnabledCommandHandler","structureSourceDomainEventPublisher","VerticalRange","VerticalFormation","scrollPosition","hiddenItemsTop","hiddenItemsBottom","isInteger","calculateRange","getRange","range","itemsInViewport","floor","hiddenElements","abs","setTopHiddenItemsCount","count","setBottomHiddenItemsCount","setViewportHeight","setLogger","VerticalFormationFactory","vf","FieldIdGenerator","BaseField","matchers","accessorMethod","getKey","getMatchers","getSearchMatcher","val","getSortValue","getSortMatcher","getSearchValue","Field","aggregationEnabled","possibleAggregations","assignPossibleAggregations","assignAggregations","isAggregation","isAggregationEnabled","aggregations","assignDefaultAggregations","UnknownField","one","two","filterPhrase","NumberField","numOne","numTwo","StringField","toLowerCase","strOne","strTwo","localeCompare","BooleanField","booleanOne","booleanTwo","sureBoolTwo","DateField","dateOne","dateTwo","FieldMatchers","sortMatcher","searchMatcher","getMatcher","of","FieldFactory","fieldIdGenerator","fieldMatchers","createMatchers","columnType","TypeField","mapNumber","callback","ifNumber","entityOne","entityTwo","valueOne","valueTwo","FieldCollection","fieldFactory","getAllFields","getAllFieldIds","from","typeField","addField","addFields","fields_1","fields_1_1","FieldCollectionFactory","StructureFilter","filterId","setFilterValue","FilterId","FilterSettings","filteringEnabled","isQuickFilteringEnabled","isSearchingEnabled","FilterManager","filterSettings","filters","getAll","arr","getSettings","filteredEntities","filters_1","filters_1_1","FilterManagerFactory","AGGREGATION_CALCULATORS","AggregationCalculator","filteredFields","forDataType","distinct","Set","prepare","countForField","add","postCalculate","aggregatedValues","generateAggregatedValues","setCount","setDistinct","AggregatedValues","BooleanAggregatedValues","truthy","falsy","BooleanAggregationCalculator","booleanValue","truthyForField","falsyForField","DateAggregatedValues","DateAggregationCalculator","NumberAggregatedValues","min","max","average","median","setValueWithPrecision","toFixed","NumberAggregationCalculator","numberValue","sumForField","minForField","maxForField","StringAggregatedValues","StringAggregationCalculator","UnknownAggregatedValues","UnknownAggregationCalculator","StructureAggregationsChangedAggregateEvent","AggregationManager","calculators","calculations","calc","allFields","remove","update","AggregationManagerFactory","provideAggregationCalculator","clazz","aggregationProviders","StructureConfigFilterSetEventHandler","StructureConfigSearchingSetEventHandler","StructureConfigQuickFilterSetEventHandler","StructureFieldUiModel","StructureFieldUiConverter","convertOne","StructureFieldsInitedEventHandler","structureFieldsRepository","structureFieldUiConverter","StructureAggregationUiEventsRepository","onAggregationsChanged","OriginItemEntity","bumpVersion","setPosition","StructureSourceItemEditedAggregateEvent","StructureOriginChangedAggregateEvent","SourceManager","fetched","preparedEntities","slicedEntities","isFetched","setEntities","recalculatePositions","setPreparedEntities","getPreparedEntities","setSlicedEntities","getSlicedEntities","convertItems","createOriginChangedEvent","setConvertedOrigin","getOriginSize","editOriginItem","findOriginItem","itemBeforeChange","removeOriginItem","findOriginItemIndex","SourceManagerFactory","StructureSorter","rank","sorterId","getRank","changeDirection","setDirection","SorterId","SorterCollection","setConfig","multiSorting","clear","addSorter","sortedEntities","sorters_1","sorters_1_1","sorterOne","sorterTwo","reverse","FormationAggregate","toggleRow","ColumnHeaderEntity","setHeaderTop","setHeaderBottom","SchemaAggregate","pagerHeight","active","calculateContainerHeight","setVerticalGrid","setHorizontalGrid","getHeaderHeight","getPagerHeight","SearchManager","searchFields","enabledDataTypes","addSearchPhrase","searchableFields","removeSearchFilters","searchedItems","StructurePreparedEntitiesSetAggregateEvent","FieldsInitedAggregateEvent","StructureAggregate","sourceManager","aggregationManager","sorterCollection","filterCollection","searchManager","fieldCollection","filterManager","initTheme","calculateSource","editParams","calculateSourceBasedOnVirtualScroll","setFormation","changePaging","typeFields","removeSearchPhrase","searchedEntities","ents","ae","SchemaAggregateFactory","FormationAggregateFactory","SearchManagerFactory","StructureAggregateFactory","pagingAggregateFactory","sourceManagerFactory","formationAggregateFactory","verticalFormationFactory","aggregationManagerFactory","filterManagerFactory","searchManagerFactory","fieldCollectionFactory","schemaAggregateFactory","sorterContainer","filterContainer","fieldContainer","structureAggregate","AggregateFactory","SetPagingCommandHandler","NextPageCommandHandler","PrevPageCommandHandler","ChangePagesizeCommandHandler","events_1","events_1_1","event_1","publishAggregateEvent","pageChangedEvent","pagesizeChangedEvent","pagingCommandHandlers","pagingProviders","SetSchemaVerticalGridCommandHandler","SetSchemaHorizontalGridCommandHandler","SetSchemaThemeCommandHandler","ChangeSchemaBottomHeaderCommandHandler","ChangeSchemaTopHeaderCommandHandler","SetRowColoringCommandHandler","SetSchemaCommandHandler","schemaCommandHandlers","schemaProviders","SetFormationCommandHandler","ToggleSelectedRowCommandHandler","formationCommandHandlers","formationProviders","SetOriginCommandHandler","StructureEditSourceItemCommandHandler","StructureOriginChangedEventHandler","origin_1","SourceRepository","select","SourceSetLoadingCommandHandler","StructurePreparedItemsEventHandler","sourceCommandHandlers","sourceProviders","StructureSetSearchPhraseCommandHandler","SetSortOrderCommandHandler","SetRowHeightCommandHandler","StructureSearchPhraseSetEventHandler","structureCommandHandlers","structureProviders","ConsoleLogger","text","LoggerModule","ItemEntityFactory","createEntities","createEntity","StructureTopPanelComponent","StructureSearchComponent","renderer2","controlsConfig","FORM_SEARCH_NAME","searchForm","formRef","debounceTime","StructureTopPanelModule","StructureEmptySourceComponent","[class.gui-structure-empty-source]","StructureColumnConfigTriggerComponent","structureColumnConfigService","openConfigDialog","headerDialogContainer","closeConfigDialog","StructureColumnConfigSortComponent","Placement","Right","isNoneSort","StructureColumnConfigColumnHideComponent","hideColumn","StructureColumnConfigColumnMoveComponent","StructureColumnMenuIconComponent","[class.gui-structure-column-menu-icon]","StructureColumnMenuModule","StructureAggregationPanelComponent","structureAggregationUiEventsRepository","sourceReadModelService","sourceEmpty","isAggregateTypePresent","[class.gui-structure-aggregation-panel]","StructureAggregationPanelModule","CreateStructureCommandHandler","StructureCellEditComponent","initEditContext","submitChanges","createStructureDefinition","StructureModule","loggers","withConfig","structureConfig","hermesModuleConfig","ngModule","COMMAND_LOGGER_ENABLED","EVENT_LOGGER_ENABLED","declarations$2","elementComponents","GridModule","imports$1","declarations$3","providers$1","entryComponents$1"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export type FieldAccessor = (element?: any) => any;\nexport type ViewTemplateMethod = (cellValue: any) => string;\n\nexport interface GuiColumn {\n\n\tfield?: string | FieldAccessor;\n\n\ttype?: string | GuiDataType;\n\n\tview?: string | GuiCellView | ViewTemplateMethod;\n\n\theader?: string;\n\n\tcustomTemplate?: string;\n\n\twidth?: string | number;\n\n\tenabled?: boolean;\n\n\talign?: string | GuiColumnAlign;\n\n\taggregation?: GuiColumnAggregation;\n\n\tsorting?: GuiColumnSorting;\n\n\tcellEditing?: GuiColumnCellEditing;\n\n\tmatcher?: (item: any) => any;\n}\n\nexport enum GuiDataType {\n\tUNKNOWN,\n\tNUMBER,\n\tSTRING,\n\tBOOLEAN,\n\tDATE,\n\tCUSTOM\n}\n\nexport enum GuiCellView {\n\tTEXT,\n\tCHIP,\n\tLINK,\n\tIMAGE,\n\tBOLD,\n\tITALIC,\n\tCHECKBOX,\n\tCUSTOM,\n\tBAR,\n\tPERCENTAGE_BAR,\n\tPERCENTAGE\n}\n\nexport enum GuiNumberCellView {\n\tTEXT,\n\tBOLD,\n\tITALIC,\n\tCHIP\n}\n\nexport enum GuiStringCellView {\n\tTEXT,\n\tBOLD,\n\tITALIC,\n\tCHIP\n}\n\nexport enum GuiBooleanCellView {\n\tTEXT,\n\tBOLD,\n\tITALIC,\n\tCHIP,\n\tCHECKBOX\n}\n\nexport enum GuiDateCellView {\n\tTEXT,\n\tBOLD,\n\tITALIC,\n\tCHIP\n}\n\nexport interface GuiPagingConfig {\n\n\tenabled?: boolean;\n\n\tpage?: number;\n\n\tpageSize?: number;\n\n\tpageSizes?: Array<number>;\n\n\tpagerTop?: boolean;\n\n\tpagerBottom?: boolean;\n\n\tdisplay?: string | GuiPagingDisplay;\n\n}\n\nexport enum GuiTheme {\n\tFABRIC,\n\tMATERIAL,\n\tLIGHT,\n\tDARK,\n\tGENERIC\n}\n\nexport enum GuiRowColoring {\n\tNONE,\n\tEVEN,\n\tODD\n}\n\nexport enum GuiSortingOrder {\n\tNONE,\n\tASC,\n\tDESC\n}\n\nexport interface GuiSorting {\n\n\tenabled?: boolean;\n\n\t/**\n\t * @experimental\n\t */\n\tmultiSorting?: boolean;\n\n}\n\nexport interface GuiFiltering {\n\n\tenabled?: boolean;\n\n}\n\nexport interface GuiQuickFilters {\n\n\tenabled?: boolean;\n\n}\n\nexport interface GuiSearching {\n\n\tenabled?: boolean;\n\n\thighlighting?: boolean;\n\n\tplaceholder?: string;\n\n\tphrase?: string;\n\n}\n\nexport interface GuiAggregation {\n\n\tenabled?: boolean;\n\n\ttop?: boolean;\n\n\tbottom?: boolean;\n\n}\n\nexport interface GuiColumnAggregation {\n\n\tenabled?: boolean;\n\n\taggregationTypes?: Array<any>;\n}\n\nexport interface GuiColumnSorting {\n\n\tenabled?: boolean;\n\n\tmatcher?: (item: any) => any;\n\n\torder?: GuiSortingOrder\n}\n\nexport interface GuiColumnCellEditing {\n\n\tenabled?: boolean;\n\n}\n\nexport interface GuiColumnMenu {\n\n\tenabled?: boolean;\n\n\tsort?: boolean;\n\n\tfilter?: boolean;\n\n\tcolumnsManager?: boolean;\n\n}\n\nexport enum GuiPagingDisplay {\n\tBASIC,\n\tADVANCED\n}\n\nexport enum GuiColumnAlign {\n\tRIGHT,\n\tCENTER,\n\tLEFT\n}\n","export enum DataType {\n\tUNKNOWN,\n\tNUMBER,\n\tSTRING,\n\tBOOLEAN,\n\tDATE,\n\tCUSTOM\n}\n","import { GuiDataType } from '../../../ui-api/grid.api';\nimport { DataType } from '../../../../../lib/structure/domain/structure/command/field/data-type/data-type';\n\nexport class GridColumnTypeConverter {\n\n\tconvertType(type: string | GuiDataType): DataType {\n\n\t\tif (typeof type === 'string') {\n\t\t\treturn this.convertTypeString(type);\n\t\t} else {\n\t\t\treturn this.convertTypeEnum(type);\n\t\t}\n\t}\n\n\tprivate convertTypeEnum(enumType: GuiDataType): DataType {\n\n\t\tswitch (enumType) {\n\n\t\t\tcase GuiDataType.STRING:\n\t\t\t\treturn DataType.STRING;\n\n\t\t\tcase GuiDataType.NUMBER:\n\t\t\t\treturn DataType.NUMBER;\n\n\t\t\tcase GuiDataType.BOOLEAN:\n\t\t\t\treturn DataType.BOOLEAN;\n\n\t\t\tcase GuiDataType.DATE:\n\t\t\t\treturn DataType.DATE;\n\n\t\t\tcase GuiDataType.UNKNOWN:\n\t\t\t\treturn DataType.UNKNOWN;\n\n\t\t\tcase GuiDataType.CUSTOM:\n\t\t\t\treturn DataType.CUSTOM;\n\n\t\t\tdefault:\n\t\t\t\treturn DataType.STRING;\n\t\t}\n\t}\n\n\tprivate convertTypeString(type: string): DataType {\n\t\tconst loweredType = type.toLocaleLowerCase();\n\n\t\tswitch (loweredType) {\n\n\t\t\tcase 'string':\n\t\t\t\treturn DataType.STRING;\n\n\t\t\tcase 'number':\n\t\t\t\treturn DataType.NUMBER;\n\n\t\t\tcase 'boolean':\n\t\t\t\treturn DataType.BOOLEAN;\n\n\t\t\tcase 'date':\n\t\t\t\treturn DataType.DATE;\n\n\t\t\tcase 'unknown':\n\t\t\t\treturn DataType.UNKNOWN;\n\n\t\t\tcase 'custom':\n\t\t\t\treturn DataType.CUSTOM;\n\n\t\t\tdefault:\n\t\t\t\treturn DataType.STRING;\n\t\t}\n\t}\n\n}\n","export enum AggregationType {\n\tCOUNT = 1 << 10,\n\tDISTINCT = 1 << 0,\n\tSUM = 1 << 1,\n\tAVERAGE = 1 << 2,\n\tMIN = 1 << 3,\n\tMAX = 1 << 4,\n\tMEDIAN = 1 << 5,\n\tTRUTHY = 1 << 6,\n\tFALSY = 1 << 7,\n\tEARLIEST = 1 << 8,\n\tLATEST = 1 << 9,\n}\n\n// count\n// count distinct\n// percentile\n// std.dev\n// std.dev Pop\n// variance\n// variance pop\n","import { ColumnAggregationConfig } from '../../../../../../lib/composition/domain/column-aggregation.config';\nimport { AggregationType } from '../../../../../../lib/structure/domain/structure/command/aggregation/aggregation.type';\n\nimport { GuiColumnAggregation } from '../../../../../../grid.index';\n\n\nexport class GridColumnAggregationConverter {\n\n\tconvert(aggregationConfig: GuiColumnAggregation): ColumnAggregationConfig {\n\t\tlet columnAggregationConfig: ColumnAggregationConfig = {};\n\n\t\tif (aggregationConfig.enabled !== undefined && aggregationConfig.enabled !== null) {\n\t\t\tcolumnAggregationConfig.enabled = aggregationConfig.enabled;\n\t\t}\n\n\t\tif (aggregationConfig.aggregationTypes !== undefined && aggregationConfig.aggregationTypes !== null) {\n\t\t\tcolumnAggregationConfig.aggregationTypes = this.convertAggregationTypes(aggregationConfig.aggregationTypes);\n\t\t}\n\n\t\treturn columnAggregationConfig;\n\t}\n\n\tprivate convertAggregationTypes(configAggregationTypes: Array<string>): Array<AggregationType> {\n\n\t\tconst aggregationTypes: Array<AggregationType> = [];\n\n\t\tconfigAggregationTypes.forEach((type: string) => {\n\n\t\t\tconst aggregationType = this.convertAggregationType(type);\n\n\t\t\tif (aggregationType !== undefined && aggregationType !== null) {\n\t\t\t\taggregationTypes.push(aggregationType);\n\t\t\t}\n\t\t});\n\n\t\treturn aggregationTypes;\n\t}\n\n\tprivate convertAggregationType(type: string): AggregationType {\n\n\t\tconst loweredAggregationType = type.toLocaleLowerCase();\n\n\t\tswitch (loweredAggregationType) {\n\n\t\t\tcase 'count':\n\t\t\t\treturn AggregationType.COUNT;\n\n\t\t\tcase 'distinct':\n\t\t\t\treturn AggregationType.DISTINCT;\n\n\t\t\tcase 'sum':\n\t\t\t\treturn AggregationType.SUM;\n\n\t\t\tcase 'average':\n\t\t\t\treturn AggregationType.AVERAGE;\n\n\t\t\tcase 'min':\n\t\t\t\treturn AggregationType.MIN;\n\n\t\t\tcase 'max':\n\t\t\t\treturn AggregationType.MAX;\n\n\t\t\tcase 'median':\n\t\t\t\treturn AggregationType.MEDIAN;\n\n\t\t\tcase 'truthy':\n\t\t\t\treturn AggregationType.TRUTHY;\n\n\t\t\tcase 'falsy':\n\t\t\t\treturn AggregationType.FALSY;\n\n\t\t\tcase 'earliest':\n\t\t\t\treturn AggregationType.EARLIEST;\n\n\t\t\tcase 'latest':\n\t\t\t\treturn AggregationType.LATEST;\n\n\t\t\tdefault:\n\t\t\t\treturn null;\n\n\t\t}\n\t}\n\n}\n","export enum CellView {\n\tTEXT,\n\tNUMBER,\n\tCHIP,\n\tLINK,\n\tIMAGE,\n\tBOLD,\n\tITALIC,\n\tCHECKBOX,\n\tCUSTOM,\n\tFUNCTION,\n\tDATE,\n\tBAR,\n\tPERCENTAGE_BAR,\n\tPERCENTAGE\n}\n","import { GuiCellView, ViewTemplateMethod } from '../../../ui-api/grid.api';\nimport { CellView } from '../../../../../lib/composition/domain/cell-view';\n\nexport class GridColumnViewConverter {\n\n\tconvert(view: string | GuiCellView | ViewTemplateMethod): CellView | ViewTemplateMethod {\n\n\t\tif (typeof view === 'string') {\n\t\t\treturn this.convertString(view);\n\t\t} else if (typeof view === 'function') {\n\t\t\treturn view;\n\t\t} else {\n\t\t\treturn this.convertEnum(view);\n\t\t}\n\t}\n\n\tprivate convertString(view: string): CellView {\n\n\t\tconst loweredView = view.toLocaleLowerCase();\n\n\t\tswitch (loweredView) {\n\n\t\t\tcase 'text':\n\t\t\t\treturn CellView.TEXT;\n\n\t\t\tcase 'chip':\n\t\t\t\treturn CellView.CHIP;\n\n\t\t\tcase 'link':\n\t\t\t\treturn CellView.LINK;\n\n\t\t\tcase 'image':\n\t\t\t\treturn CellView.IMAGE;\n\n\t\t\tcase 'bold':\n\t\t\t\treturn CellView.BOLD;\n\n\t\t\tcase 'italic':\n\t\t\t\treturn CellView.ITALIC;\n\n\t\t\tcase 'checkbox':\n\t\t\t\treturn CellView.CHECKBOX;\n\n\t\t\tcase 'custom':\n\t\t\t\treturn CellView.CUSTOM;\n\n\t\t\tcase 'bar':\n\t\t\t\treturn CellView.BAR;\n\n\t\t\tcase 'percentage_bar':\n\t\t\t\treturn CellView.PERCENTAGE_BAR;\n\n\t\t\tcase 'percentage':\n\t\t\t\treturn CellView.PERCENTAGE;\n\n\t\t\tdefault:\n\t\t\t\treturn CellView.TEXT;\n\t\t}\n\t}\n\n\tprivate convertEnum(view: GuiCellView): CellView {\n\n\t\tswitch (view) {\n\n\t\t\tcase GuiCellView.TEXT:\n\t\t\t\treturn CellView.TEXT;\n\n\t\t\tcase GuiCellView.CHIP:\n\t\t\t\treturn CellView.CHIP;\n\n\t\t\tcase GuiCellView.LINK:\n\t\t\t\treturn CellView.LINK;\n\n\t\t\tcase GuiCellView.IMAGE:\n\t\t\t\treturn CellView.IMAGE;\n\n\t\t\tcase GuiCellView.BOLD:\n\t\t\t\treturn CellView.BOLD;\n\n\t\t\tcase GuiCellView.ITALIC:\n\t\t\t\treturn CellView.ITALIC;\n\n\t\t\tcase GuiCellView.CHECKBOX:\n\t\t\t\treturn CellView.CHECKBOX;\n\n\t\t\tcase GuiCellView.CUSTOM:\n\t\t\t\treturn CellView.CUSTOM;\n\n\t\t\tcase GuiCellView.BAR:\n\t\t\t\treturn CellView.BAR;\n\n\t\t\tcase GuiCellView.PERCENTAGE_BAR:\n\t\t\t\treturn CellView.PERCENTAGE_BAR;\n\n\t\t\tcase GuiCellView.PERCENTAGE:\n\t\t\t\treturn CellView.PERCENTAGE;\n\n\t\t\tdefault:\n\t\t\t\treturn CellView.TEXT;\n\t\t}\n\t}\n\n}\n","import { ColumnSortingConfig } from '../../../../../../lib/composition/domain/column-sorting.config';\n\nimport { GuiColumnSorting } from '../../../../../../grid.index';\n\nexport class GridColumnSortingConverter {\n\n\tconvert(sortingConfig: GuiColumnSorting): ColumnSortingConfig {\n\n\t\treturn sortingConfig as any;\n\t}\n\n}\n","import { GuiColumnCellEditing } from '../../../../../../grid.index';\nimport { ColumnCellEditingConfig } from '../../../../../../lib/composition/domain/column-cell-editing.config';\n\nexport class GridColumnCellEditingConverter {\n\n\tconvert(config: GuiColumnCellEditing): ColumnCellEditingConfig {\n\n\t\treturn config as any;\n\t}\n\n}\n","export enum ColumnAlign {\n\tRIGHT,\n\tCENTER,\n\tLEFT\n}\n","import { GuiColumnAlign } from '../../../../ui-api/grid.api';\nimport { ColumnAlign } from '../../../../../../lib/composition/domain/column-align';\n\nexport class GridColumnAlignConverter {\n\n\tconvert(align: string | GuiColumnAlign): ColumnAlign {\n\n\t\tif (typeof align === 'string') {\n\t\t\treturn this.convertTypeString(align);\n\t\t} else {\n\t\t\treturn this.convertTypeEnum(align);\n\t\t}\n\t}\n\n\tprivate convertTypeEnum(align: GuiColumnAlign): ColumnAlign {\n\n\t\tswitch (align) {\n\n\t\t\tcase GuiColumnAlign.RIGHT:\n\t\t\t\treturn ColumnAlign.RIGHT;\n\n\t\t\tcase GuiColumnAlign.CENTER:\n\t\t\t\treturn ColumnAlign.CENTER;\n\n\t\t\tcase GuiColumnAlign.LEFT:\n\t\t\t\treturn ColumnAlign.LEFT;\n\n\t\t\tdefault:\n\t\t\t\treturn ColumnAlign.LEFT;\n\t\t}\n\t}\n\n\tprivate convertTypeString(align: string): ColumnAlign {\n\t\tconst loweredType = align.toLocaleLowerCase();\n\n\t\tswitch (loweredType) {\n\n\t\t\tcase 'right':\n\t\t\t\treturn ColumnAlign.RIGHT;\n\n\t\t\tcase 'center':\n\t\t\t\treturn ColumnAlign.CENTER;\n\n\t\t\tcase 'left':\n\t\t\t\treturn ColumnAlign.LEFT;\n\n\t\t\tdefault:\n\t\t\t\treturn ColumnAlign.LEFT;\n\t\t}\n\t}\n}\n","import { GuiColumn } from '../../../ui-api/grid.api';\nimport { ColumnConfig } from '../../../../../lib/composition/domain/column.config';\n\nimport { GridColumnTypeConverter } from './grid.column-type.converter';\nimport { GridColumnAggregationConverter } from './aggregation/grid.column-aggregation.converter';\nimport { GridColumnViewConverter } from './grid.column-view.converter';\nimport { GridColumnSortingConverter } from './sorting/grid.column-sorting.converter';\nimport { GridColumnCellEditingConverter } from './cell-editing/grid.column-cell-editing.converter';\nimport { GridColumnAlignConverter } from './align/grid.column-align.converter';\n\n\nexport class GridColumnConverter {\n\n\tprivate readonly columnTypeConverter = new GridColumnTypeConverter();\n\n\tprivate readonly columnAggregationConverter = new GridColumnAggregationConverter();\n\n\tprivate readonly columnViewConverter = new GridColumnViewConverter();\n\n\tprivate readonly columnSortingConverter = new GridColumnSortingConverter();\n\n\tprivate readonly columnCellEditingConverter = new GridColumnCellEditingConverter();\n\n\tprivate readonly columnAlignConverter = new GridColumnAlignConverter();\n\n\tconvert(config: Array<GuiColumn>): Array<ColumnConfig> {\n\t\treturn config.map((c) => this.convertColumn(c));\n\t}\n\n\tprivate convertColumn(guiColumn: GuiColumn): ColumnConfig {\n\t\tlet columnConfig: ColumnConfig = {};\n\n\t\tif (guiColumn.type !== undefined && guiColumn.type !== null) {\n\t\t\tcolumnConfig.type = this.columnTypeConverter.convertType(guiColumn.type);\n\t\t}\n\n\t\tif (guiColumn.header !== undefined && guiColumn.header !== null) {\n\t\t\tcolumnConfig.header = guiColumn.header;\n\t\t}\n\n\t\tif (guiColumn.enabled !== undefined && guiColumn.enabled !== null) {\n\t\t\tcolumnConfig.enabled = guiColumn.enabled;\n\t\t}\n\n\t\tif (guiColumn.field !== undefined && guiColumn.field !== null) {\n\t\t\tcolumnConfig.field = guiColumn.field;\n\t\t}\n\n\t\tif (guiColumn.width !== undefined && guiColumn.width !== null) {\n\t\t\tcolumnConfig.width = guiColumn.width;\n\t\t}\n\n\t\tif (guiColumn.align !== undefined && guiColumn.align !== null) {\n\t\t\tcolumnConfig.align = this.columnAlignConverter.convert(guiColumn.align);\n\t\t}\n\n\t\tif (guiColumn.view !== undefined && guiColumn.view !== null) {\n\t\t\tcolumnConfig.view = this.columnViewConverter.convert(guiColumn.view);\n\t\t}\n\n\t\tif (guiColumn.aggregation !== undefined && guiColumn.aggregation !== null) {\n\t\t\tcolumnConfig.aggregation = this.columnAggregationConverter.convert(guiColumn.aggregation);\n\t\t}\n\n\t\tif (guiColumn.sorting !== undefined && guiColumn.sorting !== null) {\n\t\t\tcolumnConfig.sorting = this.columnSortingConverter.convert(guiColumn.sorting);\n\t\t}\n\n\t\tif (guiColumn.cellEditing !== undefined && guiColumn.cellEditing !== null) {\n\t\t\tcolumnConfig.cellEditing = this.columnCellEditingConverter.convert(guiColumn.cellEditing);\n\t\t}\n\n\t\tif (guiColumn.matcher !== undefined && guiColumn.matcher !== null) {\n\t\t\tcolumnConfig.matcher = guiColumn.matcher;\n\t\t}\n\n\t\treturn columnConfig;\n\t}\n\n}\n","export enum SchemaTheme {\n\tFABRIC,\n\tMATERIAL,\n\tLIGHT,\n\tDARK,\n\tGENERIC\n}\n","import { GuiTheme } from '../../../ui-api/grid.api';\nimport { SchemaTheme } from '../../../../../lib/structure/domain/schema/schema-theme';\n\n\nexport class GridThemeConverter {\n\n\tconvert(theme: string | GuiTheme): SchemaTheme {\n\n\t\tif (typeof theme === 'string') {\n\t\t\treturn this.convertString(theme);\n\t\t} else {\n\t\t\treturn this.convertEnum(theme);\n\t\t}\n\n\t}\n\n\tprivate convertString(theme: string): SchemaTheme {\n\n\t\tconst loweredTheme = theme.toLocaleLowerCase();\n\n\t\tswitch (loweredTheme) {\n\n\t\t\tcase 'material':\n\t\t\t\treturn SchemaTheme.MATERIAL;\n\n\t\t\tcase 'fabric':\n\t\t\t\treturn SchemaTheme.FABRIC;\n\n\t\t\tcase 'light':\n\t\t\t\treturn SchemaTheme.LIGHT;\n\n\t\t\tcase 'dark':\n\t\t\t\treturn SchemaTheme.DARK;\n\n\t\t\tcase 'generic':\n\t\t\t\treturn SchemaTheme.GENERIC;\n\n\t\t\tdefault:\n\t\t\t\treturn SchemaTheme.FABRIC;\n\n\t\t}\n\n\t}\n\n\tprivate convertEnum(theme: GuiTheme): SchemaTheme {\n\n\t\tswitch (theme) {\n\n\t\t\tcase GuiTheme.MATERIAL:\n\t\t\t\treturn SchemaTheme.MATERIAL;\n\n\t\t\tcase GuiTheme.FABRIC:\n\t\t\t\treturn SchemaTheme.FABRIC;\n\n\t\t\tcase GuiTheme.LIGHT:\n\t\t\t\treturn SchemaTheme.LIGHT;\n\n\t\t\tcase GuiTheme.DARK:\n\t\t\t\treturn SchemaTheme.DARK;\n\n\t\t\tcase GuiTheme.GENERIC:\n\t\t\t\treturn SchemaTheme.GENERIC;\n\n\t\t\tdefault:\n\t\t\t\treturn SchemaTheme.FABRIC;\n\n\t\t}\n\n\t}\n\n}\n","export enum RowColoring {\n\tNONE,\n\tEVEN,\n\tODD\n}\n","import { GuiRowColoring } from '../../../ui-api/grid.api';\nimport { RowColoring } from '../../../../../lib/structure/ui-api/schema/row-coloring';\n\n\nexport class GridRowColoringConverter {\n\n\tconvert(rowColoring: string | GuiRowColoring): RowColoring {\n\n\t\tif (typeof rowColoring === 'string') {\n\t\t\treturn this.convertString(rowColoring);\n\t\t} else {\n\t\t\treturn this.convertEnum(rowColoring);\n\t\t}\n\n\t}\n\n\tprivate convertString(rowColoring: string): RowColoring {\n\n\t\tconst loweredRowColoring = rowColoring.toLocaleLowerCase();\n\n\t\tswitch (loweredRowColoring) {\n\n\t\t\tcase 'none':\n\t\t\t\treturn RowColoring.NONE;\n\n\t\t\tcase 'even':\n\t\t\t\treturn RowColoring.EVEN;\n\n\t\t\tcase 'odd':\n\t\t\t\treturn RowColoring.ODD;\n\n\t\t\tdefault:\n\t\t\t\treturn RowColoring.EVEN;\n\n\t\t}\n\n\t}\n\n\tprivate convertEnum(rowColoring: GuiRowColoring): RowColoring {\n\n\t\tswitch (rowColoring) {\n\n\t\t\tcase GuiRowColoring.NONE:\n\t\t\t\treturn RowColoring.NONE;\n\n\t\t\tcase GuiRowColoring.EVEN:\n\t\t\t\treturn RowColoring.EVEN;\n\n\t\t\tcase GuiRowColoring.ODD:\n\t\t\t\treturn RowColoring.ODD;\n\n\t\t\tdefault:\n\t\t\t\treturn RowColoring.EVEN;\n\n\t\t}\n\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { GuiColumnMenu } from '../../../../ui-api/grid.api';\n\nimport { ColumnMenuConfig } from '../../../../../../lib/structure/ui-api/structure/column-menu-config';\n\n@Injectable()\nexport class GridColumnMenuConverter {\n\n\tconvert(config: GuiColumnMenu): ColumnMenuConfig {\n\t\treturn config as ColumnMenuConfig;\n\t}\n}\n","export enum PagingDisplayMode {\n\tBASIC,\n\tADVANCED\n}\n","import { PagingDisplayMode } from '../../../../../lib/structure/ui/paging/mode/paging-display-mode';\nimport { GuiPagingConfig, GuiPagingDisplay } from '../../../ui-api/grid.api';\nimport { PagingConfig } from '../../../../../lib/structure/domain/paging/paging-config';\n\n\nexport class GridPagingConverter {\n\n\tconvert(guiPaging: GuiPagingConfig): PagingConfig {\n\n\t\tlet pagingConfig: PagingConfig = {};\n\n\t\tif (guiPaging.enabled !== undefined && guiPaging.enabled !== null) {\n\t\t\tpagingConfig.enabled = guiPaging.enabled;\n\t\t}\n\n\t\tif (guiPaging.page !== undefined && guiPaging.page !== null) {\n\t\t\tpagingConfig.page = guiPaging.page;\n\t\t}\n\n\t\tif (guiPaging.pageSize !== undefined && guiPaging.pageSize !== null) {\n\t\t\tpagingConfig.pageSize = guiPaging.pageSize;\n\t\t}\n\n\t\tif (guiPaging.pageSizes !== undefined && guiPaging.pageSizes !== null) {\n\t\t\tpagingConfig.pageSizes = guiPaging.pageSizes;\n\t\t}\n\n\t\tif (guiPaging.pagerTop !== undefined && guiPaging.pagerTop !== null) {\n\t\t\tpagingConfig.pagerTop = guiPaging.pagerTop;\n\t\t}\n\n\t\tif (guiPaging.pagerBottom !== undefined && guiPaging.pagerBottom !== null) {\n\t\t\tpagingConfig.pagerBottom = guiPaging.pagerBottom;\n\t\t}\n\n\t\tif (guiPaging.display !== undefined && guiPaging.display !== null) {\n\t\t\tpagingConfig.displayMode = this.convertDisplay(guiPaging.display);\n\t\t}\n\n\t\treturn pagingConfig;\n\t}\n\n\tprivate convertDisplay(pagingDisplay: string | GuiPagingDisplay): PagingDisplayMode {\n\n\t\tif (typeof pagingDisplay === 'string') {\n\t\t\treturn this.convertString(pagingDisplay);\n\t\t} else {\n\t\t\treturn this.convertEnum(pagingDisplay);\n\t\t}\n\t}\n\n\tprivate convertString(pagingDisplay: string): PagingDisplayMode {\n\n\t\tconst loweredPaging = pagingDisplay.toLocaleLowerCase();\n\n\t\tswitch (loweredPaging) {\n\n\t\t\tcase 'basic':\n\t\t\t\treturn PagingDisplayMode.BASIC;\n\n\t\t\tcase 'advanced':\n\t\t\t\treturn PagingDisplayMode.ADVANCED;\n\n\t\t\tdefault:\n\t\t\t\treturn PagingDisplayMode.BASIC;\n\t\t}\n\t}\n\n\tprivate convertEnum(pagingDisplay: GuiPagingDisplay): PagingDisplayMode {\n\n\t\tswitch (pagingDisplay) {\n\n\t\t\tcase GuiPagingDisplay.BASIC:\n\t\t\t\treturn PagingDisplayMode.BASIC;\n\n\t\t\tcase GuiPagingDisplay.ADVANCED:\n\t\t\t\treturn PagingDisplayMode.ADVANCED;\n\n\t\t\tdefault:\n\t\t\t\treturn PagingDisplayMode.BASIC;\n\t\t}\n\t}\n\n}\n","import { EventEmitter, Input, OnChanges, Output, SimpleChanges } from '@angular/core';\n\nimport {\n\tGuiAggregation,\n\tGuiColumn,\n\tGuiColumnMenu,\n\tGuiFiltering,\n\tGuiPagingConfig,\n\tGuiQuickFilters,\n\tGuiRowColoring,\n\tGuiSearching,\n\tGuiSorting,\n\tGuiTheme\n} from '../../ui-api/grid.api';\nimport { ColumnConfig } from '../../../../lib/composition/domain/column.config';\n\nimport { GridColumnConverter } from './column/grid.column.converter';\nimport { GridThemeConverter } from './theme/grid.theme.converter';\nimport { GridRowColoringConverter } from './coloring/grid.row-coloring.converter';\nimport { ColumnMenuConfig } from '../../../../lib/structure/ui-api/structure/column-menu-config';\nimport { GridColumnMenuConverter } from './column/menu/grid.column-menu.converter';\nimport { GridPagingConverter } from './paging/grid.paging.converter';\n\nexport abstract class GridGateway implements OnChanges {\n\n\t/**\n\t * INPUTS\n\t */\n\t@Input()\n\tcolumnHeaderTop: boolean;\n\n\t@Input()\n\tcolumnHeaderBottom: boolean;\n\n\t@Input()\n\tmaxHeight: number;\n\n\t@Input()\n\twidth: number;\n\n\t@Input()\n\trowHeight: number;\n\n\t@Input()\n\tautoResizeWidth: boolean;\n\n\t@Input()\n\tsource: Array<any> = [];\n\n\t@Input()\n\tcolumns: Array<GuiColumn> = [];\n\n\t@Input()\n\tpaging: boolean | GuiPagingConfig;\n\n\t@Input()\n\tverticalGrid: boolean;\n\n\t@Input()\n\thorizontalGrid: boolean;\n\n\t@Input()\n\ttheme: string | GuiTheme;\n\n\t@Input()\n\trowColoring: string | GuiRowColoring;\n\n\t@Input()\n\trowSelecting: boolean;\n\n\t@Input()\n\tloading: boolean;\n\n\t@Input()\n\tvirtualScroll: boolean;\n\n\t@Input()\n\tsorting: boolean | GuiSorting;\n\n\t@Input()\n\tsearching: boolean | GuiSearching;\n\n\t/**\n\t * @experimental\n\t */\n\t@Input()\n\tfiltering: boolean | GuiFiltering;\n\n\t/**\n\t * @experimental\n\t */\n\t@Input()\n\tquickFilters: boolean | GuiQuickFilters;\n\n\t/**\n\t * @experimental\n\t */\n\t@Input()\n\teditMode: boolean;\n\n\t/**\n\t * @experimental\n\t */\n\t@Input()\n\tcellEditing: boolean;\n\n\t@Input()\n\tinfoPanel: boolean;\n\n\t/**\n\t * @experimental\n\t */\n\t@Input()\n\taggregation: GuiAggregation;\n\n\t@Input()\n\tcolumnMenu: GuiColumnMenu;\n\n\n\t/**\n\t * OUTPUTS\n\t */\n\t@Output()\n\tpageChanged: EventEmitter<number> = new EventEmitter<number>();\n\n\t@Output()\n\tpageSizeChanged: EventEmitter<number> = new EventEmitter<number>();\n\n\t@Output()\n\titemsSelected: EventEmitter<any> = new EventEmitter();\n\n\t@Output()\n\tcolumnsChanged: EventEmitter<void> = new EventEmitter();\n\n\t@Output()\n\tcontainerWidthChanged: EventEmitter<number> = new EventEmitter();\n\n\t@Output()\n\tsourceEdited: EventEmitter<{ after: any, before: any }> = new EventEmitter();\n\n\t@Output()\n\tcellEditEntered: EventEmitter<void> = new EventEmitter();\n\n\t@Output()\n\tcellEditCanceled: EventEmitter<void> = new EventEmitter();\n\n\t@Output()\n\tcellEditSubmitted: EventEmitter<void> = new EventEmitter();\n\n\t@Output()\n\tsearchPhraseChanged: EventEmitter<string> = new EventEmitter();\n\n\n\t/** @internal */\n\tcolumnsConfig: Array<ColumnConfig>;\n\n\tthemeConfig: any; // SchemaTheme;\n\n\trowColoringConfig: any; // RowColoring;\n\n\tcolumnMenuConfig: ColumnMenuConfig;\n\n\tprivate readonly gridColumnConverter: GridColumnConverter = new GridColumnConverter();\n\n\tprivate readonly gridThemeConverter: GridThemeConverter = new GridThemeConverter();\n\n\tprivate readonly gridRowColoringConverter: GridRowColoringConverter = new GridRowColoringConverter();\n\n\tprivate readonly gridColumnMenuConverter: GridColumnMenuConverter = new GridColumnMenuConverter();\n\n\tprivate readonly gridPagingConverter: GridPagingConverter = new GridPagingConverter();\n\n\tprotected constructor() {\n\t}\n\n\tngOnChanges(changes: SimpleChanges): void {\n\n\t\tif (changes.columns !== undefined && changes.columns.currentValue !== undefined) {\n\t\t\tthis.columnsConfig = this.gridColumnConverter.convert(this.columns);\n\t\t}\n\n\t\tif (changes.theme !== undefined && changes.theme.currentValue !== undefined) {\n\t\t\tthis.themeConfig = this.gridThemeConverter.convert(this.theme);\n\t\t}\n\n\t\tif (changes.rowColoring !== undefined && changes.rowColoring.currentValue !== undefined) {\n\t\t\tthis.rowColoringConfig = this.gridRowColoringConverter.convert(this.rowColoring);\n\t\t}\n\n\t\tif (changes.columnMenu !== undefined && changes.columnMenu.currentValue !== undefined) {\n\t\t\tthis.columnMenuConfig = this.gridColumnMenuConverter.convert(this.columnMenu);\n\t\t}\n\n\t\t// TODO\n\t\tif (changes.paging !== undefined && changes.paging.currentValue !== undefined) {\n\n\t\t\tif (typeof this.paging !== 'boolean') {\n\t\t\t\tthis.paging = this.gridPagingConverter.convert(this.paging);\n\t\t\t}\n\t\t}\n\t}\n\n\tonPageChange(page: number): void {\n\t\tthis.pageChanged.emit(page);\n\t}\n\n\tonPageSizeChange(pageSize: number): void {\n\t\tthis.pageSizeChanged.emit(pageSize);\n\t}\n\n\tonItemSelect(item: any): void {\n\t\tthis.itemsSelected.emit(item);\n\t}\n\n\tonColumnsChange(): void {\n\t\tthis.columnsChanged.emit();\n\t}\n\n\tonContainerWidthChange(containerWidth: number): void {\n\t\tthis.containerWidthChanged.emit(containerWidth);\n\t}\n\n\tonSourceEdit(value: any): void {\n\t\tthis.sourceEdited.emit(value);\n\t}\n\n\tonCellEditEnter(): void {\n\t\tthis.cellEditEntered.emit();\n\t}\n\n\tonCellEditSubmit(): void {\n\t\tthis.cellEditSubmitted.emit();\n\t}\n\n\tonCellEditCancel(): void {\n\t\tthis.cellEditCanceled.emit();\n\t}\n\n\tonSearchPhrase(value: string): void {\n\t\tthis.searchPhraseChanged.emit(value);\n\t}\n\n}\n","export abstract class GenericBuilder<T> {\n\n\tprotected abstract buildObject(): T;\n\n\tbuild(): T {\n\t\treturn this.buildObject();\n\t}\n\n}\n","import { GenericBuilder } from '../../../../common/cdk/generic-builder';\n\nexport class StructurePagingDefinitionBuilder extends GenericBuilder<StructurePagingDefinition> {\n\n\tprivate enabled: boolean;\n\n\tconstructor(enabled: boolean) {\n\t\tsuper();\n\t\tthis.enabled = enabled;\n\t}\n\n\tprotected buildObject(): StructurePagingDefinition {\n\t\treturn new StructurePagingDefinition(this.enabled);\n\t}\n\n\twithEnabled(enabled: boolean): StructurePagingDefinitionBuilder {\n\t\tthis.enabled = enabled;\n\t\treturn this;\n\t}\n}\n\nexport class StructurePagingDefinitionDefaultBuilder extends StructurePagingDefinitionBuilder {\n\n\tprivate static readonly defaultEnabled = true;\n\n\tconstructor() {\n\t\tsuper(StructurePagingDefinitionDefaultBuilder.defaultEnabled);\n\t}\n}\n\nexport class StructurePagingDefinition {\n\n\tprivate readonly enabled: boolean;\n\n\tconstructor(enabled: boolean) {\n\t\tthis.enabled = enabled;\n\t}\n\n\tstatic Builder = StructurePagingDefinitionBuilder;\n\n\tstatic DefaultBuilder = StructurePagingDefinitionDefaultBuilder;\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n}\n","import { GenericBuilder } from '../../../common/cdk/generic-builder';\nimport { StructurePagingDefinition } from './paging/structure-paging-definition';\n\nexport class StructureDefinitionBuilder extends GenericBuilder<StructureDefinition> {\n\n\tprivate border: boolean = true;\n\n\tconstructor(private headerEnabled: boolean,\n\t\t\t\tprivate bottomPaging: StructurePagingDefinition,\n\t\t\t\tprivate topPaging: StructurePagingDefinition) {\n\t\tsuper();\n\t}\n\n\tprotected buildObject(): StructureDefinition {\n\t\treturn new StructureDefinition(\n\t\t\tthis.headerEnabled,\n\t\t\tthis.bottomPaging,\n\t\t\tthis.topPaging,\n\t\t\tthis.border\n\t\t);\n\t}\n\n\twithHeader(enabled: boolean): StructureDefinitionBuilder {\n\t\tthis.headerEnabled = enabled;\n\t\treturn this;\n\t}\n\n\twithBottomPaging(paging: StructurePagingDefinition): StructureDefinitionBuilder {\n\t\tthis.bottomPaging = paging;\n\t\treturn this;\n\t}\n\n\twithTopPaging(paging: StructurePagingDefinition): StructureDefinitionBuilder {\n\t\tthis.topPaging = paging;\n\t\treturn this;\n\t}\n\n\twithBorder(enabled: boolean): StructureDefinitionBuilder {\n\t\tthis.border = enabled;\n\t\treturn this;\n\t}\n\n}\n\nexport class StructureDefinitionDefaultBuilder extends StructureDefinitionBuilder {\n\n\tprivate static readonly defaultHeaderEnabled: boolean = true;\n\tprivate static readonly defaultBottomPaging: StructurePagingDefinition = new StructurePagingDefinition.DefaultBuilder().build();\n\tprivate static readonly defaultTopPaging: StructurePagingDefinition = new StructurePagingDefinition.DefaultBuilder().build();\n\n\tconstructor() {\n\t\tsuper(\n\t\t\tStructureDefinitionDefaultBuilder.defaultHeaderEnabled,\n\t\t\tStructureDefinitionDefaultBuilder.defaultBottomPaging,\n\t\t\tStructureDefinitionDefaultBuilder.defaultTopPaging\n\t\t);\n\t}\n}\n\nexport class StructureDefinition {\n\n\tprivate readonly headerEnabled: boolean;\n\n\tprivate readonly bottomPaging: StructurePagingDefinition;\n\n\tprivate readonly topPaging: StructurePagingDefinition;\n\n\tprivate readonly border: boolean;\n\n\tconstructor(headerEnabled: boolean,\n\t\t\t\tbottomPaging: StructurePagingDefinition,\n\t\t\t\ttopPaging: StructurePagingDefinition,\n\t\t\t\tborder: boolean) {\n\t\tthis.headerEnabled = headerEnabled;\n\t\tthis.bottomPaging = bottomPaging;\n\t\tthis.topPaging = topPaging;\n\t\tthis.border = border;\n\t}\n\n\tstatic Builder = StructureDefinitionBuilder;\n\n\tstatic DefaultBuilder = StructureDefinitionDefaultBuilder;\n\n\tisHeaderEnabled(): boolean {\n\t\treturn this.headerEnabled;\n\t}\n\n\tisBorderEnabled(): boolean {\n\t\treturn this.border;\n\t}\n\n\tgetBottomPaging(): StructurePagingDefinition {\n\t\treturn this.bottomPaging;\n\t}\n\n\tgetTopPaging(): StructurePagingDefinition {\n\t\treturn this.topPaging;\n\t}\n\n}\n","import { StructureDefinition } from '../../../../lib/structure/ui/structure-definition';\n\n/** @internal */\nexport const gridStructureDefinition = new StructureDefinition.DefaultBuilder().build();\n","import { Provider } from '@angular/core';\n\nimport { StructureDefinition } from '../../../../lib/structure/ui/structure-definition';\n\nimport { gridStructureDefinition } from './grid-structure-definition';\n\nexport const gridProviders = [{\n\tprovide: StructureDefinition,\n\tuseValue: gridStructureDefinition\n}] as Array<Provider>;\n","import { InjectionToken } from '@angular/core';\n\nexport const structureParentComponent = new InjectionToken('StructureParentComponent');\n","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class GridIdGenerator {\n\n\tprivate static readonly PREFIX = 'gui-grid-';\n\n\tprivate static index = 0;\n\n\tgenerateId(): string {\n\t\tGridIdGenerator.index++;\n\n\t\treturn GridIdGenerator.PREFIX + GridIdGenerator.index;\n\t}\n}\n","import { Injectable } from '@angular/core';\n\nimport { GridComponent } from '../grid.component';\n\n@Injectable()\nexport class GridRegister {\n\n\tprivate readonly gridMap = new Map();\n\n\t// structureId: StructureId\n\tregister(gridId: string, component: GridComponent, structureId: any): void {\n\t\tthis.gridMap.set(gridId, { component, structureId });\n\t}\n\n\tunregister(gridId: string): void {\n\t\tthis.gridMap.delete(gridId);\n\t}\n\n\tgetValues(gridId: string): any {\n\t\treturn this.gridMap.get(gridId);\n\t}\n\n}\n","import { GridComponent } from '../grid.component';\n\nexport interface GridConsoleApi {\n\n\tchangeColumnHeaderTop(enabled: boolean): void;\n\n\n}\n\nexport class GridConsoleApiProvider {\n\n\tconstructor(private readonly gridComponent: GridComponent,\n\t\t\t\tprivate readonly structureId: any) {\n\t} // StructureId\n\n\tprovide(): GridConsoleApi {\n\n\t\tconst component = this.gridComponent;\n\n\t\treturn {\n\t\t\tchangeColumnHeaderTop(enabled: boolean): void {\n\t\t\t\tcomponent.columnHeaderTop = enabled;\n\t\t\t\tcomponent.detectChanges();\n\t\t\t}\n\t\t};\n\n\t}\n\n}\n","import { ChangeDetectorRef, Component, ElementRef, Inject, Input, OnInit, PLATFORM_ID, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\n\nimport { GridGateway } from './grid-gateway';\nimport { gridProviders } from './grid.providers';\n\nimport { structureParentComponent } from '../../../../lib/structure/ui/structure-parent-component';\n\nimport { GridIdGenerator } from './register/grid-id.generator';\nimport { GridRegister } from './register/grid.register';\nimport { GridConsoleApiProvider } from './console/grid.console.api';\n\nexport const gridSelector = 'gui-grid';\n\n@Component({\n\tselector: gridSelector,\n\ttemplateUrl: './grid.component.html',\n\tstyleUrls: [\n\t\t'../grid.ngx.scss'\n\t],\n\tproviders: [\n\t\t...gridProviders,\n\t\t{\n\t\t\tprovide: structureParentComponent,\n\t\t\tuseExisting: GridComponent\n\t\t}\n\t],\n\thost: {\n\t\t'[class]': `\"${gridSelector}\"`,\n\t\t'[style.height]': 'maxHeight'\n\t},\n\tencapsulation: ViewEncapsulation.None\n})\nexport class GridComponent extends GridGateway implements OnInit {\n\n\t@ViewChild('structure', { static: true })\n\tstructureRef: any;\n\n\t@Input()\n\tgridId: string; // can be set once\n\n\tprivate localGridId: string;\n\n\tconstructor(@Inject(PLATFORM_ID) private platformId: any,\n\t\t\t\tprivate elementRef: ElementRef,\n\t\t\t\tprivate changeDetectorRef: ChangeDetectorRef,\n\t\t\t\tprivate gridRegister: GridRegister,\n\t\t\t\tprivate gridIdGenerator: GridIdGenerator) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\n\t\tlet gridId = this.gridId;\n\n\t\tif (gridId === undefined) {\n\t\t\tgridId = this.gridIdGenerator.generateId();\n\t\t}\n\n\t\tthis.localGridId = gridId;\n\n\t\tthis.exposeGridId();\n\n\t\t// register\n\t\tthis.gridRegister.register(gridId, this, this.structureRef.getStructureId());\n\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\twindow['getGuiGrid'] = (gridId: string) => {\n\n\t\t\t\tconst gridConsoleConfig = this.gridRegister.getValues(gridId);\n\n\t\t\t\tif (gridConsoleConfig) {\n\t\t\t\t\treturn new GridConsoleApiProvider(gridConsoleConfig.component, gridConsoleConfig.structureId).provide();\n\t\t\t\t} else {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n\n\tngOnDestroy() {\n\t\tthis.gridRegister.unregister(this.localGridId);\n\t}\n\n\tgetElementRef(): ElementRef {\n\t\treturn this.elementRef;\n\t}\n\n\tgetGridId(): string {\n\t\treturn '';\n\t}\n\n\tdetectChanges(): void {\n\t\tthis.changeDetectorRef.detectChanges();\n\t}\n\n\tprivate exposeGridId(): void {\n\t\tthis.elementRef.nativeElement.setAttribute('gui-grid-id', this.localGridId);\n\t}\n\n}\n","import {\n\tFabricBadgeModule,\n\tFabricButtonGroupModule,\n\tFabricButtonModule,\n\tFabricCheckboxModule,\n\tFabricChipModule,\n\tFabricDialogModule,\n\tFabricDropdownModule,\n\tFabricInlineDialogModule,\n\tFabricInputModule,\n\tFabricProgressBarModule,\n\tFabricProgressSpinnerModule,\n\tFabricRadioButtonModule,\n\tFabricRadioGroupModule,\n\tFabricSelectModule,\n\tFabricSpinnerModule,\n\tFabricTabModule,\n\tFabricToggleButtonModule\n} from '@generic-ui/fabric';\n\n\nexport const fabricImports = [\n\tFabricBadgeModule,\n\tFabricButtonModule,\n\tFabricButtonGroupModule,\n\tFabricCheckboxModule,\n\tFabricChipModule,\n\tFabricDropdownModule,\n\tFabricRadioButtonModule,\n\tFabricRadioGroupModule,\n\tFabricProgressBarModule,\n\tFabricProgressSpinnerModule,\n\tFabricSelectModule,\n\tFabricSpinnerModule,\n\tFabricTabModule,\n\tFabricToggleButtonModule,\n\tFabricInputModule,\n\tFabricDialogModule,\n\tFabricInlineDialogModule,\n\tFabricTabModule\n];\n","import { OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nexport abstract class Reactive implements OnDestroy {\n\n\tprivate readonly unsubscribe$ = new Subject<void>();\n\n\tprotected constructor() {\n\t}\n\n\tngOnDestroy() {\n\t\tthis.unsubscribe();\n\t}\n\n\tprotected unsubscribe(): void {\n\n\t\tif (this.unsubscribe$.isStopped) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.unsubscribe$.next();\n\t\tthis.unsubscribe$.complete();\n\t}\n\n\tprotected takeUntil() {\n\t\treturn takeUntil(this.unsubscribe$);\n\t}\n\n}\n","import { Reactive } from './reactive';\n\nexport abstract class SmartComponent extends Reactive {\n}\n","import { Observable, Subject } from 'rxjs';\n\nimport { AggregateId, DomainEvent, DomainEventBus } from '@generic-ui/hermes';\nimport { Structure } from './structure';\nimport { takeUntil } from 'rxjs/operators';\n\n\nexport abstract class StructureRepository {\n\n\tprivate readonly unsubscribe$ = new Subject();\n\n\tprotected constructor(domainEventBus: DomainEventBus) {\n\t\tdomainEventBus\n\t\t\t.ofEvent(\n\t\t\t\t...this.forEvents()\n\t\t\t)\n\t\t\t.pipe(\n\t\t\t\ttakeUntil(this.unsubscribe$)\n\t\t\t)\n\t\t\t.subscribe((event: DomainEvent) => {\n\n\t\t\t\ttry {\n\t\t\t\t\tthis.subs(event);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tabstract onStructure(aggregateId: AggregateId): Observable<Structure>;\n\n\tprotected abstract forEvents(): Array<typeof DomainEvent>;\n\n\tprotected abstract subs(event: DomainEvent): void;\n\n\tngOnDestroy() {\n\t\tthis.unsubscribe$.next();\n\t\tthis.unsubscribe$.complete();\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { StructureRepository } from '../../structure/read/structure.repository';\nimport { StructureId } from '../../structure-id';\nimport { Paging } from './paging';\nimport { Structure } from '../../structure/read/structure';\n\n\n@Injectable()\nexport class PagingRepository {\n\n\tconstructor(private structureRepository: StructureRepository) {\n\t}\n\n\ton(structureId: StructureId): Observable<Paging> {\n\n\t\treturn this.structureRepository\n\t\t\t\t   .onStructure(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   filter((structure: Structure) => structure.getId().toString() === structureId.toString()),\n\t\t\t\t\t   map((structure: Structure) => structure.getPaging())\n\t\t\t\t   );\n\t}\n\n}\n","import { AggregateId } from '@generic-ui/hermes';\n\nexport class StructureId extends AggregateId {\n\n\tconstructor(id: string) {\n\t\tsuper(id);\n\t}\n\n}\n","import { StructureId } from './structure-id';\n\nexport const globalStructureId = new StructureId('-1');\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { take } from 'rxjs/operators';\n\nimport { PagingRepository } from '../../domain/paging/read/paging.repository';\nimport { StructureId } from '../../domain/structure-id';\nimport { globalStructureId } from '../../domain/global-structure-id';\nimport { Paging } from '../../domain/paging/read/paging';\n\n\n@Injectable()\nexport class PagingReadModelService {\n\n\tconstructor(private pagingRepository: PagingRepository) {\n\t}\n\n\tonPaging(structureId: StructureId = globalStructureId): Observable<Paging> {\n\t\treturn this.pagingRepository.on(structureId);\n\t}\n\n\tonSinglePaging(structureId: StructureId = globalStructureId): Observable<Paging> {\n\t\treturn this.onPaging(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   take(1)\n\t\t\t\t   );\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../structure-id';\nimport { PagingConfig } from '../../paging-config';\n\nexport class SetPagingCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly config: PagingConfig) {\n\t\tsuper(structureId, 'SetPagingCommand');\n\t}\n\n\tgetPagingConfig(): PagingConfig {\n\t\treturn this.config;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\nimport { StructureId } from '../../../structure-id';\n\nexport class ChangePagesizeCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly pageSize: number) {\n\t\tsuper(structureId, 'ChangePagesizeCommand');\n\t}\n\n\tgetPageSize(): number {\n\t\treturn this.pageSize;\n\t}\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../structure-id';\n\nexport class NextPageCommand extends Command {\n\n\tconstructor(structureId: StructureId) {\n\t\tsuper(structureId, 'NextPageCommand');\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../structure-id';\n\nexport class PrevPageCommand extends Command {\n\n\tconstructor(structureId: StructureId) {\n\t\tsuper(structureId, 'PrevPageCommand');\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { CommandDispatcher } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../structure-id';\nimport { PagingConfig } from '../paging-config';\nimport { SetPagingCommand } from './set/set-paging.command';\nimport { ChangePagesizeCommand } from './change-pagesize/change-pagesize.command';\nimport { NextPageCommand } from './next-page/next-page.command';\nimport { PrevPageCommand } from './prev-page/prev-page.command';\n\n\n@Injectable()\nexport class PagingDispatcher {\n\n\tconstructor(private commandDispatcher: CommandDispatcher) {\n\t}\n\n\tsetPaging(structureId: StructureId, paging: PagingConfig): void {\n\t\tthis.commandDispatcher.dispatch(new SetPagingCommand(structureId, paging));\n\t}\n\n\tchangePageSize(structureId: StructureId, pageSize: number): void {\n\t\tthis.commandDispatcher.dispatch(new ChangePagesizeCommand(structureId, pageSize));\n\t}\n\n\tnextPage(structureId: StructureId): void {\n\t\tthis.commandDispatcher.dispatch(new NextPageCommand(structureId));\n\t}\n\n\tprevPage(structureId: StructureId): void {\n\t\tthis.commandDispatcher.dispatch(new PrevPageCommand(structureId));\n\t}\n}\n","import { Injectable } from '@angular/core';\n\nimport { PagingDispatcher } from '../../domain/paging/command/paging.dispatcher';\nimport { StructureId } from '../../domain/structure-id';\nimport { globalStructureId } from '../../domain/global-structure-id';\nimport { PagingConfig } from '../../domain/paging/paging-config';\n\n\n@Injectable()\nexport class PagingCommandService {\n\n\tconstructor(private pagingDispatcher: PagingDispatcher) {\n\t}\n\n\tenable(structureId: StructureId = globalStructureId): void {\n\t\tthis.pagingDispatcher.setPaging(structureId, { enabled: true });\n\t}\n\n\tdisable(structureId: StructureId = globalStructureId): void {\n\t\tthis.pagingDispatcher.setPaging(structureId, { enabled: false });\n\t}\n\n\tsetPaging(paging: PagingConfig, structureId: StructureId = globalStructureId): void {\n\t\tthis.pagingDispatcher.setPaging(structureId, paging);\n\t}\n\n\tchangePageSize(pageSize: number, structureId: StructureId = globalStructureId): void {\n\t\tthis.pagingDispatcher.changePageSize(structureId, pageSize);\n\t}\n\n\tnextPage(structureId: StructureId = globalStructureId): void {\n\t\tthis.pagingDispatcher.nextPage(structureId);\n\t}\n\n\tprevPage(structureId: StructureId = globalStructureId): void {\n\t\tthis.pagingDispatcher.prevPage(structureId);\n\t}\n\n\tgoToPage(pageNumber: number, currentPage: number) {\n\n\t\tif (currentPage < pageNumber) {\n\t\t\twhile (currentPage !== pageNumber) {\n\t\t\t\tthis.nextPage();\n\t\t\t\tcurrentPage += 1;\n\t\t\t}\n\t\t} else {\n\t\t\twhile (currentPage !== pageNumber) {\n\t\t\t\tthis.prevPage();\n\t\t\t\tcurrentPage -= 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tchangePagerTop(enabled: boolean, structureId: StructureId = globalStructureId): void {\n\t\tthis.pagingDispatcher.setPaging(structureId, { pagerTop: enabled });\n\t}\n\n\tchangePagerBottom(enabled: boolean, structureId: StructureId = globalStructureId): void {\n\t\tthis.pagingDispatcher.setPaging(structureId, { pagerBottom: enabled });\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\nimport { OriginItemEntity } from '../../command/origin/origin-item-entity';\nimport { StructureId } from '../../../structure-id';\n\n\n@Injectable()\nexport class StructureSourceOriginRepository {\n\n\tprivate origin = new Map<string, Array<any>>();\n\n\tprivate origin$ = new ReplaySubject<Map<string, Array<any>>>();\n\n\tsetOrigin(origin: Array<OriginItemEntity>, structureId: StructureId): void {\n\t\tthis.origin.set(structureId.toString(), origin);\n\t\tthis.origin$.next(this.origin);\n\t}\n\n\tonOrigin(structureId: StructureId): Observable<Array<any>> {\n\n\t\treturn this.origin$\n\t\t\t\t   .asObservable()\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((map: Map<string, Array<any>>) => {\n\t\t\t\t\t\t   return map.get(structureId.toString());\n\t\t\t\t\t   }),\n\t\t\t\t\t   distinctUntilChanged()\n\t\t\t\t   );\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\n\nimport { OriginItemEntity } from '../../command/origin/origin-item-entity';\nimport { StructureId } from '../../../structure-id';\n\n\n@Injectable()\nexport class StructurePreparedItemsRepository {\n\n\tprivate origin = new Map<string, Array<any>>();\n\n\tprivate origin$ = new ReplaySubject<Map<string, Array<any>>>();\n\n\tsetItems(origin: Array<OriginItemEntity>, structureId: StructureId): void {\n\t\tthis.origin.set(structureId.toString(), origin);\n\t\tthis.origin$.next(this.origin);\n\t}\n\n\tonPreparedItems(structureId: StructureId): Observable<Array<OriginItemEntity>> {\n\n\t\treturn this.origin$\n\t\t\t\t   .asObservable()\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((map: Map<string, Array<any>>) => {\n\t\t\t\t\t\t   return map.get(structureId.toString());\n\t\t\t\t\t   }),\n\t\t\t\t\t   distinctUntilChanged()\n\t\t\t\t   );\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { distinctUntilChanged, map, take } from 'rxjs/operators';\n\nimport { StructureRepository } from '../../domain/structure/read/structure.repository';\nimport { StructureSourceOriginRepository } from '../../domain/source/read/origin/structure.source-origin.repository';\nimport { StructureId } from '../../domain/structure-id';\nimport { globalStructureId } from '../../domain/global-structure-id';\nimport { Structure } from '../../domain/structure/read/structure';\nimport { ItemEntity } from '../../domain/source/item.entity';\nimport { StructurePreparedItemsRepository } from '../../domain/source/read/prepared/structure.prepared-items.repository';\n\n\n@Injectable()\nexport class SourceReadModelService {\n\n\tconstructor(private structureRepository: StructureRepository,\n\t\t\t\tprivate structurePreparedItemsRepository: StructurePreparedItemsRepository,\n\t\t\t\tprivate structureSourceOriginRepository: StructureSourceOriginRepository) {\n\t}\n\n\tonEntities(structureId: StructureId = globalStructureId): Observable<Array<ItemEntity>> {\n\n\t\treturn this.structureRepository\n\t\t\t\t   .onStructure(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((structure: Structure) => structure.getEntities()),\n\t\t\t\t\t   distinctUntilChanged((ents1: Array<ItemEntity>, ents2: Array<ItemEntity>) => {\n\t\t\t\t\t\t   if (ents1.length !== ents2.length) {\n\t\t\t\t\t\t\t   return false;\n\t\t\t\t\t\t   }\n\n\t\t\t\t\t\t   let flag = true;\n\n\t\t\t\t\t\t   ents1.forEach((ent, index) => {\n\t\t\t\t\t\t\t   if (!ent.equals(ents2[index])) {\n\t\t\t\t\t\t\t\t   flag = false;\n\t\t\t\t\t\t\t\t   return;\n\t\t\t\t\t\t\t   }\n\t\t\t\t\t\t   });\n\n\t\t\t\t\t\t   return flag;\n\t\t\t\t\t   })\n\t\t\t\t   );\n\t}\n\n\tonEntitiesSize(structureId: StructureId = globalStructureId): Observable<number> {\n\n\t\treturn this.onEntities(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((entities: Array<ItemEntity>) => {\n\t\t\t\t\t\t   return entities.length;\n\t\t\t\t\t   })\n\t\t\t\t   );\n\t}\n\n\tonSingleEntities(structureId: StructureId = globalStructureId): Observable<Array<ItemEntity>> {\n\n\t\treturn this.onEntities(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   take(1)\n\t\t\t\t   );\n\t}\n\n\tonOriginSize(structureId: StructureId = globalStructureId): Observable<number> {\n\t\treturn this.structureSourceOriginRepository\n\t\t\t\t   .onOrigin(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map(origin => origin.length)\n\t\t\t\t   );\n\t}\n\n\tonLoading(structureId: StructureId = globalStructureId): Observable<boolean> {\n\t\treturn this.structureRepository\n\t\t\t\t   .onStructure(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((structure: Structure) => structure.getSource().isLoading())\n\t\t\t\t   );\n\t}\n\n\tonPreparedEntities(structureId: StructureId = globalStructureId): Observable<any> {\n\t\treturn this.structurePreparedItemsRepository.onPreparedItems(structureId);\n\t}\n\n}\n","import { BehaviorSubject, Observable, ReplaySubject, Subject } from 'rxjs';\n\nexport abstract class Archive<T> {\n\n\tprivate readonly archive$: Subject<T>;\n\n\tprotected constructor(value?: T) {\n\t\tif (value) {\n\t\t\tthis.archive$ = new BehaviorSubject(value);\n\t\t} else {\n\t\t\tthis.archive$ = new ReplaySubject(1);\n\t\t}\n\t}\n\n\tonValue(): Observable<T> {\n\t\treturn this.archive$.asObservable();\n\t}\n\n\tnext(value: T): void {\n\t\tthis.archive$.next(value);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { Archive } from '../../../../../common/cdk/archive';\n\nimport { PagingDisplayMode } from './paging-display-mode';\n\n\n@Injectable()\nexport class StructurePagingDisplayModeArchive extends Archive<PagingDisplayMode> {\n\n\tconstructor() {\n\t\tsuper(PagingDisplayMode.BASIC);\n\t}\n\n\tonValue(): Observable<PagingDisplayMode> {\n\t\treturn super.onValue();\n\t\t// .pipe(\n\t\t// \tdistinctUntilChanged()\n\t\t// );\n\t}\n\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnInit } from '@angular/core';\n\nimport { SmartComponent } from '../../../../common/cdk/smart-component';\n\nimport { Paging } from '../../domain/paging/read/paging';\nimport { PagingReadModelService } from '../../ui-api/paging/paging-read-model.service';\nimport { PagingCommandService } from '../../ui-api/paging/paging-command.service';\nimport { SourceReadModelService } from '../../ui-api/source/source-read-model.service';\nimport { StructurePagingDisplayModeArchive } from './mode/structure-paging.display-mode.archive';\nimport { PagingDisplayMode } from './mode/paging-display-mode';\n\n\n@Component({\n\tselector: 'gui-structure-paging',\n\ttemplateUrl: 'structure-paging.component.html',\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class StructurePagingComponent extends SmartComponent implements OnInit {\n\n\tsourceSize: number;\n\n\tpaging: Paging;\n\n\talternativeDisplay: boolean = false;\n\n\tconstructor(private changeDetectorRef: ChangeDetectorRef,\n\t\t\t\tprivate pagingQueryService: PagingReadModelService,\n\t\t\t\tprivate pagingCommandService: PagingCommandService,\n\t\t\t\tprivate sourceQueryService: SourceReadModelService,\n\t\t\t\tprivate structurePagingDisplayModeArchive: StructurePagingDisplayModeArchive) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\n\t\tthis.structurePagingDisplayModeArchive\n\t\t\t.onValue()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((mode: PagingDisplayMode) => {\n\t\t\t\tthis.alternativeDisplay = mode === PagingDisplayMode.ADVANCED;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\t\tthis.pagingQueryService\n\t\t\t.onPaging()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((paging: Paging) => {\n\t\t\t\tthis.paging = paging;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\t\tthis.sourceQueryService\n\t\t\t.onOriginSize()\n\t\t\t.pipe(this.takeUntil())\n\t\t\t.subscribe((size: number) => {\n\t\t\t\tthis.sourceSize = size;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\t}\n\n\tchangePageSize(pageSize: number) {\n\t\tthis.pagingCommandService.changePageSize(pageSize);\n\t}\n\n\tnextPage(): void {\n\n\t\tif (!this.sourceSize) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.pagingCommandService.nextPage();\n\t}\n\n\tprevPage(): void {\n\t\tthis.pagingCommandService.prevPage();\n\t}\n\n}\n","export class Paging {\n\n\tconstructor(private readonly enabled: boolean,\n\t\t\t\tprivate readonly page: number,\n\t\t\t\tprivate readonly pageSize: number,\n\t\t\t\tprivate readonly pageSizes: Array<number>,\n\t\t\t\tprivate readonly pagerTop: boolean,\n\t\t\t\tprivate readonly pagerBottom: boolean,\n\t\t\t\tprivate readonly isNextDisabled: boolean,\n\t\t\t\tprivate readonly isPrevDisabled: boolean,\n\t\t\t\tprivate readonly start: number,\n\t\t\t\tprivate readonly end: number,\n\t\t\t\tprivate readonly sourceSize: number) {\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n\tgetPage(): number {\n\t\treturn this.page;\n\t}\n\n\tgetPageSize(): number {\n\t\treturn this.pageSize;\n\t}\n\n\tgetPageSizes(): Array<number> {\n\t\treturn this.pageSizes;\n\t}\n\n\tisPagerTop(): boolean {\n\t\treturn this.pagerTop;\n\t}\n\n\tisPagerBottom(): boolean {\n\t\treturn this.pagerBottom;\n\t}\n\n\tisNextPageDisabled(): boolean {\n\t\treturn this.isNextDisabled;\n\t}\n\n\tisPrevPageDisabled(): boolean {\n\t\treturn this.isPrevDisabled;\n\t}\n\n\tgetStart(): number {\n\t\treturn this.start;\n\t}\n\n\tgetEnd(): number {\n\t\treturn this.end;\n\t}\n\n\tgetSourceSize(): number {\n\t\treturn this.sourceSize;\n\t}\n\n\tcalculateVisiblePages(currentPage: number, numberOfVisiblePages: number, page: number): boolean {\n\t\treturn currentPage - numberOfVisiblePages < page && page < currentPage + numberOfVisiblePages;\n\t}\n\n\tsample(source: Array<any>): Array<any> {\n\n\t\tlet start = this.getStart();\n\n\t\tif (start !== 0) {\n\t\t\tstart -= 1;\n\t\t}\n\n\t\treturn source.slice(start, this.getEnd());\n\t}\n\n}\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, OnChanges, Output } from '@angular/core';\n\nimport { Paging } from '../../../domain/paging/read/paging';\n\n@Component({\n\tselector: 'gui-structure-paging-navigator',\n\ttemplateUrl: `structure-paging-navigator.component.html`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class StructurePagingNavigatorComponent implements OnChanges {\n\n\t@Input()\n\tpaging: Paging;\n\n\t@Input()\n\tsourceSize: number;\n\n\t@Output()\n\tnextPageChanged = new EventEmitter();\n\n\t@Output()\n\tprevPageChanged = new EventEmitter();\n\n\tprevDisabled: boolean = false;\n\n\tnextDisabled: boolean = false;\n\n\tngOnChanges() {\n\t\tthis.calculatePrev();\n\t\tthis.calculateNext();\n\t}\n\n\tprevPage(): void {\n\t\tthis.prevPageChanged.emit();\n\t}\n\n\tnextPage(): void {\n\t\tthis.nextPageChanged.emit();\n\t}\n\n\tprivate calculatePrev(): void {\n\n\t\tif (!this.paging) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.prevDisabled = this.paging.isPrevPageDisabled();\n\t}\n\n\tprivate calculateNext(): void {\n\n\t\tif (!this.paging && !this.sourceSize) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.nextDisabled = this.paging.isNextPageDisabled();\n\t}\n\n}\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output } from '@angular/core';\n\nimport { Paging } from '../../../domain/paging/read/paging';\n\n\n@Component({\n\tselector: 'gui-structure-paging-select',\n\ttemplateUrl: `structure-paging-select.component.html`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class StructurePagingSelectComponent {\n\n\t@Input()\n\tpaging: Paging;\n\n\t@Output()\n\tpageSizeChanged = new EventEmitter();\n\n\tchangePageSize(pageSize: number): void {\n\t\tthis.pageSizeChanged.emit(pageSize);\n\t}\n}\n","import { ChangeDetectionStrategy, Component, Input, OnChanges, SimpleChanges } from '@angular/core';\n\nimport { Paging } from '../../../domain/paging/read/paging';\n\n\n@Component({\n\tselector: 'gui-structure-paging-stats',\n\ttemplateUrl: `structure-paging-stats.component.html`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class StructurePagingStatsComponent implements OnChanges {\n\n\t@Input()\n\tpaging: Paging;\n\n\tsourceSize: number;\n\n\tfirstItemIndex: number;\n\n\tlastItemIndex: number;\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tthis.calculate();\n\t}\n\n\tcalculate(): void {\n\t\tif (this.paging) {\n\t\t\tthis.firstItemIndex = this.paging.getStart();\n\t\t\tthis.lastItemIndex = this.paging.getEnd();\n\t\t\tthis.sourceSize = this.paging.getSourceSize();\n\t\t}\n\t}\n\n\tisSourceNotEmpty(): boolean {\n\t\treturn this.sourceSize > 0;\n\t}\n\n}\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, OnChanges, Output } from '@angular/core';\n\nimport { Paging } from '../../../../domain/paging/read/paging';\nimport { PagingCommandService } from '../../../../ui-api/paging/paging-command.service';\n\n\n@Component({\n\tselector: 'gui-structure-alternative-paging-navigator',\n\ttemplateUrl: `structure-alternative-paging-navigator.component.html`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class StructureAlternativePagingNavigatorComponent implements OnChanges {\n\n\t@Input()\n\tpaging: Paging;\n\n\t@Input()\n\tsourceSize: number;\n\n\t@Output()\n\tnextPageChanged = new EventEmitter();\n\n\t@Output()\n\tprevPageChanged = new EventEmitter();\n\n\tprevDisabled: boolean = false;\n\n\tnextDisabled: boolean = false;\n\n\tconstructor(private pagingCommandService: PagingCommandService) {\n\t}\n\n\tngOnChanges() {\n\t\tthis.calculatePrev();\n\t\tthis.calculateNext();\n\t}\n\n\tprevPage(): void {\n\t\tthis.prevPageChanged.emit();\n\t}\n\n\tnextPage(): void {\n\t\tthis.nextPageChanged.emit();\n\t}\n\n\tfirstPage(): void {\n\t\tthis.pagingCommandService.goToPage(1, this.paging.getPage());\n\t}\n\n\tlastPage(): void {\n\t\tlet numberOfPages = Math.ceil(this.sourceSize / this.paging.getPageSize());\n\t\tthis.pagingCommandService.goToPage(numberOfPages, this.paging.getPage());\n\t}\n\n\tprivate calculatePrev(): void {\n\n\t\tif (!this.paging) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.prevDisabled = this.paging.isPrevPageDisabled();\n\t}\n\n\tprivate calculateNext(): void {\n\n\t\tif (!this.paging && !this.sourceSize) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.nextDisabled = this.paging.isNextPageDisabled();\n\t}\n\n}\n","import { ChangeDetectionStrategy, Component, Input, OnChanges, SimpleChanges } from '@angular/core';\n\nimport { Paging } from '../../../../domain/paging/read/paging';\nimport { PagingCommandService } from '../../../../ui-api/paging/paging-command.service';\n\n\n@Component({\n\tselector: 'gui-structure-alternative-paging-pages',\n\ttemplateUrl: `structure-alternative-paging-pages.component.html`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class StructureAlternativePagingPagesComponent implements OnChanges {\n\n\t@Input()\n\tpaging: Paging;\n\n\t@Input()\n\tsourceSize: number = 0;\n\n\tcurrentPage: number;\n\n\tpages: Array<number>;\n\n\tnumberOfVisiblePages: number = 3;\n\n\tconstructor(private pagingCommandService: PagingCommandService) {\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tthis.calculate();\n\t}\n\n\tcalculate(): void {\n\t\tif (this.paging && this.sourceSize) {\n\t\t\tlet numberOfPages = Math.ceil(this.sourceSize / this.paging.getPageSize());\n\n\t\t\tthis.currentPage = this.paging.getPage();\n\n\t\t\tthis.pages = [];\n\t\t\tif (this.pages.length <= numberOfPages) {\n\t\t\t\tfor (let i = 1; i <= numberOfPages; i++) {\n\t\t\t\t\tthis.pages.push(i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\tisSourceNotEmpty(): boolean {\n\t\treturn this.sourceSize > 0;\n\t}\n\n\tgoToPage(pageNumber: number) {\n\t\tconst currentPage = this.paging.getPage();\n\t\tthis.pagingCommandService.goToPage(pageNumber, currentPage);\n\t}\n\n\tcalculateVisiblePages(page: number): boolean {\n\t\treturn this.paging.calculateVisiblePages(this.currentPage, this.numberOfVisiblePages, page);\n\t}\n\n\tactivePage(page: number): boolean {\n\t\treturn this.currentPage === page;\n\t}\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { FabricModule } from '@generic-ui/fabric';\n\nimport { StructurePagingComponent } from './structure-paging.component';\nimport { StructurePagingNavigatorComponent } from './navigator/structure-paging-navigator.component';\nimport { StructurePagingSelectComponent } from './select/structure-paging-select.component';\nimport { StructurePagingStatsComponent } from './stats/structure-paging-stats.component';\nimport { StructureAlternativePagingNavigatorComponent } from './alternative-paging/navigator/structure-alternative-paging-navigator.component';\nimport { StructureAlternativePagingPagesComponent } from './alternative-paging/pages/structure-alternative-paging-pages.component';\n\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tFabricModule\n\t],\n\tdeclarations: [\n\t\tStructurePagingComponent,\n\t\tStructurePagingNavigatorComponent,\n\t\tStructurePagingSelectComponent,\n\t\tStructurePagingStatsComponent,\n\t\tStructureAlternativePagingNavigatorComponent,\n\t\tStructureAlternativePagingPagesComponent\n\t],\n\texports: [\n\t\tStructurePagingComponent,\n\t\tStructurePagingNavigatorComponent,\n\t\tStructurePagingSelectComponent,\n\t\tStructurePagingStatsComponent,\n\t\tStructureAlternativePagingNavigatorComponent,\n\t\tStructureAlternativePagingPagesComponent\n\t]\n})\nexport class StructurePagingModule {\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({ name: 'numberFormatter' })\nexport class NumberFormatterPipe implements PipeTransform {\n\n\ttransform(number: number): string {\n\t\treturn number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ');\n\t}\n\n}\n","import { NgModule } from '@angular/core';\n\nimport { NumberFormatterPipe } from './number-formatter.pipe';\n\n@NgModule({\n\tdeclarations: [\n\t\tNumberFormatterPipe\n\t],\n\texports: [\n\t\tNumberFormatterPipe\n\t]\n})\nexport class NumberFormatterModule {\n\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\n\n@Component({\n\tselector: 'gui-info-dialog',\n\ttemplate: `\n\t\t<div class=\"gui-structure-info-modal\">\n\n\t\t\t<p class=\"gui-dialog-title gui-info-title\">Generic UI Grid</p>\n\n\n\t\t\t<p class=\"gui-info-version\">\n\t\t\t\tver. 0.10.1\n\t\t\t</p>\n\n\t\t\t<p class=\"gui-quote\">\n\t\t\t\t\"The best way to success is to help others succeed.\"\n\t\t\t</p>\n\n\t\t\t<br/>\n\n\t\t\t<section>\n\t\t\t\t<p>Links:</p>\n\t\t\t\t<ul>\n\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href=\"https://generic-ui.com/\">Website</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href=\"https://generic-ui.com/guide/\">Documentation</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href=\"https://github.com/generic-ui/generic-ui/tree/master/ngx-grid\">Github</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\n\t\t\t\t<br/>\n\n\t\t\t\t<p>Feedback:</p>\n\t\t\t\t<ul>\n\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href=\"https://github.com/generic-ui/generic-ui/issues\">Report a bug</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href=\"https://github.com/generic-ui/generic-ui/issues\">Suggest an idea</a>\n\t\t\t\t\t</li>\n\n\t\t\t\t</ul>\n\t\t\t</section>\n\t\t</div>\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class StructureInfoModalComponent {\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class StructureCreatedEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'StructureCreatedEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class VerticalScrollEnabledSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'VerticalScrollEnabledSetEvent');\n\t}\n}\n","import { Injectable } from '@angular/core';\n\nimport { InMemoryStore } from '@generic-ui/hermes';\n\nimport { StructureAggregate } from '../../../domain/structure/command/structure.aggregate';\n\n\n@Injectable()\nexport class InMemoryStructureStore extends InMemoryStore<StructureAggregate> {\n}\n","import { ItemEntity } from '../../../source/item.entity';\n\nexport class SelectedRowsList {\n\n\tconstructor(private readonly rowIds: Array<string>) {\n\t}\n\n\tisRowSelected(entity: ItemEntity): boolean {\n\t\treturn !!(this.rowIds.find((id) => entity.equalsById(id)));\n\t}\n\n\tgetIds(): Array<string> {\n\t\treturn this.rowIds;\n\t}\n}\n","import { SelectedRowsList } from './selected-rows/selected-rows-list';\n\nexport class Formation {\n\n\tprivate readonly selectedRowsList: SelectedRowsList;\n\n\tconstructor(selectedRows: Array<string>) {\n\t\tthis.selectedRowsList = new SelectedRowsList(selectedRows);\n\t}\n\n\tgetSelectedRows(): SelectedRowsList {\n\t\treturn this.selectedRowsList;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { FormationAggregate } from './command/formation-aggregate';\nimport { Formation } from './read/formation';\n\n\n@Injectable()\nexport class FormationConverter {\n\n\tconvert(aggregate: FormationAggregate): Formation {\n\n\t\tconst rows = aggregate.getSelectedRows();\n\n\t\treturn new Formation(rows);\n\t}\n}\n","import { SchemaTheme } from '../schema-theme';\nimport { SchemaRowColoring } from '../schema-row-coloring';\n\nexport class SchemaCssClass {\n\n\tconstructor(public readonly verticalGrid: boolean,\n\t\t\t\tpublic readonly horizontalGrid: boolean,\n\t\t\t\tpublic readonly theme: SchemaTheme,\n\t\t\t\tpublic readonly rowColoring: SchemaRowColoring) {\n\t}\n\n\tgetRowColoring(): SchemaRowColoring {\n\t\treturn this.rowColoring;\n\t}\n}\n","import { SchemaRowColoring } from '../schema-row-coloring';\nimport { SchemaTheme } from '../schema-theme';\nimport { SchemaColumnHeader } from './schema-column-header';\nimport { SchemaCssClass } from './schema-css-class';\n\nexport class Schema {\n\n\tconstructor(private readonly width: number,\n\t\t\t\tprivate readonly height: number,\n\t\t\t\tprivate readonly containerHeight: number,\n\t\t\t\tprivate readonly verticalGridEnabled: boolean,\n\t\t\t\tprivate readonly horizontalGridEnabled: boolean,\n\t\t\t\tprivate readonly theme: SchemaTheme,\n\t\t\t\tprivate readonly columnHeader: SchemaColumnHeader,\n\t\t\t\tprivate readonly rowColoring: SchemaRowColoring) {\n\t}\n\n\tgetRowColoring(): SchemaRowColoring {\n\t\treturn this.rowColoring;\n\t}\n\n\tgetTheme(): SchemaTheme {\n\t\treturn this.theme;\n\t}\n\n\tgetHeight(): number {\n\t\treturn this.height;\n\t}\n\n\tgetContainerHeight(): number {\n\t\treturn this.containerHeight;\n\t}\n\n\tgetWidth(): number {\n\t\treturn this.width;\n\t}\n\n\tisVerticalGridEnabled(): boolean {\n\t\treturn this.verticalGridEnabled;\n\t}\n\n\tisHorizontalGridEnabled(): boolean {\n\t\treturn this.horizontalGridEnabled;\n\t}\n\n\tgetColumnHeader(): SchemaColumnHeader {\n\t\treturn this.columnHeader;\n\t}\n\n\tgetCssClasses(): SchemaCssClass {\n\t\treturn new SchemaCssClass(\n\t\t\tthis.isVerticalGridEnabled(),\n\t\t\tthis.isHorizontalGridEnabled(),\n\t\t\tthis.getTheme(),\n\t\t\tthis.getRowColoring()\n\t\t);\n\t}\n\n}\n","export class SchemaColumnHeader {\n\n\tconstructor(private readonly top: boolean,\n\t\t\t\tprivate readonly bottom: boolean) {\n\t}\n\n\tisTopHeaderEnabled(): boolean {\n\t\treturn this.top;\n\t}\n\n\tisBottomHeaderEnabled(): boolean {\n\t\treturn this.bottom;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { SchemaAggregate } from './command/schema-aggregate';\nimport { Schema } from './read/schema';\nimport { ColumnHeaderEntity } from './command/column-header/column-header.entity';\nimport { SchemaColumnHeader } from './read/schema-column-header';\n\n\n@Injectable()\nexport class SchemaConverter {\n\n\tconvert(aggregate: SchemaAggregate): Schema {\n\n\t\tconst columnHeader = aggregate.getColumnHeader();\n\n\t\treturn new Schema(\n\t\t\taggregate.getWidth(),\n\t\t\taggregate.getHeight(),\n\t\t\taggregate.getContainerHeight(),\n\t\t\taggregate.isVerticalGridEnabled(),\n\t\t\taggregate.isHorizontalGridEnabled(),\n\t\t\taggregate.getTheme(),\n\t\t\tthis.convertColumnHeader(columnHeader),\n\t\t\taggregate.getRowColoring()\n\t\t);\n\t}\n\n\tprivate convertColumnHeader(columnHeader: ColumnHeaderEntity): SchemaColumnHeader {\n\t\treturn new SchemaColumnHeader(columnHeader.isHeaderOnTop(), columnHeader.isHeaderOnBottom());\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { PagingAggregate } from './command/paging.aggregate';\nimport { Paging } from './read/paging';\n\n\n@Injectable()\nexport class PagingConverter {\n\n\tconvert(aggregate: PagingAggregate): Paging {\n\t\treturn new Paging(\n\t\t\taggregate.isEnabled(),\n\t\t\taggregate.getPage(),\n\t\t\taggregate.getPageSize(),\n\t\t\taggregate.getPageSizes(),\n\t\t\taggregate.isPagerTop(),\n\t\t\taggregate.isPagerBottom(),\n\t\t\taggregate.isNextPageDisabled(),\n\t\t\taggregate.isPrevPageDisabled(),\n\t\t\taggregate.calculateStart(),\n\t\t\taggregate.calculateEnd(),\n\t\t\taggregate.getSourceSize()\n\t\t);\n\t}\n\n}\n","export class Source {\n\n\tconstructor(private readonly loading: boolean) {\n\t}\n\n\tisLoading(): boolean {\n\t\treturn this.loading;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Source } from './read/source';\nimport { SourceManager } from './command/source.manager';\n\n@Injectable()\nexport class SourceConverter {\n\n\tconvert(aggregate: SourceManager): Source {\n\t\treturn new Source(aggregate.isLoading());\n\t}\n\n}\n","export class VerticalFormationReadModel {\n\n\tconstructor(private readonly enabled: boolean,\n\t\t\t\tprivate readonly topMargin: number,\n\t\t\t\tprivate readonly containerHeight: number,\n\t\t\t\tprivate readonly viewportHeight: number,\n\t\t\t\tprivate readonly rowHeight: number) {\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n\tgetTopMargin(): number {\n\t\treturn this.topMargin;\n\t}\n\n\tgetContainerHeight(): number {\n\t\treturn this.containerHeight;\n\t}\n\n\tgetViewPortHeight(): number {\n\t\treturn this.viewportHeight;\n\t}\n\n\tgetRowHeight(): number {\n\t\treturn this.rowHeight;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { VerticalFormation } from '../../command/vertical-formation/vertical-formation';\nimport { VerticalFormationReadModel } from './vertical-formation.read-model';\n\n\n@Injectable()\nexport class VerticalFormationConverter {\n\n\tconvert(verticalFormation: VerticalFormation): VerticalFormationReadModel {\n\n\t\tconst enabled = verticalFormation.isEnabled(),\n\t\t\ttopMargin = verticalFormation.getTopMargin(),\n\t\t\tcontainerHeight = verticalFormation.calcFullHeight(),\n\t\t\tviewportHeight = verticalFormation.getViewPortHeight(),\n\t\t\trowHeight = verticalFormation.getRowHeight();\n\n\t\treturn new VerticalFormationReadModel(enabled, topMargin, containerHeight, viewportHeight, rowHeight);\n\t}\n\n}\n","import { AggregateId, ReadModel } from '@generic-ui/hermes';\n\nimport { Formation } from '../../formation/read/formation';\nimport { Schema } from '../../schema/read/schema';\nimport { Paging } from '../../paging/read/paging';\nimport { Source } from '../../source/read/source';\nimport { ItemEntity } from '../../source/item.entity';\nimport { VerticalFormationReadModel } from './vertical-formation/vertical-formation.read-model';\n\n\nexport class Structure extends ReadModel {\n\n\tprivate readonly formation: Formation;\n\n\tprivate readonly schema: Schema;\n\n\tprivate readonly paging: Paging;\n\n\tprivate readonly entities: Array<ItemEntity>;\n\n\tprivate readonly source: Source;\n\n\tprivate readonly verticalFormation: VerticalFormationReadModel;\n\n\tconstructor(uid: AggregateId,\n\t\t\t\tformation: Formation,\n\t\t\t\tschema: Schema,\n\t\t\t\tpaging: Paging,\n\t\t\t\tentities: Array<ItemEntity>,\n\t\t\t\tsource: Source,\n\t\t\t\tverticalFormation: VerticalFormationReadModel) {\n\t\tsuper(uid);\n\t\tthis.formation = formation;\n\t\tthis.schema = schema;\n\t\tthis.paging = paging;\n\t\tthis.entities = entities;\n\t\tthis.source = source;\n\t\tthis.verticalFormation = verticalFormation;\n\t}\n\n\tgetFormation(): Formation {\n\t\treturn this.formation;\n\t}\n\n\tgetSchema(): Schema {\n\t\treturn this.schema;\n\t}\n\n\tgetPaging(): Paging {\n\t\treturn this.paging;\n\t}\n\n\tgetEntities(): Array<ItemEntity> {\n\t\treturn this.entities;\n\t}\n\n\tgetSource(): Source {\n\t\treturn this.source;\n\t}\n\n\tgetVerticalFormation(): VerticalFormationReadModel {\n\t\treturn this.verticalFormation;\n\t}\n\n\tgetSelectedEntities(): Array<ItemEntity> {\n\n\t\tconst selectedIds = this.formation.getSelectedRows().getIds();\n\n\t\treturn this.entities.filter((entity: ItemEntity) => {\n\t\t\treturn selectedIds.some((id: string) => entity.equalsById(id));\n\t\t});\n\t}\n\n\tgetTopMargin(): number {\n\t\treturn this.verticalFormation.getTopMargin();\n\t}\n\n\tgetContainerHeight(): number {\n\t\treturn this.verticalFormation.getContainerHeight();\n\t}\n\n\tisLoaderVisible(): boolean {\n\t\tif (this.getSchema().getHeight() > 150) {\n\t\t\treturn this.getSource().isLoading();\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tisTopHeaderEnabled(): boolean {\n\t\treturn this.schema.getColumnHeader().isTopHeaderEnabled();\n\t\t// && this.presentation.getColumns().length > 0; // TODO Move schema.topHeader to presentation\n\t}\n\n\tisBottomHeaderEnabled(): boolean {\n\t\treturn this.schema.getColumnHeader().isBottomHeaderEnabled();\n\t\t// && this.presentation.getColumns().length > 0; // TODO Move schema.bottomHeader to presentation\n\t}\n\n\tisReadyToDisplay(): boolean {\n\t\treturn this.entities.length > 0;\n\t\t// this.presentation.getColumns().length > 0; // TODO presentation getColumns\n\t}\n\n\tisVerticalScrollEnabled(): boolean {\n\t\treturn this.verticalFormation.isEnabled();\n\t}\n\n}\n\n","import { Entity, RandomStringGenerator } from '@generic-ui/hermes';\n\n\n@Entity\nexport class ItemEntity {\n\n\tprivate readonly id: string;\n\n\tprivate readonly data: any;\n\n\tprivate readonly position: number;\n\n\tprivate readonly version: number = 0;\n\n\tconstructor(data: any,\n\t\t\t\tposition: number,\n\t\t\t\tid?: string,\n\t\t\t\tversion: number = 0) {\n\t\tthis.data = data;\n\t\tthis.position = position;\n\t\tthis.version = version;\n\t\tif (!id) {\n\t\t\tthis.id = RandomStringGenerator.generate();\n\t\t} else {\n\t\t\tthis.id = id;\n\t\t}\n\t}\n\n\tgetData(): any {\n\t\treturn this.data;\n\t}\n\n\tgetUiId(): string {\n\t\treturn 'gui' + this.id.replace(/-/g, '');\n\t}\n\n\tgetId(): string {\n\t\treturn this.id;\n\t}\n\n\tgetVersion(): number {\n\t\treturn this.version;\n\t}\n\n\tgetPosition(): number {\n\t\treturn this.position;\n\t}\n\n\tisEven(): boolean {\n\t\treturn this.position % 2 === 0;\n\t}\n\n\tisOdd(): boolean {\n\t\treturn this.position % 2 === 1;\n\t}\n\n\tequals(entity: ItemEntity): boolean {\n\t\treturn this.id === entity.id && this.getVersion() === entity.getVersion();\n\t}\n\n\tequalsById(id: string): boolean {\n\t\treturn this.id === id;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { FormationConverter } from '../formation/formation.converter';\nimport { SchemaConverter } from '../schema/schema.converter';\nimport { PagingConverter } from '../paging/paging.converter';\nimport { SourceConverter } from '../source/source.converter';\nimport { VerticalFormationConverter } from './read/vertical-formation/vertical-formation.converter';\nimport { StructureAggregate } from './command/structure.aggregate';\nimport { Structure } from './read/structure';\nimport { OriginItemEntity } from '../source/command/origin/origin-item-entity';\nimport { ItemEntity } from '../source/item.entity';\n\n\n@Injectable()\nexport class StructureConverter {\n\n\tconstructor(private formationConverter: FormationConverter,\n\t\t\t\tprivate schemaConverter: SchemaConverter,\n\t\t\t\tprivate pagingConverter: PagingConverter,\n\t\t\t\tprivate sourceConverter: SourceConverter,\n\t\t\t\tprivate verticalFormationConverter: VerticalFormationConverter) {\n\t}\n\n\tconvert(aggregate: StructureAggregate): Structure {\n\n\t\tconst formationAggregate = aggregate.getFormation(),\n\t\t\tschemaAggregate = aggregate.getSchema(),\n\t\t\tpagingAggregate = aggregate.getPaging(),\n\t\t\tsourceQuery = aggregate.getEntities(),\n\t\t\tsourceCoordinator = aggregate.getSource(),\n\t\t\tverticalFormation = aggregate.getVerticalFormation();\n\n\t\treturn new Structure(\n\t\t\taggregate.getId(),\n\t\t\tthis.formationConverter.convert(formationAggregate),\n\t\t\tthis.schemaConverter.convert(schemaAggregate),\n\t\t\tthis.pagingConverter.convert(pagingAggregate),\n\t\t\tthis.convertSource(sourceQuery),\n\t\t\tthis.sourceConverter.convert(sourceCoordinator),\n\t\t\tthis.verticalFormationConverter.convert(verticalFormation)\n\t\t);\n\t}\n\n\tprivate convertSource(source: Array<OriginItemEntity>): Array<ItemEntity> {\n\t\treturn source.map((originItem: OriginItemEntity) => {\n\t\t\treturn new ItemEntity(originItem.rawData, originItem.getPosition(), originItem.id, originItem.getVersion());\n\t\t});\n\t}\n}\n","import { Injectable } from '@angular/core';\n\nimport { InMemoryReadModelStore } from '@generic-ui/hermes';\n\nimport { Structure } from '../../../../domain/structure/read/structure';\nimport { StructureAggregate } from '../../../../domain/structure/command/structure.aggregate';\nimport { InMemoryStructureStore } from '../in-memory.structure.store';\nimport { StructureConverter } from '../../../../domain/structure/structure.converter';\n\n\n@Injectable()\nexport class InMemoryStructureReadStore extends InMemoryReadModelStore<Structure, StructureAggregate> {\n\n\tconstructor(private inMemoryProjectStore: InMemoryStructureStore,\n\t\t\t\tprivate structureConverter: StructureConverter) {\n\t\tsuper(inMemoryProjectStore);\n\t}\n\n\ttoReadModel(aggregate: StructureAggregate): Structure {\n\t\treturn this.structureConverter.convert(aggregate);\n\t}\n\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class RowHeightSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'RowHeightSetEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class SchemaThemeSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'SchemaThemeSetEvent');\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\n\nimport { DomainEvent, DomainEventBus } from '@generic-ui/hermes';\n\nimport { Reactive } from '../../../../../../common/cdk/reactive';\nimport { StructureId } from '../../../structure-id';\nimport { VerticalFormationReadModel } from './vertical-formation.read-model';\nimport { StructureCreatedEvent } from '../../command/create-structure/structure-created.event';\nimport { VerticalScrollEnabledSetEvent } from '../../command/vertical-formation/set-enabled/vertical-scroll-enabled-set.event';\nimport { InMemoryStructureReadStore } from '../../../../infrastructure/in-memory/structure/read/in-memory-structure.read-store';\nimport { RowHeightSetEvent } from '../../command/vertical-formation/set-row-height/row-height-set.event';\nimport { Structure } from '../structure';\nimport { SchemaThemeSetEvent } from '../../../schema/command/theme/schema-theme-set.event';\n\n\n@Injectable()\nexport class VerticalFormationRepository extends Reactive {\n\n\tprivate readonly verticalFormation = new Map<string, VerticalFormationReadModel>();\n\n\tprivate readonly verticalFormation$ = new ReplaySubject<Map<string, VerticalFormationReadModel>>();\n\n\tconstructor(private readonly domainEventBus: DomainEventBus,\n\t\t\t\tprivate inMemoryStructureQueryStore: InMemoryStructureReadStore) {\n\t\tsuper();\n\n\t\tthis.domainEventBus\n\t\t\t.ofEvent(\n\t\t\t\tStructureCreatedEvent,\n\t\t\t\tVerticalScrollEnabledSetEvent,\n\t\t\t\tRowHeightSetEvent,\n\t\t\t\tSchemaThemeSetEvent\n\t\t\t)\n\t\t\t.pipe(this.takeUntil())\n\t\t\t.subscribe((event: DomainEvent) => {\n\n\t\t\t\tconst aggregateId = event.getAggregateId();\n\n\t\t\t\tconst optStructure = this.inMemoryStructureQueryStore.getById(aggregateId);\n\n\t\t\t\toptStructure.ifPresent((structure: Structure) => {\n\t\t\t\t\tconst verticalFormation = structure.getVerticalFormation(),\n\t\t\t\t\t\tstructureId = structure.getId();\n\n\t\t\t\t\tthis.next(structureId, verticalFormation);\n\t\t\t\t});\n\n\t\t\t});\n\t}\n\n\tonVerticalScrollEnabled(structureId: StructureId): Observable<boolean> {\n\n\t\treturn this.onVerticalFormation(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((v: VerticalFormationReadModel) => v.isEnabled())\n\t\t\t\t   );\n\t}\n\n\tonRowHeight(structureId: StructureId): Observable<number> {\n\n\t\treturn this.onVerticalFormation(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((v: VerticalFormationReadModel) => v.getRowHeight())\n\t\t\t\t   );\n\t}\n\n\tprivate onVerticalFormation(structureId: StructureId): Observable<VerticalFormationReadModel> {\n\n\t\treturn this.verticalFormation$\n\t\t\t\t   .asObservable()\n\t\t\t\t   .pipe(\n\t\t\t\t\t   filter((idToVerticalFormation: Map<string, VerticalFormationReadModel>) => {\n\n\t\t\t\t\t\t   const key = structureId.getId();\n\n\t\t\t\t\t\t   return idToVerticalFormation.has(key);\n\t\t\t\t\t   }),\n\t\t\t\t\t   map((idToVerticalFormation: Map<string, VerticalFormationReadModel>) => idToVerticalFormation.get(structureId.getId()))\n\t\t\t\t   );\n\t}\n\n\tprivate next(structureId: StructureId, verticalFormation: VerticalFormationReadModel): void {\n\t\tthis.verticalFormation.set(structureId.toString(), verticalFormation);\n\t\tthis.verticalFormation$.next(this.verticalFormation);\n\t}\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\n\nimport { AggregateId } from '@generic-ui/hermes';\n\nimport { StructureRepository } from '../../domain/structure/read/structure.repository';\nimport { globalStructureId } from '../../domain/global-structure-id';\nimport { Structure } from '../../domain/structure/read/structure';\nimport { VerticalFormationRepository } from '../../domain/structure/read/vertical-formation/vertical-formation.repository';\n\n\n@Injectable()\nexport class StructureReadModelService {\n\n\tconstructor(private structureRepository: StructureRepository,\n\t\t\t\tprivate verticalFormationRepository: VerticalFormationRepository) {\n\t}\n\n\tonStructure(aggregateId: AggregateId = globalStructureId): Observable<Structure> {\n\t\treturn this.structureRepository.onStructure(aggregateId);\n\t}\n\n\tonVerticalScrollEnabled(aggregateId: AggregateId = globalStructureId): Observable<boolean> {\n\t\treturn this.structureRepository\n\t\t\t\t   .onStructure(aggregateId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((structure: Structure) => structure.isVerticalScrollEnabled()),\n\t\t\t\t\t   distinctUntilChanged()\n\t\t\t\t   );\n\t}\n\n\tonRowHeight(aggregateId: AggregateId = globalStructureId): Observable<number> {\n\t\treturn this.verticalFormationRepository.onRowHeight(aggregateId);\n\t}\n\n}\n","import { AggregateId } from '@generic-ui/hermes';\n\nexport class CompositionId extends AggregateId {\n\n\tconstructor(id: string) {\n\t\tsuper(id);\n\t}\n\n}\n","import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\n\n@Component({\n\tselector: 'gui-structure-dialog-column-manager',\n\ttemplateUrl: `./structure.dialog-column-manager.component.html`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None,\n\thost: {\n\t\t'[class.gui-structure-dialog-column-manager]': 'true'\n\t}\n})\nexport class StructureDialogColumnManagerComponent {\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { StructureRepository } from '../../structure/read/structure.repository';\nimport { StructureId } from '../../structure-id';\nimport { Schema } from './schema';\nimport { Structure } from '../../structure/read/structure';\n\n\n@Injectable()\nexport class SchemaRepository {\n\n\tconstructor(private structureRepository: StructureRepository) {\n\t}\n\n\ton(structureId: StructureId): Observable<Schema> {\n\n\t\treturn this.structureRepository\n\t\t\t\t   .onStructure(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   filter((structure: Structure) => structure.getId().toString() === structureId.toString()),\n\t\t\t\t\t   map((structure: Structure) => structure.getSchema())\n\t\t\t\t   );\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { filter, map, take } from 'rxjs/operators';\n\nimport { SchemaRepository } from '../../domain/schema/read/schema-repository';\nimport { StructureId } from '../../domain/structure-id';\nimport { globalStructureId } from '../../domain/global-structure-id';\nimport { Schema } from '../../domain/schema/read/schema';\nimport { SchemaColumnHeader } from '../../domain/schema/read/schema-column-header';\nimport { SchemaCssClass } from '../../domain/schema/read/schema-css-class';\nimport { SchemaTheme } from '../../domain/schema/schema-theme';\n\n\n@Injectable()\nexport class SchemaReadModelService {\n\n\tconstructor(private schemaRepository: SchemaRepository) {\n\t}\n\n\tonSchema(structureId: StructureId = globalStructureId): Observable<Schema> {\n\t\treturn this.schemaRepository.on(structureId);\n\t}\n\n\tonSingleSchema(structureId: StructureId = globalStructureId): Observable<Schema> {\n\t\treturn this.onSchema(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   take(1)\n\t\t\t\t   );\n\t}\n\n\tonHeight(structureId: StructureId = globalStructureId): Observable<number> {\n\t\treturn this.schemaRepository\n\t\t\t\t   .on(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((schema: Schema) => {\n\t\t\t\t\t\t   return schema.getHeight();\n\t\t\t\t\t   }),\n\t\t\t\t\t   filter((height: number) => height !== undefined)\n\t\t\t\t   );\n\t}\n\n\tonContainerHeight(structureId: StructureId = globalStructureId): Observable<number> {\n\t\treturn this.schemaRepository\n\t\t\t\t   .on(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((schema: Schema) => {\n\t\t\t\t\t\t   return schema.getContainerHeight();\n\t\t\t\t\t   }),\n\t\t\t\t\t   filter((height: number) => height !== undefined)\n\t\t\t\t   );\n\t}\n\n\tonCssClasses(structureId: StructureId = globalStructureId): Observable<SchemaCssClass> {\n\t\treturn this.schemaRepository\n\t\t\t\t   .on(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((schema: Schema) => {\n\t\t\t\t\t\t   return schema.getCssClasses();\n\t\t\t\t\t   })\n\t\t\t\t   );\n\t}\n\n\tonSingleTheme(structureId: StructureId = globalStructureId): Observable<SchemaTheme> {\n\t\treturn this.schemaRepository\n\t\t\t\t   .on(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   take(1),\n\t\t\t\t\t   map((schema: Schema) => {\n\t\t\t\t\t\t   return schema.getTheme();\n\t\t\t\t\t   })\n\t\t\t\t   );\n\t}\n\n\tonColumnHeader(structureId: StructureId = globalStructureId): Observable<SchemaColumnHeader> {\n\t\treturn this.schemaRepository\n\t\t\t\t   .on(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((schema: Schema) => {\n\t\t\t\t\t\t   return schema.getColumnHeader();\n\t\t\t\t\t   })\n\t\t\t\t   );\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Theme } from '@generic-ui/fabric';\n\nimport { SchemaTheme } from '../../domain/schema/schema-theme';\n\n\n@Injectable()\nexport class StructureThemeConverter {\n\n\tconvertTheme(schemaTheme: SchemaTheme): Theme {\n\t\tswitch (schemaTheme) {\n\n\t\t\tcase SchemaTheme.FABRIC:\n\t\t\t\treturn Theme.FABRIC;\n\n\t\t\tcase SchemaTheme.MATERIAL:\n\t\t\t\treturn Theme.MATERIAL;\n\n\t\t\tcase SchemaTheme.GENERIC:\n\t\t\t\treturn Theme.GENERIC;\n\n\t\t\tcase SchemaTheme.LIGHT:\n\t\t\t\treturn Theme.LIGHT;\n\n\t\t\tcase SchemaTheme.DARK:\n\t\t\t\treturn Theme.DARK;\n\n\t\t\tdefault:\n\t\t\t\treturn Theme.FABRIC;\n\n\t\t}\n\t}\n}\n","import { Injectable, Injector } from '@angular/core';\n\nimport { FabricDialogService } from '@generic-ui/fabric';\n\nimport { CompositionId } from '../../../../composition/domain/composition-id';\nimport { StructureDialogColumnManagerComponent } from './structure.dialog-column-manager.component';\nimport { SchemaReadModelService } from '../../../ui-api/schema/schema-read-model.service';\nimport { SchemaTheme } from '../../../domain/schema/schema-theme';\nimport { Reactive } from '../../../../../common/cdk/reactive';\nimport { StructureThemeConverter } from '../../schema/structure.theme.converter';\nimport { StructureId } from '../../../domain/structure-id';\n\n\n@Injectable()\nexport class StructureDialogColumnManagerService extends Reactive {\n\n\tconstructor(private readonly injector: Injector,\n\t\t\t\tprivate readonly schemaReadModelService: SchemaReadModelService,\n\t\t\t\tprivate readonly structureThemeConverter: StructureThemeConverter,\n\t\t\t\tprivate readonly fabricDialogService: FabricDialogService) {\n\t\tsuper();\n\t}\n\n\topen(compositionId: CompositionId, structureId: StructureId) {\n\n\t\tconst injector = Injector.create({ parent: this.injector, providers: [{ provide: CompositionId, useValue: compositionId }] });\n\n\t\tthis.schemaReadModelService\n\t\t\t.onSingleTheme(structureId)\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((theme: SchemaTheme) => {\n\n\t\t\t\tthis.fabricDialogService.open(StructureDialogColumnManagerComponent, {\n\t\t\t\t\tinjector: injector,\n\t\t\t\t\ttheme: this.structureThemeConverter.convertTheme(theme)\n\t\t\t\t});\n\t\t\t});\n\t}\n\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, OnInit, Renderer2, ViewEncapsulation } from '@angular/core';\n\nimport { FabricDialogService } from '@generic-ui/fabric';\n\nimport { SmartComponent } from '../../../../../common/cdk/smart-component';\n\nimport { StructureInfoModalComponent } from './structure-info-modal.component';\n\nimport { SourceReadModelService } from '../../../ui-api/source/source-read-model.service';\nimport { StructureReadModelService } from '../../../ui-api/structure/structure-read-model.service';\nimport { StructureDialogColumnManagerService } from '../../column-manager/dialog/structure.dialog-column-manager.service';\nimport { CompositionId } from '../../../../composition/domain/composition-id';\nimport { StructureId } from '../../../domain/structure-id';\n\n\n@Component({\n\tselector: 'gui-structure-info-panel',\n\ttemplate: `\n\n\t\t<div>\n\n\t\t\t<ng-container *ngIf=\"preparedItemsSize !== undefined && totalItemsSize !== undefined\">\n\n\t\t\t\t<ng-container *ngIf=\"preparedItemsSize === totalItemsSize\">\n\t\t\t\t\tShowing <b>{{totalItemsSize | numberFormatter}}</b> items\n\t\t\t\t</ng-container>\n\n\t\t\t\t<ng-container *ngIf=\"preparedItemsSize !== totalItemsSize\">\n\t\t\t\t\tShowing <b>{{preparedItemsSize | numberFormatter}}</b> out of <b>{{totalItemsSize | numberFormatter}}</b> items\n\t\t\t\t</ng-container>\n\n\t\t\t</ng-container>\n\n\t\t</div>\n\n\t\t<div>\n\t\t\t<div class=\"gui-right-section\">\n\n\t\t\t\t<span\n\t\t\t\t\t\t(click)=\"openColumnManager()\">\n\t\t\t\t\t<gui-structure-column-manager-icon>\n\t\t\t\t\t</gui-structure-column-manager-icon>\n\t\t\t\t</span>\n\n\t\t\t\t<span [gui-tooltip]=\"'Info'\"\n\t\t\t\t\t  (click)=\"openInfo()\">\n\t\t\t\t\t<gui-structure-info-icon></gui-structure-info-icon>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class StructureInfoPanelComponent extends SmartComponent implements OnInit {\n\n\ttotalItemsSize: number;\n\n\tpreparedItemsSize: number;\n\n\trowHeight: number;\n\n\tinfoPanel = StructureInfoModalComponent;\n\n\tconstructor(private changeDetectorRef: ChangeDetectorRef,\n\t\t\t\tprivate renderer: Renderer2,\n\t\t\t\tprivate elementRef: ElementRef,\n\t\t\t\tprivate sourceQueryService: SourceReadModelService,\n\t\t\t\tprivate dialog: FabricDialogService,\n\t\t\t\tprivate compositionId: CompositionId,\n\t\t\t\tprivate structureId: StructureId,\n\t\t\t\tprivate menuColumnManagerService: StructureDialogColumnManagerService,\n\t\t\t\tprivate structureReadModelService: StructureReadModelService) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\n\t\tthis.sourceQueryService\n\t\t\t.onOriginSize()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((size: number) => {\n\t\t\t\tthis.totalItemsSize = size;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\t\tthis.sourceQueryService\n\t\t\t.onPreparedEntities()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((preparedItems: Array<any>) => {\n\t\t\t\tthis.preparedItemsSize = preparedItems.length;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\t}\n\n\topenInfo(): void {\n\t\tthis.dialog.open(this.infoPanel);\n\t}\n\n\topenColumnManager(): void {\n\t\tthis.menuColumnManagerService.open(this.compositionId, this.structureId);\n\t}\n\n}\n","import { Observable } from 'rxjs';\n\nimport { CompositionId } from '../composition-id';\nimport { Composition } from './composition';\nimport { DomainEventBus, ReadModelRepository } from '@generic-ui/hermes';\n\n\nexport abstract class CompositionRepository extends ReadModelRepository {\n\n\tprotected constructor(domainEventBus: DomainEventBus) {\n\t\tsuper(domainEventBus);\n\t}\n\n\tabstract on(compositionId: CompositionId): Observable<Readonly<Composition>>;\n}\n","import { CompositionId } from './composition-id';\n\nexport const globalCompositionId = new CompositionId('-1');\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\n\nimport { CompositionRepository } from '../domain/read/composition.repository';\nimport { CompositionId } from '../domain/composition-id';\nimport { globalCompositionId } from '../domain/global-composition-id';\nimport { Composition } from '../domain/read/composition';\nimport { CellTemplateWithContext } from '../domain/read/definition/cell-template-with-context';\nimport { CellTemplateWithAccessor } from '../domain/read/definition/cell-template-with-accessor';\nimport { SortOrder } from '../domain/command/column/sort/sort-order';\nimport { FieldId } from '../../structure/domain/structure/command/field/data-type/field.id';\n\n\n@Injectable()\nexport class CompositionReadModelService {\n\n\tconstructor(private compositionRepository: CompositionRepository) {\n\t}\n\n\tonWidth(compositionId: CompositionId = globalCompositionId): Observable<number> {\n\t\treturn this.compositionRepository\n\t\t\t\t   .on(compositionId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((composition: Composition) => composition.getWidth())\n\t\t\t\t   );\n\t}\n\n\tonContainerWidth(compositionId: CompositionId = globalCompositionId): Observable<number> {\n\t\treturn this.compositionRepository\n\t\t\t\t   .on(compositionId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((composition: Composition) => composition.getContainerWidth())\n\t\t\t\t   );\n\t}\n\n\tonWidthForEachColumn(compositionId: CompositionId = globalCompositionId): Observable<Array<number>> {\n\t\treturn this.compositionRepository\n\t\t\t\t   .on(compositionId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((composition: Composition) => composition.getAllColumns().map(c => c.width))\n\t\t\t\t   );\n\t}\n\n\tonHeaderColumns(compositionId: CompositionId = globalCompositionId): Observable<Array<CellTemplateWithContext>> {\n\t\treturn this.compositionRepository\n\t\t\t\t   .on(compositionId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((composition: Composition) => composition.getActiveHeaderColumns())\n\t\t\t\t   );\n\t}\n\n\tonAllColumns(compositionId: CompositionId = globalCompositionId): Observable<Array<CellTemplateWithContext>> {\n\t\treturn this.compositionRepository\n\t\t\t\t   .on(compositionId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((composition: Composition) => composition.getHeaderColumns())\n\t\t\t\t   );\n\t}\n\n\tonSortOrder(fieldId: FieldId, compositionId: CompositionId = globalCompositionId): Observable<SortOrder> {\n\t\treturn this.compositionRepository\n\t\t\t\t   .on(compositionId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((composition: Composition) => composition.getActiveHeaderColumns()),\n\t\t\t\t\t   map((columns: Array<CellTemplateWithContext>) => {\n\t\t\t\t\t\t   return columns.filter((c) => c.getFieldId().equals(fieldId));\n\t\t\t\t\t   }),\n\t\t\t\t\t   filter((columns: Array<CellTemplateWithContext>) => {\n\t\t\t\t\t\t   return columns.length > 0;\n\t\t\t\t\t   }),\n\t\t\t\t\t   map(columns => columns[0].getSortStatus())\n\t\t\t\t   );\n\t}\n\n\tonTemplateColumns(compositionId: CompositionId = globalCompositionId): Observable<Array<CellTemplateWithAccessor>> {\n\t\treturn this.compositionRepository\n\t\t\t\t   .on(compositionId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((composition: Composition) => composition.getTemplateColumns())\n\t\t\t\t   );\n\t}\n\n\tonResizeWidth(compositionId: CompositionId = globalCompositionId): Observable<boolean> {\n\t\treturn this.compositionRepository\n\t\t\t\t   .on(compositionId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((composition: Composition) => composition.isResizeWidthEnabled())\n\t\t\t\t   );\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { CompositionId } from '../../composition-id';\n\n\nexport class CreateCompositionCommand extends Command {\n\n\tconstructor(private readonly compositionId: CompositionId) {\n\t\tsuper(compositionId, 'CreateCompositionCommand');\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { CompositionId } from '../../../composition-id';\n\nimport { ColumnParams } from './column.params';\n\n\nexport class SetColumnsCommand extends Command {\n\n\tconstructor(readonly compositionId: CompositionId,\n\t\t\t\tprivate readonly columns: Array<ColumnParams>) {\n\t\tsuper(compositionId, 'SetColumnsCommand');\n\t}\n\n\tgetParams(): Array<ColumnParams> {\n\t\treturn this.columns;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../../structure/domain/structure-id';\n\nexport class SetCompositionWidthCommand extends Command {\n\n\tconstructor(private readonly structureId: StructureId,\n\t\t\t\tprivate readonly width: number) {\n\t\tsuper(structureId, 'SetCompositionWidthCommand');\n\t}\n\n\tgetWidth(): number {\n\t\treturn this.width;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../../structure/domain/structure-id';\n\nexport class SetCompositionContainerWidthCommand extends Command {\n\n\tconstructor(private readonly structureId: StructureId,\n\t\t\t\tprivate readonly width: number) {\n\t\tsuper(structureId, 'SetCompositionContainerWidthCommand');\n\t}\n\n\tgetWidth(): number {\n\t\treturn this.width;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../../structure/domain/structure-id';\n\nexport class SetCompositionResizeWidthCommand extends Command {\n\n\tconstructor(private readonly structureId: StructureId,\n\t\t\t\tprivate readonly enabled: boolean) {\n\t\tsuper(structureId, 'SetCompositionResizeWidthCommand');\n\t}\n\n\tgetEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { CompositionId } from '../../../composition-id';\nimport { ChangeSortParams } from './change-sort.params';\n\n\nexport class CompositionChangeSortStatusCommand extends Command {\n\n\tconstructor(readonly compositionId: CompositionId,\n\t\t\t\tprivate readonly sortParams: Array<ChangeSortParams>) {\n\t\tsuper(compositionId, 'CompositionChangeSortStatusCommand');\n\t}\n\n\tgetCompositionId(): CompositionId {\n\t\treturn this.compositionId;\n\t}\n\n\tgetSortParams(): Array<ChangeSortParams> {\n\t\treturn this.sortParams;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { CompositionId } from '../../../composition-id';\nimport { ColumnId } from '../column.id';\n\nexport class CompositionSetColumnEnabledCommand extends Command {\n\n\tconstructor(readonly compositionId: CompositionId,\n\t\t\t\tprivate readonly columnId: ColumnId,\n\t\t\t\tprivate readonly enabled: boolean) {\n\t\tsuper(compositionId, 'CompositionSetColumnEnabledCommand');\n\t}\n\n\tgetColumnId(): ColumnId {\n\t\treturn this.columnId;\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { CompositionId } from '../../../../composition-id';\nimport { ColumnId } from '../../column.id';\n\nexport class CompositionMoveLeftColumnCommand extends Command {\n\n\tconstructor(readonly compositionId: CompositionId,\n\t\t\t\tprivate readonly columnId: ColumnId) {\n\t\tsuper(compositionId, 'CompositionMoveLeftColumnCommand');\n\t}\n\n\tgetColumnId(): ColumnId {\n\t\treturn this.columnId;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { CompositionId } from '../../../../composition-id';\nimport { ColumnId } from '../../column.id';\n\nexport class CompositionMoveRightColumnCommand extends Command {\n\n\tconstructor(readonly compositionId: CompositionId,\n\t\t\t\tprivate readonly columnId: ColumnId) {\n\t\tsuper(compositionId, 'CompositionMoveRightColumnCommand');\n\t}\n\n\tgetColumnId(): ColumnId {\n\t\treturn this.columnId;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { CommandDispatcher } from '@generic-ui/hermes';\n\nimport { CompositionId } from '../composition-id';\nimport { CreateCompositionCommand } from './create-composition/create-composition.command';\nimport { ColumnParams } from './column/set-columns/column.params';\nimport { SetColumnsCommand } from './column/set-columns/set-columns.command';\nimport { SetCompositionWidthCommand } from './width/set-width/set-composition-width.command';\nimport { SetCompositionContainerWidthCommand } from './width/set-container-width/set-composition-container-width.command';\nimport { SetCompositionResizeWidthCommand } from './width/resize-width/set-composition-resize-width.command';\nimport { ChangeSortParams } from './column/sort/change-sort.params';\nimport { CompositionChangeSortStatusCommand } from './column/sort/composition-change-sort-status.command';\nimport { ColumnId } from './column/column.id';\nimport { CompositionSetColumnEnabledCommand } from './column/set-enabled/composition.set-column-enabled.command';\nimport { CompositionMoveLeftColumnCommand } from './column/move/left/composition.move-left-column.command';\nimport { CompositionMoveRightColumnCommand } from './column/move/right/composition.move-right-column.command';\n\n\n@Injectable()\nexport class CompositionDispatcher {\n\n\tconstructor(private commandDispatcher: CommandDispatcher) {\n\t}\n\n\tcreateComposition(compositionId: CompositionId): void {\n\t\tthis.commandDispatcher.dispatch(new CreateCompositionCommand(compositionId));\n\t}\n\n\tsetColumns(compositionId: CompositionId, params: Array<ColumnParams>): void {\n\t\tthis.commandDispatcher.dispatch(new SetColumnsCommand(compositionId, params));\n\t}\n\n\tsetWidth(compositionId: CompositionId, width: number): void {\n\t\tthis.commandDispatcher.dispatch(new SetCompositionWidthCommand(compositionId, width));\n\t}\n\n\tsetContainerWidth(compositionId: CompositionId, width: number): void {\n\t\tthis.commandDispatcher.dispatch(new SetCompositionContainerWidthCommand(compositionId, width));\n\t}\n\n\tsetResizeWidth(compositionId: CompositionId, enabled: boolean): void {\n\t\tthis.commandDispatcher.dispatch(new SetCompositionResizeWidthCommand(compositionId, enabled));\n\t}\n\n\tchangeSort(compositionId: CompositionId, params: Array<ChangeSortParams>): void {\n\t\tthis.commandDispatcher.dispatch(new CompositionChangeSortStatusCommand(compositionId, params));\n\t}\n\n\tsetColumnEnabled(compositionId: CompositionId, columnId: ColumnId, enabled: boolean): void {\n\t\tthis.commandDispatcher.dispatch(new CompositionSetColumnEnabledCommand(compositionId, columnId, enabled));\n\t}\n\n\tmoveLeft(compositionId: CompositionId, columnId: ColumnId): void {\n\t\tthis.commandDispatcher.dispatch(new CompositionMoveLeftColumnCommand(compositionId, columnId));\n\t}\n\n\tmoveRight(compositionId: CompositionId, columnId: ColumnId): void {\n\t\tthis.commandDispatcher.dispatch(new CompositionMoveRightColumnCommand(compositionId, columnId));\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { CompositionDispatcher } from '../domain/command/composition.dispatcher';\nimport { CompositionId } from '../domain/composition-id';\nimport { globalCompositionId } from '../domain/global-composition-id';\nimport { ColumnParams } from '../domain/command/column/set-columns/column.params';\nimport { ColumnId } from '../domain/command/column/column.id';\n\n\n@Injectable()\nexport class CompositionCommandService {\n\n\tconstructor(private compositionDispatcher: CompositionDispatcher) {\n\t}\n\n\tcreateComposition(compositionId: CompositionId = globalCompositionId): void {\n\t\tthis.compositionDispatcher.createComposition(compositionId);\n\t}\n\n\tsetColumns(params: Array<ColumnParams>, compositionId: CompositionId = globalCompositionId): void {\n\t\tthis.compositionDispatcher.setColumns(compositionId, params);\n\t}\n\n\tsetWidth(width: number, compositionId: CompositionId = globalCompositionId): void {\n\t\tthis.compositionDispatcher.setWidth(compositionId, width);\n\t}\n\n\tsetContainerWidth(width: number, compositionId: CompositionId = globalCompositionId): void {\n\t\tthis.compositionDispatcher.setContainerWidth(compositionId, width);\n\t}\n\n\tsetResizeWidth(enabled: boolean, compositionId: CompositionId = globalCompositionId): void {\n\t\tthis.compositionDispatcher.setResizeWidth(compositionId, enabled);\n\t}\n\n\tenableColumn(columnId: ColumnId, compositionId: CompositionId = globalCompositionId): void {\n\t\tthis.compositionDispatcher.setColumnEnabled(compositionId, columnId, true);\n\t}\n\n\tdisableColumn(columnId: ColumnId, compositionId: CompositionId = globalCompositionId): void {\n\t\tthis.compositionDispatcher.setColumnEnabled(compositionId, columnId, false);\n\t}\n\n\tmoveLeft(columnId: ColumnId, compositionId: CompositionId = globalCompositionId): void {\n\t\tthis.compositionDispatcher.moveLeft(compositionId, columnId);\n\t}\n\n\tmoveRight(columnId: ColumnId, compositionId: CompositionId = globalCompositionId): void {\n\t\tthis.compositionDispatcher.moveRight(compositionId, columnId);\n\t}\n\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnInit, ViewEncapsulation } from '@angular/core';\n\nimport { SmartComponent } from '../../../../common/cdk/smart-component';\n\nimport { CompositionReadModelService } from '../../../composition/ui-api/composition-read-model.service';\nimport { CellTemplateWithContext } from '../../../composition/domain/read/definition/cell-template-with-context';\nimport { CompositionCommandService } from '../../../composition/ui-api/composition.command-service';\nimport { CompositionId } from '../../../composition/domain/composition-id';\n\n\n@Component({\n\tselector: 'gui-structure-column-manager',\n\ttemplate: `\n\n\t\t<ol>\n\t\t\t<li *ngFor=\"let column of columns\"\n\t\t\t\t(click)=\"toggleColumn(column)\">\n\n\t\t\t\t<gui-checkbox [checked]=\"column.isEnabled()\"\n\t\t\t\t\t\t\t  [disabled]=\"enabledColumnsCount === 1 && column.isEnabled()\">\n\n\t\t\t\t\t<ng-container\n\t\t\t\t\t\t\t*ngTemplateOutlet=\"column.viewTemplate;\n\t\t\t\t\t\t\t\t\t\t\tcontext: column.context\">\n\t\t\t\t\t</ng-container>\n\t\t\t\t</gui-checkbox>\n\n\t\t\t</li>\n\t\t</ol>\n\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None,\n\thost: {\n\t\t'[class.gui-structure-column-manager]': 'true'\n\t}\n})\nexport class StructureColumnManagerComponent extends SmartComponent implements OnInit {\n\n\tcolumns: Array<CellTemplateWithContext>;\n\n\tenabledColumnsCount: number;\n\n\tconstructor(private changeDetectorRef: ChangeDetectorRef,\n\t\t\t\tprivate compositionId: CompositionId,\n\t\t\t\tprivate compositionCommandService: CompositionCommandService,\n\t\t\t\tprivate compositionReadModelService: CompositionReadModelService) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\n\t\tthis.compositionReadModelService\n\t\t\t.onAllColumns(this.compositionId)\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((columns: Array<CellTemplateWithContext>) => {\n\t\t\t\tthis.columns = columns;\n\t\t\t\tthis.enabledColumnsCount = this.columns\n\t\t\t\t\t\t\t\t\t\t\t   .map((c) => +c.isEnabled())\n\t\t\t\t\t\t\t\t\t\t\t   .reduce((accumulator, currentValue) => accumulator + currentValue);\n\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\t}\n\n\ttoggleColumn(column: CellTemplateWithContext): void {\n\t\tevent.stopPropagation();\n\t\tif (column.isEnabled()) {\n\t\t\tthis.compositionCommandService.disableColumn(column.getColumnId(), this.compositionId);\n\t\t} else {\n\t\t\tthis.compositionCommandService.enableColumn(column.getColumnId(), this.compositionId);\n\t\t}\n\t}\n}\n","import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\n\n@Component({\n\tselector: 'gui-structure-menu-column-manager',\n\ttemplateUrl: `./structure.menu-column-manager.component.html`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None,\n\thost: {\n\t\t'[class.gui-structure-menu-column-manager]': 'true'\n\t}\n})\nexport class StructureMenuColumnManagerComponent {\n}\n","import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\n\nexport const selector = 'gui-structure-column-manager-icon';\n\n@Component({\n\tselector: selector,\n\ttemplate: `\n\t\t<svg data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10.32 10.31\">\n\t\t\t<line class=\"cls-1\" x1=\"9.57\" y1=\"3.65\" x2=\"0.75\" y2=\"3.65\"/>\n\t\t\t<line class=\"cls-2\" x1=\"9.57\" y1=\"0.75\" x2=\"0.75\" y2=\"0.75\"/>\n\t\t\t<line class=\"cls-2\" x1=\"0.75\" y1=\"9.56\" x2=\"0.75\" y2=\"0.88\"/>\n\t\t\t<line class=\"cls-1\" x1=\"3.69\" y1=\"9.65\" x2=\"3.69\" y2=\"3.89\"/>\n\t\t\t<line class=\"cls-1\" x1=\"6.63\" y1=\"9.56\" x2=\"6.63\" y2=\"3.89\"/>\n\t\t\t<line class=\"cls-2\" x1=\"9.57\" y1=\"9.56\" x2=\"9.57\" y2=\"0.88\"/>\n\t\t</svg>\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None,\n\thost: {\n\t\t'[class]': `\"${selector}\"`,\n\t\t'[class.gui-icon]': 'true'\n\t}\n})\nexport class StructureColumnManagerIconComponent {\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { StructureColumnManagerComponent } from './structure.column-manager.component';\nimport { fabricImports } from '../structure-fabric.imports';\nimport { StructureDialogColumnManagerService } from './dialog/structure.dialog-column-manager.service';\nimport { StructureDialogColumnManagerComponent } from './dialog/structure.dialog-column-manager.component';\nimport { StructureMenuColumnManagerComponent } from './menu/structure.menu-column-manager.component';\nimport { StructureColumnManagerIconComponent } from './icon/structure.column-manager-icon.component';\n\n\nconst declarations = [\n\tStructureColumnManagerComponent,\n\tStructureDialogColumnManagerComponent,\n\tStructureMenuColumnManagerComponent,\n\tStructureColumnManagerIconComponent\n];\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tfabricImports\n\t],\n\tdeclarations: declarations,\n\texports: declarations,\n\tentryComponents: [\n\t\tStructureColumnManagerComponent,\n\t\tStructureDialogColumnManagerComponent,\n\t\tStructureMenuColumnManagerComponent\n\t],\n\tproviders: [\n\t\tStructureDialogColumnManagerService\n\t]\n})\nexport class StructureColumnManagerModule {\n}\n","import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\n\nexport const selector = 'gui-structure-info-icon';\n\n@Component({\n\tselector: selector,\n\ttemplate: `\n\t\t<svg data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10.08 10.08\">\n\t\t\t<path class=\"cls-1\"\n\t\t\t\t  d=\"M401.64,307.76c0-.28.23-.45.54-.45s.55.17.55.45v0a.49.49,0,0,1-.55.46.48.48,0,0,1-.54-.46Zm.05,1.27a.49.49,0,0,1,1,0v2.54a.49.49,0,0,1-1,0Z\"\n\t\t\t\t  transform=\"translate(-397.14 -304.64)\"/>\n\t\t\t<circle class=\"cls-2\" cx=\"5.04\" cy=\"5.04\" r=\"4.54\"/>\n\t\t</svg>\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None,\n\thost: {\n\t\t'[class]': `\"${selector}\"`,\n\t\t'[class.gui-icon]': 'true'\n\t}\n})\nexport class StructureInfoIconComponent {\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { FabricModule } from '@generic-ui/fabric';\n\nimport { NumberFormatterModule } from '../../../../../common/cdk/number-formatter/number-formatter.module';\nimport { StructureInfoPanelComponent } from './structure.info-panel.component';\nimport { StructureInfoModalComponent } from './structure-info-modal.component';\nimport { StructureColumnManagerModule } from '../../column-manager/structure.column-manager.module';\nimport { StructureInfoIconComponent } from './icon/structure.info-icon.component';\n\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tNumberFormatterModule,\n\t\tFabricModule,\n\t\tStructureColumnManagerModule\n\t],\n\tdeclarations: [\n\t\tStructureInfoPanelComponent,\n\t\tStructureInfoModalComponent,\n\t\tStructureInfoIconComponent\n\t],\n\texports: [\n\t\tStructureInfoModalComponent,\n\t\tStructureInfoPanelComponent\n\t],\n\tentryComponents: [\n\t\tStructureInfoModalComponent\n\t]\n})\nexport class StructureInfoPanelModule {\n\n}\n","import { Component, TemplateRef, ViewChild } from '@angular/core';\n\nimport { CellView } from '../../cell-view';\nimport { TemplatesComponent } from '../template/templates.component';\n\n\n@Component({\n\ttemplate: `\n\n\t\t<ng-template #text let-element=\"element\">\n\t\t\t<span class=\"gui-view-text\" [innerHTML]=\"element | guiSafe: 'html'\"></span>\n\t\t</ng-template>\n\n\t\t<ng-template #number let-element=\"element\">\n\t\t\t<span class=\"gui-cell-number\">\n\t\t\t\t{{ element }}\n\t\t\t</span>\n\t\t</ng-template>\n\n\t\t<ng-template #chip let-element=\"element\">\n\t\t\t<gui-chip>\n\t\t\t\t<span class=\"gui-view-text\" [innerHTML]=\"element | guiSafe: 'html'\"></span>\n\t\t\t</gui-chip>\n\t\t</ng-template>\n\n\t\t<ng-template #link let-element=\"element\">\n\t\t\t<a gui-button link=\"true\" href=\"{{ element }}\">\n\t\t\t\t<span class=\"gui-view-text\" [innerHTML]=\"element | guiSafe: 'html'\"></span>\n\t\t\t</a>\n\t\t</ng-template>\n\n\t\t<ng-template #image let-element=\"element\">\n\t\t\t<img src=\"{{ element }}\"/>\n\t\t</ng-template>\n\n\t\t<ng-template #checkbox let-element=\"element\">\n\t\t\t<span class=\"gui-cell-boolean\">\n\t\t\t\t<gui-checkbox [checked]=\"!!element\" [disabled]=\"true\"></gui-checkbox>\n\t\t\t</span>\n\t\t</ng-template>\n\n\t\t<ng-template #bold let-element=\"element\">\n\t\t\t<span class=\"gui-view-text gui-bold\" [innerHTML]=\"element | guiSafe: 'html'\"></span>\n\t\t</ng-template>\n\n\t\t<ng-template #italic let-element=\"element\">\n\t\t\t<span class=\"gui-view-text gui-italic\" [innerHTML]=\"element | guiSafe: 'html'\"></span>\n\t\t</ng-template>\n\n\t\t<ng-template #custom let-element=\"element\">\n\t\t\t{{ element }}\n\t\t</ng-template>\n\n\t\t<ng-template #function let-element=\"element\">\n\t\t\t<gui-function-view [element]=\"element\"></gui-function-view>\n\t\t</ng-template>\n\n\t\t<ng-template #date let-element=\"element\">\n\t\t\t<span class=\"gui-view-text\">{{ element | date: 'dd/MM/yyyy' }}</span> \n\t\t</ng-template>\n\n\t\t<ng-template #bar let-element=\"element\">\n\t\t\t<gui-bar-view [value]=\"element\" [showPercentage]=\"false\"></gui-bar-view>\n\t\t</ng-template>\n\n\t\t<ng-template #percentageBar let-element=\"element\">\n\t\t\t<gui-bar-view [value]=\"element\" [showPercentage]=\"true\"></gui-bar-view>\n\t\t</ng-template>\n\t\t\n\t\t<ng-template #percentage let-element=\"element\">\n\t\t\t<gui-percentage-view [value]=\"element\"></gui-percentage-view>\n\t\t</ng-template>\n\n\t`\n})\nexport class ViewTemplatesComponent implements TemplatesComponent {\n\n\t@ViewChild('text', { read: TemplateRef, static: true })\n\ttextTemplate: TemplateRef<any>;\n\n\t@ViewChild('number', { read: TemplateRef, static: true })\n\tnumberTemplate: TemplateRef<any>;\n\n\t@ViewChild('chip', { read: TemplateRef, static: true })\n\tchipTemplate: TemplateRef<any>;\n\n\t@ViewChild('link', { read: TemplateRef, static: true })\n\tlinkTemplate: TemplateRef<any>;\n\n\t@ViewChild('image', { read: TemplateRef, static: true })\n\timageTemplate: TemplateRef<any>;\n\n\t@ViewChild('checkbox', { read: TemplateRef, static: true })\n\tcheckboxTemplate: TemplateRef<any>;\n\n\t@ViewChild('bold', { read: TemplateRef, static: true })\n\tboldTemplate: TemplateRef<any>;\n\n\t@ViewChild('italic', { read: TemplateRef, static: true })\n\titalicTemplate: TemplateRef<any>;\n\n\t@ViewChild('custom', { read: TemplateRef, static: true })\n\tcustomTemplate: TemplateRef<any>;\n\n\t@ViewChild('function', { read: TemplateRef, static: true })\n\tfunctionTemplate: TemplateRef<any>;\n\n\t@ViewChild('date', { read: TemplateRef, static: true })\n\tdateTemplate: TemplateRef<any>;\n\n\t@ViewChild('bar', { read: TemplateRef, static: true })\n\tbarTemplate: TemplateRef<any>;\n\n\t@ViewChild('percentageBar', { read: TemplateRef, static: true })\n\tpercentageBarTemplate: TemplateRef<any>;\n\n\t@ViewChild('percentage', { read: TemplateRef, static: true })\n\tpercentageTemplate: TemplateRef<any>;\n\n\tgetTemplate(view: CellView): TemplateRef<any> {\n\n\t\tswitch (view) {\n\n\t\t\tcase CellView.TEXT:\n\t\t\t\treturn this.textTemplate;\n\n\t\t\tcase CellView.NUMBER:\n\t\t\t\treturn this.numberTemplate;\n\n\t\t\tcase CellView.CHIP:\n\t\t\t\treturn this.chipTemplate;\n\n\t\t\tcase CellView.LINK:\n\t\t\t\treturn this.linkTemplate;\n\n\t\t\tcase CellView.IMAGE:\n\t\t\t\treturn this.imageTemplate;\n\n\t\t\tcase CellView.CHECKBOX:\n\t\t\t\treturn this.checkboxTemplate;\n\n\t\t\tcase CellView.BOLD:\n\t\t\t\treturn this.boldTemplate;\n\n\t\t\tcase CellView.ITALIC:\n\t\t\t\treturn this.italicTemplate;\n\n\t\t\tcase CellView.CUSTOM:\n\t\t\t\treturn this.customTemplate;\n\n\t\t\tcase CellView.FUNCTION:\n\t\t\t\treturn this.functionTemplate;\n\n\t\t\tcase CellView.DATE:\n\t\t\t\treturn this.dateTemplate;\n\n\t\t\tcase CellView.BAR:\n\t\t\t\treturn this.barTemplate;\n\n\t\t\tcase CellView.PERCENTAGE_BAR:\n\t\t\t\treturn this.percentageBarTemplate;\n\n\t\t\tcase CellView.PERCENTAGE:\n\t\t\t\treturn this.percentageTemplate;\n\n\t\t\tdefault:\n\t\t\t\treturn this.textTemplate;\n\t\t}\n\t}\n\n}\n","import { Observable, ReplaySubject } from 'rxjs';\n\nexport class ChangedValueEmitter<T> {\n\n\tprivate subject$ = new ReplaySubject<T>(1);\n\n\tconstructor() {\n\t}\n\n\temit(value: T): void {\n\t\tthis.subject$.next(value);\n\t}\n\n\ton(): Observable<T> {\n\t\treturn this.subject$.asObservable();\n\t}\n}\n","export enum EditEventType {\n\tSUBMIT,\n\tBLUR,\n\tCANCEL\n}\n","import { Input } from '@angular/core';\n\nimport { SmartComponent } from '../../../../../common/cdk/smart-component';\n\nimport { ChangedValueEmitter } from './changed-value.emitter';\nimport { EditEventType } from './state/edit.event-type';\n\n\nexport abstract class EditCommunicationComponent<T> extends SmartComponent {\n\n\t@Input()\n\tvalue: T;\n\n\t@Input()\n\tvalueChanges: ChangedValueEmitter<T>;\n\n\t@Input()\n\tstatus: ChangedValueEmitter<EditEventType>;\n\n\t@Input()\n\tfocus: boolean;\n\n\tprotected readonly ENTER_KEY_CODE = 13;\n\n\tprotected readonly ESC_KEY_CODE = 27;\n\n\tsubmit(): void {\n\t\tthis.emitStatus(EditEventType.SUBMIT);\n\t}\n\n\tcancel(): void {\n\t\tthis.emitStatus(EditEventType.CANCEL);\n\t}\n\n\tprivate emitStatus(status: EditEventType): void {\n\t\tif (this.status) {\n\t\t\tthis.status.emit(status);\n\t\t}\n\t}\n\n}\n","import { ElementRef, SimpleChanges, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { fromEvent } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\nimport { EditCommunicationComponent } from '../edit-communication.component';\n\n\nexport abstract class InputEditTemplateComponent<T> extends EditCommunicationComponent<T> {\n\n\t@ViewChild('input', { static: true })\n\tinputRef: ElementRef;\n\n\tfilterForm: FormGroup;\n\n\treadonly filterFieldName = 'phrase';\n\n\tprotected constructor(private formBuilder: FormBuilder) {\n\t\tsuper();\n\t\tthis.filterForm = this.formBuilder.group({\n\t\t\t[this.filterFieldName]: ['']\n\t\t});\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tif (changes.value !== undefined) {\n\t\t\tthis.filterForm.get(this.filterFieldName).setValue(this.value);\n\t\t}\n\t}\n\n\tngOnInit() {\n\t\tthis.observeChanges();\n\t}\n\n\tngAfterViewInit() {\n\t\tconst inputElement = this.inputRef.nativeElement;\n\n\t\tthis.focusField(inputElement);\n\n\t\tthis.emitValueChange(inputElement.value);\n\n\t\tfromEvent(inputElement, 'blur')\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe(() => {\n\t\t\t\tthis.unsubscribe();\n\t\t\t\tthis.submit();\n\t\t\t});\n\n\t\tconst keyup$ = fromEvent(inputElement, 'keyup');\n\n\t\tkeyup$\n\t\t\t.pipe(\n\t\t\t\tfilter((e: any) => e.keyCode === this.ENTER_KEY_CODE),\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe(() => {\n\t\t\t\tthis.unsubscribe();\n\t\t\t\tthis.submit();\n\t\t\t});\n\n\t\tkeyup$\n\t\t\t.pipe(\n\t\t\t\tfilter((e: any) => e.keyCode === this.ESC_KEY_CODE),\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe(() => {\n\t\t\t\tthis.unsubscribe();\n\t\t\t\tthis.cancel();\n\t\t\t});\n\t}\n\n\tfocusField(inputElement: HTMLElement): void {\n\t\tif (this.focus) {\n\t\t\tinputElement.focus();\n\t\t}\n\t}\n\n\tprivate observeChanges() {\n\t\tthis.filterForm\n\t\t\t.controls[this.filterFieldName]\n\t\t\t.valueChanges\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((value: string) => {\n\t\t\t\tthis.emitValueChange(value);\n\t\t\t});\n\t}\n\n\tprivate emitValueChange(value: any): void {\n\t\tif (this.valueChanges) {\n\t\t\tthis.valueChanges.emit(value);\n\t\t}\n\t}\n}\n","import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { InputEditTemplateComponent } from './input-edit-template.component';\n\n\n@Component({\n\tselector: 'gui-number-edit',\n\ttemplate: `\n\n\t\t<form [formGroup]=\"filterForm\" >\n\t\t\t<input #input [formControlName]=\"filterFieldName\" type=\"number\" class=\"gui-input\" />\n\t\t</form>\n\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class NumberEditTemplateComponent extends InputEditTemplateComponent<number> {\n\n\tconstructor(fb: FormBuilder) {\n\t\tsuper(fb);\n\t}\n}\n","/**\n * Override decorator\n *\n * class Car {\n *     drive() {}\n * }\n *\n * class FastCar {\n *     @Override\n *     drive() {}}\n * }\n */\nexport function Override(container: { [key: string]: any }, key: string) {\n\tconst basePrototype = Object.getPrototypeOf(container);\n\tif (typeof basePrototype[key] !== 'function') {\n\t\tthrow new Error('Method \"' + key + '\" of class \"' + container.constructor.name + '\" doesn\\'t override any method of base class.');\n\t}\n};\n","import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\n\nimport { Override } from '../../../../../../common/cdk/decorators';\n\nimport { InputEditTemplateComponent } from './input-edit-template.component';\n\n\n@Component({\n\tselector: 'gui-string-edit',\n\ttemplate: `\n\n\t\t<form [formGroup]=\"filterForm\" >\n\t\t\t<input #input [formControlName]=\"filterFieldName\" type=\"type\" class=\"gui-input\" />\n\t\t</form>\n\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class StringEditTemplateComponent extends InputEditTemplateComponent<string> {\n\n\tconstructor(fb: FormBuilder) {\n\t\tsuper(fb);\n\t}\n\n\t@Override\n\tfocusField(inputElement: any): void {\n\n\t\tif (this.focus) {\n\t\t\tinputElement.focus();\n\t\t\tinputElement.setSelectionRange(0, inputElement.value.length);\n\t\t}\n\t}\n}\n","import { Component, TemplateRef, ViewChild } from '@angular/core';\n\nimport { TemplatesComponent } from '../template/templates.component';\nimport { DataType } from '../../../../structure/domain/structure/command/field/data-type/data-type';\n\n\n@Component({\n\ttemplate: `\n\n\t\t<ng-template #string let-valueChanges=\"valueChanges\" let-value=\"value\" let-status=\"status\" let-focus=\"focus\" >\n\t\t\t<gui-string-edit [valueChanges]=\"valueChanges\" [value]=\"value\" [status]=\"status\" [focus]=\"focus\">\n\t\t\t</gui-string-edit>\n\t\t</ng-template>\n\n\t\t<ng-template #number let-valueChanges=\"valueChanges\" let-value=\"value\" let-status=\"status\" let-focus=\"focus\" >\n\t\t\t<gui-number-edit [valueChanges]=\"valueChanges\" [value]=\"value\" [status]=\"status\" [focus]=\"focus\">\n\t\t\t</gui-number-edit>\n\t\t</ng-template>\n\n\t\t<ng-template #boolean let-valueChanges=\"valueChanges\" let-value=\"value\" let-status=\"status\" let-focus=\"focus\" >\n\t\t\t<gui-boolean-edit [valueChanges]=\"valueChanges\" [value]=\"value\" [status]=\"status\" [focus]=\"focus\">\n\t\t\t</gui-boolean-edit>\n\t\t</ng-template>\n\n\t\t<ng-template #date let-valueChanges=\"valueChanges\" let-value=\"value\" let-status=\"status\" let-focus=\"focus\" >\n\t\t\t<gui-date-edit [valueChanges]=\"valueChanges\" [value]=\"value\" [status]=\"status\" [focus]=\"focus\">\n\t\t\t</gui-date-edit>\n\t\t</ng-template> \n\t\t\n\t\t<ng-template #empty>\n\n\t\t</ng-template>\n\n\t`\n})\nexport class EditTemplatesComponent implements TemplatesComponent {\n\n\t@ViewChild('string', { read: TemplateRef, static: true })\n\tstringTemplate: TemplateRef<any>;\n\n\t@ViewChild('number', { read: TemplateRef, static: true })\n\tnumberTemplate: TemplateRef<any>;\n\n\t@ViewChild('boolean', { read: TemplateRef, static: true })\n\tbooleanTemplate: TemplateRef<any>;\n\n\t@ViewChild('date', { read: TemplateRef, static: true })\n\tdateTemplate: TemplateRef<any>;\n\n\t@ViewChild('empty', { read: TemplateRef, static: true })\n\temptyTemplate: TemplateRef<any>;\n\n\tgetTemplate(dataType: DataType): TemplateRef<any> {\n\n\t\tswitch (dataType) {\n\n\t\t\tcase DataType.STRING:\n\t\t\t\treturn this.stringTemplate;\n\n\t\t\tcase DataType.NUMBER:\n\t\t\t\treturn this.numberTemplate;\n\n\t\t\tcase DataType.BOOLEAN:\n\t\t\t\treturn this.booleanTemplate;\n\n\t\t\tcase DataType.DATE:\n\t\t\t\treturn this.dateTemplate;\n\n\t\t\tdefault:\n\t\t\t\treturn this.emptyTemplate;\n\t\t}\n\t}\n\n}\n","import { ChangeDetectionStrategy, Component, ElementRef, ViewChild, ViewEncapsulation } from '@angular/core';\n\nimport { EditCommunicationComponent } from '../edit-communication.component';\n\n\n@Component({\n\tselector: 'gui-boolean-edit',\n\ttemplate: `\n\n\t\t<span class=\"gui-cell-boolean\">\n\t\t\t<gui-checkbox #checkbox\n\t\t\t\t\t\t  [checked]=\"value\"\n\t\t\t\t\t\t  [name]=\"filterFieldName\"\n\t\t\t\t\t\t  (changed)=\"toggle($event)\">\n\t\t\t</gui-checkbox>\n\t\t</span>\n\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class BooleanEditTemplateComponent extends EditCommunicationComponent<boolean> {\n\n\t@ViewChild('checkbox', { read: ElementRef, static: true })\n\tcheckboxRef: ElementRef;\n\n\treadonly filterFieldName = 'booleanEdit';\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\ttoggle(changed: boolean): void {\n\t\tthis.valueChanges.emit(changed);\n\t\tthis.submit();\n\t}\n\n}\n","import { Component, ContentChild, Input, TemplateRef } from '@angular/core';\n\n\n@Component({\n\tselector: 'gui-column',\n\ttemplate: ''\n})\nexport class ColumnQueryComponent {\n\n\t@ContentChild(TemplateRef, { static: false })\n\tcellTemplate: TemplateRef<any>;\n\n\theaderTemplate: TemplateRef<any>;\n\n\t@Input()\n\theader: string;\n\n}\n","import { ChangeDetectionStrategy, Component, Input, ViewEncapsulation } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\n\n\n@Component({\n\tselector: 'gui-function-view',\n\ttemplate: `\n\n\t\t<div [innerHTML]=\"safeHTML\"></div>\n\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class FunctionViewComponent {\n\n\t@Input()\n\telement: any;\n\n\tsafeHTML: SafeHtml;\n\n\tconstructor(private sanitizer: DomSanitizer) {\n\t}\n\n\tngOnChanges() {\n\t\tthis.safeHTML = this.sanitizer.bypassSecurityTrustHtml(this.element);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { InMemoryStore } from '@generic-ui/hermes';\n\nimport { CompositionAggregate } from '../../domain/command/composition.aggregate';\n\n\n@Injectable()\nexport class InMemoryCompositionStore extends InMemoryStore<CompositionAggregate> {\n}\n","import { Injectable } from '@angular/core';\n\nimport { AggregateStoreRegister, InMemoryAggregateStore } from '@generic-ui/hermes';\n\nimport { CompositionAggregate } from '../../../domain/command/composition.aggregate';\n\nimport { InMemoryCompositionStore } from '../in-memory.composition.store';\n\n\n@Injectable()\nexport class InMemoryCompositionAggregateStore extends InMemoryAggregateStore<CompositionAggregate> {\n\n\tconstructor(inMemoryCompositionStore: InMemoryCompositionStore,\n\t\t\t\taggregateStoreRegister: AggregateStoreRegister) {\n\t\tsuper(inMemoryCompositionStore, aggregateStoreRegister);\n\t}\n\n}\n","import { AggregateRepository, Optional } from '@generic-ui/hermes';\n\nimport { CompositionId } from '../composition-id';\nimport { CompositionAggregate } from './composition.aggregate';\n\n\nexport abstract class CompositionAggregateRepository extends AggregateRepository<CompositionAggregate> {\n\n\tabstract getById(compositionId: CompositionId): Optional<CompositionAggregate>;\n\n\tabstract save(aggregate: CompositionAggregate): void;\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { AggregateId, Optional } from '@generic-ui/hermes';\n\nimport { CompositionAggregateRepository } from '../../../domain/command/composition.aggregate-repository';\nimport { InMemoryCompositionAggregateStore } from './in-memory.composition.aggregate-store';\nimport { CompositionAggregate } from '../../../domain/command/composition.aggregate';\n\n\n@Injectable()\nexport class InMemoryCompositionAggregateRepository extends CompositionAggregateRepository {\n\n\tconstructor(private inMemoryCompositionAggregateStore: InMemoryCompositionAggregateStore) {\n\t\tsuper();\n\t}\n\n\tgetById(aggregateId: AggregateId): Optional<CompositionAggregate> {\n\t\treturn this.inMemoryCompositionAggregateStore.getById(aggregateId);\n\t}\n\n\tsave(aggregate: CompositionAggregate): void {\n\t\tthis.inMemoryCompositionAggregateStore.save(aggregate);\n\t}\n\n}\n","import { ComponentFactoryResolver, ComponentRef, Injector, TemplateRef, Type } from '@angular/core';\nimport { TemplatesComponent } from './templates.component';\nimport { DataType } from '../../../../structure/domain/structure/command/field/data-type/data-type';\nimport { CellView } from '../../cell-view';\n\n\nexport abstract class TemplateFactory<T extends TemplatesComponent> {\n\n\tprivate templates: Map<DataType | CellView, TemplateRef<any>> = new Map<DataType | CellView, TemplateRef<any>>();\n\n\tprivate templatesComponent: ComponentRef<T> = null;\n\n\tprotected constructor(private readonly templatesComponentDefinition: Type<T>,\n\t\t\t\t\t\t  private componentFactoryResolver: ComponentFactoryResolver) {\n\t\tthis.createTemplatesComponent();\n\t}\n\n\tabstract generateMapKeys(): Array<DataType | CellView>;\n\n\tgetTemplates(): Map<DataType | CellView, TemplateRef<any>> {\n\t\treturn this.templates;\n\t}\n\n\tdestroy(): void {\n\t\tif (this.templatesComponent) {\n\t\t\tthis.templatesComponent.destroy();\n\t\t\tthis.templatesComponent = null;\n\t\t}\n\t}\n\n\tprivate createTemplatesComponent(): void {\n\n\t\tconst componentFactory = this.componentFactoryResolver.resolveComponentFactory(this.templatesComponentDefinition);\n\n\t\tconst injector: Injector = Injector.create({ providers: [] });\n\n\t\tthis.templatesComponent = componentFactory.create(injector);\n\n\t\tthis.generateMap();\n\t}\n\n\tprivate generateMap(): void {\n\t\tthis.generateMapKeys()\n\t\t\t.forEach((type: DataType | CellView) => {\n\t\t\t\tthis.findAndSetTemplate(type);\n\t\t\t});\n\t};\n\n\tprivate findAndSetTemplate(dt: DataType | CellView): void {\n\n\t\tconst template = this.templatesComponent.instance.getTemplate(dt);\n\n\t\tthis.templates.set(dt, template);\n\t}\n\n}\n","import { ComponentFactoryResolver, Injectable } from '@angular/core';\n\nimport { ViewTemplatesComponent } from './view-templates.component';\nimport { CellView } from '../../cell-view';\nimport { TemplateFactory } from '../template/template.factory';\n\n\n@Injectable()\nexport class ViewTemplateFactory extends TemplateFactory<ViewTemplatesComponent> {\n\n\tconstructor(componentFactoryResolver: ComponentFactoryResolver) {\n\t\tsuper(\n\t\t\tViewTemplatesComponent,\n\t\t\tcomponentFactoryResolver\n\t\t);\n\t}\n\n\tgenerateMapKeys(): Array<CellView> {\n\t\treturn Object.keys(CellView)\n\t\t\t\t\t .map(key => CellView[key]);\n\t}\n}\n","import { Injectable, TemplateRef } from '@angular/core';\nimport { ViewTemplateFactory } from './view-template.factory';\nimport { CellView } from '../../cell-view';\n\n\n@Injectable()\nexport class ViewTemplateRepository {\n\n\tconstructor(private columnTemplateFactory: ViewTemplateFactory) {\n\t}\n\n\tfindTemplate(view: CellView): TemplateRef<any> {\n\t\tconst typeToTemplate = this.columnTemplateFactory.getTemplates();\n\n\t\treturn typeToTemplate.get(view);\n\t}\n\n}\n","import { ComponentFactoryResolver, Injectable } from '@angular/core';\nimport { TemplateFactory } from '../template/template.factory';\nimport { EditTemplatesComponent } from './edit-templates.component';\nimport { DataType } from '../../../../structure/domain/structure/command/field/data-type/data-type';\n\n\n@Injectable()\nexport class EditTemplateFactory extends TemplateFactory<EditTemplatesComponent> {\n\n\tconstructor(componentFactoryResolver: ComponentFactoryResolver) {\n\t\tsuper(\n\t\t\tEditTemplatesComponent,\n\t\t\tcomponentFactoryResolver\n\t\t);\n\t}\n\n\tgenerateMapKeys(): Array<DataType> {\n\t\treturn Object.keys(DataType)\n\t\t\t\t\t .map(key => DataType[key]);\n\t}\n}\n","import { Injectable, TemplateRef } from '@angular/core';\nimport { EditTemplateFactory } from './edit-template.factory';\nimport { DataType } from '../../../../structure/domain/structure/command/field/data-type/data-type';\n\n\n@Injectable()\nexport class EditTemplateRepository {\n\n\tconstructor(private editTemplateFactory: EditTemplateFactory) {\n\t}\n\n\tfindTemplate(dataType: DataType): TemplateRef<any> {\n\t\tconst typeToTemplate = this.editTemplateFactory.getTemplates();\n\n\t\treturn typeToTemplate.get(dataType);\n\t}\n\n}\n","export enum SortOrder {\n\tASC,\n\tDESC,\n\tNONE\n}\n","import { CellView } from '../../cell-view';\nimport { DataType } from '../../../../structure/domain/structure/command/field/data-type/data-type';\n\nexport class ViewEntity {\n\n\tpublic static fromDataType(dataType: DataType): ViewEntity {\n\n\t\tif (dataType === DataType.DATE) {\n\t\t\treturn new ViewEntity(CellView.DATE);\n\t\t} else {\n\t\t\treturn new ViewEntity(CellView.TEXT);\n\t\t}\n\n\t}\n\n\tprivate readonly view: CellView;\n\n\tprivate readonly templateFunction?: (entity: any) => string = (value: any) => value;\n\n\tconstructor(columnView: CellView | any) {\n\n\t\tif (typeof columnView === 'function') {\n\t\t\tthis.view = CellView.FUNCTION;\n\t\t\tthis.templateFunction = columnView;\n\t\t} else {\n\t\t\tthis.view = columnView;\n\t\t}\n\t}\n\n\tgetCellView(): CellView {\n\t\treturn this.view;\n\t}\n\n\tgetTemplateFunction(): any {\n\t\treturn this.templateFunction;\n\t}\n\n}\n","import { ColumnId } from './column.id';\nimport { ColumnField } from './field/column-field';\nimport { ColumnConfig, HeaderTemplate } from '../../column.config';\nimport { ColumnAlign } from '../../column-align';\nimport { ViewEntity } from './view.entity';\nimport { DataType } from '../../../../structure/domain/structure/command/field/data-type/data-type';\nimport { CellView } from '../../cell-view';\nimport { ColumnPresentation } from './presentation/column.presentation';\n\nexport abstract class AbstractColumnEntity {\n\n\tprivate readonly columnId: ColumnId;\n\n\tprivate columnField: ColumnField;\n\n\tprivate header?: string | HeaderTemplate;\n\n\tprivate width?: number;\n\n\tprotected align: ColumnAlign;\n\n\tprivate columnConfig: ColumnConfig;\n\n\tprotected view: ViewEntity;\n\n\tprotected presentation: ColumnPresentation;\n\n\tprotected constructor(columnId: ColumnId,\n\t\t\t\t\t\t  columnField: ColumnField,\n\t\t\t\t\t\t  columnConfig: ColumnConfig,\n\t\t\t\t\t\t  presentation: ColumnPresentation,\n\t\t\t\t\t\t  header?: string | HeaderTemplate,\n\t\t\t\t\t\t  align?: ColumnAlign,\n\t\t\t\t\t\t  view?: ViewEntity,\n\t\t\t\t\t\t  width?: number) {\n\t\tthis.columnId = columnId;\n\t\tthis.columnField = columnField;\n\t\tthis.columnConfig = columnConfig;\n\t\tthis.presentation = presentation;\n\n\t\tthis.view = ViewEntity.fromDataType(columnField.getDataType());\n\n\t\tif (header) {\n\t\t\tthis.header = header;\n\t\t}\n\n\t\tif (view) {\n\t\t\tthis.view = view;\n\t\t}\n\n\t\tif (width) {\n\t\t\tthis.width = width;\n\t\t}\n\n\t\tthis.setInitialAlign(columnField, align);\n\t}\n\n\tgetPresentation(): ColumnPresentation {\n\t\treturn this.presentation;\n\t}\n\n\tgetColumnConfig(): ColumnConfig {\n\t\treturn this.columnConfig;\n\t}\n\n\tgetColumnId(): ColumnId {\n\t\treturn this.columnId;\n\t}\n\n\tgetField(): ColumnField {\n\t\treturn this.columnField;\n\t}\n\n\tgetHeader(): string | HeaderTemplate {\n\t\treturn this.header;\n\t}\n\n\tgetDataType(): DataType {\n\t\treturn this.columnField.getDataType();\n\t}\n\n\tgetCellView(): CellView {\n\t\treturn this.view.getCellView();\n\t}\n\n\tgetTemplateFunction(): any {\n\t\treturn this.view.getTemplateFunction();\n\t}\n\n\tsetView(view: ViewEntity): void {\n\t\tthis.view = view;\n\t}\n\n\tsetHeader(header: string | HeaderTemplate): void {\n\t\tthis.header = header;\n\t}\n\n\tgetView(): ViewEntity {\n\t\treturn this.view;\n\t}\n\n\tgetAlign(): ColumnAlign {\n\t\treturn this.align;\n\t}\n\n\tsetWidth(width: number): void {\n\t\tthis.width = width;\n\t}\n\n\tgetWidth(): number {\n\t\treturn this.width;\n\t}\n\n\tgetSortingEnabled(): boolean {\n\t\tconst config = this.columnConfig;\n\n\t\tif (config.sorting !== undefined && config.sorting !== null) {\n\n\t\t\tif (config.sorting.enabled === undefined || config.sorting.enabled === null) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn config.sorting.enabled;\n\t\t}\n\t}\n\n\tisCellEditingEnabled(): boolean {\n\t\tconst config = this.columnConfig;\n\n\t\tif (config.cellEditing !== undefined && config.cellEditing !== null) {\n\n\t\t\tif (config.cellEditing.enabled === undefined || config.cellEditing.enabled === null) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn config.cellEditing.enabled;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate setInitialAlign(columnField: ColumnField, align?: ColumnAlign): void {\n\n\t\tif (align !== undefined && align !== null) {\n\t\t\tthis.align = align;\n\t\t} else if (columnField.getDataType() === DataType.NUMBER) {\n\t\t\tthis.align = ColumnAlign.RIGHT;\n\t\t} else {\n\t\t\tthis.align = ColumnAlign.LEFT;\n\t\t}\n\t}\n\n}\n","import { ColumnId } from './column.id';\nimport { ColumnField } from './field/column-field';\nimport { ColumnConfig, HeaderTemplate } from '../../column.config';\nimport { SortOrder } from './sort/sort-order';\nimport { ViewEntity } from './view.entity';\nimport { ColumnAlign } from '../../column-align';\nimport { AbstractColumnEntity } from './abstract-column.entity';\nimport { ColumnPresentation } from './presentation/column.presentation';\n\n\nexport class ColumnEntity extends AbstractColumnEntity {\n\n\tsortable?: boolean;\n\n\tprivate sortStatus = SortOrder.NONE;\n\n\tprivate enabled: boolean = true;\n\n\tconstructor(columnId: ColumnId,\n\t\t\t\tcolumnField: ColumnField,\n\t\t\t\tcolumnConfig: ColumnConfig,\n\t\t\t\tenabled: boolean,\n\t\t\t\tpresentation: ColumnPresentation,\n\t\t\t\theader: string | HeaderTemplate,\n\t\t\t\talign: ColumnAlign,\n\t\t\t\tview: ViewEntity,\n\t\t\t\twidth: number) {\n\t\tsuper(\n\t\t\tcolumnId,\n\t\t\tcolumnField,\n\t\t\tcolumnConfig,\n\t\t\tpresentation,\n\t\t\theader,\n\t\t\talign,\n\t\t\tview,\n\t\t\twidth\n\t\t);\n\n\t\tthis.enabled = enabled;\n\n\t\tif (align === undefined) {\n\t\t\tthis.align = this.presentation.getDefaultAlign();\n\t\t}\n\n\t\tif (view === undefined) {\n\t\t\tthis.view = new ViewEntity(this.presentation.getDefaultView());\n\t\t}\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n\tsetEnabled(enabled: boolean): void {\n\t\tthis.enabled = enabled;\n\t}\n\n\tgetSortStatus(): SortOrder {\n\t\treturn this.sortStatus;\n\t}\n\n\tsetSortStatus(status: SortOrder): void {\n\t\tthis.sortStatus = status;\n\t}\n\n}\n","import { TemplateRef } from '@angular/core';\n\nimport { CellContext } from './cell-context';\nimport { FieldId } from '../../../../structure/domain/structure/command/field/data-type/field.id';\nimport { SortOrder } from '../../command/column/sort/sort-order';\nimport { ColumnId } from '../../command/column/column.id';\nimport { ColumnAlign } from '../../column-align';\n\n// Basically header template\nexport class CellTemplateWithContext {\n\n\tconstructor(public viewTemplate: TemplateRef<any>,\n\t\t\t\tpublic editTemplate: TemplateRef<any>,\n\t\t\t\t// public editContext: any,\n\t\t\t\tpublic context: CellContext,\n\t\t\t\tpublic width: number,\n\t\t\t\tprivate readonly fieldId: FieldId,\n\t\t\t\tprivate readonly columnId: ColumnId,\n\t\t\t\tprivate readonly sortStatus: SortOrder,\n\t\t\t\tprivate readonly enabled: boolean,\n\t\t\t\tprivate readonly sortable: boolean,\n\t\t\t\tprivate readonly align: ColumnAlign) {\n\t}\n\n\tgetColumnId(): ColumnId {\n\t\treturn this.columnId;\n\t}\n\n\tgetFieldId(): FieldId {\n\t\treturn this.fieldId;\n\t}\n\n\tgetSortStatus(): SortOrder {\n\t\treturn this.sortStatus;\n\t}\n\n\tisSortEnabled(): boolean {\n\t\treturn this.sortable;\n\t}\n\n\tisAscSort(): boolean {\n\t\treturn this.sortStatus === SortOrder.ASC;\n\t}\n\n\tisDescSort(): boolean {\n\t\treturn this.sortStatus === SortOrder.DESC;\n\t}\n\n\tisNoSort(): boolean {\n\t\treturn this.sortStatus === SortOrder.NONE;\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n\tisAlignLeft(): boolean {\n\t\treturn this.align === ColumnAlign.LEFT;\n\t}\n\n\tisAlignCenter(): boolean {\n\t\treturn this.align === ColumnAlign.CENTER;\n\t}\n\n\tisAlignRight(): boolean {\n\t\treturn this.align === ColumnAlign.RIGHT;\n\t}\n\n}\n","export class CellContext {\n\n\tconstructor(public element: string) {\n\t}\n}\n","export class FieldId {\n\n\tprivate readonly id: string;\n\n\tconstructor(id: string) {\n\t\tthis.id = id;\n\t}\n\n\tgetId(): string {\n\t\treturn this.id;\n\t}\n\n\ttoString(): string {\n\t\treturn this.id;\n\t}\n\n\tequals(fieldId: FieldId): boolean {\n\t\treturn fieldId.getId() === this.id;\n\t}\n\n}\n","import { TemplateRef } from '@angular/core';\n\nimport { ColumnFieldId } from '../../command/column/field/column-field.id';\nimport { ItemEntity } from '../../../../structure/domain/source/item.entity';\nimport { DataType } from '../../../../structure/domain/structure/command/field/data-type/data-type';\nimport { ViewEntity } from '../../command/column/view.entity';\nimport { CellView } from '../../cell-view';\nimport { ColumnAlign } from '../../column-align';\n\n\nexport class CellTemplateWithAccessor {\n\n\tconstructor(public template: TemplateRef<any>,\n\t\t\t\tpublic editTemplate: TemplateRef<any>,\n\t\t\t\tpublic editable: boolean,\n\t\t\t\tpublic templateFun: (i: any) => any,\n\t\t\t\tpublic accessor: (element: any) => any,\n\t\t\t\tpublic searchAccessor: (element: any) => any,\n\t\t\t\tpublic width: number,\n\t\t\t\tpublic columnFieldId: ColumnFieldId,\n\t\t\t\tprivate readonly align: ColumnAlign,\n\t\t\t\tprivate readonly cellEditingEnabled: boolean,\n\t\t\t\tprivate readonly type: DataType, // REFACTOR\n\t\t\t\tprivate readonly view: ViewEntity) { // REFACTOR\n\t}\n\n\tisCellEditingEnabled(): boolean {\n\t\treturn this.cellEditingEnabled;\n\t}\n\n\tisBooleanDataType(): boolean {\n\t\treturn this.type === DataType.BOOLEAN;\n\t}\n\n\tisAlignLeft(): boolean {\n\t\treturn this.align === ColumnAlign.LEFT;\n\t}\n\n\tisAlignCenter(): boolean {\n\t\treturn this.align === ColumnAlign.CENTER;\n\t}\n\n\tisAlignRight(): boolean {\n\t\treturn this.align === ColumnAlign.RIGHT;\n\t}\n\n\t// REFACTOR #1581\n\tgetValue(entity: ItemEntity, searchPhrase?: string): any | HTMLElement {\n\n\t\treturn this.templateFun(this.findValue(entity, searchPhrase));\n\t}\n\n\tprivate findValue(entity: ItemEntity, searchPhrase?: string): any | HTMLElement {\n\t\tconst value = this.accessor(entity);\n\n\t\tif (this.type !== DataType.STRING) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (this.view && this.view.getCellView() === CellView.FUNCTION) {\n\t\t\treturn value;\n\t\t}\n\n\t\tif (searchPhrase) {\n\n\t\t\tlet txt: string = '' + this.searchAccessor(entity),\n\t\t\t\tlowerCasedText: string = txt.toLocaleLowerCase(),\n\t\t\t\tloweredSearchPhrase = searchPhrase.toLocaleLowerCase();\n\n\t\t\tlet positions: Array<number> = [];\n\n\t\t\tlet index = 0;\n\n\t\t\twhile (index < loweredSearchPhrase.length) {\n\n\t\t\t\tconst found = lowerCasedText.indexOf(loweredSearchPhrase, index);\n\n\t\t\t\tif (found >= 0) {\n\t\t\t\t\tpositions.push(found);\n\t\t\t\t\tindex = found + searchPhrase.length;\n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\tindex = loweredSearchPhrase.length;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst arr = txt.split('');\n\n\t\t\tpositions.forEach((pos: number) => {\n\n\t\t\t\tfor (let i = 0; i < searchPhrase.length; i += 1) {\n\n\t\t\t\t\tlet ph;\n\n\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\tph = `<span class=\"gui-text-highlight\">${arr[pos + i]}`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tph = arr[pos + i];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (i === searchPhrase.length - 1) {\n\t\t\t\t\t\tph += `</span>`;\n\t\t\t\t\t}\n\n\t\t\t\t\tarr[pos + i] = ph;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\ttxt = arr.join('');\n\n\t\t\treturn txt;\n\t\t} else {\n\t\t\treturn this.accessor(entity);\n\t\t}\n\t}\n\n}\n","import { TemplateRef } from '@angular/core';\n\nimport { ColumnField } from '../../command/column/field/column-field';\nimport { SortOrder } from '../../command/column/sort/sort-order';\nimport { HeaderTemplate } from '../../column.config';\nimport { CellTemplateWithContext } from './cell-template-with-context';\nimport { CellContext } from './cell-context';\nimport { FieldId } from '../../../../structure/domain/structure/command/field/data-type/field.id';\nimport { CellTemplateWithAccessor } from './cell-template-with-accessor';\nimport { ColumnId } from '../../command/column/column.id';\nimport { DataType } from '../../../../structure/domain/structure/command/field/data-type/data-type';\nimport { ViewEntity } from '../../command/column/view.entity';\nimport { ColumnAlign } from '../../column-align';\n\n\nexport class ColumnDefinition {\n\n\tcellTemplate: TemplateRef<any>;\n\n\theaderTemplate: TemplateRef<any>;\n\n\teditTemplate: TemplateRef<any>;\n\n\twidth: number;\n\n\ttemplateFunction: (i: any) => string;\n\n\tprivate readonly columnId: ColumnId;\n\n\tprivate field: ColumnField;\n\n\tprivate sortStatus: SortOrder;\n\n\tprivate sortable: boolean = true;\n\n\tprivate header: string | HeaderTemplate;\n\n\tprivate enabled: boolean;\n\n\tprivate cellEditingEnabled: boolean;\n\n\tconstructor(field: ColumnField,\n\t\t\t\tcolumnId: ColumnId,\n\t\t\t\tenabled: boolean,\n\t\t\t\tprivate readonly type: DataType, // REFACTOR\n\t\t\t\tprivate readonly view: ViewEntity, // REFACTOR\n\t\t\t\tprivate readonly align: ColumnAlign, // REFACTOR\n\t\t\t\theader: string | HeaderTemplate,\n\t\t\t\tcellEditingEnabled: boolean,\n\t\t\t\tsort: SortOrder = SortOrder.NONE,\n\t\t\t\tsortable = true) {\n\t\tthis.field = field;\n\t\tthis.columnId = columnId;\n\t\tthis.enabled = enabled;\n\t\tthis.header = header;\n\t\tthis.cellEditingEnabled = cellEditingEnabled;\n\t\tthis.sortStatus = sort;\n\t\tthis.sortable = sortable;\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n\tsetHeader(header: string): void {\n\t\tthis.header = header;\n\t}\n\n\tsetField(field: ColumnField): void {\n\t\tthis.field = field;\n\t}\n\n\tgetHeaderCellTemplateWithContext(index: number): CellTemplateWithContext {\n\n\t\tconst header: any = this.header;\n\t\tlet headerCellContext: CellContext;\n\n\t\tif (typeof header === 'string') {\n\t\t\theaderCellContext = new CellContext(header);\n\t\t} else if (typeof header === 'function') {\n\t\t\theaderCellContext = new CellContext(header(index));\n\t\t}\n\n\t\tconst fieldId = new FieldId(this.field.getId().getId());\n\n\t\treturn new CellTemplateWithContext(\n\t\t\tthis.headerTemplate,\n\t\t\tthis.editTemplate,\n\t\t\theaderCellContext,\n\t\t\tthis.width,\n\t\t\tfieldId,\n\t\t\tthis.columnId,\n\t\t\tthis.sortStatus,\n\t\t\tthis.enabled,\n\t\t\tthis.sortable,\n\t\t\tthis.align\n\t\t);\n\t}\n\n\tgetContentCellTemplateWithAccessor(): CellTemplateWithAccessor {\n\n\t\tconst accessor = (entity: any) => {\n\t\t\treturn this.field.getAccessor()(entity);\n\t\t}, searchAccessor = (entity: any) => {\n\t\t\treturn this.field.getSearchAccessor()(entity);\n\t\t};\n\n\t\treturn new CellTemplateWithAccessor(\n\t\t\tthis.cellTemplate,\n\t\t\tthis.editTemplate,\n\t\t\ttrue,\n\t\t\tthis.templateFunction,\n\t\t\taccessor,\n\t\t\tsearchAccessor,\n\t\t\tthis.width,\n\t\t\tthis.field.getId(),\n\t\t\tthis.align,\n\t\t\tthis.cellEditingEnabled,\n\t\t\tthis.type,\n\t\t\tthis.view\n\t\t);\n\t}\n\n}\n","import { Injectable, TemplateRef } from '@angular/core';\n\nimport { ViewTemplateRepository } from '../view/view-template.repository';\nimport { EditTemplateRepository } from '../edit/edit-template.repository';\nimport { ColumnEntity } from '../../command/column/column.entity';\nimport { ColumnDefinition } from './column-definition';\nimport { CellView } from '../../cell-view';\nimport { DataType } from '../../../../structure/domain/structure/command/field/data-type/data-type';\nimport { ActiveColumnEntity } from '../../command/column/active/active-column.entity';\n\n\n@Injectable()\nexport class ColumnDefinitionFactory {\n\n\tconstructor(private viewTemplateRepository: ViewTemplateRepository,\n\t\t\t\tprivate editTemplateRepository: EditTemplateRepository) {\n\t}\n\n\tcreate(column: ColumnEntity): ColumnDefinition;\n\tcreate(column: ActiveColumnEntity): ColumnDefinition;\n\tcreate(column: ColumnEntity | ActiveColumnEntity): ColumnDefinition {\n\n\t\tif (column instanceof ColumnEntity) {\n\t\t\treturn this.createFromColumnEntity(column);\n\t\t} else {\n\t\t\treturn this.createFromActiveColumnEntity(column);\n\t\t}\n\t}\n\n\tprivate createFromColumnEntity(column: ColumnEntity): ColumnDefinition {\n\n\t\tlet columnDef = new ColumnDefinition(\n\t\t\tcolumn.getField(),\n\t\t\tcolumn.getColumnId(),\n\t\t\tcolumn.isEnabled(),\n\t\t\tcolumn.getDataType(),\n\t\t\tcolumn.getView(),\n\t\t\tcolumn.getAlign(),\n\t\t\tcolumn.getHeader(),\n\t\t\tcolumn.isCellEditingEnabled(),\n\t\t\tcolumn.getSortStatus(),\n\t\t\tcolumn.getSortingEnabled()\n\t\t);\n\n\t\tcolumnDef.cellTemplate = this.findViewTemplate(column.getCellView());\n\t\tcolumnDef.headerTemplate = this.findViewTemplate(CellView.TEXT);\n\n\t\tcolumnDef.templateFunction = column.getTemplateFunction();\n\n\t\tcolumnDef.editTemplate = this.findEditTemplate(column.getDataType());\n\n\t\tcolumnDef.width = +column.getWidth();\n\n\t\treturn columnDef;\n\t}\n\n\tprivate createFromActiveColumnEntity(activeColumn: ActiveColumnEntity): ColumnDefinition {\n\n\t\tlet columnDef = new ColumnDefinition(\n\t\t\tactiveColumn.getField(),\n\t\t\tactiveColumn.getColumnId(),\n\t\t\ttrue, // remove,\n\t\t\tactiveColumn.getDataType(),\n\t\t\tactiveColumn.getView(),\n\t\t\tactiveColumn.getAlign(),\n\t\t\tactiveColumn.getHeader(),\n\t\t\tactiveColumn.isCellEditingEnabled(),\n\t\t\tactiveColumn.getSortStatus(),\n\t\t\tactiveColumn.getSortingEnabled()\n\t\t);\n\n\t\tcolumnDef.cellTemplate = this.findViewTemplate(activeColumn.getCellView());\n\t\tcolumnDef.headerTemplate = this.findViewTemplate(CellView.TEXT);\n\n\t\tcolumnDef.templateFunction = activeColumn.getTemplateFunction();\n\n\t\tcolumnDef.editTemplate = this.findEditTemplate(activeColumn.getDataType());\n\n\t\tcolumnDef.width = +activeColumn.getWidth();\n\n\t\treturn columnDef;\n\t}\n\n\tcreateColumns(columns: Array<ColumnEntity>): Array<ColumnDefinition> {\n\t\treturn columns.map((column: ColumnEntity) => this.create(column));\n\t}\n\n\tprivate findViewTemplate(view: CellView): TemplateRef<any> {\n\n\t\tif (view === CellView.FUNCTION) {\n\t\t\treturn this.viewTemplateRepository.findTemplate(CellView.FUNCTION);\n\t\t} else {\n\t\t\treturn this.viewTemplateRepository.findTemplate(view);\n\t\t}\n\t}\n\n\tprivate findEditTemplate(dataType: DataType): TemplateRef<any> {\n\t\treturn this.editTemplateRepository.findTemplate(dataType);\n\t}\n\n}\n","import { AggregateId, ReadModel } from '@generic-ui/hermes';\n\nimport { ColumnDefinition } from './definition/column-definition';\nimport { CellTemplateWithContext } from './definition/cell-template-with-context';\nimport { CellTemplateWithAccessor } from './definition/cell-template-with-accessor';\n\n\nexport class Composition extends ReadModel {\n\n\tconstructor(uid: AggregateId,\n\t\t\t\tprivate readonly ready: boolean,\n\t\t\t\tprivate readonly allColumns: Array<ColumnDefinition>,\n\t\t\t\tprivate readonly activeColumns: Array<ColumnDefinition>,\n\t\t\t\tprivate readonly width: number,\n\t\t\t\tprivate readonly resizeWidth: boolean) {\n\t\tsuper(uid);\n\t}\n\n\tgetActiveColumns(): Array<ColumnDefinition> {\n\t\treturn this.activeColumns;\n\t}\n\n\tgetAllColumns(): Array<ColumnDefinition> {\n\t\treturn this.allColumns;\n\t}\n\n\tgetActiveHeaderColumns(): Array<CellTemplateWithContext> {\n\t\treturn this.getActiveColumns()\n\t\t\t\t   .map((column: ColumnDefinition, index: number) => column.getHeaderCellTemplateWithContext(index));\n\t}\n\n\tgetHeaderColumns(): Array<CellTemplateWithContext> {\n\t\treturn this.getAllColumns()\n\t\t\t\t   .map((column: ColumnDefinition, index: number) => column.getHeaderCellTemplateWithContext(index));\n\t}\n\n\tgetTemplateColumns(): Array<CellTemplateWithAccessor> {\n\t\treturn this.getActiveColumns()\n\t\t\t\t   .map((column: ColumnDefinition) => column.getContentCellTemplateWithAccessor());\n\t}\n\n\tgetWidth(): number {\n\t\treturn this.width;\n\t}\n\n\tgetContainerWidth(): number {\n\t\treturn +this.width - 2;\n\t}\n\n\tisReady(): boolean {\n\t\treturn this.ready;\n\t}\n\n\tisResizeWidthEnabled(): boolean {\n\t\treturn this.resizeWidth;\n\t}\n\n\tequals(composition: Composition): boolean {\n\t\treturn this.width === composition.width &&\n\t\t\tthis.resizeWidth === composition.resizeWidth &&\n\t\t\tthis.equalsByColumns(composition.allColumns);\n\t}\n\n\tequalsByColumns(columns: Array<ColumnDefinition>): boolean {\n\t\treturn this.allColumns.length === columns.length;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { ColumnDefinitionFactory } from './read/definition/column-definition.factory';\nimport { CompositionAggregate } from './command/composition.aggregate';\nimport { Composition } from './read/composition';\nimport { ColumnEntity } from './command/column/column.entity';\nimport { ColumnDefinition } from './read/definition/column-definition';\nimport { ActiveColumnEntity } from './command/column/active/active-column.entity';\n\n\n@Injectable()\nexport class CompositionConverter {\n\n\tconstructor(private columnDefinitionFactory: ColumnDefinitionFactory) {\n\t}\n\n\tconvert(aggregate: CompositionAggregate): Composition {\n\n\t\tconst ready = aggregate.isReady(),\n\t\t\tallColumns: Array<ColumnEntity> = aggregate.getColumns(),\n\t\t\tactiveColumns: Array<ActiveColumnEntity> = aggregate.getActiveColumns(),\n\t\t\tallColumnDefs: Array<ColumnDefinition> = this.convertToColumnDef(allColumns),\n\t\t\tactiveColumnDefs: Array<ColumnDefinition> = this.convertActiveColumnsToColumnDef(activeColumns),\n\t\t\twidth = aggregate.getWidth(),\n\t\t\tresizeWidth = aggregate.isResizeEnabled(),\n\t\t\tid = aggregate.getId();\n\n\t\treturn new Composition(id, ready, allColumnDefs, activeColumnDefs, width, resizeWidth);\n\t}\n\n\tprivate convertToColumnDef(columns: Array<ColumnEntity>): Array<ColumnDefinition> {\n\n\t\tconst columnDefs: Array<ColumnDefinition> = [];\n\n\t\tcolumns.forEach((column: ColumnEntity) => {\n\n\t\t\tconst columnDef = this.columnDefinitionFactory.create(column);\n\n\t\t\tcolumnDefs.push(columnDef);\n\t\t});\n\n\t\treturn columnDefs;\n\t}\n\n\tprivate convertActiveColumnsToColumnDef(activeColumns: Array<ActiveColumnEntity>): Array<ColumnDefinition> {\n\n\t\tconst columnDefs: Array<ColumnDefinition> = [];\n\n\t\tactiveColumns.forEach((column: ActiveColumnEntity) => {\n\n\t\t\tconst columnDef = this.columnDefinitionFactory.create(column);\n\n\t\t\tcolumnDefs.push(columnDef);\n\t\t});\n\n\t\treturn columnDefs;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { InMemoryReadModelStore } from '@generic-ui/hermes';\n\nimport { Composition } from '../../../domain/read/composition';\nimport { CompositionAggregate } from '../../../domain/command/composition.aggregate';\nimport { InMemoryCompositionStore } from '../in-memory.composition.store';\nimport { CompositionConverter } from '../../../domain/composition.converter';\n\n\n@Injectable()\nexport class InMemoryCompositionReadStore extends InMemoryReadModelStore<Composition, CompositionAggregate> {\n\n\tconstructor(private inMemoryCompositionStore: InMemoryCompositionStore,\n\t\t\t\tprivate compositionConverter: CompositionConverter) {\n\t\tsuper(inMemoryCompositionStore);\n\t}\n\n\ttoReadModel(aggregate: CompositionAggregate): Composition {\n\t\treturn this.compositionConverter.convert(aggregate);\n\t}\n\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class CompositionCreatedEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'CompositionCreatedEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class CompositionResizeWidthSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'CompositionResizeWidthSetEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class CompositionColumnsSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'CompositionColumnsSetEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class CompositionContainerWidthSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tpayload: any) {\n\t\tsuper(aggregateId, 'CompositionContainerWidthSetEvent', payload);\n\t}\n\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class CompositionWidthSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'CompositionWidthSetEvent');\n\t}\n}\n","import { DomainEvent } from '@generic-ui/hermes';\n\nimport { CompositionId } from '../../../composition-id';\nimport { ActiveColumnEntity } from '../active/active-column.entity';\n\n\nexport class CompositionChangeSortStatusEvent extends DomainEvent {\n\n\tconstructor(aggregateId: CompositionId,\n\t\t\t\tprivate readonly activeColumns: Array<ActiveColumnEntity>) {\n\t\tsuper(aggregateId, 'CompositionChangeSortStatusEvent');\n\t}\n\n\tgetCompositionId(): CompositionId {\n\t\treturn this.getAggregateId();\n\t}\n\n\tgetActiveColumns(): Array<ActiveColumnEntity> {\n\t\treturn this.activeColumns;\n\t}\n\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class CompositionColumnSetEnabledEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'CompositionColumnSetEnabledEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class CompositionColumnMovedLeftEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'CompositionColumnMovedLeftEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class CompositionColumnMovedRightEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'CompositionColumnMovedRightEvent');\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\n\nimport { AggregateId, DomainEvent, DomainEventBus } from '@generic-ui/hermes';\n\nimport { CompositionRepository } from '../../../domain/read/composition.repository';\nimport { Composition } from '../../../domain/read/composition';\nimport { InMemoryCompositionReadStore } from './in-memory.composition.read-store';\nimport { CompositionCreatedEvent } from '../../../domain/command/create-composition/composition-created.event';\nimport { CompositionResizeWidthSetEvent } from '../../../domain/command/width/resize-width/composition-resize-width-set.event';\nimport { CompositionColumnsSetEvent } from '../../../domain/command/column/set-columns/composition.columns-set.event';\nimport { CompositionContainerWidthSetEvent } from '../../../domain/command/width/set-container-width/composition-container-width-set.event';\nimport { CompositionWidthSetEvent } from '../../../domain/command/width/set-width/composition-width-set.event';\nimport { CompositionChangeSortStatusEvent } from '../../../domain/command/column/sort/composition-change-sort-status.event';\nimport { CompositionColumnSetEnabledEvent } from '../../../domain/command/column/set-enabled/composition.column-set-enabled.event';\nimport { CompositionColumnMovedLeftEvent } from '../../../domain/command/column/move/left/composition.column-moved-left.event';\nimport { CompositionColumnMovedRightEvent } from '../../../domain/command/column/move/right/composition.column-moved-right.event';\n\n\n@Injectable()\nexport class InMemoryCompositionRepository extends CompositionRepository {\n\n\tprivate readonly compositionIdToComposition = new Map<string, Composition>();\n\n\tprivate readonly composition$ = new ReplaySubject<Map<string, Composition>>(1);\n\n\tconstructor(domainEventBus: DomainEventBus,\n\t\t\t\tprivate inMemoryCompositionQueryStore: InMemoryCompositionReadStore) {\n\t\tsuper(domainEventBus);\n\t}\n\n\ton(aggregateId: AggregateId): Observable<Readonly<Composition>> {\n\n\t\treturn this.composition$\n\t\t\t\t   .asObservable()\n\t\t\t\t   .pipe(\n\t\t\t\t\t   filter((compositionIdToComposition: Map<string, Composition>) => {\n\n\t\t\t\t\t\t   const key = aggregateId.getId();\n\n\t\t\t\t\t\t   return compositionIdToComposition.has(key);\n\t\t\t\t\t   }),\n\t\t\t\t\t   map((compositionIdToComposition: Map<string, Composition>) => compositionIdToComposition.get(aggregateId.getId()))\n\t\t\t\t   );\n\t}\n\n\tprotected forEvents(): Array<typeof DomainEvent> {\n\t\treturn [\n\t\t\tCompositionCreatedEvent,\n\t\t\tCompositionResizeWidthSetEvent,\n\t\t\tCompositionColumnsSetEvent,\n\t\t\tCompositionContainerWidthSetEvent,\n\t\t\tCompositionWidthSetEvent,\n\t\t\tCompositionColumnSetEnabledEvent,\n\t\t\tCompositionColumnMovedLeftEvent,\n\t\t\tCompositionColumnMovedRightEvent,\n\t\t\tCompositionChangeSortStatusEvent as any\n\t\t];\n\t}\n\n\tprotected subscribe(event: DomainEvent): void {\n\n\t\tconst aggregateId = event.getAggregateId();\n\n\t\tconst optComposition = this.inMemoryCompositionQueryStore.getById(aggregateId);\n\n\t\toptComposition.ifPresent((composition: Composition) => {\n\t\t\tconst key = composition.getId().toString();\n\n\t\t\tthis.compositionIdToComposition.set(key, composition);\n\n\t\t\tthis.composition$.next(this.compositionIdToComposition);\n\t\t});\n\t}\n}\n","import { InMemoryCompositionAggregateStore } from './command/in-memory.composition.aggregate-store';\nimport { CompositionAggregateRepository } from '../../domain/command/composition.aggregate-repository';\nimport { InMemoryCompositionAggregateRepository } from './command/in-memory.composition.aggregate-repository';\nimport { InMemoryCompositionReadStore } from './read/in-memory.composition.read-store';\nimport { CompositionRepository } from '../../domain/read/composition.repository';\nimport { InMemoryCompositionRepository } from './read/in-memory.composition.repository';\nimport { InMemoryCompositionStore } from './in-memory.composition.store';\n\nexport const inMemoryCompositionCommandProviders = [\n\tInMemoryCompositionAggregateStore,\n\t{\n\t\tprovide: CompositionAggregateRepository,\n\t\tuseClass: InMemoryCompositionAggregateRepository\n\t}\n];\n\nexport const inMemoryCompositionQueryProviders = [\n\tInMemoryCompositionReadStore,\n\t{\n\t\tprovide: CompositionRepository,\n\t\tuseClass: InMemoryCompositionRepository\n\t}\n];\n\nexport const inMemoryCompositionProviders = [\n\tInMemoryCompositionStore\n];\n","export class ColumnId {\n\n\tprivate readonly id: string;\n\n\tconstructor(id: string) {\n\t\tthis.id = id;\n\t}\n\n\tgetId(): string {\n\t\treturn this.id;\n\t}\n\n\tequals(columnId: ColumnId): boolean {\n\t\treturn this.id === columnId.getId();\n\t}\n\n}\n","import { CellView } from '../../../cell-view';\nimport { ColumnAlign } from '../../../column-align';\n\nexport abstract class ColumnPresentation {\n\n\tabstract getPossibleViews(): Array<CellView>;\n\n\tabstract getDefaultView(): CellView;\n\n\tabstract getDefaultAlign(): ColumnAlign;\n}\n","import { ValueObject } from '@generic-ui/hermes';\n\nimport { ColumnPresentation } from '../column.presentation';\nimport { ColumnAlign } from '../../../../column-align';\nimport { CellView } from '../../../../cell-view';\n\n\n@ValueObject\nexport class NumberColumnPresentation extends ColumnPresentation {\n\n\tstatic getInstance(): NumberColumnPresentation {\n\t\tif (!NumberColumnPresentation.instance) {\n\t\t\tNumberColumnPresentation.instance = new NumberColumnPresentation();\n\t\t}\n\t\treturn NumberColumnPresentation.instance;\n\t}\n\n\tprivate static instance: NumberColumnPresentation = null;\n\n\tprivate constructor() {\n\t\tsuper();\n\t}\n\n\tgetPossibleViews(): Array<CellView> {\n\t\treturn [\n\t\t\tCellView.TEXT,\n\t\t\tCellView.BAR,\n\t\t\tCellView.PERCENTAGE_BAR,\n\t\t\tCellView.PERCENTAGE\n\t\t];\n\t}\n\n\tgetDefaultView(): CellView {\n\t\treturn CellView.NUMBER;\n\t}\n\n\tgetDefaultAlign(): ColumnAlign {\n\t\treturn ColumnAlign.RIGHT;\n\t}\n}\n","import { ValueObject } from '@generic-ui/hermes';\n\nimport { ColumnPresentation } from '../column.presentation';\nimport { ColumnAlign } from '../../../../column-align';\nimport { CellView } from '../../../../cell-view';\n\n\n@ValueObject\nexport class BooleanColumnPresentation extends ColumnPresentation {\n\n\tstatic getInstance(): BooleanColumnPresentation {\n\t\tif (!BooleanColumnPresentation.instance) {\n\t\t\tBooleanColumnPresentation.instance = new BooleanColumnPresentation();\n\t\t}\n\t\treturn BooleanColumnPresentation.instance;\n\t}\n\n\tprivate static instance: BooleanColumnPresentation = null;\n\n\tprivate constructor() {\n\t\tsuper();\n\t}\n\n\tgetPossibleViews(): Array<CellView> {\n\t\treturn [\n\t\t\tCellView.TEXT,\n\t\t\tCellView.ITALIC,\n\t\t\tCellView.CHIP,\n\t\t\tCellView.BOLD,\n\t\t\tCellView.CHECKBOX\n\t\t];\n\t}\n\n\tgetDefaultView(): CellView {\n\t\treturn CellView.CHECKBOX;\n\t}\n\n\tgetDefaultAlign(): ColumnAlign {\n\t\treturn ColumnAlign.CENTER;\n\t}\n}\n","import { ValueObject } from '@generic-ui/hermes';\n\nimport { ColumnPresentation } from '../column.presentation';\nimport { ColumnAlign } from '../../../../column-align';\nimport { CellView } from '../../../../cell-view';\n\n\n@ValueObject\nexport class DateColumnPresentation extends ColumnPresentation {\n\n\tstatic getInstance(): DateColumnPresentation {\n\t\tif (!DateColumnPresentation.instance) {\n\t\t\tDateColumnPresentation.instance = new DateColumnPresentation();\n\t\t}\n\t\treturn DateColumnPresentation.instance;\n\t}\n\n\tprivate static instance: DateColumnPresentation = null;\n\n\tprivate constructor() {\n\t\tsuper();\n\t}\n\n\tgetPossibleViews(): Array<CellView> {\n\t\treturn [\n\t\t\tCellView.DATE,\n\t\t\tCellView.TEXT,\n\t\t\tCellView.ITALIC,\n\t\t\tCellView.BOLD,\n\t\t\tCellView.CHIP\n\t\t];\n\t}\n\n\tgetDefaultView(): CellView {\n\t\treturn CellView.DATE;\n\t}\n\n\tgetDefaultAlign(): ColumnAlign {\n\t\treturn ColumnAlign.LEFT;\n\t}\n}\n","import { ValueObject } from '@generic-ui/hermes';\n\nimport { ColumnPresentation } from '../column.presentation';\nimport { ColumnAlign } from '../../../../column-align';\nimport { CellView } from '../../../../cell-view';\n\n\n@ValueObject\nexport class StringColumnPresentation extends ColumnPresentation {\n\n\tstatic getInstance(): StringColumnPresentation {\n\t\tif (!StringColumnPresentation.instance) {\n\t\t\tStringColumnPresentation.instance = new StringColumnPresentation();\n\t\t}\n\t\treturn StringColumnPresentation.instance;\n\t}\n\n\tprivate static instance: StringColumnPresentation = null;\n\n\tprivate constructor() {\n\t\tsuper();\n\t}\n\n\tgetPossibleViews(): Array<CellView> {\n\t\treturn [\n\t\t\tCellView.TEXT,\n\t\t\tCellView.ITALIC,\n\t\t\tCellView.BOLD,\n\t\t\tCellView.IMAGE,\n\t\t\tCellView.LINK,\n\t\t\tCellView.CHIP\n\t\t];\n\t}\n\n\tgetDefaultView(): CellView {\n\t\treturn CellView.TEXT;\n\t}\n\n\tgetDefaultAlign(): ColumnAlign {\n\t\treturn ColumnAlign.LEFT;\n\t}\n}\n","import { ValueObject } from '@generic-ui/hermes';\n\nimport { ColumnPresentation } from '../column.presentation';\nimport { ColumnAlign } from '../../../../column-align';\nimport { CellView } from '../../../../cell-view';\n\n\n@ValueObject\nexport class UnknownColumnPresentation extends ColumnPresentation {\n\n\tstatic getInstance(): UnknownColumnPresentation {\n\t\tif (!UnknownColumnPresentation.instance) {\n\t\t\tUnknownColumnPresentation.instance = new UnknownColumnPresentation();\n\t\t}\n\t\treturn UnknownColumnPresentation.instance;\n\t}\n\n\tprivate static instance: UnknownColumnPresentation = null;\n\n\tprivate constructor() {\n\t\tsuper();\n\t}\n\n\tgetPossibleViews(): Array<CellView> {\n\t\treturn [\n\t\t\tCellView.TEXT\n\t\t];\n\t}\n\n\tgetDefaultView(): CellView {\n\t\treturn CellView.TEXT;\n\t}\n\n\tgetDefaultAlign(): ColumnAlign {\n\t\treturn ColumnAlign.LEFT;\n\t}\n}\n","import { Injectable } from '@angular/core';\n\nimport { DataType } from '../../../../../structure/domain/structure/command/field/data-type/data-type';\n\nimport { ColumnPresentation } from './column.presentation';\nimport { NumberColumnPresentation } from './data-type/number-column.presentation';\nimport { BooleanColumnPresentation } from './data-type/boolean-column.presentation';\nimport { DateColumnPresentation } from './data-type/date-column.presentation';\nimport { StringColumnPresentation } from './data-type/string-column.presentation';\nimport { UnknownColumnPresentation } from './data-type/unknown-column.presentation';\n\n\n@Injectable()\nexport class ColumnPresentationConverter {\n\n\tconvert(dataType: DataType): ColumnPresentation {\n\n\t\tif (dataType === DataType.NUMBER) {\n\t\t\treturn NumberColumnPresentation.getInstance();\n\t\t} else if (dataType === DataType.BOOLEAN) {\n\t\t\treturn BooleanColumnPresentation.getInstance();\n\t\t} else if (dataType === DataType.DATE) {\n\t\t\treturn DateColumnPresentation.getInstance();\n\t\t} else if (dataType === DataType.STRING) {\n\t\t\treturn StringColumnPresentation.getInstance();\n\t\t} else {\n\t\t\treturn UnknownColumnPresentation.getInstance();\n\t\t}\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { RandomStringGenerator } from '@generic-ui/hermes';\n\nimport { ColumnParams } from './set-columns/column.params';\nimport { ColumnEntity } from './column.entity';\nimport { ColumnConfig } from '../../column.config';\nimport { ColumnField } from './field/column-field';\nimport { ViewEntity } from './view.entity';\nimport { ColumnId } from './column.id';\nimport { DataType } from '../../../../structure/domain/structure/command/field/data-type/data-type';\nimport { ColumnPresentation } from './presentation/column.presentation';\nimport { ColumnPresentationConverter } from './presentation/column.presentation.converter';\n\n\n@Injectable()\nexport class ColumnEntityFactory {\n\n\tconstructor(private readonly columnPresentationConverter: ColumnPresentationConverter) {\n\t}\n\n\tcreate(params: ColumnParams): ColumnEntity;\n\tcreate(params: Array<ColumnParams>): Array<ColumnEntity>;\n\tcreate(data: ColumnParams | Array<ColumnParams>): ColumnEntity | Array<ColumnEntity> {\n\n\t\tif (Array.isArray(data)) {\n\t\t\treturn this.createColumns(data);\n\t\t} else {\n\t\t\treturn this.createColumn(data);\n\t\t}\n\t}\n\n\tprivate createColumn(params: ColumnParams): ColumnEntity {\n\n\t\tlet columnConfig: ColumnConfig = params.getColumn(),\n\t\t\tfield: ColumnField = params.getField(),\n\t\t\twidth = this.convertWidth(columnConfig.width) || undefined,\n\t\t\tview,\n\t\t\tenabled,\n\t\t\tdataType = field.getDataType();\n\n\t\tif (columnConfig.view !== undefined) {\n\t\t\tview = new ViewEntity(columnConfig.view);\n\t\t}\n\n\t\tif (columnConfig.enabled !== undefined) {\n\t\t\tenabled = columnConfig.enabled;\n\t\t} else {\n\t\t\tenabled = true;\n\t\t}\n\n\t\tconst presentation = this.getPresentation(dataType);\n\n\t\tlet columnEntity = new ColumnEntity(\n\t\t\tnew ColumnId(RandomStringGenerator.generate()),\n\t\t\tfield,\n\t\t\tcolumnConfig,\n\t\t\tenabled,\n\t\t\tpresentation,\n\t\t\tundefined,\n\t\t\tcolumnConfig.align,\n\t\t\tview,\n\t\t\twidth\n\t\t);\n\n\t\tif (columnConfig.header !== undefined) {\n\t\t\tcolumnEntity.setHeader(columnConfig.header);\n\t\t}\n\n\t\treturn columnEntity;\n\t}\n\n\tprivate createColumns(columns: Array<ColumnParams>): Array<ColumnEntity> {\n\n\t\tlet columnEntities = [] as Array<ColumnEntity>;\n\n\t\tcolumns.forEach((column: ColumnParams) => {\n\t\t\tcolumnEntities.push(this.createColumn(column));\n\t\t});\n\n\t\treturn columnEntities;\n\t}\n\n\tprivate convertWidth(width: string | number): number {\n\t\treturn +width;\n\t}\n\n\tprivate getPresentation(dataType: DataType): ColumnPresentation {\n\n\t\treturn this.columnPresentationConverter.convert(dataType);\n\t}\n}\n","import { CompositionColumnMovedLeftAggregateEvent } from './column/move/left/composition.column-moved-left.aggregate-event';\n\nexport const CompositionAggregateEvents = {\n\tCompositionResizeWidthSetAggregateEvent: 'CompositionResizeWidthSetAggregateEvent',\n\tColumnsSetAggregateEvent: 'ColumnsSetAggregateEvent',\n\tCompositionContainerWidthSetAggregateEvent: 'CompositionContainerWidthSetAggregateEvent',\n\tCompositionWidthSetAggregateEvent: 'CompositionWidthSetAggregateEvent',\n\tCompositionColumnSetEnabledAggregateEvent: 'CompositionColumnSetEnabledAggregateEvent',\n\tCompositionColumnMovedLeftAggregateEvent: 'CompositionColumnMovedLeftAggregateEvent',\n\tCompositionColumnMovedRightAggregateEvent: 'CompositionColumnMovedRightAggregateEvent'\n};\n","import { Injectable } from '@angular/core';\n\nimport { AggregateEvent, DomainEvent } from '@generic-ui/hermes';\n\nimport { CompositionAggregateEvents } from './composition.events';\nimport { CompositionResizeWidthSetEvent } from './width/resize-width/composition-resize-width-set.event';\nimport { CompositionColumnsSetEvent } from './column/set-columns/composition.columns-set.event';\nimport { CompositionContainerWidthSetAggregateEvent } from './width/set-container-width/composition-container-width-set.aggregate-event';\nimport { CompositionContainerWidthSetEvent } from './width/set-container-width/composition-container-width-set.event';\nimport { CompositionWidthSetEvent } from './width/set-width/composition-width-set.event';\nimport { CompositionColumnSetEnabledEvent } from './column/set-enabled/composition.column-set-enabled.event';\nimport { CompositionColumnMovedLeftEvent } from './column/move/left/composition.column-moved-left.event';\nimport { CompositionColumnMovedRightEvent } from './column/move/right/composition.column-moved-right.event';\n\n\n@Injectable()\nexport class CompositionEventConverter {\n\n\tconvert(event: AggregateEvent): DomainEvent;\n\tconvert(events: Array<AggregateEvent>): Array<DomainEvent>;\n\tconvert(arg: AggregateEvent | Array<AggregateEvent>): DomainEvent | Array<DomainEvent> {\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn this.convertEvents(arg);\n\t\t} else {\n\t\t\treturn this.convertEvent(arg);\n\t\t}\n\t}\n\n\tprivate convertEvents(aggregateEvents: Array<AggregateEvent>): Array<DomainEvent> {\n\t\treturn aggregateEvents.map((event: AggregateEvent) => {\n\t\t\treturn this.convertEvent(event);\n\t\t});\n\t}\n\n\tprivate convertEvent(aggregateEvent: AggregateEvent): DomainEvent {\n\n\t\tswitch (aggregateEvent.getType()) {\n\t\t\tcase CompositionAggregateEvents.CompositionResizeWidthSetAggregateEvent:\n\n\t\t\t\treturn new CompositionResizeWidthSetEvent(aggregateEvent.getAggregateId());\n\n\t\t\tcase CompositionAggregateEvents.ColumnsSetAggregateEvent:\n\n\t\t\t\treturn new CompositionColumnsSetEvent(aggregateEvent.getAggregateId());\n\n\t\t\tcase CompositionAggregateEvents.CompositionContainerWidthSetAggregateEvent:\n\n\t\t\t\tconst payload = (aggregateEvent as CompositionContainerWidthSetAggregateEvent).containerWidth;\n\n\t\t\t\treturn new CompositionContainerWidthSetEvent(aggregateEvent.getAggregateId(), payload);\n\n\t\t\tcase CompositionAggregateEvents.CompositionWidthSetAggregateEvent:\n\n\t\t\t\treturn new CompositionWidthSetEvent(aggregateEvent.getAggregateId());\n\n\t\t\tcase CompositionAggregateEvents.CompositionColumnSetEnabledAggregateEvent:\n\n\t\t\t\treturn new CompositionColumnSetEnabledEvent(aggregateEvent.getAggregateId());\n\n\t\t\tcase CompositionAggregateEvents.CompositionColumnMovedLeftAggregateEvent:\n\n\t\t\t\treturn new CompositionColumnMovedLeftEvent(aggregateEvent.getAggregateId());\n\n\t\t\tcase CompositionAggregateEvents.CompositionColumnMovedRightAggregateEvent:\n\n\t\t\t\treturn new CompositionColumnMovedRightEvent(aggregateEvent.getAggregateId());\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t}\n\n\n}\n","import { ColumnFieldId } from './column-field.id';\nimport { ColumnFieldAccessor } from './column-field-accessor';\n\nimport { DataType } from '../../../../../structure/domain/structure/command/field/data-type/data-type';\nimport { OriginItemEntity } from '../../../../../structure/domain/source/command/origin/origin-item-entity';\n\n\nexport class ColumnField {\n\n\tprivate readonly fieldId: ColumnFieldId;\n\n\tprivate readonly accessor: ColumnFieldAccessor;\n\n\tprivate readonly searchAccessor: ColumnFieldAccessor;\n\n\tprivate readonly dataType: DataType;\n\n\tconstructor(fieldId: ColumnFieldId,\n\t\t\t\taccessor: ColumnFieldAccessor,\n\t\t\t\tdataType: DataType,\n\t\t\t\tsearchAccessor: ColumnFieldAccessor) {\n\t\tthis.fieldId = fieldId;\n\t\tthis.accessor = accessor;\n\t\tthis.dataType = dataType;\n\t\tthis.searchAccessor = searchAccessor;\n\t}\n\n\tgetId(): ColumnFieldId {\n\t\treturn this.fieldId;\n\t}\n\n\tgetValue(entity: OriginItemEntity): any {\n\t\treturn this.accessor(entity);\n\t}\n\n\tgetAccessor(): ColumnFieldAccessor {\n\t\treturn this.accessor;\n\t}\n\n\tgetSearchAccessor(): ColumnFieldAccessor {\n\t\treturn this.searchAccessor;\n\t}\n\n\tgetDataType(): DataType {\n\t\treturn this.dataType;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { ColumnFieldId } from './column-field.id';\nimport { ColumnFieldAccessor } from './column-field-accessor';\nimport { ColumnField } from './column-field';\n\nimport { DataType } from '../../../../../structure/domain/structure/command/field/data-type/data-type';\n\n\n@Injectable()\nexport class ColumnFieldFactory {\n\n\tcreate(columnFieldId: ColumnFieldId, accessor: ColumnFieldAccessor, dataType: DataType, searchAccessor: ColumnFieldAccessor): ColumnField {\n\t\treturn new ColumnField(columnFieldId, accessor, dataType, searchAccessor);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\n\nimport { DomainEvent, DomainEventBus } from '@generic-ui/hermes';\n\nimport { CompositionId } from '../domain/composition-id';\nimport { CompositionColumnsSetEvent } from '../domain/command/column/set-columns/composition.columns-set.event';\nimport { CompositionContainerWidthSetEvent } from '../domain/command/width/set-container-width/composition-container-width-set.event';\n\n\n@Injectable()\nexport class CompositionEventService {\n\n\tconstructor(private readonly domainEventBus: DomainEventBus) {\n\t}\n\n\tonColumnsChanged(compositionId: CompositionId): Observable<DomainEvent> {\n\n\t\treturn this.domainEventBus\n\t\t\t\t   .ofEvent(\n\t\t\t\t\t   CompositionColumnsSetEvent\n\t\t\t\t   )\n\t\t\t\t   .pipe(\n\t\t\t\t\t   filter((event: DomainEvent) => event.getAggregateId().toString() === compositionId.toString())\n\t\t\t\t   );\n\t}\n\n\t// onWidthChanged(compositionId: CompositionId): Observable<number> {\n\t// \treturn this.domainEventBus\n\t// \t\t\t   .ofEvent(\n\t// \t\t\t\t   CompositionColumnsSetEvent\n\t// \t\t\t   )\n\t// \t\t\t   .pipe(\n\t// \t\t\t\t   filter((event: DomainEvent) => event.getAggregateId().toString() === compositionId.toString())\n\t// \t\t\t   );\n\t// }\n\n\tonContainerWidthChanged(compositionId: CompositionId): Observable<number> {\n\t\treturn this.domainEventBus\n\t\t\t\t   .ofEvent(\n\t\t\t\t\t   CompositionContainerWidthSetEvent\n\t\t\t\t   )\n\t\t\t\t   .pipe(\n\t\t\t\t\t   filter((event: DomainEvent) => event.getAggregateId().equals(compositionId)),\n\t\t\t\t\t   map((event: CompositionContainerWidthSetEvent) => {\n\t\t\t\t\t\t   return event.getPayload();\n\t\t\t\t\t   }),\n\t\t\t\t\t   filter((width: number) => !!width)\n\t\t\t\t   );\n\t}\n\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\nimport { CompositionId } from '../../../../../../composition/domain/composition-id';\nimport { FieldId } from '../../field/data-type/field.id';\n\n\nexport class SortToggledEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tprivate readonly compositionId: CompositionId,\n\t\t\t\tprivate readonly directions: Array<{ fieldId: FieldId, direction: boolean }>) {\n\t\tsuper(aggregateId, 'ToggleSortEvent');\n\t}\n\n\tgetCompositionId(): CompositionId {\n\t\treturn this.compositionId;\n\t}\n\n\tgetDirections(): any {\n\t\treturn this.directions;\n\t}\n}\n","export class ColumnFieldId {\n\n\tprivate readonly id: string;\n\n\tconstructor(id: string) {\n\t\tthis.id = id;\n\t}\n\n\tgetId(): string {\n\t\treturn this.id;\n\t}\n\n}\n","import { ColumnFieldId } from '../field/column-field.id';\n\nexport class ChangeSortParams {\n\n\tconstructor(public readonly fieldId: ColumnFieldId,\n\t\t\t\tpublic readonly direction: boolean) {\n\t}\n\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\nimport { CompositionId } from '../../../../../../composition/domain/composition-id';\nimport { FieldId } from '../../field/data-type/field.id';\n\nexport class SortOrderSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tprivate readonly compositionId: CompositionId,\n\t\t\t\tprivate readonly directions: Array<{ fieldId: FieldId, direction: boolean }>) {\n\t\tsuper(aggregateId, 'SortOrderSetEvent');\n\t}\n\n\tgetCompositionId(): CompositionId {\n\t\treturn this.compositionId;\n\t}\n\n\tgetDirections(): any {\n\t\treturn this.directions;\n\t}\n}\n","import { Injectable } from '@angular/core';\n\nimport { DomainEvent, DomainEventHandler } from '@generic-ui/hermes';\n\nimport { SortToggledEvent } from '../../../../../structure/domain/structure/command/sort/toggle/sort-toggled.event';\n\nimport { CompositionDispatcher } from '../../composition.dispatcher';\nimport { ColumnFieldId } from '../field/column-field.id';\nimport { ChangeSortParams } from './change-sort.params';\nimport { SortOrderSetEvent } from '../../../../../structure/domain/structure/command/sort/order/sort-order-set.event';\n\n\n@Injectable()\nexport class CompositionChangeSortStatusEventHandler extends DomainEventHandler {\n\n\tconstructor(private compositionDispatcher: CompositionDispatcher) {\n\t\tsuper();\n\t}\n\n\thandle(event: DomainEvent): void {\n\n\t\tif (event instanceof SortToggledEvent) {\n\n\t\t\tconst compositionId = event.getCompositionId(),\n\t\t\t\tdirs = event.getDirections();\n\n\t\t\tlet params = dirs.map((dir: any) => {\n\n\t\t\t\tconst columnFieldId = new ColumnFieldId(dir.fieldId.getId());\n\n\t\t\t\treturn new ChangeSortParams(columnFieldId, dir.direction);\n\t\t\t});\n\n\t\t\tthis.compositionDispatcher.changeSort(compositionId, params);\n\t\t}\n\n\t\tif (event instanceof SortOrderSetEvent) {\n\n\t\t\tconst compositionId = event.getCompositionId(),\n\t\t\t\tdirs = event.getDirections();\n\n\t\t\tlet params = dirs.map((dir: any) => {\n\n\t\t\t\tconst columnFieldId = new ColumnFieldId(dir.fieldId.getId());\n\n\t\t\t\treturn new ChangeSortParams(columnFieldId, dir.direction);\n\t\t\t});\n\n\t\t\tthis.compositionDispatcher.changeSort(compositionId, params);\n\t\t}\n\t}\n}\n","import { DomainEvent } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\nimport { CompositionId } from '../../../../../../composition/domain/composition-id';\nimport { ColumnConfig } from '../../../../../../composition/domain/column.config';\nimport { TypeField } from '../data-type/type.field';\n\n\nexport class FieldsInitedEvent extends DomainEvent {\n\n\tconstructor(aggregateId: StructureId,\n\t\t\t\tpublic readonly compositionId: CompositionId,\n\t\t\t\tpublic readonly columns: Array<ColumnConfig>, // TODO merge\n\t\t\t\tprivate readonly fields: Array<TypeField>) {\n\t\tsuper(aggregateId, 'FieldsInitedEvent');\n\t}\n\n\tgetFields(): Array<TypeField> {\n\t\treturn this.fields;\n\t}\n}\n","import { ColumnConfig } from '../../../column.config';\nimport { ColumnField } from '../field/column-field';\n\nexport class ColumnParams {\n\n\tconstructor(private readonly column: ColumnConfig,\n\t\t\t\tprivate readonly field: ColumnField) {\n\t}\n\n\tgetColumn(): ColumnConfig {\n\t\treturn this.column;\n\t}\n\n\tgetField(): ColumnField {\n\t\treturn this.field;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { DomainEvent, DomainEventHandler } from '@generic-ui/hermes';\n\nimport { FieldsInitedEvent } from '../../../../../structure/domain/structure/command/field/init/fields-inited.event';\n\nimport { CompositionDispatcher } from '../../composition.dispatcher';\nimport { ColumnFieldFactory } from '../field/colum-field.factory';\nimport { ColumnFieldId } from '../field/column-field.id';\nimport { ColumnConfig } from '../../../column.config';\nimport { ColumnParams } from './column.params';\nimport { TypeField } from '../../../../../structure/domain/structure/command/field/data-type/type.field';\n\n\n@Injectable()\nexport class CompositionFieldsInitedEventHandler extends DomainEventHandler {\n\n\tconstructor(private compositionDispatcher: CompositionDispatcher,\n\t\t\t\tprivate readonly columnFieldFactory: ColumnFieldFactory) {\n\t\tsuper();\n\t}\n\n\thandle(event: DomainEvent): void {\n\n\t\tif (event instanceof FieldsInitedEvent) {\n\n\t\t\t// TODO Move to different layer\n\t\t\tconst fields = event.getFields(),\n\t\t\t\tcolumnFieldIds = this.convertColumnFieldIds(fields),\n\t\t\t\tcolumns = event.columns,\n\t\t\t\tparams = this.convertColumns(columns, fields, columnFieldIds);\n\n\t\t\tthis.compositionDispatcher.setColumns(event.compositionId, params);\n\t\t}\n\t}\n\n\tprivate convertColumnFieldIds(fields: Array<TypeField>): Array<ColumnFieldId> {\n\n\t\tif (!fields) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn fields.map((field: TypeField) => new ColumnFieldId(field.getId().getId()));\n\t}\n\n\tprivate convertColumns(columns: Array<ColumnConfig>, fields: Array<TypeField>, columnFieldIds: Array<ColumnFieldId>): Array<ColumnParams> {\n\n\t\tif (!columns) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn columns.map((column: ColumnConfig, index: number) => {\n\n\t\t\tconst columnFieldId = columnFieldIds[index],\n\t\t\t\tfield = fields[index];\n\n\t\t\tconst columnField = this.columnFieldFactory.create(columnFieldId, field.getAccessorMethod(), field.getDataType(), field.getSearchAccessorMethod());\n\n\t\t\treturn new ColumnParams(column, columnField);\n\t\t});\n\n\t}\n}\n","import { DOMAIN_EVENT_HANDLERS } from '@generic-ui/hermes';\nimport {\n\tinMemoryCompositionCommandProviders,\n\tinMemoryCompositionProviders,\n\tinMemoryCompositionQueryProviders\n} from '../infrastructure/in-memory/in-memory.composition.providers';\nimport { CompositionDispatcher } from '../domain/command/composition.dispatcher';\nimport { ColumnEntityFactory } from '../domain/command/column/column-entity.factory';\nimport { CompositionEventConverter } from '../domain/command/composition-event.converter';\nimport { ColumnFieldFactory } from '../domain/command/column/field/colum-field.factory';\nimport { CompositionEventService } from './composition.event-service';\nimport { CompositionReadModelService } from './composition-read-model.service';\nimport { CompositionCommandService } from './composition.command-service';\nimport { CompositionConverter } from '../domain/composition.converter';\nimport { EditTemplateRepository } from '../domain/read/edit/edit-template.repository';\nimport { EditTemplateFactory } from '../domain/read/edit/edit-template.factory';\nimport { ViewTemplateFactory } from '../domain/read/view/view-template.factory';\nimport { ViewTemplateRepository } from '../domain/read/view/view-template.repository';\nimport { ColumnDefinitionFactory } from '../domain/read/definition/column-definition.factory';\nimport { CompositionChangeSortStatusEventHandler } from '../domain/command/column/sort/composition-change-sort-status.event-handler';\nimport { CompositionFieldsInitedEventHandler } from '../domain/command/column/set-columns/composition-fields-inited.event-handler';\nimport { ColumnPresentationConverter } from '../domain/command/column/presentation/column.presentation.converter';\n\n\nconst commandProviders = [\n\t...inMemoryCompositionCommandProviders,\n\tCompositionDispatcher,\n\tColumnEntityFactory,\n\tColumnPresentationConverter,\n\tCompositionEventConverter,\n\tColumnFieldFactory\n];\n\nconst readProviders = [\n\t...inMemoryCompositionQueryProviders,\n\t{\n\t\tprovide: DOMAIN_EVENT_HANDLERS,\n\t\tuseClass: CompositionFieldsInitedEventHandler,\n\t\tmulti: true\n\t}, {\n\t\tprovide: DOMAIN_EVENT_HANDLERS,\n\t\tuseClass: CompositionChangeSortStatusEventHandler,\n\t\tmulti: true\n\t},\n\tColumnDefinitionFactory,\n\tViewTemplateRepository,\n\tViewTemplateFactory,\n\tEditTemplateFactory,\n\tEditTemplateRepository\n];\n\nexport const compositionProviders = [\n\t...inMemoryCompositionProviders,\n\t...commandProviders,\n\t...readProviders,\n\n\tCompositionConverter,\n\n\tCompositionCommandService,\n\tCompositionReadModelService,\n\tCompositionEventService\n];\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer, SafeHtml, SafeResourceUrl, SafeScript, SafeStyle, SafeUrl } from '@angular/platform-browser';\n\n@Pipe({\n\tname: 'guiSafe'\n})\nexport class SafePipe implements PipeTransform {\n\n\tconstructor(protected sanitizer: DomSanitizer) {\n\t}\n\n\ttransform(value: any, type: string): SafeHtml | SafeStyle | SafeScript | SafeUrl | SafeResourceUrl {\n\t\tswitch (type) {\n\t\t\tcase 'html':\n\t\t\t\treturn this.sanitizer.bypassSecurityTrustHtml(value);\n\t\t\tcase 'style':\n\t\t\t\treturn this.sanitizer.bypassSecurityTrustStyle(value);\n\t\t\tcase 'script':\n\t\t\t\treturn this.sanitizer.bypassSecurityTrustScript(value);\n\t\t\tcase 'url':\n\t\t\t\treturn this.sanitizer.bypassSecurityTrustUrl(value);\n\t\t\tcase 'resourceUrl':\n\t\t\t\treturn this.sanitizer.bypassSecurityTrustResourceUrl(value);\n\t\t\tdefault:\n\t\t\t\tthrow new Error(`Invalid safe type specified: ${type}`);\n\t\t}\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { SafePipe } from './safe.pipe';\n\n@NgModule({\n\timports: [\n\t\tCommonModule\n\t],\n\tdeclarations: [\n\t\tSafePipe\n\t],\n\texports: [\n\t\tSafePipe\n\t]\n})\nexport class SanitizeModule {\n}\n","import { ColumnWidth } from '../column/column-width/column-width';\n\nexport class CompositionContainerWidthCalculator {\n\n\tconstructor(private readonly MIN_COLUMN_WIDTH: number) {\n\t}\n\n\tcalculateMinWidth(columnWidths: Array<ColumnWidth>): number {\n\n\t\tconst { staticColumns, fluidColumns } = this.segregateColumns(columnWidths);\n\n\t\t// TODO reduce\n\t\tlet sum = 0;\n\t\tstaticColumns.forEach((c) => {\n\t\t\tsum += c.getWidth();\n\t\t});\n\n\t\tsum += fluidColumns.length * this.MIN_COLUMN_WIDTH;\n\n\t\treturn sum;\n\t}\n\n\tprivate segregateColumns(columns: Array<ColumnWidth>): { staticColumns: Array<ColumnWidth>, fluidColumns: Array<ColumnWidth> } {\n\n\t\tlet staticColumns = columns.filter((columnWidth: ColumnWidth) => columnWidth.isTypeNumber() && columnWidth.getWidth() > this.MIN_COLUMN_WIDTH),\n\t\t\tfluidColumns = columns.filter((columnWidth: ColumnWidth) => columnWidth.isTypeAuto() || columnWidth.isTypePercentage() || (columnWidth.isTypeNumber() && columnWidth.getWidth() <= this.MIN_COLUMN_WIDTH));\n\n\t\treturn {\n\t\t\tstaticColumns: staticColumns,\n\t\t\tfluidColumns: fluidColumns\n\t\t};\n\t}\n}\n","import { AggregateEvent, AggregateId } from '@generic-ui/hermes';\n\nexport class CompositionWidthSetAggregateEvent extends AggregateEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'CompositionWidthSetAggregateEvent');\n\t}\n\n}\n","import { AggregateEvent } from '@generic-ui/hermes';\n\nimport { CompositionId } from '../../../composition-id';\n\n\nexport class CompositionContainerWidthSetAggregateEvent extends AggregateEvent {\n\n\tconstructor(compositionId: CompositionId,\n\t\t\t\tpublic readonly containerWidth: number) {\n\t\tsuper(compositionId, 'CompositionContainerWidthSetAggregateEvent');\n\t}\n}\n","import { AggregateEvent } from '@generic-ui/hermes';\nimport { CompositionId } from '../../../composition-id';\n\n\nexport class CompositionResizeWidthSetAggregateEvent extends AggregateEvent {\n\n\tconstructor(compositionId: CompositionId) {\n\t\tsuper(compositionId, 'CompositionResizeWidthSetAggregateEvent');\n\t}\n}\n","import { AggregateEvent, AggregateId } from '@generic-ui/hermes';\nimport { ActiveColumnEntity } from '../active/active-column.entity';\n\nexport class CompositionColumnSetEnabledAggregateEvent extends AggregateEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tprivate readonly activeColumns: Array<ActiveColumnEntity>) {\n\t\tsuper(aggregateId, 'CompositionColumnSetEnabledAggregateEvent');\n\t}\n\n\tgetActiveColumns(): Array<ActiveColumnEntity> {\n\t\treturn this.activeColumns;\n\t}\n\n}\n","export enum ColumnWidthType {\n\tPERCENTAGE,\n\tNUMBER,\n\tAUTO\n}\n","import { ColumnWidthType } from './column-width-type';\n\nexport class ColumnWidth {\n\n\tprivate template: ColumnWidthType;\n\n\tprivate baseWidth: number | string;\n\n\tprivate width: number;\n\n\tconstructor(width?: number | string) {\n\t\tthis.baseWidth = width;\n\t\tthis.setWidthAndType(width);\n\t}\n\n\tgetWidth(): number {\n\t\treturn this.width;\n\t}\n\n\tgetColumnType(): ColumnWidthType {\n\t\treturn this.template;\n\t}\n\n\tisTypePercentage(): boolean {\n\t\treturn this.template === ColumnWidthType.PERCENTAGE;\n\t}\n\n\tisTypeAuto(): boolean {\n\t\treturn this.template === ColumnWidthType.AUTO;\n\t}\n\n\tisTypeNumber(): boolean {\n\t\treturn this.template === ColumnWidthType.NUMBER;\n\t}\n\n\tsetWidth(width: number): void {\n\t\tthis.width = width;\n\t}\n\n\tsetWidthAndType(width: number | string): void {\n\n\t\tif (width === undefined || width === null || width === 'auto') {\n\n\t\t\tthis.template = ColumnWidthType.AUTO;\n\t\t\tthis.setWidth(null);\n\n\t\t} else if (this.isPercentage(width)) {\n\n\t\t\tthis.template = ColumnWidthType.PERCENTAGE;\n\t\t\tthis.setWidth(this.percentageToNumber('' + width));\n\n\t\t} else if (this.isStringNumber(width)) {\n\n\t\t\tthis.template = ColumnWidthType.NUMBER;\n\t\t\tthis.setWidth(+width);\n\t\t} else {\n\n\t\t\tthis.template = ColumnWidthType.NUMBER;\n\t\t\tthis.setWidth(+width);\n\t\t}\n\t}\n\n\tclone(): ColumnWidth {\n\t\treturn new ColumnWidth(this.baseWidth);\n\t}\n\n\tprivate isPercentage(width: number | string): boolean {\n\t\treturn typeof width === 'string' && width[width.length - 1] === '%';\n\t}\n\n\t/**\n\t * Width needs to be in format '89%'\n\t * @param width\n\t */\n\tprivate percentageToNumber(width: string): number {\n\t\treturn +(width.slice(0, -1));\n\t}\n\n\tprivate isStringNumber(width: number | string): boolean {\n\t\tconst widthAsNumber = +width;\n\n\t\treturn Number.isNaN(widthAsNumber);\n\t}\n}\n","import { ColumnWidth } from '../column/column-width/column-width';\nimport { ColumnWidthType } from '../column/column-width/column-width-type';\n\nexport class CompositionWidthCalculator {\n\n\tprivate readonly columns: Array<ColumnWidth>;\n\n\tconstructor(private source: Array<ColumnWidth>,\n\t\t\t\tprivate width: number,\n\t\t\t\tprivate readonly MIN_COLUMN_WIDTH: number) {\n\t\tthis.columns = this.source.map((c) => c.clone());\n\t}\n\n\tcalculate(): Array<ColumnWidth> {\n\n\t\tlet width = this.width,\n\t\t\tcolumns = [...this.columns];\n\n\t\t// adjust min value\n\t\tthis.adjustMinimalWidth(columns);\n\n\t\t// remove number columns\n\t\tlet newColumns: Array<ColumnWidth> = [];\n\n\t\tcolumns.forEach((column: ColumnWidth, index: number) => {\n\t\t\tif (column.isTypeNumber()) {\n\t\t\t\twidth -= column.getWidth();\n\t\t\t} else {\n\t\t\t\tnewColumns.push(column);\n\t\t\t}\n\t\t});\n\n\t\tcolumns = newColumns;\n\n\t\t// split even auto columns\n\t\tif (columns.length !== 0) {\n\n\t\t\tconst evenWidth = width / columns.length;\n\n\t\t\tcolumns.forEach((column: ColumnWidth, index: number) => {\n\t\t\t\tcolumn.setWidth(evenWidth);\n\t\t\t});\n\t\t}\n\n\t\t// adjust number columns\n\t\t// let numberColumns = this.columns.filter((columnWidth: ColumnWidth) => columnWidth.isTypeNumber());\n\t\t//\n\t\t// // sort by min values\n\t\t// numberColumns.sort((columnOne: ColumnWidth, columnTwo: ColumnWidth) => {\n\t\t// \treturn columnOne.getWidth() - columnTwo.getWidth();\n\t\t// });\n\t\t//\n\t\t// numberColumns.forEach(() => {\n\t\t// });\n\n\t\t// this.adjustMinimalWidth(ColumnWidthType.NUMBER);\n\t\t//\n\t\t// this.adjustPercentageWidth();\n\t\t//\n\t\t// this.adjustAutoWidth();\n\n\t\treturn this.columns;\n\t}\n\n\tprivate adjustMinimalWidth(columns: Array<ColumnWidth>): void {\n\t\tcolumns.forEach((column: ColumnWidth) => {\n\t\t\tif (column.isTypeNumber()) {\n\t\t\t\tif (column.getWidth() < this.MIN_COLUMN_WIDTH) {\n\t\t\t\t\tcolumn.setWidthAndType(this.MIN_COLUMN_WIDTH);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate adjustPercentageWidth(): void {\n\n\t\tconst percentageColumns = this.columns.filter((columnWidth: ColumnWidth) => columnWidth.isTypePercentage());\n\n\t\tfor (let column of this.columns) {\n\t\t\tif (column.getColumnType() === ColumnWidthType.PERCENTAGE) {\n\t\t\t\tcolumn.setWidth(this.width * column.getWidth() * 0.01);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate adjustAutoWidth(): void {\n\n\t\tlet leftWidth = this.width,\n\t\t\tautoColumns = [];\n\n\t\tfor (let i = 0; i < this.columns.length; i += 1) {\n\n\t\t\tlet column = this.columns[i];\n\n\t\t\tif (column.getColumnType() !== ColumnWidthType.AUTO) {\n\t\t\t\tleftWidth -= column.getWidth();\n\t\t\t} else {\n\t\t\t\tautoColumns.push(column);\n\t\t\t}\n\t\t}\n\n\t\tif (autoColumns.length > 0) {\n\t\t\tconst splitWidth = leftWidth / autoColumns.length;\n\n\t\t\tfor (let column of autoColumns) {\n\t\t\t\tcolumn.setWidth(splitWidth);\n\t\t\t}\n\t\t}\n\t}\n\n}\n","import { ColumnWidth } from './column-width';\nimport { ColumnConfig } from '../../../column.config';\nimport { CompositionContainerWidthCalculator } from '../../width/composition-container-width.calculator';\nimport { CompositionWidthCalculator } from '../../width/composition-width.calculator';\n\n\nexport class ColumnWidthCollection {\n\n\tprivate baseColumnWidths: Array<ColumnWidth>;\n\n\tprivate columnWidths: Array<ColumnWidth>;\n\n\tprivate width: number;\n\n\tconstructor(private readonly MIN_COLUMN_WIDTH: number,\n\t\t\t\tcolumns: Array<ColumnConfig> = [],\n\t\t\t\twidth: number = 100) {\n\t\tthis.baseColumnWidths = columns.map((column: ColumnConfig) => new ColumnWidth(column.width));\n\t\tthis.columnWidths = columns.map((column: ColumnConfig) => new ColumnWidth(column.width));\n\n\t\tthis.setContainerWidth(width);\n\n\t\tthis.calculate();\n\t}\n\n\tgetColumnWidths(): Array<ColumnWidth> {\n\t\treturn this.baseColumnWidths;\n\t}\n\n\tgetColumnsWidth(): number {\n\t\treturn this.width;\n\t}\n\n\tgetWidths(): Array<number> {\n\t\treturn this.columnWidths.map(c => c.getWidth());\n\t}\n\n\tgetMinWidth(): number {\n\t\tconst calculator = new CompositionContainerWidthCalculator(this.MIN_COLUMN_WIDTH);\n\n\t\treturn calculator.calculateMinWidth(this.columnWidths);\n\t}\n\n\tsetWidth(width: number): void {\n\n\t\tthis.setContainerWidth(width);\n\t\tthis.calculate();\n\t}\n\n\tsetColumns(columnConfigs: Array<ColumnConfig>): void {\n\t\tthis.baseColumnWidths = columnConfigs.map((column: ColumnConfig) => new ColumnWidth(column.width));\n\t\tthis.columnWidths = columnConfigs.map((column: ColumnConfig) => new ColumnWidth(column.width));\n\n\t\tthis.calculate();\n\t}\n\n\tgetMinColumnWidth(): number {\n\t\treturn this.MIN_COLUMN_WIDTH;\n\t}\n\n\tprivate calculate(): void {\n\n\t\tif (this.baseColumnWidths && this.width) {\n\n\t\t\tconst calculator = new CompositionWidthCalculator(this.baseColumnWidths, this.width, this.MIN_COLUMN_WIDTH);\n\n\t\t\tthis.columnWidths = calculator.calculate();\n\t\t}\n\t}\n\n\tprivate setContainerWidth(width: number): void {\n\t\tif (this.getMinWidth() > width) {\n\t\t\tthis.width = this.getMinWidth();\n\t\t} else {\n\t\t\tthis.width = width;\n\t\t}\n\n\t\tthis.calculate();\n\t}\n}\n","import { AggregateEvent, AggregateId } from '@generic-ui/hermes';\n\nexport class CompositionChangeSortStatusAggregateEvent extends AggregateEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'CompositionChangeSortStatusAggregateEvent');\n\t}\n\n}\n","import { AggregateEvent } from '@generic-ui/hermes';\n\nimport { ActiveColumnEntity } from './active-column.entity';\nimport { ColumnWidthCollection } from '../column-width/column-width-collection';\nimport { ColumnConfig } from '../../../column.config';\nimport { ChangeSortParams } from '../sort/change-sort.params';\nimport { SortOrder } from '../sort/sort-order';\nimport { CompositionId } from '../../../composition-id';\nimport { CompositionChangeSortStatusAggregateEvent } from '../sort/composition-change-sort-status.aggregate-event';\nimport { ColumnId } from '../column.id';\nimport { ColumnWidth } from '../column-width/column-width';\n\nexport class ActiveColumnContainer {\n\n\tprivate readonly MIN_COLUMN_WIDTH = 50;\n\n\tprivate columns: Array<ActiveColumnEntity>;\n\n\t/**\n\t * Columns taken from user config.\n\t * This should not be modified and it should be used as a reference point.\n\t */\n\tprivate columnWidthCollection: ColumnWidthCollection = new ColumnWidthCollection(this.MIN_COLUMN_WIDTH);\n\n\tconstructor(private compositionId: CompositionId,\n\t\t\t\tcolumns: Array<ActiveColumnEntity> = [],\n\t\t\t\tgridWidth?: number,\n\t\t\t\tcolumnConfigs?: Array<ColumnConfig>) {\n\t\tthis.columns = columns;\n\n\t\tif (gridWidth && columnConfigs) {\n\t\t\tthis.columnWidthCollection = new ColumnWidthCollection(this.MIN_COLUMN_WIDTH, columnConfigs, gridWidth);\n\t\t}\n\t}\n\n\tgetColumnWidths(): Array<ColumnWidth> {\n\t\treturn this.columnWidthCollection.getColumnWidths();\n\t}\n\n\t// REMOVE\n\tgetColumns(): Array<ActiveColumnEntity> {\n\t\treturn this.columns;\n\t}\n\n\tsetWidth(width: number): void {\n\t\tthis.columnWidthCollection.setWidth(width);\n\t}\n\n\taddColumn(column: ActiveColumnEntity, index: number): void {\n\t\tthis.columns.splice(index, 0, column);\n\t}\n\n\tremoveColumn(index: number): void {\n\t\tthis.columns.splice(index, 1);\n\t}\n\n\tsetColumns(columns: Array<ActiveColumnEntity>, columnConfigs: Array<ColumnConfig>) {\n\n\t\tthis.columns = columns;\n\n\t\tthis.columnWidthCollection.setColumns(columnConfigs);\n\n\t\tconst updatedWidths = this.columnWidthCollection.getWidths();\n\n\t\tthis.columns.forEach((column: ActiveColumnEntity, index: number) => {\n\t\t\tcolumn.setWidth(updatedWidths[index]);\n\t\t});\n\n\t\t// TODO\n\t\t//this.addEvent(new ColumnsSetAggregateEvent(this.getId(), columns));\n\t}\n\n\tchangeSort(sortParams: Array<ChangeSortParams>): AggregateEvent {\n\n\t\tthis.columns.forEach((column: ActiveColumnEntity) => {\n\t\t\tcolumn.setSortStatus(SortOrder.NONE);\n\t\t});\n\n\t\tfor (let param of sortParams) {\n\n\t\t\tconst fieldId = param.fieldId,\n\t\t\t\tdirection = param.direction,\n\t\t\t\tsortStatus = direction ? SortOrder.ASC : SortOrder.DESC;\n\n\t\t\tconst columns = this.columns.filter((column: ActiveColumnEntity) => {\n\t\t\t\treturn column.getField().getId().getId() === fieldId.getId();\n\t\t\t});\n\n\t\t\tif (columns.length > 0) {\n\t\t\t\tcolumns.forEach((column: ActiveColumnEntity) => {\n\n\t\t\t\t\tcolumn.setSortStatus(sortStatus);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn new CompositionChangeSortStatusAggregateEvent(this.getCompositionId());\n\t}\n\n\tmoveLeft(columnId: ColumnId): void {\n\n\t\tconst index = this.findColumnIndex(columnId);\n\n\t\tthis.move(index, index - 1);\n\t}\n\n\tmoveRight(columnId: ColumnId): void {\n\n\t\tconst index = this.findColumnIndex(columnId);\n\n\t\tthis.move(index, index + 1);\n\t}\n\n\tgetMinColumnWidth(): number {\n\t\treturn this.MIN_COLUMN_WIDTH;\n\t}\n\n\tprivate move(fromIndex: number, toIndex: number): void {\n\n\t\tif (!this.validateMoveIndex(fromIndex) || !this.validateMoveIndex(toIndex)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst column = this.columns[fromIndex];\n\n\t\tthis.columns[fromIndex] = this.columns[toIndex];\n\t\tthis.columns[toIndex] = column;\n\t}\n\n\tprivate validateMoveIndex(index: number): boolean {\n\t\treturn index >= 0;\n\t}\n\n\tprivate getCompositionId(): CompositionId {\n\t\treturn this.compositionId;\n\t}\n\n\tprivate findColumnIndex(columnId: ColumnId): number {\n\t\treturn this.columns.findIndex(c => c.getColumnId().equals(columnId));\n\t}\n\n}\n","import { ColumnField } from '../field/column-field';\nimport { ColumnId } from '../column.id';\nimport { ColumnConfig, HeaderTemplate } from '../../../column.config';\nimport { ViewEntity } from '../view.entity';\nimport { ColumnAlign } from '../../../column-align';\nimport { ColumnEntity } from '../column.entity';\nimport { ColumnPresentation } from '../presentation/column.presentation';\n\n\nexport class ActiveColumnEntity extends ColumnEntity {\n\n\tstatic fromEntity(entity: ColumnEntity): ActiveColumnEntity {\n\t\treturn new ActiveColumnEntity(\n\t\t\tentity.getColumnId(),\n\t\t\tentity.getField(),\n\t\t\tentity.getHeader(),\n\t\t\tentity.getAlign(),\n\t\t\tentity.getView(),\n\t\t\tentity.getColumnConfig(),\n\t\t\tentity.getPresentation()\n\t\t);\n\t}\n\n\tprivate constructor(columnId: ColumnId,\n\t\t\t\t\t\tcolumnField: ColumnField,\n\t\t\t\t\t\theader: string | HeaderTemplate,\n\t\t\t\t\t\talign: ColumnAlign,\n\t\t\t\t\t\tview: ViewEntity,\n\t\t\t\t\t\tconfig: ColumnConfig,\n\t\t\t\t\t\tpresentation: ColumnPresentation) {\n\t\tsuper(\n\t\t\tcolumnId,\n\t\t\tcolumnField,\n\t\t\tconfig,\n\t\t\ttrue,\n\t\t\tpresentation,\n\t\t\theader,\n\t\t\talign,\n\t\t\tview,\n\t\t\tundefined\n\t\t);\n\t}\n\n}\n","import { ActiveColumnEntity } from './active-column.entity';\nimport { ColumnEntity } from '../column.entity';\n\nexport class ActiveColumnEntityConverter {\n\n\tconvertMany(entities: Array<ColumnEntity>): Array<ActiveColumnEntity> {\n\t\treturn entities.map(e => this.convert(e));\n\t}\n\n\tconvert(entity: ColumnEntity): ActiveColumnEntity {\n\n\t\treturn ActiveColumnEntity.fromEntity(entity);\n\t}\n\n\n}\n","import { AggregateEvent, AggregateId } from '@generic-ui/hermes';\nimport { ActiveColumnEntity } from '../../active/active-column.entity';\n\nexport class CompositionColumnMovedLeftAggregateEvent extends AggregateEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tprivate readonly activeColumns: Array<ActiveColumnEntity>) {\n\t\tsuper(aggregateId, 'CompositionColumnMovedLeftAggregateEvent');\n\t}\n\n\t// getActiveColumns(): Array<ActiveColumnEntity> {\n\t// \treturn this.activeColumns;\n\t// }\n\n}\n","import { AggregateEvent, AggregateId } from '@generic-ui/hermes';\nimport { ActiveColumnEntity } from '../../active/active-column.entity';\n\nexport class CompositionColumnMovedRightAggregateEvent extends AggregateEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tprivate readonly activeColumns: Array<ActiveColumnEntity>) {\n\t\tsuper(aggregateId, 'CompositionColumnMovedRightAggregateEvent');\n\t}\n\n\t// getActiveColumns(): Array<ActiveColumnEntity> {\n\t// \treturn this.activeColumns;\n\t// }\n\n}\n","import { AggregateEvent, AggregateId } from '@generic-ui/hermes';\n\n\nexport class ColumnsSetAggregateEvent extends AggregateEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'ColumnsSetAggregateEvent');\n\t}\n\n}\n","import { Aggregate, AggregateId, RootAggregate } from '@generic-ui/hermes';\n\nimport { ColumnEntity } from './column/column.entity';\nimport { ColumnConfig } from '../column.config';\nimport { ColumnParams } from './column/set-columns/column.params';\nimport { ColumnEntityFactory } from './column/column-entity.factory';\nimport { ChangeSortParams } from './column/sort/change-sort.params';\nimport { CompositionContainerWidthCalculator } from './width/composition-container-width.calculator';\nimport { CompositionWidthSetAggregateEvent } from './width/set-width/composition-width-set.aggregate-event';\nimport { CompositionContainerWidthSetAggregateEvent } from './width/set-container-width/composition-container-width-set.aggregate-event';\nimport { CompositionResizeWidthSetAggregateEvent } from './width/resize-width/composition-resize-width-set.aggregate-event';\nimport { ColumnId } from './column/column.id';\nimport { CompositionColumnSetEnabledAggregateEvent } from './column/set-enabled/composition.column-set-enabled.aggregate-event';\nimport { ActiveColumnContainer } from './column/active/active-column.container';\nimport { ActiveColumnEntity } from './column/active/active-column.entity';\nimport { ActiveColumnEntityConverter } from './column/active/active-column.entity-converter';\nimport { CompositionColumnMovedLeftAggregateEvent } from './column/move/left/composition.column-moved-left.aggregate-event';\nimport { CompositionColumnMovedRightAggregateEvent } from './column/move/right/composition.column-moved-right.aggregate-event';\nimport { ColumnsSetAggregateEvent } from './column/set-columns/columns-set.aggregate-event';\n\n\n@RootAggregate\nexport class CompositionAggregate extends Aggregate {\n\n\tprivate allColumns: Array<ColumnEntity> = [];\n\n\tprivate readonly baseColumns: Array<ColumnConfig>;\n\n\tprivate readonly baseParams: Array<ColumnParams>;\n\n\t/**\n\t * Value taken from user config [width]\n\t */\n\tprivate width: number;\n\n\tprivate containerInDOMWidth: number;\n\n\tprivate resizeWidthEnabled: boolean = true;\n\n\tprivate readonly columnFactory: ColumnEntityFactory;\n\n\tprivate readonly activeColumnContainer: ActiveColumnContainer;\n\n\tprivate readonly activeColumnEntityConverter: ActiveColumnEntityConverter = new ActiveColumnEntityConverter();\n\n\tconstructor(id: AggregateId,\n\t\t\t\tcolumnFactory: ColumnEntityFactory,\n\t\t\t\tcolumnsParams: Array<ColumnParams> = [],\n\t\t\t\twidth?: number,\n\t\t\t\tresizeWidth?: boolean) {\n\t\tsuper(id, 'CompositionAggregate');\n\n\t\tconst columnConfigs: Array<ColumnConfig> = columnsParams.map((param) => param.getColumn());\n\n\t\tthis.baseParams = columnsParams;\n\t\tthis.baseColumns = columnConfigs;\n\n\t\tthis.columnFactory = columnFactory;\n\n\t\tthis.width = width;\n\n\t\tthis.allColumns = this.columnFactory.create(columnsParams);\n\n\t\tconst activeColumns = this.activeColumnEntityConverter.convertMany(this.getEnabledColumns());\n\n\t\tthis.activeColumnContainer = new ActiveColumnContainer(this.getId(), activeColumns, width, columnConfigs);\n\n\t\tif (resizeWidth !== undefined && resizeWidth !== null) {\n\t\t\tthis.resizeWidthEnabled = resizeWidth;\n\t\t}\n\n\t}\n\n\t// REMOVE\n\tgetColumns(): Array<ColumnEntity> {\n\t\treturn this.allColumns;\n\t}\n\n\t// REMOVE\n\tgetActiveColumns(): Array<ActiveColumnEntity> {\n\t\treturn this.activeColumnContainer.getColumns();\n\t}\n\n\t// make private\n\tgetWidth(): number {\n\n\t\tif (this.resizeWidthEnabled) {\n\t\t\treturn this.containerInDOMWidth;\n\t\t} else {\n\t\t\treturn this.width;\n\t\t}\n\t}\n\n\t// REMOVE\n\tisResizeEnabled(): boolean {\n\t\treturn this.resizeWidthEnabled;\n\t}\n\n\t// REMOVE\n\tisReady(): boolean {\n\t\treturn !!this.getWidth() && this.getActiveColumns().length > 0;\n\t}\n\n\tsetColumns(params: Array<ColumnParams>): void {\n\n\t\tthis.allColumns = this.columnFactory.create(params);\n\n\t\tconst columnConfigs: Array<ColumnConfig> = params.map((param: ColumnParams) => param.getColumn());\n\n\t\tconst activeColumns = this.activeColumnEntityConverter.convertMany(this.getEnabledColumns());\n\n\t\tthis.activeColumnContainer.setColumns(activeColumns, columnConfigs);\n\n\t\tthis.addEvent(new ColumnsSetAggregateEvent(this.getId()));\n\t}\n\n\tsetContainerWidth(containerWidth: number): void {\n\n\t\tthis.setContainerWidthWithEvent(containerWidth);\n\n\t\tthis.recalculateColumns();\n\t}\n\n\tsetWidth(width: number): void {\n\t\tthis.setWidthWithEvent(width);\n\n\t\tthis.setResizeWidthWithEvent(false);\n\n\t\tthis.recalculateColumns();\n\t}\n\n\tsetResizeWidth(enabled: boolean): void {\n\t\tthis.setResizeWidthWithEvent(enabled);\n\t}\n\n\tchangeSort(sortParams: Array<ChangeSortParams>): void {\n\t\tthis.addEvent(\n\t\t\tthis.activeColumnContainer.changeSort(sortParams)\n\t\t);\n\t}\n\n\t// DELEGATE\n\tenableColumn(columnId: ColumnId, enabled: boolean): void {\n\n\t\tlet enabledIndex = -1;\n\n\t\tthis.allColumns.forEach((column: ColumnEntity, index: number) => {\n\t\t\tif (column.getColumnId().getId() === columnId.getId()) {\n\n\t\t\t\tconst prevState = column.isEnabled();\n\n\t\t\t\tcolumn.setEnabled(enabled);\n\n\t\t\t\tif (prevState !== enabled) {\n\t\t\t\t\tenabledIndex = index;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (enabledIndex > 0) {\n\n\t\t\tif (enabled) {\n\n\t\t\t\t// convert\n\t\t\t\tconst columnToAdd = this.activeColumnEntityConverter.convert(this.allColumns[enabledIndex]);\n\n\t\t\t\tthis.activeColumnContainer.addColumn(columnToAdd, enabledIndex);\n\t\t\t} else {\n\t\t\t\tthis.activeColumnContainer.removeColumn(enabledIndex);\n\t\t\t}\n\t\t}\n\n\t\tthis.recalculateColumns();\n\n\t\tthis.addEvent(\n\t\t\tnew CompositionColumnSetEnabledAggregateEvent(this.getId(), this.getActiveColumns())\n\t\t);\n\t}\n\n\tmoveLeft(columnId: ColumnId): void {\n\n\t\tconst columnIndex = this.findColumnIndex(columnId);\n\n\t\tlet nextLeft,\n\t\t\tnextLeftIndex = -1;\n\n\t\tfor (let i = columnIndex - 1; i >= 0; i -= 1) {\n\n\t\t\tconst leftColumn = this.allColumns[i];\n\n\t\t\tif (leftColumn.isEnabled()) {\n\n\t\t\t\tnextLeft = leftColumn;\n\t\t\t\tnextLeftIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (nextLeft && nextLeftIndex >= 0 && columnIndex >= 0) {\n\n\t\t\tlet column = this.allColumns[columnIndex];\n\n\t\t\tthis.allColumns[columnIndex] = nextLeft;\n\t\t\tthis.allColumns[nextLeftIndex] = column;\n\t\t}\n\n\t\tthis.activeColumnContainer.moveLeft(columnId);\n\n\t\tthis.addEvent(\n\t\t\tnew CompositionColumnMovedLeftAggregateEvent(this.getId(), this.getActiveColumns())\n\t\t);\n\t}\n\n\tmoveRight(columnId: ColumnId): void {\n\n\t\tconst columnIndex = this.findColumnIndex(columnId);\n\n\t\tlet nextRight,\n\t\t\tnextRightIndex = -1;\n\n\t\tfor (let i = columnIndex + 1; i < this.allColumns.length; i += 1) {\n\n\t\t\tconst rightColumn = this.allColumns[i];\n\n\t\t\tif (rightColumn.isEnabled()) {\n\n\t\t\t\tnextRight = rightColumn;\n\t\t\t\tnextRightIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (nextRight && nextRightIndex >= 0 && columnIndex >= 0) {\n\n\t\t\tlet column = this.allColumns[columnIndex];\n\n\t\t\tthis.allColumns[columnIndex] = nextRight;\n\t\t\tthis.allColumns[nextRightIndex] = column;\n\t\t}\n\n\t\tthis.activeColumnContainer.moveRight(columnId);\n\n\t\tthis.addEvent(\n\t\t\tnew CompositionColumnMovedRightAggregateEvent(this.getId(), this.getActiveColumns())\n\t\t);\n\t}\n\n\tprivate recalculateColumns(): void {\n\n\t\tconst activeColumns = this.activeColumnEntityConverter.convertMany(this.getEnabledColumns());\n\n\t\tthis.activeColumnContainer.setColumns(activeColumns, activeColumns.map(c => c.getColumnConfig()));\n\t}\n\n\t// TODO Refactor\n\tprivate setWidthWithEvent(width: number): void {\n\n\t\tconst calculator = new CompositionContainerWidthCalculator(this.getMinColumnWidth());\n\n\t\tconst minWidth = calculator.calculateMinWidth(this.activeColumnContainer.getColumnWidths());\n\n\t\tif (minWidth > width) {\n\t\t\tthis.width = minWidth;\n\t\t} else {\n\t\t\tthis.width = width;\n\t\t}\n\n\t\tthis.activeColumnContainer.setWidth(this.getWidth());\n\n\t\tthis.addEvent(new CompositionWidthSetAggregateEvent(this.getId()));\n\t}\n\n\t// TODO Refactor\n\tprivate setContainerWidthWithEvent(containerWidth: number): void {\n\n\t\tconst calculator = new CompositionContainerWidthCalculator(this.getMinColumnWidth());\n\n\t\tconst minWidth = calculator.calculateMinWidth(this.activeColumnContainer.getColumnWidths());\n\n\t\tif (minWidth > containerWidth) {\n\t\t\tthis.containerInDOMWidth = minWidth;\n\t\t} else {\n\t\t\tthis.containerInDOMWidth = containerWidth;\n\t\t}\n\n\t\tthis.activeColumnContainer.setWidth(this.getWidth());\n\n\t\tthis.addEvent(new CompositionContainerWidthSetAggregateEvent(this.getId(), containerWidth));\n\t}\n\n\tprivate setResizeWidthWithEvent(enabled: boolean): void {\n\t\tthis.resizeWidthEnabled = enabled;\n\t\tthis.activeColumnContainer.setWidth(this.getWidth());\n\t\tthis.addEvent(new CompositionResizeWidthSetAggregateEvent(this.getId()));\n\t}\n\n\t// REMOVE -> move to allColumnsContainer\n\tprivate getEnabledColumns(): Array<ColumnEntity> {\n\t\treturn this.allColumns.filter(c => c.isEnabled());\n\t}\n\n\tprivate findColumnIndex(columnId: ColumnId): number {\n\t\treturn this.allColumns.findIndex((column: ColumnEntity) => column.getColumnId().equals(columnId));\n\t}\n\n\tprivate getMinColumnWidth(): number {\n\t\treturn this.activeColumnContainer.getMinColumnWidth();\n\t}\n}\n","import { Injectable } from '@angular/core';\n\nimport { CompositionId } from '../composition-id';\nimport { CompositionAggregate } from './composition.aggregate';\nimport { ColumnEntityFactory } from './column/column-entity.factory';\n\n\n@Injectable()\nexport class CompositionAggregateFactory {\n\n\tconstructor(private readonly columnFactory: ColumnEntityFactory) {}\n\n\tcreate(id: CompositionId): CompositionAggregate {\n\t\treturn new CompositionAggregate(id, this.columnFactory);\n\t}\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { AggregateCommandHandler, AggregateRepository, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { CompositionAggregateRepository } from '../composition.aggregate-repository';\nimport { CreateCompositionCommand } from './create-composition.command';\nimport { CompositionCreatedEvent } from './composition-created.event';\nimport { CompositionAggregate } from '../composition.aggregate';\n\n\n@Injectable()\nexport class CreateCompositionCommandHandler implements AggregateCommandHandler<CompositionAggregate, CreateCompositionCommand> {\n\n\tconstructor(private readonly compositionAggregateRepository: CompositionAggregateRepository,\n\t\t\t\tprivate readonly domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tgetAggregateRepository(): AggregateRepository<CompositionAggregate> {\n\t\treturn this.compositionAggregateRepository;\n\t}\n\n\tforCommand(): Type<CreateCompositionCommand> {\n\t\treturn CreateCompositionCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: CompositionAggregate, command: CreateCompositionCommand): void {\n\t\tthis.domainEventPublisher.publish(new CompositionCreatedEvent(command.getAggregateId()));\n\t}\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { AggregateEvent, Command, CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { CompositionAggregateRepository } from '../../composition.aggregate-repository';\nimport { CompositionEventConverter } from '../../composition-event.converter';\nimport { CompositionAggregate } from '../../composition.aggregate';\nimport { CompositionSetColumnEnabledCommand } from './composition.set-column-enabled.command';\n\n@Injectable()\nexport class CompositionSetColumnEnabledCommandHandler implements CommandHandler<CompositionAggregate, CompositionSetColumnEnabledCommand> {\n\n\tconstructor(private readonly compositionAggregateRepository: CompositionAggregateRepository,\n\t\t\t\tprivate readonly domainEventPublisher: DomainEventPublisher,\n\t\t\t\tprivate readonly compositionEventConverter: CompositionEventConverter) {\n\t}\n\n\tforCommand(): Type<CompositionSetColumnEnabledCommand> {\n\t\treturn CompositionSetColumnEnabledCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: CompositionAggregate, command: Command): void {\n\t\tthis.publishEvents(aggregate, command);\n\t}\n\n\thandleAggregate(aggregate: CompositionAggregate, command: CompositionSetColumnEnabledCommand): void {\n\n\t\tconst columnId = command.getColumnId(),\n\t\t\tenabled = command.isEnabled();\n\n\t\taggregate.enableColumn(columnId, enabled);\n\t}\n\n\tprivate publishEvents(composition: CompositionAggregate, command: Command): void {\n\n\t\tconst events = composition.getEvents() as Array<AggregateEvent>;\n\n\t\tconst domainEvents = this.compositionEventConverter.convert(events);\n\n\t\tif (domainEvents && domainEvents.length > 0) {\n\t\t\tthis.domainEventPublisher.publish(domainEvents);\n\t\t}\n\t}\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { AggregateEvent, Command, CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { CompositionAggregateRepository } from '../../composition.aggregate-repository';\nimport { CompositionEventConverter } from '../../composition-event.converter';\nimport { CompositionAggregate } from '../../composition.aggregate';\n\nimport { SetColumnsCommand } from './set-columns.command';\nimport { ColumnParams } from './column.params';\n\n\n@Injectable()\nexport class SetColumnsCommandHandler implements CommandHandler<CompositionAggregate, SetColumnsCommand> {\n\n\tconstructor(private readonly compositionAggregateRepository: CompositionAggregateRepository,\n\t\t\t\tprivate readonly domainEventPublisher: DomainEventPublisher,\n\t\t\t\tprivate readonly compositionEventConverter: CompositionEventConverter) {\n\t}\n\n\tforCommand(): Type<SetColumnsCommand> {\n\t\treturn SetColumnsCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: CompositionAggregate, command: Command): void {\n\t\tthis.publishEvents(aggregate, command);\n\t}\n\n\thandleAggregate(aggregate: CompositionAggregate, command: SetColumnsCommand): void {\n\n\t\tconst setColumnsParams: Array<ColumnParams> = command.getParams();\n\n\t\taggregate.setColumns(setColumnsParams);\n\t}\n\n\tprivate publishEvents(composition: CompositionAggregate, command: Command): void {\n\n\t\tconst events = composition.getEvents() as Array<AggregateEvent>;\n\n\t\tconst domainEvents = this.compositionEventConverter.convert(events);\n\n\t\tthis.domainEventPublisher.publish(domainEvents);\n\t}\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { CompositionAggregateRepository } from '../../composition.aggregate-repository';\nimport { SetCompositionWidthCommand } from './set-composition-width.command';\nimport { CompositionWidthSetEvent } from './composition-width-set.event';\nimport { CompositionAggregate } from '../../composition.aggregate';\n\n@Injectable()\nexport class SetCompositionWidthCommandHandler implements CommandHandler<CompositionAggregate, SetCompositionWidthCommand> {\n\n\tconstructor(compositionAggregateRepository: CompositionAggregateRepository,\n\t\t\t\tprivate readonly domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<SetCompositionWidthCommand> {\n\t\treturn SetCompositionWidthCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: CompositionAggregate, command: SetCompositionWidthCommand): void {\n\t\tthis.domainEventPublisher.publish(new CompositionWidthSetEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(composition: CompositionAggregate, command: SetCompositionWidthCommand): void {\n\n\t\tconst width = command.getWidth();\n\n\t\tcomposition.setWidth(width);\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { AggregateEvent, CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { CompositionAggregateRepository } from '../../../composition.aggregate-repository';\nimport { CompositionEventConverter } from '../../../composition-event.converter';\nimport { CompositionAggregate } from '../../../composition.aggregate';\nimport { CompositionMoveLeftColumnCommand } from './composition.move-left-column.command';\n\n@Injectable()\nexport class CompositionMoveLeftColumnCommandHandler implements CommandHandler<CompositionAggregate, CompositionMoveLeftColumnCommand> {\n\n\tconstructor(private readonly compositionAggregateRepository: CompositionAggregateRepository,\n\t\t\t\tprotected domainEventPublisher: DomainEventPublisher,\n\t\t\t\tprivate compositionEventConverter: CompositionEventConverter) {\n\t}\n\n\tforCommand(): Type<CompositionMoveLeftColumnCommand> {\n\t\treturn CompositionMoveLeftColumnCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: CompositionAggregate, command: CompositionMoveLeftColumnCommand): void {\n\t\tthis.publishEvents(aggregate, command);\n\t}\n\n\thandleAggregate(aggregate: CompositionAggregate, command: CompositionMoveLeftColumnCommand): void {\n\n\t\tconst columnId = command.getColumnId();\n\n\t\taggregate.moveLeft(columnId);\n\t}\n\n\tprivate publishEvents(composition: CompositionAggregate, command: CompositionMoveLeftColumnCommand): void {\n\n\t\tconst events = composition.getEvents() as Array<AggregateEvent>;\n\n\t\tconst domainEvents = this.compositionEventConverter.convert(events);\n\n\t\tif (domainEvents && domainEvents.length > 0) {\n\t\t\tthis.domainEventPublisher.publish(domainEvents);\n\t\t}\n\t}\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { AggregateEvent, CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { CompositionAggregateRepository } from '../../../composition.aggregate-repository';\nimport { CompositionEventConverter } from '../../../composition-event.converter';\nimport { CompositionAggregate } from '../../../composition.aggregate';\nimport { CompositionMoveRightColumnCommand } from './composition.move-right-column.command';\n\n@Injectable()\nexport class CompositionMoveRightColumnCommandHandler implements CommandHandler<CompositionAggregate, CompositionMoveRightColumnCommand> {\n\n\tconstructor(private readonly compositionAggregateRepository: CompositionAggregateRepository,\n\t\t\t\tprotected domainEventPublisher: DomainEventPublisher,\n\t\t\t\tprivate compositionEventConverter: CompositionEventConverter) {\n\t}\n\n\tforCommand(): Type<CompositionMoveRightColumnCommand> {\n\t\treturn CompositionMoveRightColumnCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: CompositionAggregate, command: CompositionMoveRightColumnCommand): void {\n\t\tthis.publishEvents(aggregate, command);\n\t}\n\n\thandleAggregate(aggregate: CompositionAggregate, command: CompositionMoveRightColumnCommand): void {\n\n\t\tconst columnId = command.getColumnId();\n\n\t\taggregate.moveRight(columnId);\n\t}\n\n\tprivate publishEvents(composition: CompositionAggregate, command: CompositionMoveRightColumnCommand): void {\n\n\t\tconst events = composition.getEvents() as Array<AggregateEvent>;\n\n\t\tconst domainEvents = this.compositionEventConverter.convert(events);\n\n\t\tif (domainEvents && domainEvents.length > 0) {\n\t\t\tthis.domainEventPublisher.publish(domainEvents);\n\t\t}\n\t}\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\nimport { CompositionChangeSortStatusCommand } from './composition-change-sort-status.command';\nimport { CompositionChangeSortStatusEvent } from './composition-change-sort-status.event';\nimport { CompositionAggregate } from '../../composition.aggregate';\n\n\n@Injectable()\nexport class CompositionChangeSortStatusCommandHandler implements CommandHandler<CompositionAggregate, CompositionChangeSortStatusCommand> {\n\n\tconstructor(private readonly domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<CompositionChangeSortStatusCommand> {\n\t\treturn CompositionChangeSortStatusCommand;\n\t}\n\n\tpublishDomainEvents(composition: CompositionAggregate, command: CompositionChangeSortStatusCommand): void {\n\n\t\tconst compositionId = command.getAggregateId(),\n\t\t\tcolumns = composition.getActiveColumns();\n\n\t\tthis.domainEventPublisher.publish(new CompositionChangeSortStatusEvent(compositionId, columns));\n\t}\n\n\thandleAggregate(composition: CompositionAggregate, command: CompositionChangeSortStatusCommand): void {\n\n\t\tconst sortParams = command.getSortParams();\n\n\t\tcomposition.changeSort(sortParams);\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { AggregateEvent, CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { CompositionAggregateRepository } from '../../composition.aggregate-repository';\nimport { CompositionEventConverter } from '../../composition-event.converter';\nimport { SetCompositionContainerWidthCommand } from './set-composition-container-width.command';\nimport { CompositionAggregate } from '../../composition.aggregate';\n\n\n@Injectable()\nexport class SetCompositionContainerWidthCommandHandler implements CommandHandler<CompositionAggregate, SetCompositionContainerWidthCommand> {\n\n\tconstructor(private readonly compositionAggregateRepository: CompositionAggregateRepository,\n\t\t\t\tprotected domainEventPublisher: DomainEventPublisher,\n\t\t\t\tprivate compositionEventConverter: CompositionEventConverter) {\n\t}\n\n\tforCommand(): Type<SetCompositionContainerWidthCommand> {\n\t\treturn SetCompositionContainerWidthCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: CompositionAggregate, command: SetCompositionContainerWidthCommand): void {\n\t\tthis.publishAggregateEvents(aggregate.getEvents() as Array<AggregateEvent>);\n\t}\n\n\thandleAggregate(composition: CompositionAggregate, command: SetCompositionContainerWidthCommand): void {\n\n\t\tconst width = command.getWidth();\n\n\t\tcomposition.setContainerWidth(width);\n\t}\n\n\tprivate publishAggregateEvents(aggregateEvents: Array<AggregateEvent>): void {\n\n\t\tconst domainEvents = this.compositionEventConverter.convert(aggregateEvents);\n\n\t\tthis.domainEventPublisher.publish(domainEvents);\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { SetCompositionResizeWidthCommand } from './set-composition-resize-width.command';\nimport { CompositionResizeWidthSetEvent } from './composition-resize-width-set.event';\nimport { CompositionAggregate } from '../../composition.aggregate';\n\n\n@Injectable()\nexport class SetCompositionResizeWidthCommandHandler implements CommandHandler<CompositionAggregate, SetCompositionResizeWidthCommand> {\n\n\tconstructor(private readonly domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<SetCompositionResizeWidthCommand> {\n\t\treturn SetCompositionResizeWidthCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: CompositionAggregate, command: SetCompositionResizeWidthCommand): void {\n\t\tthis.domainEventPublisher.publish(new CompositionResizeWidthSetEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(composition: CompositionAggregate, command: SetCompositionResizeWidthCommand): void {\n\n\t\tconst enabled = command.getEnabled();\n\n\t\tcomposition.setResizeWidth(enabled);\n\t}\n\n}\n","import { ChangeDetectionStrategy, Component, ElementRef, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { EditCommunicationComponent } from '../edit-communication.component';\nimport { fromEvent } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\n\n@Component({\n\tselector: 'gui-date-edit',\n\ttemplate: `\n\n\t\t<gui-date-picker #datepicker\n\t\t\t\t\t\t [selectDate]=\"value\"\n\t\t\t\t\t\t [name]=\"filterFieldName\"\n\t\t\t\t\t\t [openDialog]=\"true\"\n\t\t\t\t\t\t [onlyDialog]=\"false\"\n\t\t\t\t\t\t (dialogOpened)=\"dialogOpened($event)\"\n\t\t\t\t\t\t (dateSelected)=\"toggle($event)\">\n\t\t</gui-date-picker>\n\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class DateEditTemplateComponent extends EditCommunicationComponent<Date> {\n\n\t@ViewChild('datepicker', { read: ElementRef, static: true })\n\tdatePickerRef: ElementRef;\n\n\treadonly filterFieldName = 'dateEdit';\n\n\tprivate opened = false;\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tngAfterViewInit() {\n\t\tconst inputElement = this.datePickerRef.nativeElement.querySelector('.gui-date-picker-input');\n\n\t\tconst keyup$ = fromEvent(inputElement, 'keyup');\n\n\t\tkeyup$\n\t\t\t.pipe(\n\t\t\t\tfilter((e: any) => e.keyCode === this.ENTER_KEY_CODE),\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe(() => {\n\t\t\t\tthis.unsubscribe();\n\t\t\t\tthis.submit();\n\t\t\t});\n\n\t\tkeyup$\n\t\t\t.pipe(\n\t\t\t\tfilter((e: any) => e.keyCode === this.ESC_KEY_CODE),\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe(() => {\n\t\t\t\tthis.unsubscribe();\n\t\t\t\tthis.cancel();\n\t\t\t});\n\t}\n\n\ttoggle(changed: Date): void {\n\t\tthis.valueChanges.emit(changed);\n\t}\n\n\tdialogOpened(opened: boolean): void {\n\t\tthis.opened = opened;\n\n\t\tif (!opened) {\n\t\t\tthis.unsubscribe();\n\t\t\tthis.submit();\n\t\t}\n\t}\n\n}\n","import { ChangeDetectionStrategy, Component, Input, OnChanges, SimpleChanges, ViewEncapsulation } from '@angular/core';\n\n@Component({\n\tselector: 'gui-bar-view[value]',\n\ttemplate: `\n\t\t<div class=\"gui-percentage-bar\">\n\t\t\t<div class=\"gui-percentage\" [style.width.%]=\"width\">\n\t\t\t</div>\n\t\t\t<gui-percentage-view *ngIf=\"showPercentage\"\n\t\t\t\t\t\t\t\t [value]=\"value\">\n\t\t\t</gui-percentage-view>\n\t\t</div>\n\t`,\n\thost: {\n\t\t'[class.gui-bar-view]': 'true'\n\t},\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class BarViewComponent implements OnChanges {\n\n\t@Input()\n\tvalue: number;\n\n\t@Input()\n\tshowPercentage: boolean = false;\n\n\twidth: number;\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tif (changes.value !== undefined && changes.value !== null) {\n\t\t\tthis.width = this.value > 100 ? 100 : this.value;\n\t\t}\n\t}\n\n}\n","import { ChangeDetectionStrategy, Component, Input, ViewEncapsulation } from '@angular/core';\n\n@Component({\n\tselector: 'gui-percentage-view[value]',\n\ttemplate: `\n\t\t{{ value }} %\n\t`,\n\thost: {\n\t\t'[class.gui-percentage-view]': 'true'\n\t},\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class PercentageViewComponent {\n\n\t@Input()\n\tvalue: number;\n\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport {\n\tFabricButtonComponent,\n\tFabricButtonModule,\n\tFabricCheckboxComponent,\n\tFabricCheckboxModule,\n\tFabricChipComponent,\n\tFabricChipModule,\n\tFabricDatePickerModule,\n\tFabricInputComponent,\n\tFabricInputModule\n} from '@generic-ui/fabric';\n\nimport { HermesModule } from '@generic-ui/hermes';\n\nimport { ViewTemplatesComponent } from '../domain/read/view/view-templates.component';\nimport { NumberEditTemplateComponent } from '../domain/read/edit/template/number-edit-template.component';\nimport { StringEditTemplateComponent } from '../domain/read/edit/template/string-edit-template.component';\nimport { EditTemplatesComponent } from '../domain/read/edit/edit-templates.component';\nimport { BooleanEditTemplateComponent } from '../domain/read/edit/template/boolean-edit-template.component';\nimport { ColumnQueryComponent } from '../ui/column-query.component';\nimport { FunctionViewComponent } from '../domain/read/view/function/function-view.component';\nimport { compositionProviders } from './composition.providers';\nimport { SanitizeModule } from '../../../common/cdk/sanitize/sanitize.module';\nimport { CompositionAggregateFactory } from '../domain/command/composition.aggregate-factory';\nimport { InMemoryCompositionAggregateRepository } from '../infrastructure/in-memory/command/in-memory.composition.aggregate-repository';\nimport { CreateCompositionCommandHandler } from '../domain/command/create-composition/create-composition.command-handler';\nimport { CompositionSetColumnEnabledCommandHandler } from '../domain/command/column/set-enabled/composition.set-column-enabled.command-handler';\nimport { SetColumnsCommandHandler } from '../domain/command/column/set-columns/set-columns.command-handler';\nimport { SetCompositionWidthCommandHandler } from '../domain/command/width/set-width/set-composition-width.command-handler';\nimport { CompositionMoveLeftColumnCommandHandler } from '../domain/command/column/move/left/composition.move-left-column.command-handler';\nimport { CompositionMoveRightColumnCommandHandler } from '../domain/command/column/move/right/composition.move-right-column.command-handler';\nimport { CompositionChangeSortStatusCommandHandler } from '../domain/command/column/sort/composition-change-sort-status.command-handler';\nimport { SetCompositionContainerWidthCommandHandler } from '../domain/command/width/set-container-width/set-composition-container-width.command-handler';\nimport { SetCompositionResizeWidthCommandHandler } from '../domain/command/width/resize-width/set-composition-resize-width.command-handler';\nimport { DateEditTemplateComponent } from '../domain/read/edit/template/date-edit-template.component';\nimport { BarViewComponent } from '../domain/read/view/bar/bar-view.component';\nimport { PercentageViewComponent } from '../domain/read/view/percentage/percentage-view.component';\n\n\nconst components = [\n\tViewTemplatesComponent,\n\tEditTemplatesComponent,\n\tStringEditTemplateComponent,\n\tNumberEditTemplateComponent,\n\tBooleanEditTemplateComponent,\n\tDateEditTemplateComponent,\n\tColumnQueryComponent,\n\n\tFunctionViewComponent,\n\tBarViewComponent,\n\tPercentageViewComponent\n];\n\nconst exportDeclarations = [\n\tViewTemplatesComponent,\n\tEditTemplatesComponent,\n\tColumnQueryComponent,\n\n\tFabricChipModule,\n\tFabricCheckboxModule,\n\tFabricButtonModule,\n\tFabricInputModule,\n\n\tFunctionViewComponent,\n\tBarViewComponent,\n\tPercentageViewComponent\n];\n\nexport const compositionKey = 'CompositionAggregate';\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tReactiveFormsModule,\n\n\t\tSanitizeModule,\n\n\t\tFabricChipModule,\n\t\tFabricCheckboxModule,\n\t\tFabricButtonModule,\n\t\tFabricInputModule,\n\t\tFabricDatePickerModule,\n\n\t\tHermesModule.defineAggregate(\n\t\t\tcompositionKey,\n\t\t\tCompositionAggregateFactory,\n\t\t\tInMemoryCompositionAggregateRepository,\n\t\t\tCreateCompositionCommandHandler,\n\n\t\t\t[\n\t\t\t\t...HermesModule.registerCommandHandler(SetColumnsCommandHandler, compositionKey),\n\t\t\t\t...HermesModule.registerCommandHandler(SetCompositionWidthCommandHandler, compositionKey),\n\t\t\t\t...HermesModule.registerCommandHandler(SetCompositionResizeWidthCommandHandler, compositionKey),\n\t\t\t\t...HermesModule.registerCommandHandler(SetCompositionContainerWidthCommandHandler, compositionKey),\n\t\t\t\t...HermesModule.registerCommandHandler(CompositionSetColumnEnabledCommandHandler, compositionKey),\n\t\t\t\t...HermesModule.registerCommandHandler(CompositionChangeSortStatusCommandHandler, compositionKey),\n\t\t\t\t...HermesModule.registerCommandHandler(CompositionMoveLeftColumnCommandHandler, compositionKey),\n\t\t\t\t...HermesModule.registerCommandHandler(CompositionMoveRightColumnCommandHandler, compositionKey)\n\t\t\t]\n\t\t)\n\t],\n\tproviders: [\n\t\t...compositionProviders\n\t],\n\tdeclarations: [\n\t\tcomponents\n\t],\n\texports: exportDeclarations,\n\tentryComponents: [\n\t\tViewTemplatesComponent,\n\t\tEditTemplatesComponent,\n\t\tFabricChipComponent,\n\t\tFabricCheckboxComponent,\n\t\tFabricButtonComponent,\n\t\tFabricInputComponent\n\t]\n})\nexport class CompositionModule {\n\n}\n","export class StructureIdGenerator {\n\n\tprivate increment = 0;\n\n\tgenerateId(): number {\n\t\tthis.increment++;\n\t\treturn this.increment;\n\t}\n\n}\n","export abstract class Logger {\n\n\tabstract warn(text: string): void;\n\n\tabstract error(text: string): void;\n\n}\n","import { AggregateEvent } from '@generic-ui/hermes';\nimport { StructureId } from '../../../structure-id';\n\n\nexport class PageChangedAggregateEvent extends AggregateEvent {\n\n\tconstructor(structureId: StructureId) {\n\t\tsuper(structureId, 'PageChangedAggregateEvent');\n\t}\n\n}\n","import { AggregateEvent } from '@generic-ui/hermes';\nimport { StructureId } from '../../../structure-id';\n\nexport class PagesizeChangedAggregateEvent extends AggregateEvent {\n\n\tconstructor(structureId: StructureId) {\n\t\tsuper(structureId, 'PagesizeChangedAggregateEvent');\n\t}\n\n}\n","import { AggregateEvent } from '@generic-ui/hermes';\n\nimport { Logger } from '../../../../../common/cdk/logger/logger';\nimport { PagingConfigWithId } from '../paging-config-with-id';\nimport { PagingConfig } from '../paging-config';\nimport { PageChangedAggregateEvent } from './page/page-changed.aggregate-event';\nimport { StructureId } from '../../structure-id';\nimport { PagesizeChangedAggregateEvent } from './pagesize/pagesize-changed.aggregate-event';\n\n\n// Aggregate\nexport class PagingAggregate {\n\n\tprivate readonly events: Array<AggregateEvent> = [];\n\n\t// TODO Remove\n\tstatic default(logger: Logger) {\n\t\treturn new PagingAggregate(\n\t\t\tfalse,\n\t\t\t1,\n\t\t\t25,\n\t\t\t[10, 25, 50, 100],\n\t\t\tfalse,\n\t\t\ttrue,\n\t\t\t0,\n\t\t\tlogger\n\t\t);\n\t}\n\n\tprivate readonly logger: Logger;\n\n\tprivate constructor(private enabled: boolean,\n\t\t\t\t\t\tprivate page: number,\n\t\t\t\t\t\tprivate pageSize: number,\n\t\t\t\t\t\tprivate pageSizes: Array<number>,\n\t\t\t\t\t\tprivate pagerTop: boolean,\n\t\t\t\t\t\tprivate pagerBottom: boolean,\n\t\t\t\t\t\tprivate sourceSize: number,\n\t\t\t\t\t\tlogger: Logger) {\n\t\tthis.logger = logger;\n\t}\n\n\t// TODO Remove\n\tstatic fromConfig(paging: PagingConfigWithId, logger: Logger): PagingAggregate {\n\n\t\tconst defaultPagingDefinition = PagingAggregate.default(logger),\n\t\t\tenabled = paging.enabled || defaultPagingDefinition.isEnabled(),\n\t\t\tpage = paging.page || defaultPagingDefinition.getPage(),\n\t\t\tpageSize = paging.pageSize || defaultPagingDefinition.getPageSize(),\n\t\t\tpageSizes = paging.pageSizes || defaultPagingDefinition.getPageSizes(),\n\t\t\tpagerTop = paging.pagerTop || defaultPagingDefinition.isPagerTop(),\n\t\t\tpagerBottom = paging.pagerBottom || defaultPagingDefinition.isPagerBottom();\n\n\t\treturn new PagingAggregate(\n\t\t\tenabled,\n\t\t\tpage,\n\t\t\tpageSize,\n\t\t\tpageSizes,\n\t\t\tpagerTop,\n\t\t\tpagerBottom,\n\t\t\t0,\n\t\t\tlogger\n\t\t);\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n\tisDisabled(): boolean {\n\t\treturn !this.enabled;\n\t}\n\n\tgetPage(): number {\n\t\treturn this.page;\n\t}\n\n\tgetPageSize(): number {\n\t\treturn this.pageSize;\n\t}\n\n\tgetPageSizes(): Array<number> {\n\t\treturn this.pageSizes;\n\t}\n\n\tisPagerTop(): boolean {\n\t\tif (this.isDisabled()) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.pagerTop;\n\t}\n\n\tisPagerBottom(): boolean {\n\t\tif (this.isDisabled()) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.pagerBottom;\n\t}\n\n\tgetSourceSize(): number {\n\t\treturn this.sourceSize;\n\t}\n\n\tchange(pagingConfig: PagingConfig): void {\n\n\t\tif (pagingConfig.enabled !== undefined) {\n\t\t\tthis.enabled = pagingConfig.enabled;\n\t\t}\n\n\t\tif (pagingConfig.page !== undefined) {\n\t\t\tthis.page = pagingConfig.page;\n\n\t\t\tif (pagingConfig.enabled === undefined) {\n\t\t\t\tthis.enabled = true;\n\t\t\t}\n\t\t}\n\n\t\tif (pagingConfig.pageSize !== undefined) {\n\t\t\tthis.pageSize = pagingConfig.pageSize;\n\n\t\t\tif (pagingConfig.enabled === undefined) {\n\t\t\t\tthis.enabled = true;\n\t\t\t}\n\t\t}\n\n\t\tif (pagingConfig.pageSizes !== undefined) {\n\t\t\tthis.pageSizes = pagingConfig.pageSizes;\n\n\t\t\tif (pagingConfig.enabled === undefined) {\n\t\t\t\tthis.enabled = true;\n\t\t\t}\n\t\t}\n\n\t\tif (pagingConfig.pagerTop !== undefined) {\n\t\t\tthis.pagerTop = pagingConfig.pagerTop;\n\n\t\t\tif (pagingConfig.enabled === undefined) {\n\t\t\t\tthis.enabled = true;\n\t\t\t}\n\t\t}\n\n\t\tif (pagingConfig.pagerBottom !== undefined) {\n\t\t\tthis.pagerBottom = pagingConfig.pagerBottom;\n\n\t\t\tif (pagingConfig.enabled === undefined) {\n\t\t\t\tthis.enabled = true;\n\t\t\t}\n\t\t}\n\n\t\tif (this.enabled === true &&\n\t\t\tpagingConfig.pagerTop === false &&\n\t\t\tpagingConfig.pagerBottom === false) {\n\t\t\tthis.pagerBottom = true;\n\n\t\t\tthis.logger.warn('Pagers cannot be turn off when paging is enabled.');\n\t\t}\n\n\t}\n\n\tsetSourceSize(size: number): void {\n\t\tthis.sourceSize = size;\n\t}\n\n\tnextPage(): void {\n\t\tlet nextPage = this.page;\n\n\t\tif (!this.isNextPageDisabled()) {\n\t\t\tnextPage += 1;\n\t\t}\n\n\t\tthis.page = nextPage;\n\t}\n\n\tprevPage(): void {\n\t\tlet prevPage = this.page;\n\n\t\tif (!this.isPrevPageDisabled()) {\n\t\t\tprevPage -= 1;\n\t\t}\n\n\t\tthis.page = prevPage;\n\t}\n\n\tchangePageSize(pageSize: number): ReadonlyArray<AggregateEvent> {\n\n\t\tif (this.pageSizes.find((ps: number) => ps === pageSize)) {\n\n\t\t\tthis.setPage(1);\n\t\t\tthis.setPageSize(pageSize);\n\t\t}\n\n\t\treturn this.events;\n\t}\n\n\tisNextPageDisabled(): boolean {\n\n\t\tif (this.sourceSize === 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn this.page === Math.ceil(this.sourceSize / this.pageSize);\n\t}\n\n\tisPrevPageDisabled(): boolean {\n\t\treturn this.page === 1;\n\t}\n\n\tcalculateStart(): number {\n\n\t\tconst firstItem = 1 + ((this.page - 1) * this.pageSize);\n\n\t\tif (this.sourceSize < firstItem) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn firstItem;\n\t}\n\n\tcalculateEnd(): number {\n\n\t\tconst lastItem = this.page * this.pageSize;\n\n\t\tif (this.sourceSize < lastItem) {\n\t\t\treturn this.sourceSize;\n\t\t}\n\n\t\treturn lastItem;\n\t}\n\n\tsample(source: Array<any>): Array<any> {\n\n\t\tif (this.isDisabled()) {\n\t\t\treturn source;\n\t\t}\n\n\t\tlet start = this.calculateStart();\n\n\t\tif (start !== 0) {\n\t\t\tstart -= 1;\n\t\t}\n\n\t\treturn source.slice(start, this.calculateEnd());\n\t}\n\n\tprivate setPage(page: number): void {\n\t\tthis.page = page;\n\t\tthis.events.push(new PageChangedAggregateEvent(new StructureId('TODO need to be changed')));\n\t}\n\n\tprivate setPageSize(pageSize: number): void {\n\t\tthis.pageSize = pageSize;\n\t\tthis.events.push(new PagesizeChangedAggregateEvent(new StructureId('TODO need to be changed')));\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Logger } from '../../../../../common/cdk/logger/logger';\n\nimport { PagingAggregate } from './paging.aggregate';\nimport { PagingConfigWithId } from '../paging-config-with-id';\n\n\n@Injectable()\nexport class PagingAggregateFactory {\n\n\tconstructor(private logger: Logger) {\n\t}\n\n\tcreateDefault(): PagingAggregate {\n\t\treturn PagingAggregate.default(this.logger);\n\t}\n\n\tcreateFromConfig(config: PagingConfigWithId): PagingAggregate {\n\t\treturn PagingAggregate.fromConfig(config, this.logger);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Override } from '../../../../../common/cdk/decorators';\n\nimport { PagingCommandService } from '../../../ui-api/paging/paging-command.service';\nimport { StructureId } from '../../../domain/structure-id';\nimport { PagingAggregateFactory } from '../../../domain/paging/command/paging.aggregate-factory';\nimport { PagingDispatcher } from '../../../domain/paging/command/paging.dispatcher';\nimport { PagingConfig } from '../../../domain/paging/paging-config';\n\n\n@Injectable()\nexport class LocalPagingCommandService extends PagingCommandService {\n\n\tconstructor(private structureId: StructureId,\n\t\t\t\tprivate aggregateFactory: PagingAggregateFactory,\n\t\t\t\tpagingDispatcher: PagingDispatcher) {\n\t\tsuper(pagingDispatcher);\n\t}\n\n\tsetDefaultPaging(): void {\n\n\t\tconst defaultPaggingAggregate = this.aggregateFactory.createDefault();\n\n\t\tsuper.setPaging({\n\t\t\tpage: defaultPaggingAggregate.getPage(),\n\t\t\tpageSize: defaultPaggingAggregate.getPageSize(),\n\t\t\tpageSizes: defaultPaggingAggregate.getPageSizes()\n\t\t}, this.structureId);\n\t}\n\n\t@Override\n\tsetPaging(paging: PagingConfig): void {\n\t\tsuper.setPaging(paging, this.structureId);\n\t}\n\n\t@Override\n\tchangePageSize(pageSize: number): void {\n\t\tsuper.changePageSize(pageSize, this.structureId);\n\t}\n\n\t@Override\n\tnextPage(): void {\n\t\tsuper.nextPage(this.structureId);\n\t}\n\n\t@Override\n\tprevPage(): void {\n\t\tsuper.prevPage(this.structureId);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { PagingReadModelService } from '../../../ui-api/paging/paging-read-model.service';\nimport { StructureId } from '../../../domain/structure-id';\nimport { PagingRepository } from '../../../domain/paging/read/paging.repository';\nimport { Override } from '../../../../../common/cdk/decorators';\nimport { Paging } from '../../../domain/paging/read/paging';\n\n\n@Injectable()\nexport class LocalPagingReadModelService extends PagingReadModelService {\n\n\tconstructor(private structureId: StructureId,\n\t\t\t\tpagingRepository: PagingRepository) {\n\t\tsuper(pagingRepository);\n\t}\n\n\t@Override\n\tonPaging(): Observable<Paging> {\n\t\treturn super.onPaging(this.structureId);\n\t}\n\n\t@Override\n\tonSinglePaging(): Observable<Paging> {\n\t\treturn super.onPaging(this.structureId)\n\t\t\t\t\t.pipe(\n\t\t\t\t\t\ttake(1)\n\t\t\t\t\t);\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../structure-id';\n\nexport class SetSchemaCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly height: number) {\n\t\tsuper(structureId, 'SetSchemaCommand');\n\t}\n\n\tgetHeight(): number {\n\t\treturn this.height;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\n\nexport class SetSchemaVerticalGridCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly enabled: boolean) {\n\t\tsuper(structureId, 'SetSchemaVerticalGridCommand');\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\n\nexport class SetSchemaHorizontalGridCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly enabled: boolean) {\n\t\tsuper(structureId, 'SetSchemaHorizontalGridCommand');\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\nimport { StructureId } from '../../../structure-id';\nimport { SchemaTheme } from '../../schema-theme';\n\nexport class SetSchemaThemeCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly theme: SchemaTheme) {\n\t\tsuper(structureId, 'SetSchemaThemeCommand');\n\t}\n\n\tgetTheme(): SchemaTheme {\n\t\treturn this.theme;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\nimport { SchemaRowColoring } from '../../../schema-row-coloring';\n\nexport class SetRowColoringCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly coloring: SchemaRowColoring) {\n\t\tsuper(structureId, 'SetRowColoringCommand');\n\t}\n\n\tgetColoring(): SchemaRowColoring {\n\t\treturn this.coloring;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\n\nexport class ChangeSchemaTopHeaderCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly enabled: boolean) {\n\t\tsuper(structureId, 'ChangeSchemaTopHeaderCommand');\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\n\nexport class ChangeSchemaBottomHeaderCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly enabled: boolean) {\n\t\tsuper(structureId, 'ChangeSchemaBottomHeaderCommand');\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { CommandDispatcher } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../structure-id';\nimport { SetSchemaCommand } from './set/set-schema.command';\nimport { SetSchemaVerticalGridCommand } from './grid/vertical/set-schema-vertical-grid.command';\nimport { SetSchemaHorizontalGridCommand } from './grid/horizontal/set-schema-horizontal-grid.command';\nimport { SchemaTheme } from '../schema-theme';\nimport { SetSchemaThemeCommand } from './theme/set-schema-theme.command';\nimport { globalStructureId } from '../../global-structure-id';\nimport { SchemaRowColoring } from '../schema-row-coloring';\nimport { SetRowColoringCommand } from './coloring/set/set-row-coloring.command';\nimport { ChangeSchemaTopHeaderCommand } from './column-header/top/change-schema-top-header.command';\nimport { ChangeSchemaBottomHeaderCommand } from './column-header/bottom/change-schema-bottom-header.command';\n\n\n@Injectable()\nexport class SchemaDispatcher {\n\n\tconstructor(private commandDispatcher: CommandDispatcher) {\n\t}\n\n\tsetSchema(structureId: StructureId, height: number): void {\n\t\tthis.commandDispatcher.dispatch(new SetSchemaCommand(structureId, height));\n\t}\n\n\tchangeVerticalGrid(structureId: StructureId, enabled: boolean): void {\n\t\tthis.commandDispatcher.dispatch(new SetSchemaVerticalGridCommand(structureId, enabled));\n\t}\n\n\tchangeHorizontalGrid(structureId: StructureId, enabled: boolean): void {\n\t\tthis.commandDispatcher.dispatch(new SetSchemaHorizontalGridCommand(structureId, enabled));\n\t}\n\n\tsetTheme(structureId: StructureId, theme: SchemaTheme): void {\n\t\tthis.commandDispatcher.dispatch(new SetSchemaThemeCommand(structureId, theme));\n\t}\n\n\tsetRowColoring(structureId: StructureId = globalStructureId, coloring: SchemaRowColoring): void {\n\t\tthis.commandDispatcher.dispatch(new SetRowColoringCommand(structureId, coloring));\n\t}\n\n\tchangeTopHeader(structureId: StructureId, enabled: boolean): void {\n\t\tthis.commandDispatcher.dispatch(new ChangeSchemaTopHeaderCommand(structureId, enabled));\n\t}\n\n\tchangeBottomHeader(structureId: StructureId, enabled: boolean): void {\n\t\tthis.commandDispatcher.dispatch(new ChangeSchemaBottomHeaderCommand(structureId, enabled));\n\t}\n\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { filter, map, take, takeUntil } from 'rxjs/operators';\n\nimport { SchemaDispatcher } from '../../domain/schema/command/schema.dispatcher';\nimport { SchemaReadModelService } from './schema-read-model.service';\nimport { StructureId } from '../../domain/structure-id';\nimport { globalStructureId } from '../../domain/global-structure-id';\nimport { SchemaTheme } from '../../domain/schema/schema-theme';\nimport { SchemaRowColoring } from '../../domain/schema/schema-row-coloring';\nimport { SchemaCssClass } from '../../domain/schema/read/schema-css-class';\nimport { SchemaColumnHeader } from '../../domain/schema/read/schema-column-header';\n\n\n@Injectable()\nexport class SchemaCommandService implements OnDestroy {\n\n\tprivate unsubscribe$ = new Subject<void>();\n\n\tconstructor(private schemaDispatcher: SchemaDispatcher,\n\t\t\t\tprivate schemaQueryService: SchemaReadModelService) {\n\t}\n\n\tngOnDestroy() {\n\t\tthis.unsubscribe$.next();\n\t\tthis.unsubscribe$.complete();\n\t}\n\n\tsetSchema(height: number, structureId: StructureId = globalStructureId): void {\n\t\tthis.schemaDispatcher.setSchema(structureId, height);\n\t}\n\n\tsetHeight(height: number, structureId: StructureId = globalStructureId): void {\n\t\tthis.schemaDispatcher.setSchema(structureId, height);\n\t}\n\n\tchangeVerticalGrid(enabled: boolean, structureId: StructureId = globalStructureId): void {\n\t\tthis.schemaDispatcher.changeVerticalGrid(structureId, enabled);\n\t}\n\n\tchangeHorizontalGrid(enabled: boolean, structureId: StructureId = globalStructureId): void {\n\t\tthis.schemaDispatcher.changeHorizontalGrid(structureId, enabled);\n\t}\n\n\tsetTheme(theme: SchemaTheme, structureId: StructureId = globalStructureId): void {\n\t\tthis.schemaDispatcher.setTheme(structureId, theme);\n\t}\n\n\tsetRowColoring(coloring: SchemaRowColoring, structureId: StructureId = globalStructureId): void {\n\t\tthis.schemaDispatcher.setRowColoring(structureId, coloring);\n\t}\n\n\tchangeTopHeader(enabled: boolean, structureId: StructureId = globalStructureId): void {\n\t\tthis.schemaDispatcher.changeTopHeader(structureId, enabled);\n\t}\n\n\tchangeBottomHeader(enabled: boolean, structureId: StructureId = globalStructureId): void {\n\t\tthis.schemaDispatcher.changeBottomHeader(structureId, enabled);\n\t}\n\n\ttoggleVerticalGrid(structureId: StructureId = globalStructureId): void {\n\t\tthis.schemaQueryService\n\t\t\t.onCssClasses(structureId)\n\t\t\t.pipe(\n\t\t\t\tmap((css: SchemaCssClass) => css.verticalGrid),\n\t\t\t\tfilter((grid: boolean) => grid !== undefined),\n\t\t\t\ttake(1),\n\t\t\t\ttakeUntil(this.unsubscribe$)\n\t\t\t)\n\t\t\t.subscribe((grid: boolean) => {\n\t\t\t\tthis.changeVerticalGrid(!grid, structureId);\n\t\t\t});\n\t}\n\n\ttoggleHorizontalGrid(structureId: StructureId = globalStructureId): void {\n\t\tthis.schemaQueryService\n\t\t\t.onCssClasses(structureId)\n\t\t\t.pipe(\n\t\t\t\tmap((css: SchemaCssClass) => css.horizontalGrid),\n\t\t\t\tfilter((grid: boolean) => grid !== undefined),\n\t\t\t\ttake(1),\n\t\t\t\ttakeUntil(this.unsubscribe$)\n\t\t\t)\n\t\t\t.subscribe((grid: boolean) => {\n\t\t\t\tthis.changeHorizontalGrid(!grid, structureId);\n\t\t\t});\n\t}\n\n\ttoggleTopHeader(structureId: StructureId = globalStructureId): void {\n\t\tthis.schemaQueryService\n\t\t\t.onColumnHeader(structureId)\n\t\t\t.pipe(\n\t\t\t\tmap((columnHeader: SchemaColumnHeader) => columnHeader.isTopHeaderEnabled()),\n\t\t\t\ttake(1),\n\t\t\t\ttakeUntil(this.unsubscribe$)\n\t\t\t)\n\t\t\t.subscribe((enabled: boolean) => {\n\t\t\t\tthis.changeTopHeader(!enabled, structureId);\n\t\t\t});\n\t}\n\n\ttoggleBottomHeader(structureId: StructureId = globalStructureId): void {\n\t\tthis.schemaQueryService\n\t\t\t.onColumnHeader(structureId)\n\t\t\t.pipe(\n\t\t\t\tmap((columnHeader: SchemaColumnHeader) => columnHeader.isBottomHeaderEnabled()),\n\t\t\t\ttake(1),\n\t\t\t\ttakeUntil(this.unsubscribe$)\n\t\t\t)\n\t\t\t.subscribe((enabled: boolean) => {\n\t\t\t\tthis.changeBottomHeader(!enabled, structureId);\n\t\t\t});\n\t}\n\n}\n","export enum SchemaRowColoring {\n\tNONE,\n\tEVEN,\n\tODD\n}\n","import { Injectable } from '@angular/core';\nimport { SchemaCommandService } from '../../../ui-api/schema/schema-command.service';\nimport { StructureId } from '../../../domain/structure-id';\nimport { SchemaReadModelService } from '../../../ui-api/schema/schema-read-model.service';\nimport { SchemaDispatcher } from '../../../domain/schema/command/schema.dispatcher';\nimport { Override } from '../../../../../common/cdk/decorators';\nimport { globalStructureId } from '../../../domain/global-structure-id';\nimport { SchemaTheme } from '../../../domain/schema/schema-theme';\nimport { SchemaRowColoring } from '../../../domain/schema/schema-row-coloring';\n\n\n@Injectable()\nexport class LocalSchemaCommandService extends SchemaCommandService {\n\n\tconstructor(private structureId: StructureId,\n\t\t\t\tschemaQueryService: SchemaReadModelService,\n\t\t\t\tschemaDispatcher: SchemaDispatcher) {\n\t\tsuper(schemaDispatcher, schemaQueryService);\n\t}\n\n\tsetDefaultSchema(): void {\n\t\tsuper.setSchema(Number.MAX_SAFE_INTEGER, this.structureId);\n\t}\n\n\t@Override\n\tsetSchema(height: number, structureId: StructureId = globalStructureId): void {\n\t\tsuper.setSchema(height, this.structureId);\n\t}\n\n\t@Override\n\tsetHeight(height: number): void {\n\t\tsuper.setHeight(height, this.structureId);\n\t}\n\n\t@Override\n\tchangeVerticalGrid(enabled: boolean): void {\n\t\tsuper.changeVerticalGrid(enabled, this.structureId);\n\t}\n\n\t@Override\n\tchangeHorizontalGrid(enabled: boolean): void {\n\t\tsuper.changeHorizontalGrid(enabled, this.structureId);\n\t}\n\n\t@Override\n\tsetTheme(theme: SchemaTheme): void {\n\t\tsuper.setTheme(theme, this.structureId);\n\t}\n\n\t@Override\n\tsetRowColoring(coloring: SchemaRowColoring, structureId: StructureId = globalStructureId): void {\n\t\tsuper.setRowColoring(coloring, this.structureId);\n\t}\n\n\t@Override\n\tchangeTopHeader(enabled: boolean, structureId: StructureId = globalStructureId): void {\n\t\tsuper.changeTopHeader(enabled, this.structureId);\n\t}\n\n\t@Override\n\tchangeBottomHeader(enabled: boolean, structureId: StructureId = globalStructureId): void {\n\t\tsuper.changeBottomHeader(enabled, this.structureId);\n\t}\n\n\t@Override\n\ttoggleVerticalGrid(): void {\n\t\tsuper.toggleVerticalGrid(this.structureId);\n\t}\n\n\t@Override\n\ttoggleHorizontalGrid(): void {\n\t\tsuper.toggleHorizontalGrid(this.structureId);\n\t}\n\n\t@Override\n\ttoggleTopHeader(): void {\n\t\tsuper.toggleTopHeader(this.structureId);\n\t}\n\n\t@Override\n\ttoggleBottomHeader(): void {\n\t\tsuper.toggleBottomHeader(this.structureId);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { SchemaReadModelService } from '../../../ui-api/schema/schema-read-model.service';\nimport { StructureId } from '../../../domain/structure-id';\nimport { SchemaRepository } from '../../../domain/schema/read/schema-repository';\nimport { Override } from '../../../../../common/cdk/decorators';\nimport { Schema } from '../../../domain/schema/read/schema';\nimport { SchemaCssClass } from '../../../domain/schema/read/schema-css-class';\nimport { globalStructureId } from '../../../domain/global-structure-id';\nimport { SchemaColumnHeader } from '../../../domain/schema/read/schema-column-header';\nimport { SchemaTheme } from '../../../domain/schema/schema-theme';\n\n\n@Injectable()\nexport class LocalSchemaReadModelService extends SchemaReadModelService {\n\n\tconstructor(private structureId: StructureId,\n\t\t\t\tschemaRepository: SchemaRepository) {\n\t\tsuper(schemaRepository);\n\t}\n\n\t@Override\n\tonSchema(): Observable<Schema> {\n\t\treturn super.onSchema(this.structureId);\n\t}\n\n\t@Override\n\tonSingleSchema(): Observable<Schema> {\n\t\treturn super.onSingleSchema(this.structureId);\n\t}\n\n\t@Override\n\tonHeight(): Observable<number> {\n\t\treturn super.onHeight(this.structureId);\n\t}\n\n\t@Override\n\tonContainerHeight(): Observable<number> {\n\t\treturn super.onContainerHeight(this.structureId);\n\t}\n\n\t@Override\n\tonCssClasses(): Observable<SchemaCssClass> {\n\t\treturn super.onCssClasses(this.structureId);\n\t}\n\n\t@Override\n\tonSingleTheme(): Observable<SchemaTheme>  {\n\t\treturn super.onSingleTheme(this.structureId);\n\t}\n\n\t@Override\n\tonColumnHeader(structureId: StructureId = globalStructureId): Observable<SchemaColumnHeader> {\n\t\treturn super.onColumnHeader(this.structureId);\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../structure-id';\n\nexport class SetFormationCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly payload?: any) {\n\t\tsuper(structureId, 'SetFormationCommand');\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../structure-id';\n\nexport class ToggleSelectedRowCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly selectedRow: string) {\n\t\tsuper(structureId, 'ToggleSelectedRowCommand');\n\t}\n\n\tgetSelectedRow(): string {\n\t\treturn this.selectedRow;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\n\nimport { CommandDispatcher } from '@generic-ui/hermes';\nimport { StructureId } from '../../structure-id';\nimport { SetFormationCommand } from './set/set-formation.command';\nimport { ToggleSelectedRowCommand } from './toggle/toggle-selected-row.command';\n\n@Injectable()\nexport class FormationDispatcher {\n\n\tconstructor(private commandDispatcher: CommandDispatcher) {\n\t}\n\n\tsetDefault(structureId: StructureId): void {\n\t\tthis.commandDispatcher.dispatch(new SetFormationCommand(structureId));\n\t}\n\n\ttoggleSelectedRow(structureId: StructureId, selectedRow: string): void {\n\t\tthis.commandDispatcher.dispatch(new ToggleSelectedRowCommand(structureId, selectedRow));\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { FormationDispatcher } from '../../domain/formation/command/formation.dispatcher';\nimport { StructureId } from '../../domain/structure-id';\nimport { globalStructureId } from '../../domain/global-structure-id';\n\n\n@Injectable()\nexport class FormationCommandService {\n\n\tconstructor(private formationDispatcher: FormationDispatcher) {\n\t}\n\n\tsetDefaultFormation(structureId: StructureId = globalStructureId): void {\n\t\tthis.formationDispatcher.setDefault(structureId);\n\t}\n\n\ttoggleSelectedRow(selectedRow: string, structureId: StructureId = globalStructureId): void {\n\t\tthis.formationDispatcher.toggleSelectedRow(structureId, selectedRow);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Override } from '../../../../../common/cdk/decorators';\n\nimport { FormationCommandService } from '../../../ui-api/formation/formation-command.service';\nimport { StructureId } from '../../../domain/structure-id';\nimport { FormationDispatcher } from '../../../domain/formation/command/formation.dispatcher';\n\n\n@Injectable()\nexport class LocalFormationCommandService extends FormationCommandService {\n\n\tconstructor(private structureId: StructureId,\n\t\t\t\tformationDispatcher: FormationDispatcher) {\n\t\tsuper(formationDispatcher);\n\t}\n\n\tsetDefault(): void {\n\t\tsuper.setDefaultFormation(this.structureId);\n\t}\n\n\t@Override\n\ttoggleSelectedRow(selectedRow: string): void {\n\t\tsuper.toggleSelectedRow(selectedRow, this.structureId);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\n\nimport { StructureRepository } from '../../structure/read/structure.repository';\nimport { StructureId } from '../../structure-id';\nimport { Formation } from './formation';\nimport { Structure } from '../../structure/read/structure';\n\n\n@Injectable()\nexport class FormationRepository {\n\n\tconstructor(private structureRepository: StructureRepository) {\n\t}\n\n\tonFormation(structureId: StructureId): Observable<Formation> {\n\n\t\treturn this.structureRepository\n\t\t\t\t   .onStructure(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   filter((structure: Structure) => structure.getId().toString() === structureId.toString()),\n\t\t\t\t\t   map((structure: Structure) => structure.getFormation())\n\t\t\t\t   );\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { FormationRepository } from '../../domain/formation/read/formation-repository';\nimport { StructureId } from '../../domain/structure-id';\nimport { globalStructureId } from '../../domain/global-structure-id';\nimport { SelectedRowsList } from '../../domain/formation/read/selected-rows/selected-rows-list';\nimport { Formation } from '../../domain/formation/read/formation';\n\n\n@Injectable()\nexport class FormationReadModelService {\n\n\tconstructor(private formationRepository: FormationRepository) {\n\t}\n\n\tonSelectedRows(structureId: StructureId = globalStructureId): Observable<SelectedRowsList> {\n\t\treturn this.formationRepository\n\t\t\t\t   .onFormation(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((formation: Formation) => formation.getSelectedRows())\n\t\t\t\t   );\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { Override } from '../../../../../common/cdk/decorators';\n\nimport { StructureId } from '../../../domain/structure-id';\nimport { FormationReadModelService } from '../../../ui-api/formation/formation-read-model.service';\nimport { FormationRepository } from '../../../domain/formation/read/formation-repository';\nimport { SelectedRowsList } from '../../../domain/formation/read/selected-rows/selected-rows-list';\n\n\n@Injectable()\nexport class LocalFormationReadModelService extends FormationReadModelService {\n\n\tconstructor(private structureId: StructureId,\n\t\t\t\tformationRepository: FormationRepository) {\n\t\tsuper(formationRepository);\n\t}\n\n\t@Override\n\tonSelectedRows(): Observable<SelectedRowsList> {\n\t\treturn super.onSelectedRows(this.structureId);\n\t}\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\nimport { FilterConfig } from '../../../../../ui-api/structure/filter/filter-config';\n\nexport class StructureSetConfigFilterCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly filterConfig: FilterConfig) {\n\t\tsuper(structureId, 'StructureSetConfigFilterCommand');\n\t}\n\n\tgetConfig(): FilterConfig {\n\t\treturn this.filterConfig;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\nimport { FieldId } from '../../field/data-type/field.id';\n\n\nexport class StructureToggleFilterCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly fieldId: FieldId,\n\t\t\t\tprivate readonly externalFilterId: string,\n\t\t\t\tprivate readonly filterValue: string) {\n\t\tsuper(structureId, 'StructureToggleFilterCommand');\n\t}\n\n\tgetFieldId(): FieldId {\n\t\treturn this.fieldId;\n\t}\n\n\tgetExternalFilterId(): string {\n\t\treturn this.externalFilterId;\n\t}\n\n\tgetFilterValue(): string {\n\t\treturn this.filterValue;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { CommandDispatcher } from '@generic-ui/hermes';\n\nimport { FilterConfig } from './filter-config';\nimport { StructureId } from '../../../domain/structure-id';\nimport { StructureSetConfigFilterCommand } from '../../../domain/structure/command/filter/config/structure.set-config-filter.command';\nimport { FieldId } from '../../../domain/structure/command/field/data-type/field.id';\nimport { StructureToggleFilterCommand } from '../../../domain/structure/command/filter/toggle/structure.toggle-filter.command';\n\n\n@Injectable()\nexport class StructureFilterCommandService {\n\n\tconstructor(private commandDispatcher: CommandDispatcher) {\n\t}\n\n\tsetFilteringEnabled(config: FilterConfig, structureId: StructureId): void {\n\t\tthis.commandDispatcher.dispatch(new StructureSetConfigFilterCommand(structureId, config));\n\t}\n\n\taddFilter(fieldId: FieldId, externalFieldId: string, filterValue: string, structureId: StructureId): void {\n\t\tthis.commandDispatcher.dispatch(new StructureToggleFilterCommand(structureId, fieldId, externalFieldId, filterValue));\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\nimport { StructureId } from '../../../structure-id';\n\n\nexport class SourceSetLoadingCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly enabled: boolean) {\n\t\tsuper(structureId, 'SourceSetLoadingCommand');\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\n\nexport class SetOriginCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly items: Array<any> = []) {\n\t\tsuper(structureId, 'SetOriginCommand');\n\t}\n\n\tgetItems(): Array<any> {\n\t\treturn this.items;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureEditSourceItemParams } from './structure.edit-source-item.params';\nimport { StructureId } from '../../../../structure-id';\n\nexport class StructureEditSourceItemCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly params: StructureEditSourceItemParams) {\n\t\tsuper(structureId, 'StructureEditSourceItemCommand');\n\t}\n\n\tgetParams(): StructureEditSourceItemParams {\n\t\treturn this.params;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { CommandDispatcher } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../structure-id';\nimport { SourceSetLoadingCommand } from './loading/source-set-loading.command';\nimport { SetOriginCommand } from './origin/set-origin/set-origin.command';\nimport { StructureEditSourceItemParams } from './origin/edit/structure.edit-source-item.params';\nimport { StructureEditSourceItemCommand } from './origin/edit/structure.edit-source-item.command';\n\n\n@Injectable()\nexport class SourceDispatcher {\n\n\tconstructor(private commandDispatcher: CommandDispatcher) {\n\t}\n\n\tsetLoading(structureId: StructureId, enabled: boolean): void {\n\t\tthis.commandDispatcher.dispatch(new SourceSetLoadingCommand(structureId, enabled));\n\t}\n\n\tsetOrigin(structureId: StructureId, items: Array<any>): void {\n\t\tthis.commandDispatcher.dispatch(new SetOriginCommand(structureId, items));\n\t}\n\n\teditItem(structureId: StructureId, params: StructureEditSourceItemParams): void {\n\t\tthis.commandDispatcher.dispatch(new StructureEditSourceItemCommand(structureId, params));\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../structure-id';\n\nexport class CreateStructureCommand extends Command {\n\n\tconstructor(structureId: StructureId) {\n\t\tsuper(structureId, 'CreateStructureCommand');\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\n\nexport class SetVerticalScrollEnabledCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly enabled: boolean) {\n\t\tsuper(structureId, 'SetVerticalScrollEnabledCommand');\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\nimport { StructureId } from '../../../../structure-id';\n\n\nexport class SetScrollPositionCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly position: number) {\n\t\tsuper(structureId, 'SetScrollPositionCommand');\n\t}\n\n\tgetPosition(): number {\n\t\treturn this.position;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\nimport { SortingConfig } from '../../../../../ui-api/structure/sorting-config';\n\n\nexport class SetSortingCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly sortingConfig: SortingConfig) {\n\t\tsuper(structureId, 'SetSortingCommand');\n\t}\n\n\tgetSortingConfig(): SortingConfig {\n\t\treturn this.sortingConfig;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\nimport { StructureId } from '../../../../structure-id';\nimport { CompositionId } from '../../../../../../composition/domain/composition-id';\nimport { FieldId } from '../../field/data-type/field.id';\n\n\nexport class ToggleSortCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly compositionId: CompositionId,\n\t\t\t\tprivate readonly fieldId: FieldId) {\n\t\tsuper(structureId, 'ToggleSortCommand');\n\t}\n\n\tgetCompositionId(): CompositionId {\n\t\treturn this.compositionId;\n\t}\n\n\tgetFieldId(): FieldId {\n\t\treturn this.fieldId;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\nimport { QuickFiltersConfig } from '../../../../../ui-api/structure/filter/quick-filters.config';\n\n\nexport class StructureSetConfigQuickFilterCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly quickFiltersConfig: QuickFiltersConfig) {\n\t\tsuper(structureId, 'StructureSetConfigQuickFilterCommand');\n\t}\n\n\tgetConfig(): QuickFiltersConfig {\n\t\treturn this.quickFiltersConfig;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\nimport { CompositionId } from '../../../../../../composition/domain/composition-id';\nimport { ColumnConfig } from '../../../../../../composition/domain/column.config';\n\n\nexport class InitFieldsCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly compositionId: CompositionId,\n\t\t\t\tprivate readonly columns: Array<ColumnConfig>) {\n\t\tsuper(structureId, 'InitFieldsCommand');\n\t}\n\n\tgetCompositionId(): CompositionId {\n\t\treturn this.compositionId;\n\t}\n\n\tgetColumns(): Array<ColumnConfig> {\n\t\treturn this.columns;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\nimport { SortOrder } from '../../../../../../composition/domain/command/column/sort/sort-order';\nimport { FieldId } from '../../field/data-type/field.id';\nimport { CompositionId } from '../../../../../../composition/domain/composition-id';\n\n\nexport class SetSortOrderCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly compositionId: CompositionId,\n\t\t\t\tprivate readonly fieldId: FieldId,\n\t\t\t\tprivate readonly sortOrder: SortOrder) {\n\t\tsuper(structureId, 'SetSortOrderCommand');\n\t}\n\n\tgetCompositionId(): CompositionId {\n\t\treturn this.compositionId;\n\t}\n\n\tgetFieldId(): FieldId {\n\t\treturn this.fieldId;\n\t}\n\n\tgetSortOrder(): SortOrder {\n\t\treturn this.sortOrder;\n\t}\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\n\nexport class SetRowHeightCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly rowHeight: number) {\n\t\tsuper(structureId, 'SetRowHeightCommand');\n\t}\n\n\tgetRowHeight(): number {\n\t\treturn this.rowHeight;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\nimport { SearchConfig } from '../../../../../ui-api/structure/search/search-config';\n\n\nexport class StructureSetConfigSearchingCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly searchConfig: SearchConfig) {\n\t\tsuper(structureId, 'StructureSetConfigSearchingCommand');\n\t}\n\n\tgetConfig(): SearchConfig {\n\t\treturn this.searchConfig;\n\t}\n\n}\n","import { Command } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\n\nexport class StructureSetSearchPhraseCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly phrase: string) {\n\t\tsuper(structureId, 'StructureSetSearchPhraseCommand');\n\t}\n\n\tgetPhrase(): string {\n\t\treturn this.phrase;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { globalStructureId } from '../../../../global-structure-id';\nimport { StructureId } from '../../../../structure-id';\n\n\n@Injectable()\nexport class StructureSearchHighlightArchive {\n\n\tprivate static readonly HIGHLIGHTING = true;\n\n\tprivate readonly idToHighlight = new Map<string, boolean>();\n\n\tprivate readonly idToHighlight$ = new ReplaySubject<Map<string, boolean>>();\n\n\tnext(value: boolean, structureId: StructureId = globalStructureId): void {\n\t\tthis.idToHighlight.set(structureId.getId(), value);\n\t\tthis.idToHighlight$.next(this.idToHighlight);\n\t}\n\n\tonValue(structureId: StructureId = globalStructureId): Observable<boolean> {\n\t\treturn this.idToHighlight$\n\t\t\t\t   .asObservable()\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((idToHighlight: Map<string, boolean>) => {\n\t\t\t\t\t\t   return idToHighlight.get(structureId.getId()) || StructureSearchHighlightArchive.HIGHLIGHTING;\n\t\t\t\t\t   })\n\t\t\t\t   );\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { StructureId } from '../../../../structure-id';\nimport { globalStructureId } from '../../../../global-structure-id';\n\n\n@Injectable()\nexport class StructureSearchPlaceholderArchive {\n\n\tprivate static readonly PLACEHOLDER = 'Search ...';\n\n\tprivate readonly idToPlaceholder = new Map<string, string>();\n\n\tprivate readonly idToPlaceholder$ = new ReplaySubject<Map<string, string>>();\n\n\tnext(value: string, structureId: StructureId = globalStructureId): void {\n\t\tthis.idToPlaceholder.set(structureId.getId(), value);\n\t\tthis.idToPlaceholder$.next(this.idToPlaceholder);\n\t}\n\n\tonValue(structureId: StructureId = globalStructureId): Observable<string> {\n\t\treturn this.idToPlaceholder$\n\t\t\t\t   .asObservable()\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((idToHighlight: Map<string, string>) => {\n\t\t\t\t\t\t   return idToHighlight.get(structureId.getId()) || StructureSearchPlaceholderArchive.PLACEHOLDER;\n\t\t\t\t\t   })\n\t\t\t\t   );\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { CommandDispatcher } from '@generic-ui/hermes';\n\nimport { SearchConfig } from '../../../../ui-api/structure/search/search-config';\nimport { StructureId } from '../../../structure-id';\nimport { globalStructureId } from '../../../global-structure-id';\nimport { StructureSetConfigSearchingCommand } from './config/structure.set-config-searching.command';\nimport { StructureSetSearchPhraseCommand } from './set-phrase/structure.set-search-phrase.command';\nimport { StructureSearchHighlightArchive } from '../../read/searching/highlight/structure.search-highlight.archive';\nimport { StructureSearchPlaceholderArchive } from '../../read/searching/placeholder/structure.search-placeholder.archive';\n\n\n@Injectable()\nexport class StructureSearchDispatcher {\n\n\tconstructor(private commandDispatcher: CommandDispatcher,\n\t\t\t\tprivate structureSearchHighlightArchive: StructureSearchHighlightArchive,\n\t\t\t\tprivate structureSearchPlaceholderArchive: StructureSearchPlaceholderArchive) {\n\t}\n\n\tsetSearchingConfig(config: SearchConfig, structureId: StructureId = globalStructureId): void {\n\n\t\tif (config.highlighting !== undefined && config.highlighting !== null) {\n\t\t\tthis.structureSearchHighlightArchive.next(config.highlighting);\n\t\t}\n\n\t\tif (config.placeholder !== undefined && config.placeholder !== null) {\n\t\t\tthis.structureSearchPlaceholderArchive.next(config.placeholder);\n\t\t}\n\n\t\tif (config.phrase !== undefined && config.phrase !== null) {\n\t\t\tthis.search(config.phrase, structureId);\n\t\t}\n\n\t\tthis.commandDispatcher.dispatch(new StructureSetConfigSearchingCommand(structureId, config));\n\t}\n\n\tsearch(phrase: string, structureId: StructureId = globalStructureId): void {\n\t\tthis.commandDispatcher.dispatch(new StructureSetSearchPhraseCommand(structureId, phrase));\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { CommandDispatcher } from '@generic-ui/hermes';\n\nimport { StructureFilterCommandService } from './filter/structure.filter.command.service';\nimport { SourceDispatcher } from '../../domain/source/command/source.dispatcher';\nimport { StructureId } from '../../domain/structure-id';\nimport { globalStructureId } from '../../domain/global-structure-id';\nimport { CreateStructureCommand } from '../../domain/structure/command/create-structure/create-structure.command';\nimport { SetVerticalScrollEnabledCommand } from '../../domain/structure/command/vertical-formation/set-enabled/set-vertical-scroll-enabled.command';\nimport { SetScrollPositionCommand } from '../../domain/structure/command/vertical-formation/scroll-position/set-scroll-position.command';\nimport { SortingConfig } from './sorting-config';\nimport { SetSortingCommand } from '../../domain/structure/command/sort/set-config/set-sorting.command';\nimport { FieldId } from '../../domain/structure/command/field/data-type/field.id';\nimport { CompositionId } from '../../../composition/domain/composition-id';\nimport { ToggleSortCommand } from '../../domain/structure/command/sort/toggle/toggle-sort.command';\nimport { FilterConfig } from './filter/filter-config';\nimport { QuickFiltersConfig } from './filter/quick-filters.config';\nimport { StructureSetConfigQuickFilterCommand } from '../../domain/structure/command/filter/quick/structure.set-config-quick-filter.command';\nimport { SearchConfig } from './search/search-config';\nimport { ColumnConfig } from '../../../composition/domain/column.config';\nimport { InitFieldsCommand } from '../../domain/structure/command/field/init/init-fields.command';\nimport { SortOrder } from '../../../composition/domain/command/column/sort/sort-order';\nimport { SetSortOrderCommand } from '../../domain/structure/command/sort/order/set-sort-order.command';\nimport { SetRowHeightCommand } from '../../domain/structure/command/vertical-formation/set-row-height/set-row-height.command';\nimport { StructureSearchDispatcher } from '../../domain/structure/command/search/structure.search.dispatcher';\n\n\n@Injectable()\nexport class StructureCommandService {\n\n\tconstructor(private readonly commandDispatcher: CommandDispatcher,\n\t\t\t\tprivate readonly structureFilterCommandService: StructureFilterCommandService,\n\t\t\t\tprivate readonly sourceDispatcher: SourceDispatcher,\n\t\t\t\tprivate readonly structureSearchDispatcher: StructureSearchDispatcher) {\n\t}\n\n\tcreateStructure(structureId: StructureId = globalStructureId): void {\n\t\tthis.commandDispatcher.dispatch(new CreateStructureCommand(structureId));\n\t}\n\n\tenableVerticalScroll(structureId: StructureId = globalStructureId): void {\n\t\tthis.commandDispatcher.dispatch(new SetVerticalScrollEnabledCommand(structureId, true));\n\t}\n\n\tdisableVerticalScroll(structureId: StructureId = globalStructureId): void {\n\t\tthis.commandDispatcher.dispatch(new SetVerticalScrollEnabledCommand(structureId, false));\n\t}\n\n\tsetScrollPosition(position: number, structureId: StructureId = globalStructureId): void {\n\t\tthis.commandDispatcher.dispatch(new SetScrollPositionCommand(structureId, position));\n\t}\n\n\tsetOrigin(items: Array<any>, structureId: StructureId = globalStructureId): void {\n\t\tthis.sourceDispatcher.setOrigin(structureId, items);\n\t}\n\n\tsetSortingConfig(config: SortingConfig, structureId: StructureId = globalStructureId): void {\n\t\tthis.commandDispatcher.dispatch(new SetSortingCommand(structureId, config));\n\t}\n\n\ttoggleSort(fieldId: FieldId, compositionId?: CompositionId, structureId: StructureId = globalStructureId): void {\n\t\tthis.commandDispatcher.dispatch(new ToggleSortCommand(structureId, compositionId, fieldId));\n\t}\n\n\tsetSortOrder(fieldId: FieldId, sortOrder: SortOrder, compositionId?: CompositionId, structureId: StructureId = globalStructureId): void {\n\t\tthis.commandDispatcher.dispatch(new SetSortOrderCommand(structureId, compositionId, fieldId, sortOrder));\n\t}\n\n\tsetFilterConfig(config: FilterConfig, structureId: StructureId = globalStructureId): void {\n\t\tthis.structureFilterCommandService.setFilteringEnabled(config, structureId);\n\t}\n\n\tsetQuickFiltersConfig(config: QuickFiltersConfig, structureId: StructureId = globalStructureId): void {\n\t\tthis.commandDispatcher.dispatch(new StructureSetConfigQuickFilterCommand(structureId, config));\n\t}\n\n\tinitFields(columns: Array<ColumnConfig>, compositionId: CompositionId, structureId: StructureId = globalStructureId): void {\n\t\tthis.commandDispatcher.dispatch(new InitFieldsCommand(structureId, compositionId, columns));\n\t}\n\n\tsetSearchingConfig(config: SearchConfig, structureId: StructureId = globalStructureId): void {\n\t\tthis.structureSearchDispatcher.setSearchingConfig(config, structureId);\n\t}\n\n\tsearch(phrase: string, structureId: StructureId = globalStructureId): void {\n\t\tthis.structureSearchDispatcher.search(phrase, structureId);\n\t}\n\n\tsetRowHeight(rowHeight: number, structureId: StructureId = globalStructureId): void {\n\t\tthis.commandDispatcher.dispatch(new SetRowHeightCommand(structureId, +rowHeight));\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { CommandDispatcher } from '@generic-ui/hermes';\n\nimport { StructureCommandService } from '../../../ui-api/structure/structure-command.service';\nimport { StructureId } from '../../../domain/structure-id';\nimport { CompositionId } from '../../../../composition/domain/composition-id';\nimport { StructureFilterCommandService } from '../../../ui-api/structure/filter/structure.filter.command.service';\nimport { SourceDispatcher } from '../../../domain/source/command/source.dispatcher';\nimport { Override } from '../../../../../common/cdk/decorators';\nimport { SortingConfig } from '../../../ui-api/structure/sorting-config';\nimport { globalStructureId } from '../../../domain/global-structure-id';\nimport { FieldId } from '../../../domain/structure/command/field/data-type/field.id';\nimport { FilterConfig } from '../../../ui-api/structure/filter/filter-config';\nimport { QuickFiltersConfig } from '../../../ui-api/structure/filter/quick-filters.config';\nimport { SearchConfig } from '../../../ui-api/structure/search/search-config';\nimport { ColumnConfig } from '../../../../composition/domain/column.config';\nimport { SortOrder } from '../../../../composition/domain/command/column/sort/sort-order';\nimport { StructureSearchDispatcher } from '../../../domain/structure/command/search/structure.search.dispatcher';\n\n\n@Injectable()\nexport class LocalStructureCommandService extends StructureCommandService {\n\n\tconstructor(private readonly structureId: StructureId,\n\t\t\t\tprivate readonly compositionId: CompositionId,\n\t\t\t\tcommandDispatcher: CommandDispatcher,\n\t\t\t\tstructureFilterCommandService: StructureFilterCommandService,\n\t\t\t\tsourceDispatcher: SourceDispatcher,\n\t\t\t\tstructureSearchDispatcher: StructureSearchDispatcher) {\n\t\tsuper(commandDispatcher, structureFilterCommandService, sourceDispatcher, structureSearchDispatcher);\n\t}\n\n\t@Override\n\tcreateStructure(): void {\n\t\tsuper.createStructure(this.structureId);\n\t}\n\n\t@Override\n\tenableVerticalScroll(): void {\n\t\tsuper.enableVerticalScroll(this.structureId);\n\t}\n\n\t@Override\n\tdisableVerticalScroll(): void {\n\t\tsuper.disableVerticalScroll(this.structureId);\n\t}\n\n\t@Override\n\tsetScrollPosition(position: number): void {\n\t\tsuper.setScrollPosition(position, this.structureId);\n\t}\n\n\t@Override\n\tsetOrigin(items: Array<any>): void {\n\t\tsuper.setOrigin(items, this.structureId);\n\t}\n\n\t@Override\n\tsetSortingConfig(config: SortingConfig, structureId: StructureId = globalStructureId): void {\n\t\tsuper.setSortingConfig(config, this.structureId);\n\t}\n\n\t@Override\n\ttoggleSort(fieldId: FieldId): void {\n\t\tsuper.toggleSort(fieldId, this.compositionId, this.structureId);\n\t}\n\n\t@Override\n\tsetSortOrder(fieldId: FieldId, sortOrder: SortOrder): void {\n\t\tsuper.setSortOrder(fieldId, sortOrder, this.compositionId, this.structureId);\n\t}\n\n\t@Override\n\tsetFilterConfig(config: FilterConfig, structureId: StructureId = globalStructureId): void {\n\t\tsuper.setFilterConfig(config, this.structureId);\n\t}\n\n\t@Override\n\tsetQuickFiltersConfig(config: QuickFiltersConfig, structureId: StructureId = globalStructureId): void {\n\t\tsuper.setQuickFiltersConfig(config, this.structureId);\n\t}\n\n\t@Override\n\tinitFields(columns: Array<ColumnConfig>): void {\n\t\tsuper.initFields(columns, this.compositionId, this.structureId);\n\t}\n\n\t@Override\n\tsetSearchingConfig(config: SearchConfig, structureId: StructureId = globalStructureId): void {\n\t\tsuper.setSearchingConfig(config, this.structureId);\n\t}\n\n\t@Override\n\tsearch(phrase: string): void {\n\t\tsuper.search(phrase, this.structureId);\n\t}\n\n\t@Override\n\tsetRowHeight(rowHeight: number): void {\n\t\tsuper.setRowHeight(rowHeight, this.structureId);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { Override } from '../../../../../common/cdk/decorators';\n\nimport { StructureReadModelService } from '../../../ui-api/structure/structure-read-model.service';\nimport { StructureId } from '../../../domain/structure-id';\nimport { StructureRepository } from '../../../domain/structure/read/structure.repository';\nimport { Structure } from '../../../domain/structure/read/structure';\nimport { VerticalFormationRepository } from '../../../domain/structure/read/vertical-formation/vertical-formation.repository';\n\n\n@Injectable()\nexport class LocalStructureReadModelService extends StructureReadModelService {\n\n\tconstructor(private structureId: StructureId,\n\t\t\t\tstructureRepository: StructureRepository,\n\t\t\t\tverticalFormationRepository: VerticalFormationRepository) {\n\t\tsuper(structureRepository, verticalFormationRepository);\n\t}\n\n\t@Override\n\tonStructure(): Observable<Structure> {\n\t\treturn super.onStructure(this.structureId);\n\t}\n\n\t@Override\n\tonVerticalScrollEnabled(): Observable<boolean> {\n\t\treturn super.onVerticalScrollEnabled(this.structureId);\n\t}\n\n\t@Override\n\tonRowHeight(): Observable<number> {\n\t\treturn super.onRowHeight(this.structureId);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { AggregateArchive } from '@generic-ui/hermes';\nimport { StructureFieldUiModel } from './structure.field.ui-model';\n\n\n@Injectable()\nexport class StructureFieldUiArchive extends AggregateArchive<Array<StructureFieldUiModel>> {\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { StructureFieldUiArchive } from './structure.field.ui-archive';\nimport { StructureId } from '../../../domain/structure-id';\nimport { StructureFieldUiModel } from './structure.field.ui-model';\n\n\n@Injectable()\nexport class StructureFieldUiRepository {\n\n\tconstructor(private structureFieldUiArchive: StructureFieldUiArchive) {\n\t}\n\n\tonFields(structureId: StructureId): Observable<Array<StructureFieldUiModel>> {\n\t\treturn this.structureFieldUiArchive.when(structureId);\n\t}\n\n}\n","import { ColumnFieldId } from '../../../../../../composition/domain/command/column/field/column-field.id';\n\nexport class StructureEditSourceItemParams {\n\n\tconstructor(private readonly itemId: string,\n\t\t\t\tprivate readonly columnFieldId: ColumnFieldId, // TODO Rethink\n\t\t\t\tprivate readonly value: any) {\n\t}\n\n\tgetItemId(): string {\n\t\treturn this.itemId;\n\t}\n\n\tgetColumnFieldId(): ColumnFieldId {\n\t\treturn this.columnFieldId;\n\t}\n\n\tgetValue(): any {\n\t\treturn this.value;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { zip } from 'rxjs';\nimport { map, take } from 'rxjs/operators';\n\nimport { Reactive } from '../../../../common/cdk/reactive';\n\nimport { SourceDispatcher } from '../../domain/source/command/source.dispatcher';\nimport { StructureFieldUiRepository } from '../structure/field/structure.field.ui-repository';\nimport { SourceReadModelService } from './source-read-model.service';\nimport { StructureId } from '../../domain/structure-id';\nimport { globalStructureId } from '../../domain/global-structure-id';\nimport { StructureEditSourceItemParams } from '../../domain/source/command/origin/edit/structure.edit-source-item.params';\nimport { ItemEntity } from '../../domain/source/item.entity';\n\n\n@Injectable()\nexport class SourceCommandService extends Reactive {\n\n\tconstructor(private sourceDispatcher: SourceDispatcher,\n\t\t\t\tprivate structureFieldUiRepository: StructureFieldUiRepository,\n\t\t\t\tprivate sourceQueryService: SourceReadModelService) {\n\t\tsuper();\n\t}\n\n\tsetOrigin(items: Array<any>, structureId: StructureId = globalStructureId): void {\n\t\tthis.sourceDispatcher.setOrigin(structureId, items);\n\t}\n\n\tsetLoading(enabled: boolean, structureId: StructureId = globalStructureId): void {\n\t\tthis.sourceDispatcher.setLoading(structureId, enabled);\n\t}\n\n\teditItem(params: StructureEditSourceItemParams, structureId: StructureId = globalStructureId): void {\n\t\tthis.sourceDispatcher.editItem(structureId, params);\n\t}\n\n\teditItemByIndex(itemIndex: number, fieldIndex: number, value: any, structureId: StructureId = globalStructureId): void {\n\n\t\tconst itemId$ = this.sourceQueryService\n\t\t\t\t\t\t\t.onSingleEntities()\n\t\t\t\t\t\t\t.pipe(\n\t\t\t\t\t\t\t\tmap((entities: Array<ItemEntity>) => {\n\t\t\t\t\t\t\t\t\treturn entities[itemIndex].getId();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t);\n\n\t\tconst fieldId$ = this.structureFieldUiRepository\n\t\t\t\t\t\t\t .onFields(structureId);\n\n\t\tzip(itemId$, fieldId$)\n\t\t\t.pipe(\n\t\t\t\ttake(1),\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((array: Array<any>) => {\n\n\t\t\t\tconst itemId = array[0],\n\t\t\t\t\tfields = array[1];\n\n\t\t\t\tthis.editItem(\n\t\t\t\t\tnew StructureEditSourceItemParams(itemId, fields[fieldIndex], value),\n\t\t\t\t\tstructureId\n\t\t\t\t);\n\t\t\t});\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Override } from '../../../../../common/cdk/decorators';\n\nimport { SourceCommandService } from '../../../ui-api/source/source-command.service';\nimport { StructureId } from '../../../domain/structure-id';\nimport { SourceDispatcher } from '../../../domain/source/command/source.dispatcher';\nimport { StructureFieldUiRepository } from '../../../ui-api/structure/field/structure.field.ui-repository';\nimport { SourceReadModelService } from '../../../ui-api/source/source-read-model.service';\nimport { StructureEditSourceItemParams } from '../../../domain/source/command/origin/edit/structure.edit-source-item.params';\n\n\n@Injectable()\nexport class LocalSourceCommandService extends SourceCommandService {\n\n\tconstructor(private readonly structureId: StructureId,\n\t\t\t\tsourceDispatcher: SourceDispatcher,\n\t\t\t\tstructureFieldUiRepository: StructureFieldUiRepository,\n\t\t\t\tsourceQueryService: SourceReadModelService) {\n\t\tsuper(sourceDispatcher, structureFieldUiRepository, sourceQueryService);\n\t}\n\n\t@Override\n\tsetOrigin(items: Array<any>): void {\n\t\tsuper.setOrigin(items, this.structureId);\n\t}\n\n\t@Override\n\tsetLoading(enabled: boolean): void {\n\t\tsuper.setLoading(enabled, this.structureId);\n\t}\n\n\t@Override\n\teditItem(params: StructureEditSourceItemParams): void {\n\t\tsuper.editItem(params, this.structureId);\n\t}\n\n\t@Override\n\teditItemByIndex(itemIndex: number, fieldIndex: number, value: any): void {\n\t\tsuper.editItemByIndex(itemIndex, fieldIndex, value, this.structureId);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { Override } from '../../../../../common/cdk/decorators';\n\nimport { SourceReadModelService } from '../../../ui-api/source/source-read-model.service';\nimport { StructureId } from '../../../domain/structure-id';\nimport { StructureRepository } from '../../../domain/structure/read/structure.repository';\nimport { StructureSourceOriginRepository } from '../../../domain/source/read/origin/structure.source-origin.repository';\nimport { ItemEntity } from '../../../domain/source/item.entity';\nimport { StructurePreparedItemsRepository } from '../../../domain/source/read/prepared/structure.prepared-items.repository';\n\n\n@Injectable()\nexport class LocalSourceReadModelService extends SourceReadModelService {\n\n\tconstructor(private structureId: StructureId,\n\t\t\t\tstructureRepository: StructureRepository,\n\t\t\t\tstructurePreparedItemsRepository: StructurePreparedItemsRepository,\n\t\t\t\tstructureSourceOriginRepository: StructureSourceOriginRepository) {\n\t\tsuper(structureRepository, structurePreparedItemsRepository, structureSourceOriginRepository);\n\t}\n\n\t@Override\n\tonEntities(): Observable<Array<ItemEntity>> {\n\t\treturn super.onEntities(this.structureId);\n\t}\n\n\t@Override\n\tonEntitiesSize(): Observable<number> {\n\t\treturn super.onEntitiesSize(this.structureId);\n\t}\n\n\t@Override\n\tonSingleEntities(): Observable<Array<ItemEntity>> {\n\t\treturn super.onSingleEntities(this.structureId);\n\t}\n\n\t@Override\n\tonOriginSize(): Observable<number> {\n\t\treturn super.onOriginSize(this.structureId);\n\t}\n\n\t@Override\n\tonLoading(): Observable<boolean> {\n\t\treturn super.onLoading(this.structureId);\n\t}\n\n\t@Override\n\tonPreparedEntities(): Observable<boolean> {\n\t\treturn super.onPreparedEntities(this.structureId);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Override } from '../../../../../common/cdk/decorators';\n\nimport { CompositionCommandService } from '../../../../composition/ui-api/composition.command-service';\nimport { CompositionId } from '../../../../composition/domain/composition-id';\nimport { CompositionDispatcher } from '../../../../composition/domain/command/composition.dispatcher';\nimport { globalCompositionId } from '../../../../composition/domain/global-composition-id';\nimport { ColumnParams } from '../../../../composition/domain/command/column/set-columns/column.params';\nimport { ColumnId } from '../../../../composition/domain/command/column/column.id';\n\n\n@Injectable()\nexport class LocalCompositionCommandService extends CompositionCommandService {\n\n\tconstructor(private readonly compositionId: CompositionId,\n\t\t\t\tcompositionDispatcher: CompositionDispatcher) {\n\t\tsuper(compositionDispatcher);\n\t}\n\n\t@Override\n\tcreateComposition(compositionId: CompositionId = globalCompositionId): void {\n\t\tsuper.createComposition(this.compositionId);\n\t}\n\n\t@Override\n\tsetColumns(params: Array<ColumnParams>): void {\n\t\tsuper.setColumns(params, this.compositionId);\n\t}\n\n\t@Override\n\tsetWidth(width: number, compositionId: CompositionId = globalCompositionId): void {\n\t\tsuper.setWidth(width, this.compositionId);\n\t}\n\n\t@Override\n\tsetContainerWidth(width: number, compositionId: CompositionId = globalCompositionId): void {\n\t\tsuper.setContainerWidth(width, this.compositionId);\n\t}\n\n\t@Override\n\tsetResizeWidth(enabled: boolean, compositionId: CompositionId = globalCompositionId): void {\n\t\tsuper.setResizeWidth(enabled, this.compositionId);\n\t}\n\n\t@Override\n\tenableColumn(columnId: ColumnId, compositionId: CompositionId = globalCompositionId): void {\n\t\tsuper.enableColumn(columnId, this.compositionId);\n\t}\n\n\t@Override\n\tdisableColumn(columnId: ColumnId, compositionId: CompositionId = globalCompositionId): void {\n\t\tsuper.disableColumn(columnId, this.compositionId);\n\t}\n\n\t@Override\n\tmoveLeft(columnId: ColumnId, compositionId: CompositionId = globalCompositionId): void {\n\t\tsuper.moveLeft(columnId, this.compositionId);\n\t}\n\n\t@Override\n\tmoveRight(columnId: ColumnId, compositionId: CompositionId = globalCompositionId): void {\n\t\tsuper.moveRight(columnId, this.compositionId);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { Override } from '../../../../../common/cdk/decorators';\n\nimport { CompositionReadModelService } from '../../../../composition/ui-api/composition-read-model.service';\nimport { CompositionId } from '../../../../composition/domain/composition-id';\nimport { CompositionRepository } from '../../../../composition/domain/read/composition.repository';\nimport { CellTemplateWithContext } from '../../../../composition/domain/read/definition/cell-template-with-context';\nimport { CellTemplateWithAccessor } from '../../../../composition/domain/read/definition/cell-template-with-accessor';\nimport { globalCompositionId } from '../../../../composition/domain/global-composition-id';\nimport { FieldId } from '../../../domain/structure/command/field/data-type/field.id';\nimport { SortOrder } from '../../../../composition/domain/command/column/sort/sort-order';\n\n\n@Injectable()\nexport class LocalCompositionReadModelService extends CompositionReadModelService {\n\n\tconstructor(private readonly compositionId: CompositionId,\n\t\t\t\tcompositionRepository: CompositionRepository) {\n\t\tsuper(compositionRepository);\n\t}\n\n\t@Override\n\tonWidth(): Observable<number> {\n\t\treturn super.onWidth(this.compositionId);\n\t}\n\n\t@Override\n\tonContainerWidth(compositionId: CompositionId = globalCompositionId): Observable<number> {\n\t\treturn super.onContainerWidth(this.compositionId);\n\t}\n\n\t@Override\n\tonWidthForEachColumn(): Observable<Array<number>> {\n\t\treturn super.onWidthForEachColumn(this.compositionId);\n\t}\n\n\t@Override\n\tonHeaderColumns(): Observable<Array<CellTemplateWithContext>> {\n\t\treturn super.onHeaderColumns(this.compositionId);\n\t}\n\n\t@Override\n\tonAllColumns(compositionId: CompositionId = globalCompositionId): Observable<Array<CellTemplateWithContext>> {\n\t\treturn super.onAllColumns(this.compositionId);\n\t}\n\n\t@Override\n\tonSortOrder(fieldId: FieldId): Observable<SortOrder> {\n\t\treturn super.onSortOrder(fieldId, this.compositionId);\n\t}\n\n\t@Override\n\tonTemplateColumns(): Observable<Array<CellTemplateWithAccessor>> {\n\t\treturn super.onTemplateColumns(this.compositionId);\n\t}\n\n\t@Override\n\tonResizeWidth(): Observable<boolean> {\n\t\treturn super.onResizeWidth(this.compositionId);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { CommandDispatcher } from '@generic-ui/hermes';\n\nimport { StructureSearchDispatcher } from '../../../domain/structure/command/search/structure.search.dispatcher';\nimport { StructureId } from '../../../domain/structure-id';\nimport { SearchConfig } from '../../../ui-api/structure/search/search-config';\nimport { Override } from '../../../../../common/cdk/decorators';\nimport { StructureSearchHighlightArchive } from '../../../domain/structure/read/searching/highlight/structure.search-highlight.archive';\nimport { StructureSearchPlaceholderArchive } from '../../../domain/structure/read/searching/placeholder/structure.search-placeholder.archive';\n\n\n@Injectable()\nexport class LocalStructureSearchDispatcher extends StructureSearchDispatcher {\n\n\tconstructor(private structureId: StructureId,\n\t\t\t\tcommandDispatcher: CommandDispatcher,\n\t\t\t\tstructureSearchHighlightArchive: StructureSearchHighlightArchive,\n\t\t\t\tstructureSearchPlaceholderArchive: StructureSearchPlaceholderArchive) {\n\t\tsuper(commandDispatcher, structureSearchHighlightArchive, structureSearchPlaceholderArchive);\n\t}\n\n\t@Override\n\tsetSearchingConfig(config: SearchConfig): void {\n\t\tsuper.setSearchingConfig(config, this.structureId);\n\t}\n\n\t@Override\n\tsearch(phrase: string): void {\n\t\tsuper.search(phrase, this.structureId);\n\t}\n}\n","import { CompositionCommandService } from '../../../composition/ui-api/composition.command-service';\nimport { PagingCommandService } from '../../ui-api/paging/paging-command.service';\nimport { LocalPagingCommandService } from './paging/local-paging-command.service';\nimport { LocalPagingReadModelService } from './paging/local-paging-read-model.service';\nimport { SchemaCommandService } from '../../ui-api/schema/schema-command.service';\nimport { LocalSchemaCommandService } from './schema/local-schema-command.service';\nimport { SchemaReadModelService } from '../../ui-api/schema/schema-read-model.service';\nimport { LocalSchemaReadModelService } from './schema/local-schema-read-model.service';\nimport { FormationCommandService } from '../../ui-api/formation/formation-command.service';\nimport { LocalFormationCommandService } from './formation/local-formation-command.service';\nimport { FormationReadModelService } from '../../ui-api/formation/formation-read-model.service';\nimport { LocalFormationReadModelService } from './formation/local-formation-read-model.service';\nimport { StructureCommandService } from '../../ui-api/structure/structure-command.service';\nimport { LocalStructureCommandService } from './structure/local-structure-command.service';\nimport { StructureReadModelService } from '../../ui-api/structure/structure-read-model.service';\nimport { LocalStructureReadModelService } from './structure/local-structure-read-model.service';\nimport { SourceCommandService } from '../../ui-api/source/source-command.service';\nimport { LocalSourceCommandService } from './source/local-source-command.service';\nimport { SourceReadModelService } from '../../ui-api/source/source-read-model.service';\nimport { LocalSourceReadModelService } from './source/local-source-read-model.service';\nimport { LocalCompositionCommandService } from './composition/local-composition-command.service';\nimport { CompositionReadModelService } from '../../../composition/ui-api/composition-read-model.service';\nimport { LocalCompositionReadModelService } from './composition/local-composition-read-model.service';\nimport { PagingReadModelService } from '../../ui-api/paging/paging-read-model.service';\nimport { StructureSearchDispatcher } from '../../domain/structure/command/search/structure.search.dispatcher';\nimport { LocalStructureSearchDispatcher } from './search/local-structure-search.dispatcher';\n\nexport const localProviders = [\n\t{ provide: PagingCommandService, useClass: LocalPagingCommandService },\n\t{ provide: PagingReadModelService, useClass: LocalPagingReadModelService },\n\t{ provide: SchemaCommandService, useClass: LocalSchemaCommandService },\n\t{ provide: SchemaReadModelService, useClass: LocalSchemaReadModelService },\n\t{ provide: FormationCommandService, useClass: LocalFormationCommandService },\n\t{ provide: FormationReadModelService, useClass: LocalFormationReadModelService },\n\t{ provide: StructureCommandService, useClass: LocalStructureCommandService },\n\t{ provide: StructureReadModelService, useClass: LocalStructureReadModelService },\n\t{ provide: SourceCommandService, useClass: LocalSourceCommandService },\n\t{ provide: SourceReadModelService, useClass: LocalSourceReadModelService },\n\n\t{ provide: CompositionCommandService, useClass: LocalCompositionCommandService },\n\t{ provide: CompositionReadModelService, useClass: LocalCompositionReadModelService },\n\n\t{ provide: StructureSearchDispatcher, useClass: LocalStructureSearchDispatcher }\n];\n","import { ElementRef, Injectable, OnDestroy, Renderer2, RendererFactory2 } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport { SchemaCssClass } from '../../domain/schema/read/schema-css-class';\nimport { SchemaReadModelService } from '../../ui-api/schema/schema-read-model.service';\nimport { StructureId } from '../../domain/structure-id';\nimport { SchemaTheme } from '../../domain/schema/schema-theme';\nimport { SchemaRowColoring } from '../../domain/schema/schema-row-coloring';\n\n\n@Injectable()\nexport class SchemaCssClassManager implements OnDestroy {\n\n\tprivate readonly VERTICAL_GRID_CLASS_NAME = 'gui-vertical-grid';\n\n\tprivate readonly HORIZONTAL_GRID_CLASS_NAME = 'gui-horizontal-grid';\n\n\tprivate readonly THEME_FABRIC_CLASS_NAME = 'gui-fabric';\n\n\tprivate readonly THEME_MATERIAL_CLASS_NAME = 'gui-material';\n\n\tprivate readonly THEME_LIGHT_CLASS_NAME = 'gui-light';\n\n\tprivate readonly THEME_DARK_CLASS_NAME = 'gui-dark';\n\n\tprivate readonly THEME_GENERIC_CLASS_NAME = 'gui-generic';\n\n\tprivate readonly ROW_COLORING_ODD = 'gui-rows-odd';\n\n\tprivate readonly ROW_COLORING_EVEN = 'gui-rows-even';\n\n\tprivate readonly renderer: Renderer2;\n\n\tprivate cssClass: SchemaCssClass = null;\n\n\tprivate cssHostRef: ElementRef;\n\n\tprivate unsubscribe$ = new Subject();\n\n\tconstructor(private rendererFactory2: RendererFactory2,\n\t\t\t\tprivate schemaQueryService: SchemaReadModelService) {\n\t\tthis.renderer = this.rendererFactory2.createRenderer(null, null);\n\t}\n\n\tngOnDestroy() {\n\t\tthis.unsubscribe$.next();\n\t\tthis.unsubscribe$.complete();\n\t}\n\n\tinit(elementRef: ElementRef, structureId: StructureId): void {\n\n\t\tthis.cssHostRef = elementRef;\n\n\t\tthis.schemaQueryService\n\t\t\t.onCssClasses(structureId)\n\t\t\t.pipe(takeUntil(this.unsubscribe$))\n\t\t\t.subscribe((classes: SchemaCssClass) => {\n\n\t\t\t\tconst diff = this.updateState(classes);\n\n\t\t\t\tthis.renderCssClasses(diff);\n\t\t\t});\n\t}\n\n\tprivate updateState(css: SchemaCssClass): Partial<SchemaCssClass> {\n\n\t\tif (!this.cssClass) {\n\t\t\tthis.cssClass = css;\n\t\t\treturn this.cssClass;\n\t\t} else {\n\n\t\t\tlet diff = {};\n\n\t\t\tObject.keys(this.cssClass)\n\t\t\t\t  .forEach((key: string) => {\n\t\t\t\t\t  if (css[key] !== this.cssClass[key]) {\n\t\t\t\t\t\t  diff[key] = css[key];\n\t\t\t\t\t  }\n\t\t\t\t  });\n\n\t\t\tthis.cssClass = css;\n\n\t\t\treturn diff;\n\t\t}\n\t}\n\n\tprivate renderCssClasses(diff: Partial<SchemaCssClass>): void {\n\n\t\tif (diff.hasOwnProperty('verticalGrid')) {\n\t\t\tthis.toggleCssClass(diff.verticalGrid, this.VERTICAL_GRID_CLASS_NAME);\n\t\t}\n\n\t\tif (diff.hasOwnProperty('horizontalGrid')) {\n\t\t\tthis.toggleCssClass(diff.horizontalGrid, this.HORIZONTAL_GRID_CLASS_NAME);\n\t\t}\n\n\t\tif (diff.hasOwnProperty('theme')) {\n\t\t\tthis.removeThemeCssClasses();\n\t\t\tthis.addClass(this.resolveThemeClassName(diff.theme));\n\t\t}\n\n\t\tif (diff.hasOwnProperty('rowColoring')) {\n\t\t\tthis.removeRowColoringClasses();\n\t\t\tthis.addClass(this.resolveRowColoringClassName(diff.rowColoring));\n\t\t}\n\t}\n\n\tprivate toggleCssClass(toggle: boolean, cssClassName: string): void {\n\t\tif (toggle) {\n\t\t\tthis.addClass(cssClassName);\n\t\t} else {\n\t\t\tthis.removeClass(cssClassName);\n\t\t}\n\t}\n\n\tprivate removeThemeCssClasses(): void {\n\t\tObject.keys(SchemaTheme)\n\t\t\t  .map((key: string) => SchemaTheme[key])\n\t\t\t  .map((theme: SchemaTheme) => this.resolveThemeClassName(theme))\n\t\t\t  .filter((className: string) => !!className)\n\t\t\t  .forEach((className: string) => {\n\t\t\t\t  this.removeClass(className);\n\t\t\t  });\n\t}\n\n\tprivate resolveThemeClassName(theme: SchemaTheme | string): string {\n\n\t\tswitch (theme) {\n\t\t\tcase SchemaTheme.FABRIC:\n\t\t\tcase SchemaTheme[SchemaTheme.FABRIC]:\n\t\t\t\treturn this.THEME_FABRIC_CLASS_NAME;\n\n\t\t\tcase SchemaTheme.MATERIAL:\n\t\t\tcase SchemaTheme[SchemaTheme.MATERIAL]:\n\t\t\t\treturn this.THEME_MATERIAL_CLASS_NAME;\n\n\t\t\tcase SchemaTheme.LIGHT:\n\t\t\tcase SchemaTheme[SchemaTheme.LIGHT]:\n\t\t\t\treturn this.THEME_LIGHT_CLASS_NAME;\n\n\t\t\tcase SchemaTheme.DARK:\n\t\t\tcase SchemaTheme[SchemaTheme.DARK]:\n\t\t\t\treturn this.THEME_DARK_CLASS_NAME;\n\n\t\t\tcase SchemaTheme.GENERIC:\n\t\t\tcase SchemaTheme[SchemaTheme.GENERIC]:\n\t\t\t\treturn this.THEME_GENERIC_CLASS_NAME;\n\n\t\t\tdefault:\n\t\t\t\treturn this.THEME_FABRIC_CLASS_NAME;\n\t\t}\n\t}\n\n\tprivate resolveRowColoringClassName(coloring: SchemaRowColoring | string): string {\n\t\tswitch (coloring) {\n\t\t\tcase SchemaRowColoring.ODD:\n\t\t\tcase SchemaRowColoring[SchemaRowColoring.ODD]:\n\t\t\t\treturn this.ROW_COLORING_ODD;\n\n\t\t\tcase SchemaRowColoring.EVEN:\n\t\t\tcase SchemaRowColoring[SchemaRowColoring.EVEN]:\n\t\t\t\treturn this.ROW_COLORING_EVEN;\n\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tprivate removeRowColoringClasses(): void {\n\t\tObject.keys(SchemaRowColoring)\n\t\t\t  .map((key: string) => SchemaRowColoring[key])\n\t\t\t  .map((coloring: SchemaRowColoring) => this.resolveRowColoringClassName(coloring))\n\t\t\t  .filter((className: string) => !!className)\n\t\t\t  .forEach((className: string) => {\n\t\t\t\t  this.removeClass(className);\n\t\t\t  });\n\t}\n\n\tprivate addClass(cssClassName: string): void {\n\t\tif (cssClassName) {\n\t\t\tthis.renderer.addClass(this.cssHostRef.nativeElement, cssClassName);\n\t\t}\n\t}\n\n\tprivate removeClass(cssClassName: string): void {\n\t\tif (cssClassName) {\n\t\t\tthis.renderer.removeClass(this.cssHostRef.nativeElement, cssClassName);\n\t\t}\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Archive } from '../../../../common/cdk/archive';\n\n\n@Injectable()\nexport class StructureCellEditArchive extends Archive<boolean> {\n\n\tconstructor() {\n\t\tsuper();\n\t}\n}\n","import { Injectable } from '@angular/core';\n\nimport { Archive } from '../../../../common/cdk/archive';\n\nimport { StructureCellEditState } from './structure.cell-edit.state';\n\n\n@Injectable()\nexport class StructureCellEditStore extends Archive<StructureCellEditState> {\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Archive } from '../../../../common/cdk/archive';\n\n@Injectable()\nexport class StructureEditModeArchive extends Archive<boolean> {\n\n\tconstructor() {\n\t\tsuper();\n\t}\n}\n","import { Injectable } from '@angular/core';\n\nimport { Archive } from '../../../../../common/cdk/archive';\n\n\n@Injectable()\nexport class StructureInfoPanelEnabledArchive extends Archive<boolean> {\n\n\tconstructor() {\n\t\tsuper(false);\n\t}\n}\n","export class StructureAggregationPanelConfig {\n\n\tprivate readonly top: boolean = false;\n\n\tprivate readonly bottom: boolean = true;\n\n\tconstructor(top?: boolean,\n\t\t\t\tbottom?: boolean) {\n\n\t\tif (top !== undefined && top !== null) {\n\t\t\tthis.top = top;\n\t\t}\n\n\t\tif (bottom !== undefined && bottom !== null) {\n\t\t\tthis.bottom = bottom;\n\t\t}\n\n\t}\n\n\titTopEnabled(): boolean {\n\t\treturn this.top;\n\t}\n\n\titBottomEnabled(): boolean {\n\t\treturn this.bottom;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Archive } from '../../../../../common/cdk/archive';\n\nimport { StructureAggregationPanelConfig } from './structure.aggregation-panel.config';\n\n\n@Injectable()\nexport class StructureAggregationArchive extends Archive<StructureAggregationPanelConfig> {\n\n\tconstructor() {\n\t\tsuper(new StructureAggregationPanelConfig());\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { StructureAggregationPanelConfig } from './structure.aggregation-panel.config';\n\nimport { AggregationConfig } from '../../../ui-api/structure/aggregation/aggregation-config';\n\n\n@Injectable()\nexport class StructureAggregationPanelConfigConverter {\n\n\tconvert(config: AggregationConfig): StructureAggregationPanelConfig {\n\n\t\tif (config.enabled) {\n\t\t\treturn new StructureAggregationPanelConfig(config.top, config.bottom);\n\t\t} else {\n\t\t\treturn new StructureAggregationPanelConfig(false, false);\n\t\t}\n\t}\n}\n","import { Command } from '@generic-ui/hermes';\nimport { StructureId } from '../../../../structure-id';\n\n\nexport class StructureSetAggregationEnabledCommand extends Command {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly enabled: boolean) {\n\t\tsuper(structureId, 'StructureSetAggregationEnabledCommand');\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { CommandDispatcher } from '@generic-ui/hermes';\nimport { StructureId } from '../../../domain/structure-id';\nimport { StructureSetAggregationEnabledCommand } from '../../../domain/structure/command/aggregation/set/structure.set-aggregation-enabled.command';\n\n\n@Injectable()\nexport class StructureAggregationCommandService {\n\n\tconstructor(private commandDispatcher: CommandDispatcher) {\n\t}\n\n\tsetAggregationEnabled(enabled: boolean, structureId: StructureId): void {\n\t\tthis.commandDispatcher.dispatch(new StructureSetAggregationEnabledCommand(structureId, enabled));\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { StructureAggregationPanelConfigConverter } from './structure.aggregation-panel.config-converter';\nimport { StructureAggregationArchive } from './structure.aggregation.archive';\n\nimport { StructureAggregationCommandService } from '../../../ui-api/structure/aggregation/structure.aggregation.command-service';\nimport { StructureId } from '../../../domain/structure-id';\nimport { AggregationConfig } from '../../../ui-api/structure/aggregation/aggregation-config';\n\n\n@Injectable()\nexport class StructureAggregationConfigService {\n\n\tconstructor(private structureAggregationPanelConfigConverter: StructureAggregationPanelConfigConverter,\n\t\t\t\tprivate structureAggregationArchive: StructureAggregationArchive,\n\t\t\t\tprivate structureAggregationCommandService: StructureAggregationCommandService,\n\t\t\t\tprivate structureId: StructureId) {\n\t}\n\n\tset(config: AggregationConfig): void {\n\n\t\tconst aggregationPanelConfig = this.structureAggregationPanelConfigConverter.convert(config);\n\n\t\tthis.structureAggregationArchive.next(aggregationPanelConfig);\n\n\t\tthis.structureAggregationCommandService.setAggregationEnabled(config.enabled, this.structureId);\n\t}\n\n}\n","import { InjectionToken } from '@angular/core';\n\nimport { StructureComponent } from './structure.component';\n\nexport const structureComponentToken = new InjectionToken<StructureComponent>('StructureComponentToken');\n","export enum StructureCellEditState {\n\tENTER,\n\tSUBMIT,\n\tCANCEL\n}\n","import { EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\nimport { skip } from 'rxjs/operators';\n\nimport { SmartComponent } from '../../../../common/cdk/smart-component';\nimport { ColumnConfig } from '../../../composition/domain/column.config';\nimport { PagingConfig } from '../../domain/paging/paging-config';\nimport { SchemaTheme } from '../../domain/schema/schema-theme';\nimport { SchemaRowColoring } from '../../domain/schema/schema-row-coloring';\nimport { SortingConfig } from '../../ui-api/structure/sorting-config';\nimport { FilterConfig } from '../../ui-api/structure/filter/filter-config';\nimport { QuickFiltersConfig } from '../../ui-api/structure/filter/quick-filters.config';\nimport { SearchConfig } from '../../ui-api/structure/search/search-config';\nimport { AggregationConfig } from '../../ui-api/structure/aggregation/aggregation-config';\nimport { EditemItemValues } from '../../ui-api/source/event/editem-item.values';\nimport { StructureId } from '../../domain/structure-id';\nimport { CompositionId } from '../../../composition/domain/composition-id';\nimport { StructureCommandService } from '../../ui-api/structure/structure-command.service';\nimport { PagingCommandService } from '../../ui-api/paging/paging-command.service';\nimport { PagingEventService } from '../../ui-api/paging/paging-event.service';\nimport { SourceCommandService } from '../../ui-api/source/source-command.service';\nimport { SourceEventService } from '../../ui-api/source/event/source-event.service';\nimport { SchemaCommandService } from '../../ui-api/schema/schema-command.service';\nimport { CompositionCommandService } from '../../../composition/ui-api/composition.command-service';\nimport { CompositionEventService } from '../../../composition/ui-api/composition.event-service';\nimport { FormationEventService } from '../../ui-api/formation/formation-event.service';\nimport { StructureEditModeArchive } from '../edit/structure.edit-mode.archive';\nimport { StructureCellEditArchive } from '../edit/structure.cell-edit.archive';\nimport { StructureInfoPanelEnabledArchive } from '../panel/info/structure.info-panel-enabled.archive';\nimport { StructureAggregationConfigService } from '../panel/aggregation/structure.aggregation-config.service';\nimport { StructureCellEditStore } from '../edit/structure.cell-edit.store';\nimport { StructureCellEditState } from '../edit/structure.cell-edit.state';\nimport { ColumnMenuConfig } from '../../ui-api/structure/column-menu-config';\nimport { StructureColumnMenuConfigArchive } from '../header/menu/config/structure.column-menu-config.archive';\nimport { StructurePagingDisplayModeArchive } from '../paging/mode/structure-paging.display-mode.archive';\nimport { StructureRowSelectEnabledArchive } from '../content/row/structure.row-select-enabled.archive';\nimport { StructureSearchEventService } from '../../ui-api/structure/search/structure-search-event.service';\n\n\n/** @internal */\nexport abstract class StructureGateway extends SmartComponent implements OnChanges, OnInit {\n\n\t/***********************\n\t * INPUTS\n\t ***********************/\n\n\t@Input()\n\tcolumnHeaderTop: boolean;\n\n\t@Input()\n\tcolumnHeaderBottom: boolean;\n\n\t@Input()\n\tmaxHeight: number;\n\n\t@Input()\n\twidth: number;\n\n\t@Input()\n\trowHeight: number;\n\n\t@Input()\n\tautoResizeWidth: boolean;\n\n\t@Input()\n\tsource: Array<any> = [];\n\n\t@Input()\n\tcolumns: Array<ColumnConfig> = [];\n\n\t@Input()\n\tpaging: boolean | PagingConfig;\n\n\t@Input()\n\tverticalGrid: boolean;\n\n\t@Input()\n\thorizontalGrid: boolean;\n\n\t@Input()\n\ttheme: SchemaTheme;\n\n\t@Input()\n\trowColoring: SchemaRowColoring;\n\n\t@Input()\n\trowSelecting: boolean;\n\n\t@Input()\n\tloading: boolean;\n\n\t@Input()\n\tvirtualScroll: boolean;\n\n\t@Input()\n\tsorting: boolean | SortingConfig;\n\n\t@Input()\n\tfiltering: boolean | FilterConfig;\n\n\t@Input()\n\tquickFilters: boolean | QuickFiltersConfig;\n\n\t@Input()\n\tsearching: boolean | SearchConfig;\n\n\t@Input()\n\teditMode: boolean;\n\n\t@Input()\n\tcellEditing: boolean;\n\n\t@Input()\n\tinfoPanel: boolean;\n\n\t@Input()\n\taggregation: AggregationConfig;\n\n\t@Input()\n\tcolumnMenu: ColumnMenuConfig;\n\n\n\t/***********************\n\t * OUTPUTS\n\t ***********************/\n\n\t@Output()\n\tpageChanged: EventEmitter<number> = new EventEmitter<number>();\n\n\t@Output()\n\tpageSizeChanged: EventEmitter<number> = new EventEmitter<number>();\n\n\t@Output()\n\titemsSelected: EventEmitter<any> = new EventEmitter();\n\n\t@Output()\n\tcolumnsChanged: EventEmitter<void> = new EventEmitter();\n\n\t@Output()\n\tcontainerWidthChanged: EventEmitter<number> = new EventEmitter();\n\n\t@Output()\n\tsourceEdited: EventEmitter<EditemItemValues> = new EventEmitter();\n\n\t@Output()\n\tcellEditEntered: EventEmitter<void> = new EventEmitter();\n\n\t@Output()\n\tcellEditCanceled: EventEmitter<void> = new EventEmitter();\n\n\t@Output()\n\tcellEditSubmitted: EventEmitter<void> = new EventEmitter();\n\n\t@Output()\n\tsearchPhraseChanged: EventEmitter<string> = new EventEmitter();\n\n\tprotected constructor(\n\t\tpublic structureId: StructureId,\n\t\tprotected compositionId: CompositionId,\n\t\tprotected structureCommandService: StructureCommandService,\n\t\tprotected pagingCommandService: PagingCommandService,\n\t\tprotected pagingEventService: PagingEventService,\n\t\tprotected sourceCommandService: SourceCommandService,\n\t\tprotected sourceEventService: SourceEventService,\n\t\tprotected schemaCommandService: SchemaCommandService,\n\t\tprotected compositionCommandService: CompositionCommandService,\n\t\tprotected compositionEventService: CompositionEventService,\n\t\tprotected formationEventService: FormationEventService,\n\t\tprotected structureEditModeArchive: StructureEditModeArchive,\n\t\tprotected structureCellEditArchive: StructureCellEditArchive,\n\t\tprotected structureInfoPanelEnabledArchive: StructureInfoPanelEnabledArchive,\n\t\tprotected structureAggregationConfigService: StructureAggregationConfigService,\n\t\tprotected structureCellEditStore: StructureCellEditStore,\n\t\tprotected structureColumnMenuConfigArchive: StructureColumnMenuConfigArchive,\n\t\tprotected structurePagingDisplayModeArchive: StructurePagingDisplayModeArchive,\n\t\tprotected structureRowSelectEnabledArchive: StructureRowSelectEnabledArchive,\n\t\tprotected structureSearchEventService: StructureSearchEventService\n\t) {\n\t\tsuper();\n\t}\n\n\tngOnChanges(simpleChanges: SimpleChanges) {\n\n\t\tif (simpleChanges.theme !== undefined && simpleChanges.theme.currentValue !== undefined) {\n\t\t\tthis.schemaCommandService.setTheme(this.theme);\n\t\t}\n\n\t\tif (simpleChanges.columnMenu !== undefined && simpleChanges.columnMenu.currentValue !== undefined) {\n\t\t\tthis.structureColumnMenuConfigArchive.nextConfig(this.columnMenu);\n\t\t}\n\n\t\tif (simpleChanges.rowSelecting !== undefined && simpleChanges.rowSelecting.currentValue !== undefined) {\n\t\t\tthis.structureRowSelectEnabledArchive.next(this.rowSelecting);\n\t\t}\n\n\t\tif (simpleChanges.infoPanel !== undefined && simpleChanges.infoPanel.currentValue !== undefined) {\n\t\t\tthis.structureInfoPanelEnabledArchive.next(this.infoPanel);\n\t\t}\n\n\t\tif (simpleChanges.aggregation !== undefined && simpleChanges.aggregation.currentValue !== undefined) {\n\t\t\tthis.structureAggregationConfigService.set(this.aggregation);\n\t\t}\n\n\t\tif (simpleChanges.editMode !== undefined && simpleChanges.editMode.currentValue !== undefined) {\n\t\t\tthis.structureEditModeArchive.next(this.editMode);\n\t\t}\n\n\t\tif (simpleChanges.cellEditing !== undefined && simpleChanges.cellEditing.currentValue !== undefined) {\n\t\t\tthis.structureCellEditArchive.next(this.cellEditing);\n\t\t}\n\n\t\tif (simpleChanges.width !== undefined && simpleChanges.width.currentValue !== undefined) {\n\t\t\tthis.compositionCommandService.setWidth(this.width);\n\t\t}\n\n\t\tif (simpleChanges.rowHeight !== undefined && simpleChanges.rowHeight.currentValue !== undefined) {\n\t\t\tthis.structureCommandService.setRowHeight(this.rowHeight);\n\t\t}\n\n\t\tif (simpleChanges.autoResizeWidth !== undefined && simpleChanges.autoResizeWidth.currentValue !== undefined) {\n\t\t\tthis.compositionCommandService.setResizeWidth(this.autoResizeWidth);\n\t\t}\n\n\t\tif (simpleChanges.columnHeaderTop !== undefined && simpleChanges.columnHeaderTop.currentValue !== undefined) {\n\t\t\tthis.schemaCommandService.changeTopHeader(this.columnHeaderTop);\n\t\t}\n\n\t\tif (simpleChanges.columnHeaderBottom !== undefined && simpleChanges.columnHeaderBottom.currentValue !== undefined) {\n\t\t\tthis.schemaCommandService.changeBottomHeader(this.columnHeaderBottom);\n\t\t}\n\n\t\tif (simpleChanges.loading !== undefined && simpleChanges.loading.currentValue !== undefined) {\n\t\t\tthis.sourceCommandService.setLoading(this.loading);\n\t\t}\n\n\t\tif (simpleChanges.paging !== undefined && simpleChanges.paging.currentValue !== undefined) {\n\n\t\t\tlet pagingConfig: PagingConfig;\n\n\t\t\tif (typeof this.paging === 'boolean') {\n\t\t\t\tpagingConfig = {\n\t\t\t\t\tenabled: this.paging\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tpagingConfig = this.paging;\n\n\t\t\t\tif (this.paging.displayMode !== undefined) {\n\t\t\t\t\tthis.structurePagingDisplayModeArchive.next(this.paging.displayMode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.pagingCommandService.setPaging(pagingConfig);\n\t\t}\n\n\t\tif (simpleChanges.columns) {\n\t\t\tthis.structureCommandService.initFields(this.columns, this.compositionId, this.structureId);\n\t\t\t// this.compositionCommandService.setColumns(this.columns);\n\t\t}\n\n\t\tif (simpleChanges.verticalGrid !== undefined && simpleChanges.verticalGrid.currentValue !== undefined) {\n\t\t\tthis.schemaCommandService.changeVerticalGrid(this.verticalGrid);\n\t\t}\n\n\t\tif (simpleChanges.horizontalGrid !== undefined && simpleChanges.horizontalGrid.currentValue !== undefined) {\n\t\t\tthis.schemaCommandService.changeHorizontalGrid(this.horizontalGrid);\n\t\t}\n\n\t\tif (simpleChanges.rowColoring !== undefined && simpleChanges.rowColoring.currentValue !== undefined) {\n\t\t\tthis.schemaCommandService.setRowColoring(this.rowColoring);\n\t\t}\n\n\t\tif (simpleChanges.maxHeight && this.maxHeight) {\n\t\t\tthis.schemaCommandService.setHeight(this.maxHeight);\n\t\t}\n\n\t\tif (simpleChanges.virtualScroll !== undefined && simpleChanges.virtualScroll.currentValue !== undefined) {\n\t\t\tif (this.virtualScroll) {\n\t\t\t\tthis.structureCommandService.enableVerticalScroll();\n\t\t\t} else {\n\t\t\t\tthis.structureCommandService.disableVerticalScroll();\n\t\t\t}\n\t\t}\n\n\t\tif (simpleChanges.sorting !== undefined && simpleChanges.sorting.currentValue !== undefined) {\n\n\t\t\tlet sorting: SortingConfig;\n\n\t\t\tif (typeof this.sorting === 'boolean') {\n\t\t\t\tsorting = {\n\t\t\t\t\tenabled: this.sorting\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tsorting = this.sorting;\n\t\t\t}\n\n\t\t\tthis.structureCommandService.setSortingConfig(sorting);\n\t\t}\n\n\t\tif (simpleChanges.filtering !== undefined && simpleChanges.filtering.currentValue !== undefined) {\n\n\t\t\tlet filtering: FilterConfig;\n\n\t\t\tif (typeof this.filtering === 'boolean') {\n\t\t\t\tfiltering = {\n\t\t\t\t\tenabled: this.filtering\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tfiltering = this.filtering;\n\t\t\t}\n\n\t\t\tthis.structureCommandService.setFilterConfig(filtering);\n\t\t}\n\n\t\tif (simpleChanges.quickFilters !== undefined && simpleChanges.quickFilters.currentValue !== undefined) {\n\n\t\t\tlet quickFilters: QuickFiltersConfig;\n\n\t\t\tif (typeof this.quickFilters === 'boolean') {\n\t\t\t\tquickFilters = {\n\t\t\t\t\tenabled: this.quickFilters\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tquickFilters = this.quickFilters;\n\t\t\t}\n\n\t\t\tthis.structureCommandService.setQuickFiltersConfig(quickFilters);\n\t\t}\n\n\t\tif (simpleChanges.searching !== undefined && simpleChanges.searching.currentValue !== undefined) {\n\n\t\t\tlet searching: SearchConfig;\n\n\t\t\tif (typeof this.searching === 'boolean') {\n\t\t\t\tsearching = {\n\t\t\t\t\tenabled: this.searching\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tsearching = this.searching;\n\t\t\t}\n\n\t\t\tthis.structureCommandService.setSearchingConfig(searching);\n\t\t}\n\n\t\t/**\n\t\t * Setting source should be last step\n\t\t */\n\t\tif (simpleChanges.source) {\n\t\t\tthis.sourceCommandService.setOrigin(this.source);\n\t\t}\n\t}\n\n\tngOnInit() {\n\n\t\tthis.pagingEventService\n\t\t\t.onPageChange(this.structureId)\n\t\t\t.pipe(this.takeUntil())\n\t\t\t.subscribe((pageNumber: number) => {\n\t\t\t\tthis.pageChanged.emit(pageNumber);\n\t\t\t});\n\n\t\tthis.pagingEventService\n\t\t\t.onPageSizeChange(this.structureId)\n\t\t\t.pipe(this.takeUntil())\n\t\t\t.subscribe((pageSize: number) => {\n\t\t\t\tthis.pageSizeChanged.emit(pageSize);\n\t\t\t});\n\n\t\tthis.formationEventService\n\t\t\t.onItemSelected(this.structureId)\n\t\t\t.pipe(this.takeUntil())\n\t\t\t.subscribe((items: Array<any>) => {\n\t\t\t\tthis.itemsSelected.emit(items);\n\t\t\t});\n\n\t\tthis.compositionEventService\n\t\t\t.onColumnsChanged(this.compositionId)\n\t\t\t.pipe(\n\t\t\t\tskip(1), // TODO system should emit response that it is ready\n\t\t\t\tthis.takeUntil())\n\t\t\t.subscribe(() => {\n\t\t\t\tthis.columnsChanged.emit();\n\t\t\t});\n\n\n\t\tthis.compositionEventService\n\t\t\t.onContainerWidthChanged(this.compositionId)\n\t\t\t.pipe(\n\t\t\t\t// skip(1), // TODO system should emit response that it is ready\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((containerWidth: number) => {\n\t\t\t\tthis.containerWidthChanged.emit(containerWidth);\n\t\t\t});\n\n\t\tthis.sourceEventService\n\t\t\t.onSourceEdited(this.structureId)\n\t\t\t.pipe(\n\t\t\t\t// this.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((values: EditemItemValues) => {\n\t\t\t\tthis.sourceEdited.emit(values);\n\t\t\t});\n\n\t\tthis.structureCellEditStore\n\t\t\t.onValue()\n\t\t\t.pipe(this.takeUntil())\n\t\t\t.subscribe((state: StructureCellEditState) => {\n\n\t\t\t\tswitch (state) {\n\n\t\t\t\t\tcase StructureCellEditState.ENTER:\n\t\t\t\t\t\tthis.cellEditEntered.emit();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase StructureCellEditState.SUBMIT:\n\t\t\t\t\t\tthis.cellEditSubmitted.emit();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase StructureCellEditState.CANCEL:\n\t\t\t\t\t\tthis.cellEditCanceled.emit();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\tthis.structureSearchEventService\n\t\t\t.onSearchPhrase(this.structureId)\n\t\t\t.pipe(this.takeUntil())\n\t\t\t.subscribe((phrase: string) => {\n\t\t\t\tthis.searchPhraseChanged.emit(phrase);\n\t\t\t});\n\n\n\t}\n\n\tonPageChange(page: number): void {\n\t\tthis.pageChanged.emit(page);\n\t}\n\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class NextPageEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'NextPageEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class PrevPageEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'PrevPageEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class PageChangedEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'PageChangedEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class PagesizeChangedEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'PagesizeChangedEvent');\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { filter, map, switchMap, take } from 'rxjs/operators';\n\nimport { DomainEvent, DomainEventBus } from '@generic-ui/hermes';\n\nimport { PagingReadModelService } from './paging-read-model.service';\nimport { StructureId } from '../../domain/structure-id';\nimport { NextPageEvent } from '../../domain/paging/command/next-page/next-page.event';\nimport { PrevPageEvent } from '../../domain/paging/command/prev-page/prev-page.event';\nimport { PageChangedEvent } from '../../domain/paging/command/page/page-changed.event';\nimport { Paging } from '../../domain/paging/read/paging';\nimport { PagesizeChangedEvent } from '../../domain/paging/command/change-pagesize/pagesize-changed.event';\n\n\n@Injectable()\nexport class PagingEventService {\n\n\tconstructor(private readonly domainEventBus: DomainEventBus,\n\t\t\t\tprivate readonly pagingQueryService: PagingReadModelService) {\n\t}\n\n\tonPageChange(structureId: StructureId): Observable<number> {\n\n\t\treturn this.domainEventBus\n\t\t\t\t   .ofEvent(\n\t\t\t\t\t   NextPageEvent,\n\t\t\t\t\t   PrevPageEvent,\n\t\t\t\t\t   PageChangedEvent\n\t\t\t\t   )\n\t\t\t\t   .pipe(\n\t\t\t\t\t   filter((event: DomainEvent) => event.getAggregateId().toString() === structureId.toString()),\n\t\t\t\t\t   switchMap((event: DomainEvent) => {\n\n\t\t\t\t\t\t   return this.pagingQueryService\n\t\t\t\t\t\t\t\t\t  .onPaging(structureId)\n\t\t\t\t\t\t\t\t\t  .pipe(\n\t\t\t\t\t\t\t\t\t\t  map((paging: Paging) => paging.getPage()),\n\t\t\t\t\t\t\t\t\t\t  take(1)\n\t\t\t\t\t\t\t\t\t  );\n\t\t\t\t\t   })\n\t\t\t\t   );\n\t}\n\n\tonPageSizeChange(structureId: StructureId): Observable<number> {\n\n\t\treturn this.domainEventBus\n\t\t\t\t   .ofEvent(\n\t\t\t\t\t   PagesizeChangedEvent\n\t\t\t\t   )\n\t\t\t\t   .pipe(\n\t\t\t\t\t   filter((event: DomainEvent) => event.getAggregateId().toString() === structureId.toString()),\n\t\t\t\t\t   switchMap((event: DomainEvent) => {\n\n\t\t\t\t\t\t   return this.pagingQueryService\n\t\t\t\t\t\t\t\t\t  .onPaging(structureId)\n\t\t\t\t\t\t\t\t\t  .pipe(\n\t\t\t\t\t\t\t\t\t\t  map((paging: Paging) => paging.getPageSize()),\n\t\t\t\t\t\t\t\t\t\t  take(1)\n\t\t\t\t\t\t\t\t\t  );\n\t\t\t\t\t   })\n\t\t\t\t   );\n\t}\n\n}\n","export class EditemItemValues {\n\n\tconstructor(public readonly after: any,\n\t\t\t\tpublic readonly before: any) {\n\t}\n\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nimport { OriginItemEntity } from '../origin-item-entity';\n\n\nexport class StructureSourceItemEditedEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tprivate readonly beforeItem: OriginItemEntity,\n\t\t\t\tprivate readonly afterItem: OriginItemEntity) {\n\t\tsuper(aggregateId, 'StructureSourceItemEditedEvent');\n\t}\n\n\tgetBeforeItem(): OriginItemEntity {\n\t\treturn this.beforeItem;\n\t}\n\n\tgetAfterItem(): OriginItemEntity {\n\t\treturn this.afterItem;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\n\nimport { DomainEvent, DomainEventBus } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../domain/structure-id';\nimport { EditemItemValues } from './editem-item.values';\nimport { StructureSourceItemEditedEvent } from '../../../domain/source/command/origin/edit/structure.source-item-edited.event';\n\n\n@Injectable()\nexport class SourceEventService {\n\n\tconstructor(private readonly domainEventBus: DomainEventBus) {\n\t}\n\n\tonSourceEdited(structureId: StructureId): Observable<EditemItemValues> {\n\n\t\treturn this.domainEventBus\n\t\t\t\t   .ofEvent(\n\t\t\t\t\t   StructureSourceItemEditedEvent as any\n\t\t\t\t   )\n\t\t\t\t   .pipe(\n\t\t\t\t\t   filter((event: DomainEvent) => event.getAggregateId().toString() === structureId.toString()),\n\t\t\t\t\t   map((event: StructureSourceItemEditedEvent) => {\n\n\t\t\t\t\t\t   const afterItem = event.getAfterItem().getData(),\n\t\t\t\t\t\t\t   beforeItem = event.getBeforeItem().getData();\n\n\t\t\t\t\t\t   return new EditemItemValues(afterItem, beforeItem);\n\t\t\t\t\t   })\n\t\t\t\t   );\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class SelectedRowToggledEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'SelectedRowToggledEvent');\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { filter, map, switchMap, take } from 'rxjs/operators';\n\nimport { DomainEvent, DomainEventBus } from '@generic-ui/hermes';\n\nimport { StructureReadModelService } from '../structure/structure-read-model.service';\nimport { StructureId } from '../../domain/structure-id';\nimport { SelectedRowToggledEvent } from '../../domain/formation/command/toggle/selected-row-toggled.event';\nimport { Structure } from '../../domain/structure/read/structure';\nimport { ItemEntity } from '../../domain/source/item.entity';\n\n\n@Injectable()\nexport class FormationEventService {\n\n\tconstructor(private readonly domainEventBus: DomainEventBus,\n\t\t\t\tprivate readonly structureQueryService: StructureReadModelService) {\n\t}\n\n\tonItemSelected(structureId: StructureId): Observable<Array<any>> {\n\n\t\treturn this.domainEventBus\n\t\t\t\t   .ofEvent(\n\t\t\t\t\t   SelectedRowToggledEvent\n\t\t\t\t   )\n\t\t\t\t   .pipe(\n\t\t\t\t\t   filter((event: DomainEvent) => event.getAggregateId().toString() === structureId.toString()),\n\t\t\t\t\t   switchMap((event: DomainEvent) => {\n\n\t\t\t\t\t\t   return this.structureQueryService\n\t\t\t\t\t\t\t\t\t  .onStructure(structureId)\n\t\t\t\t\t\t\t\t\t  .pipe(\n\t\t\t\t\t\t\t\t\t\t  take(1),\n\t\t\t\t\t\t\t\t\t\t  map((str: Structure) => str.getSelectedEntities()),\n\t\t\t\t\t\t\t\t\t\t  map((entities: Array<ItemEntity>) => entities.map(ent => ent.getData()))\n\t\t\t\t\t\t\t\t\t  );\n\t\t\t\t\t   })\n\t\t\t\t   );\n\t}\n\n}\n","import { ColumnMenuConfig } from '../../../../ui-api/structure/column-menu-config';\n\nexport class StructureColumnMenuConfig {\n\n\tstatic default(): StructureColumnMenuConfig {\n\t\treturn new StructureColumnMenuConfig();\n\t}\n\n\tstatic fromConfig(config: ColumnMenuConfig): StructureColumnMenuConfig {\n\t\treturn new StructureColumnMenuConfig(\n\t\t\tconfig.enabled,\n\t\t\tconfig.sort,\n\t\t\tconfig.filter,\n\t\t\tconfig.columnsManager\n\t\t);\n\t}\n\n\tprivate static readonly MAIN = 'Menu';\n\n\tprivate static readonly FILTER = 'Filter';\n\n\tprivate static readonly COLUMNS = 'Columns';\n\n\tconstructor(private enabled: boolean = false,\n\t\t\t\tprivate sort: boolean = true,\n\t\t\t\tprivate filter: boolean = false,\n\t\t\t\tprivate columnsManager: boolean = false) {\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled &&\n\t\t\t(this.sort || this.filter || this.columnsManager);\n\t}\n\n\tisMainEnabled(): boolean {\n\t\treturn this.sort;\n\t}\n\n\tisSortingEnabled(): boolean {\n\t\treturn this.sort;\n\t}\n\n\tisFilteringEnabled(): boolean {\n\t\treturn this.filter;\n\t}\n\n\tisColumnManagerEnabled(): boolean {\n\t\treturn this.columnsManager;\n\t}\n\n\tgetMenus(): Array<string> {\n\n\t\tconst menus = [];\n\n\t\tif (this.isMainEnabled()) {\n\t\t\tmenus.push(this.getMainMenu());\n\t\t}\n\n\t\tif (this.isFilteringEnabled()) {\n\t\t\tmenus.push(this.getFilterMenu());\n\t\t}\n\n\t\tif (this.isColumnManagerEnabled()) {\n\t\t\tmenus.push(this.getColumnMenu());\n\t\t}\n\n\t\treturn menus;\n\t}\n\n\tgetActiveMenu(): string {\n\t\treturn this.getMenus()[0];\n\t}\n\n\tgetMainMenu(): string {\n\t\treturn StructureColumnMenuConfig.MAIN;\n\t}\n\n\tgetFilterMenu(): string {\n\t\treturn StructureColumnMenuConfig.FILTER;\n\t}\n\n\tgetColumnMenu(): string {\n\t\treturn StructureColumnMenuConfig.COLUMNS;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Archive } from '../../../../../../common/cdk/archive';\n\nimport { StructureColumnMenuConfig } from './structure.column-menu-config';\nimport { ColumnMenuConfig } from '../../../../ui-api/structure/column-menu-config';\n\n@Injectable()\nexport class StructureColumnMenuConfigArchive extends Archive<StructureColumnMenuConfig> {\n\n\tconstructor() {\n\t\tsuper(StructureColumnMenuConfig.default());\n\t}\n\n\tnextConfig(config: ColumnMenuConfig): void {\n\n\t\tconst menuConfig = StructureColumnMenuConfig.fromConfig(config);\n\n\t\tthis.next(menuConfig);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { Archive } from '../../../../../common/cdk/archive';\n\n\n@Injectable()\nexport class StructureRowSelectEnabledArchive extends Archive<boolean> {\n\n\tstatic readonly DEFAULT_ROW_SELECT = true;\n\n\tconstructor() {\n\t\tsuper(StructureRowSelectEnabledArchive.DEFAULT_ROW_SELECT);\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class StructureSearchPhraseSetDomainEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tprivate readonly phrase: string) {\n\t\tsuper(aggregateId, 'StructureSearchPhraseSetDomainEvent');\n\t}\n\n\tgetPhrase(): string {\n\t\treturn this.phrase;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\n\nimport { Reactive } from '../../../../../../../common/cdk/reactive';\nimport { StructureId } from '../../../../structure-id';\n\n\n@Injectable()\nexport class StructureSearchPhraseRepository extends Reactive {\n\n\tprivate phrase = new Map<string, string>();\n\n\tprivate phrase$ = new ReplaySubject<Map<string, string>>();\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tsetPhrase(phrase: string, structureId: StructureId): void {\n\t\tthis.phrase.set(structureId.toString(), phrase);\n\t\tthis.phrase$.next(this.phrase);\n\t}\n\n\tonPhrase(structureId: StructureId): Observable<string> {\n\n\t\treturn this.observePhrases(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   distinctUntilChanged()\n\t\t\t\t   );\n\t}\n\n\tprivate observePhrases(structureId: StructureId): Observable<string> {\n\t\treturn this.phrase$\n\t\t\t\t   .asObservable()\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((map: Map<string, string>) => {\n\t\t\t\t\t\t   return map.get(structureId.toString());\n\t\t\t\t\t   })\n\t\t\t\t   );\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { filter, switchMap, take } from 'rxjs/operators';\n\nimport { DomainEvent, DomainEventBus } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../domain/structure-id';\nimport { StructureSearchPhraseSetDomainEvent } from '../../../domain/structure/command/search/set-phrase/structure.search-phrase-set.domain-event';\nimport { StructureSearchPhraseRepository } from '../../../domain/structure/read/searching/phrase/structure.search-phrase.repository';\n\n\n@Injectable()\nexport class StructureSearchEventService {\n\n\tconstructor(private readonly domainEventBus: DomainEventBus,\n\t\t\t\tprivate readonly structureSearchPhraseRepository: StructureSearchPhraseRepository) {\n\t}\n\n\tonSearchPhrase(structureId: StructureId): Observable<string> {\n\n\t\treturn this.domainEventBus\n\t\t\t\t   .ofEvent(\n\t\t\t\t\t   StructureSearchPhraseSetDomainEvent\n\t\t\t\t   )\n\t\t\t\t   .pipe(\n\t\t\t\t\t   filter((event: DomainEvent) => event.getAggregateId().toString() === structureId.toString()),\n\t\t\t\t\t   switchMap((event: DomainEvent) => {\n\n\t\t\t\t\t\t   return this.structureSearchPhraseRepository\n\t\t\t\t\t\t\t\t\t  .onPhrase(structureId)\n\t\t\t\t\t\t\t\t\t  .pipe(\n\t\t\t\t\t\t\t\t\t\t  take(1)\n\t\t\t\t\t\t\t\t\t  );\n\t\t\t\t\t   })\n\t\t\t\t   );\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\n\n@Injectable()\nexport class StructureCellEditCloseAllService {\n\n\tprivate readonly closeAll$ = new Subject<void>();\n\n\tcloseAll(): void {\n\t\tthis.closeAll$.next();\n\t}\n\n\tonCloseAll(): Observable<void> {\n\t\treturn this.closeAll$.asObservable();\n\t}\n}\n","import {\n\tAfterViewInit,\n\tChangeDetectionStrategy,\n\tChangeDetectorRef,\n\tComponent,\n\tElementRef,\n\tOnChanges,\n\tOnInit,\n\tRenderer2,\n\tSimpleChanges,\n\tViewEncapsulation\n} from '@angular/core';\nimport { timer } from 'rxjs';\n\nimport { StructureDefinition } from './structure-definition';\nimport { StructureIdGenerator } from './structure-id.generator';\nimport { StructureId } from '../domain/structure-id';\nimport { CompositionId } from '../../composition/domain/composition-id';\nimport { localProviders } from './local/local-providers';\nimport { SchemaCssClassManager } from './schema/schema-css-class.manager';\nimport { StructureCellEditArchive } from './edit/structure.cell-edit.archive';\nimport { StructureCellEditStore } from './edit/structure.cell-edit.store';\nimport { StructureEditModeArchive } from './edit/structure.edit-mode.archive';\nimport { StructureInfoPanelEnabledArchive } from './panel/info/structure.info-panel-enabled.archive';\nimport { StructureAggregationArchive } from './panel/aggregation/structure.aggregation.archive';\nimport { StructureAggregationConfigService } from './panel/aggregation/structure.aggregation-config.service';\nimport { structureComponentToken } from './structure-component-token';\nimport { StructureGateway } from './gateway/structure.gateway';\nimport { SchemaColumnHeader } from '../domain/schema/read/schema-column-header';\nimport { Structure } from '../domain/structure/read/structure';\nimport { PagingCommandService } from '../ui-api/paging/paging-command.service';\nimport { PagingEventService } from '../ui-api/paging/paging-event.service';\nimport { SourceCommandService } from '../ui-api/source/source-command.service';\nimport { SourceEventService } from '../ui-api/source/event/source-event.service';\nimport { SchemaCommandService } from '../ui-api/schema/schema-command.service';\nimport { CompositionCommandService } from '../../composition/ui-api/composition.command-service';\nimport { CompositionEventService } from '../../composition/ui-api/composition.event-service';\nimport { FormationEventService } from '../ui-api/formation/formation-event.service';\nimport { StructureCommandService } from '../ui-api/structure/structure-command.service';\nimport { StructureReadModelService } from '../ui-api/structure/structure-read-model.service';\nimport { CompositionReadModelService } from '../../composition/ui-api/composition-read-model.service';\nimport { SchemaReadModelService } from '../ui-api/schema/schema-read-model.service';\nimport { StructureColumnMenuConfigArchive } from './header/menu/config/structure.column-menu-config.archive';\nimport { StructurePagingDisplayModeArchive } from './paging/mode/structure-paging.display-mode.archive';\nimport { StructureRowSelectEnabledArchive } from './content/row/structure.row-select-enabled.archive';\nimport { StructureSearchEventService } from '../ui-api/structure/search/structure-search-event.service';\nimport { StructureCellEditCloseAllService } from './edit/structure.cell-edit-close-all.service';\n\n/** @internal */\nexport function structureIdFactory(generator: StructureIdGenerator): StructureId {\n\treturn new StructureId('gui-' + generator.generateId());\n}\n\n/** @internal */\nexport function compositionIdFactory(generator: StructureIdGenerator): CompositionId {\n\treturn new CompositionId('gui-' + generator.generateId());\n}\n\n/** @internal */\nexport const structureComponentSelfProviders = [\n\t{\n\t\tprovide: StructureId,\n\t\tuseFactory: structureIdFactory,\n\t\tdeps: [\n\t\t\tStructureIdGenerator\n\t\t]\n\t},\n\t{\n\t\tprovide: CompositionId,\n\t\tuseFactory: compositionIdFactory,\n\t\tdeps: [\n\t\t\tStructureIdGenerator\n\t\t]\n\t},\n\t...localProviders,\n\n\tSchemaCssClassManager,\n\tStructureCellEditArchive,\n\tStructureCellEditCloseAllService,\n\tStructureCellEditStore,\n\tStructureEditModeArchive,\n\tStructureInfoPanelEnabledArchive,\n\tStructureAggregationArchive,\n\tStructureAggregationConfigService,\n\tStructureColumnMenuConfigArchive,\n\tStructurePagingDisplayModeArchive,\n\tStructureRowSelectEnabledArchive\n];\n\n/** @internal */\n@Component({\n\tselector: 'gui-structure',\n\ttemplateUrl: './structure.component.html',\n\tstyleUrls: [\n\t\t'./style/styles.ngx.scss',\n\t\t'./style/structure.ngx.scss',\n\t\t'./style/structure-column-manager.ngx.scss',\n\t\t'./style/structure-aggregation.ngx.scss',\n\t\t'./style/structure-info-modal.ngx.scss',\n\t\t'./style/structure-paging.ngx.scss',\n\t\t'./style/structure-responsive.ngx.scss',\n\t\t'./style/structure-flex.ngx.scss',\n\t\t'../../composition/ui/composition.ngx.scss',\n\t\t'./style/themes/fabric.structure.ngx.scss',\n\t\t'./style/themes/material.structure.ngx.scss',\n\t\t'./style/themes/dark.structure.ngx.scss',\n\t\t'./style/themes/light.structure.ngx.scss',\n\t\t'./style/themes/generic.structure.ngx.scss'\n\t],\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None,\n\thost: {\n\t\t'[class]': `\"gui-structure\"`,\n\t\t// '[style.min-height.px]': 'structureHeight',\n\t\t'[class.gui-structure-border]': 'isBorderEnabled()',\n\t\t'[id]': 'structureId.toString()'\n\t},\n\tproviders: [\n\t\t...structureComponentSelfProviders,\n\t\t{\n\t\t\tprovide: structureComponentToken,\n\t\t\tuseExisting: StructureComponent\n\t\t}\n\t]\n})\nexport class StructureComponent extends StructureGateway implements OnChanges, OnInit, AfterViewInit {\n\n\tloaderEnabled: boolean = false;\n\n\tcircleLoaderEnabled: boolean = true;\n\n\tinitialLoaderAnimation: boolean = false;\n\n\tstructureHeight: number;\n\n\tprivate columnHeader: SchemaColumnHeader;\n\n\tprivate structure: Structure;\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tcompositionId: CompositionId,\n\t\t\t\tpagingCommandService: PagingCommandService,\n\t\t\t\tpagingEventService: PagingEventService,\n\t\t\t\tsourceCommandService: SourceCommandService,\n\t\t\t\tsourceEventService: SourceEventService,\n\t\t\t\tschemaCommandService: SchemaCommandService,\n\t\t\t\tcompositionCommandService: CompositionCommandService,\n\t\t\t\tcompositionEventService: CompositionEventService,\n\t\t\t\tformationEventService: FormationEventService,\n\t\t\t\tstructureCommandService: StructureCommandService,\n\t\t\t\tstructureEditModeArchive: StructureEditModeArchive,\n\t\t\t\tstructureCellEditArchive: StructureCellEditArchive,\n\t\t\t\tstructureInfoPanelEnabledArchive: StructureInfoPanelEnabledArchive,\n\t\t\t\tstructureAggregationConfigService: StructureAggregationConfigService,\n\t\t\t\tstructureCellEditStore: StructureCellEditStore,\n\t\t\t\tstructureColumnMenuConfigArchive: StructureColumnMenuConfigArchive,\n\t\t\t\tstructurePagingDisplayModeArchive: StructurePagingDisplayModeArchive,\n\t\t\t\tstructureRowSelectEnabledArchive: StructureRowSelectEnabledArchive,\n\t\t\t\tstructureSearchEventService: StructureSearchEventService,\n\t\t\t\tprivate elementRef: ElementRef,\n\t\t\t\tprivate changeDetectorRef: ChangeDetectorRef,\n\t\t\t\tprivate renderer: Renderer2,\n\t\t\t\tprivate structureDefinition: StructureDefinition,\n\t\t\t\tprivate structureQueryService: StructureReadModelService,\n\t\t\t\tprivate compositionQueryService: CompositionReadModelService,\n\t\t\t\tprivate schemaReadModelService: SchemaReadModelService,\n\t\t\t\tprivate schemaStylesManager: SchemaCssClassManager) {\n\n\t\tsuper(\n\t\t\tstructureId,\n\t\t\tcompositionId,\n\t\t\tstructureCommandService,\n\t\t\tpagingCommandService,\n\t\t\tpagingEventService,\n\t\t\tsourceCommandService,\n\t\t\tsourceEventService,\n\t\t\tschemaCommandService,\n\t\t\tcompositionCommandService,\n\t\t\tcompositionEventService,\n\t\t\tformationEventService,\n\t\t\tstructureEditModeArchive,\n\t\t\tstructureCellEditArchive,\n\t\t\tstructureInfoPanelEnabledArchive,\n\t\t\tstructureAggregationConfigService,\n\t\t\tstructureCellEditStore,\n\t\t\tstructureColumnMenuConfigArchive,\n\t\t\tstructurePagingDisplayModeArchive,\n\t\t\tstructureRowSelectEnabledArchive,\n\t\t\tstructureSearchEventService\n\t\t);\n\n\t\tthis.structureCommandService.createStructure();\n\t\tcompositionCommandService.createComposition();\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tsuper.ngOnChanges(changes);\n\t}\n\n\tngOnInit() {\n\t\tsuper.ngOnInit();\n\n\t\tthis.schemaReadModelService\n\t\t\t.onHeight()\n\t\t\t.pipe(this.takeUntil())\n\t\t\t.subscribe((height: number) => {\n\t\t\t\tthis.structureHeight = height;\n\t\t\t});\n\n\t\tthis.schemaReadModelService\n\t\t\t.onColumnHeader()\n\t\t\t.pipe(this.takeUntil())\n\t\t\t.subscribe((columnHeader: SchemaColumnHeader) => {\n\t\t\t\tthis.columnHeader = columnHeader;\n\t\t\t});\n\n\t\tthis.structureQueryService\n\t\t\t.onStructure()\n\t\t\t.pipe(this.takeUntil())\n\t\t\t.subscribe((structure: Structure) => {\n\t\t\t\tthis.structure = structure;\n\n\t\t\t\tthis.loaderEnabled = structure.getSource().isLoading();\n\n\t\t\t\tthis.circleLoaderEnabled = structure.isLoaderVisible();\n\n\t\t\t\tif (this.loaderEnabled && !this.initialLoaderAnimation) {\n\t\t\t\t\tthis.initialLoaderAnimation = true;\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tngAfterViewInit() {\n\t\tlet width = this.elementRef.nativeElement.offsetWidth;\n\n\t\tif (width > 0) {\n\t\t\tthis.compositionCommandService.setContainerWidth(width);\n\t\t} else {\n\n\t\t\t/**\n\t\t\t * When gui-grid is in dynamic container which is created later then grid.\n\t\t\t */\n\t\t\ttimer(0)\n\t\t\t\t.pipe(\n\t\t\t\t\tthis.takeUntil()\n\t\t\t\t)\n\t\t\t\t.subscribe(() => {\n\n\t\t\t\t\twidth = this.elementRef.nativeElement.offsetWidth;\n\n\t\t\t\t\tif (width > 0) {\n\t\t\t\t\t\tthis.compositionCommandService.setContainerWidth(width);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\tthis.schemaStylesManager\n\t\t\t.init(this.elementRef, this.structureId);\n\n\t\tthis.compositionQueryService\n\t\t\t.onWidth()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((width: number) => {\n\t\t\t\tthis.renderer.setStyle(this.elementRef.nativeElement, 'width', width + 'px');\n\t\t\t});\n\t}\n\n\tisBorderEnabled(): boolean {\n\t\treturn this.structureDefinition.isBorderEnabled();\n\t}\n\n\tgetStructureId(): StructureId {\n\t\treturn this.structureId;\n\t}\n\n}\n","import { ChangeDetectorRef, Component, ElementRef, Inject, OnInit, ViewChild } from '@angular/core';\n\nimport { StructureCommandService } from '../../../ui-api/structure/structure-command.service';\nimport { CellTemplateWithContext } from '../../../../composition/domain/read/definition/cell-template-with-context';\nimport { SmartComponent } from '../../../../../common/cdk/smart-component';\nimport { CompositionReadModelService } from '../../../../composition/ui-api/composition-read-model.service';\n\nimport { StructureColumnMenuConfigArchive } from './config/structure.column-menu-config.archive';\nimport { StructureColumnMenuConfig } from './config/structure.column-menu-config';\n\n\n@Component({\n\ttemplate: `\n\t\t<div *ngIf=\"isEnabled()\"\n\t\t\t class=\"gui-header-menu-tab\">\n\n\t\t\t<gui-tab [menu]=\"config.getMenus()\" [active]=\"config.getActiveMenu()\">\n\n\t\t\t\t<ng-container *ngIf=\"config.isMainEnabled()\">\n\n\t\t\t\t\t<gui-tab-item class=\"gui-tab-item-dropdown\" [tab]=\"config.getMainMenu()\">\n\n\t\t\t\t\t\t<gui-structure-column-config-sort *ngIf=\"column.isSortEnabled()\"\n\t\t\t\t\t\t\t\t[column]=\"column\">\n\t\t\t\t\t\t</gui-structure-column-config-sort>\n\n\t\t\t\t\t\t<gui-structure-column-config-column-hide\n\t\t\t\t\t\t\t\t[column]=\"column\">\n\t\t\t\t\t\t</gui-structure-column-config-column-hide>\n\n\t\t\t\t\t\t<gui-structure-column-config-column-move\n\t\t\t\t\t\t\t\t[column]=\"column\">\n\t\t\t\t\t\t</gui-structure-column-config-column-move>\n\n\t\t\t\t\t</gui-tab-item>\n\n\t\t\t\t</ng-container>\n\n\t\t\t\t<ng-container *ngIf=\"config.isFilteringEnabled()\">\n\n\t\t\t\t\t<gui-tab-item [tab]=\"config.getFilterMenu()\">\n\t\t\t\t\t\t<div class=\"gui-header-menu-item\">{{config.getFilterMenu()}}</div>\n\t\t\t\t\t</gui-tab-item>\n\n\t\t\t\t</ng-container>\n\n\t\t\t\t<ng-container *ngIf=\"config.isColumnManagerEnabled()\">\n\n\t\t\t\t\t<gui-tab-item [tab]=\"config.getColumnMenu()\">\n\n\t\t\t\t\t\t<gui-structure-menu-column-manager>\n\t\t\t\t\t\t</gui-structure-menu-column-manager>\n\n\t\t\t\t\t</gui-tab-item>\n\n\t\t\t\t</ng-container>\n\n\t\t\t</gui-tab>\n\t\t</div>\n\t`\n})\nexport class StructureColumnConfigComponent extends SmartComponent implements OnInit {\n\n\t@ViewChild('headerSortMenu', { static: false })\n\theaderSortMenu: ElementRef;\n\n\tconfig: StructureColumnMenuConfig;\n\n\tconstructor(private changeDetectorRef: ChangeDetectorRef,\n\t\t\t\tprivate structureCommandService: StructureCommandService,\n\t\t\t\tprivate compositionReadModelService: CompositionReadModelService,\n\t\t\t\tprivate structureColumnMenuConfigArchive: StructureColumnMenuConfigArchive,\n\t\t\t\t@Inject('column') public column: CellTemplateWithContext) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\n\t\tthis.structureColumnMenuConfigArchive\n\t\t\t.onValue()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((config: StructureColumnMenuConfig) => {\n\t\t\t\tthis.config = config;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.config && this.config.isEnabled();\n\t}\n}\n","import { ElementRef, Injectable, Injector } from '@angular/core';\n\nimport { FabricInlineDialogService, InlineDialogPlacement } from '@generic-ui/fabric';\n\nimport { StructureColumnConfigComponent } from './structure.column-config.component';\nimport { CellTemplateWithContext } from '../../../../composition/domain/read/definition/cell-template-with-context';\nimport { SchemaTheme } from '../../../domain/schema/schema-theme';\nimport { SchemaReadModelService } from '../../../ui-api/schema/schema-read-model.service';\nimport { Reactive } from '../../../../../common/cdk/reactive';\nimport { StructureThemeConverter } from '../../schema/structure.theme.converter';\n\n@Injectable()\nexport class StructureColumnConfigService extends Reactive {\n\n\tconstructor(private readonly injector: Injector,\n\t\t\t\tprivate readonly schemaReadModelService: SchemaReadModelService,\n\t\t\t\tprivate readonly structureThemeConverter: StructureThemeConverter,\n\t\t\t\tprivate readonly inlineDialogService: FabricInlineDialogService) {\n\t\tsuper();\n\t}\n\n\topen(elementRef: ElementRef, column: CellTemplateWithContext): void {\n\n\t\tconst injector = Injector.create({\n\t\t\tproviders: [{\n\t\t\t\tprovide: 'column', // TODO\n\t\t\t\tuseValue: column\n\t\t\t}],\n\t\t\tparent: this.injector\n\t\t});\n\n\t\tthis.schemaReadModelService\n\t\t\t.onSingleTheme()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((theme: SchemaTheme) => {\n\t\t\t\tthis.inlineDialogService.open(elementRef, StructureColumnConfigComponent, {\n\t\t\t\t\tinjector: injector,\n\t\t\t\t\tplacement: InlineDialogPlacement.Top,\n\t\t\t\t\toffset: -2,\n\t\t\t\t\ttheme: this.structureThemeConverter.convertTheme(theme)\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tclose(): void {\n\t\tthis.inlineDialogService.close();\n\t}\n\n\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, Injector, Input, OnInit, ViewEncapsulation } from '@angular/core';\n\nimport { CellTemplateWithContext } from '../../../../composition/domain/read/definition/cell-template-with-context';\nimport { StructureCommandService } from '../../../ui-api/structure/structure-command.service';\nimport { StructureColumnConfigService } from '../menu/structure.column-config.service';\nimport { SortOrder } from '../../../../composition/domain/command/column/sort/sort-order';\nimport { SmartComponent } from '../../../../../common/cdk/smart-component';\n\n\n@Component({\n\tselector: 'gui-structure-header-columns',\n\ttemplateUrl: './structure-header-columns.component.html',\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None,\n\tproviders: [\n\t\tStructureColumnConfigService\n\t]\n})\nexport class StructureHeaderColumnsComponent extends SmartComponent implements OnInit {\n\n\t@Input()\n\tcolumns: Array<CellTemplateWithContext>;\n\n\tglobalSearching = false;\n\n\tconstructor(private elementRef: ElementRef,\n\t\t\t\tprivate injector: Injector,\n\t\t\t\tprivate changeDetectorRef: ChangeDetectorRef,\n\t\t\t\tprivate structureCommandService: StructureCommandService) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\t\t// \tthis.structureSearchReadModelRepository\n\t\t// \t\t.onSearchEnabled()\n\t\t// \t\t.pipe(\n\t\t// \t\t\tthis.takeUntil()\n\t\t// \t\t)\n\t\t// \t\t.subscribe((searching: boolean) => {\n\t\t// \t\t\tthis.globalSearching = searching;\n\t\t// \t\t\tthis.changeDetectorRef.detectChanges();\n\t\t// \t\t});\n\t}\n\n\ttoggleSort(column: CellTemplateWithContext): void {\n\n\t\tif (column.isSortEnabled()) {\n\t\t\tthis.structureCommandService.toggleSort(column.getFieldId());\n\t\t}\n\t}\n\n\tisSortAsc(column: CellTemplateWithContext): boolean {\n\t\treturn column.getSortStatus() === SortOrder.ASC;\n\t}\n\n\tisSortDesc(column: CellTemplateWithContext): boolean {\n\t\treturn column.getSortStatus() === SortOrder.DESC;\n\t}\n\n\tisGlobalSortEnabled(): boolean {\n\t\treturn this.globalSearching;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\n\nimport { StructureId } from '../../../structure-id';\n\n\n@Injectable()\nexport class StructureFilterRepository {\n\n\tprivate enabled = new Map<string, boolean>();\n\n\tprivate enabled$ = new ReplaySubject<Map<string, boolean>>();\n\n\tconstructor() {\n\t}\n\n\tsetEnabled(enabled: boolean, structureId: StructureId): void {\n\t\tthis.enabled.set(structureId.toString(), enabled);\n\t\tthis.enabled$.next(this.enabled);\n\t}\n\n\tselectFilterEnabled(structureId: StructureId): Observable<boolean> {\n\n\t\treturn this.enabled$\n\t\t\t\t   .asObservable()\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((map: Map<string, boolean>) => {\n\t\t\t\t\t\t   return map.get(structureId.toString());\n\t\t\t\t\t   }),\n\t\t\t\t\t   distinctUntilChanged()\n\t\t\t\t   );\n\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\nimport { StructureId } from '../../../structure-id';\n\n\n@Injectable()\nexport class StructureQuickFilterRepository {\n\n\tprivate enabled = new Map<string, boolean>();\n\n\tprivate enabled$ = new ReplaySubject<Map<string, boolean>>();\n\n\tconstructor() {\n\t}\n\n\tsetEnabled(enabled: boolean, structureId: StructureId): void {\n\t\tthis.enabled.set(structureId.toString(), enabled);\n\t\tthis.enabled$.next(this.enabled);\n\t}\n\n\tselectQuickFilterEnabled(structureId: StructureId): Observable<boolean> {\n\n\t\treturn this.enabled$\n\t\t\t\t   .asObservable()\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((map: Map<string, boolean>) => {\n\t\t\t\t\t\t   return map.get(structureId.toString());\n\t\t\t\t\t   }),\n\t\t\t\t\t   distinctUntilChanged()\n\t\t\t\t   );\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { StructureFilterRepository } from '../../../domain/structure/read/filter/structure.filter.repository';\nimport { StructureQuickFilterRepository } from '../../../domain/structure/read/filter/structure.quick-filter.repository';\nimport { StructureId } from '../../../domain/structure-id';\n\n\n@Injectable()\nexport class StructureFilterReadModelRepository {\n\n\tconstructor(private structureFilterRepository: StructureFilterRepository,\n\t\t\t\tprivate structureQuickFilterRepository: StructureQuickFilterRepository) {\n\t}\n\n\tonFilteringEnabled(structureId: StructureId): Observable<boolean> {\n\t\treturn this.structureFilterRepository.selectFilterEnabled(structureId);\n\t}\n\n\tonQuickFiltersEnabled(structureId: StructureId): Observable<boolean> {\n\t\treturn this.structureQuickFilterRepository.selectQuickFilterEnabled(structureId);\n\t}\n\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, Output, ViewEncapsulation } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\n\nimport { StructureFilterCommandService } from '../../../ui-api/structure/filter/structure.filter.command.service';\nimport { StructureId } from '../../../domain/structure-id';\nimport { CellTemplateWithContext } from '../../../../composition/domain/read/definition/cell-template-with-context';\n\n\n@Component({\n\tselector: 'gui-structure-header-filters',\n\ttemplate: `\n\n\t\t<ng-container *ngIf=\"!filterMode\">\n\n\t\t\t<div *ngFor=\"let cell of columns\"\n\t\t\t\t [style.width.px]=\"cell.width\"\n\t\t\t\t class=\"gui-header-cell\">\n\n\t\t\t\t<!--\t\t\t\t<gui-structure-header-filter [column]=\"cell\">-->\n\t\t\t\t<!--\t\t\t\t</gui-structure-header-filter>-->\n\n\t\t\t\t<button (click)=\"turnOnFilterMode()\">Add Filter</button>\n\n\t\t\t</div>\n\n\t\t</ng-container>\n\n\t\t<ng-container *ngIf=\"filterMode\">\n\n\t\t\t<gui-select [options]=\"['has value', 'is the same as', 'starts with', 'ends with']\" [selected]=\"'has value'\">\n\n\t\t\t</gui-select>\n\n\t\t\t<form [formGroup]=\"filterForm\">\n\t\t\t\t<input type=\"text\" [formControlName]=\"filterFieldName\" gui-input/>\n\t\t\t</form>\n\n\t\t\t<button gui-button (click)=\"clearFilters()\">Clear All</button>\n\t\t\t<button gui-button (click)=\"turnOffFilterMode()\">Close</button>\n\n\t\t</ng-container>\n\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class StructureHeaderFiltersComponent {\n\n\t@Input()\n\tcolumns: Array<CellTemplateWithContext>;\n\n\t@Output()\n\tclosed = new EventEmitter<void>();\n\n\treadonly filterFieldName = 'phrase';\n\n\tfilterForm: FormGroup;\n\n\tfilterMode: boolean = false;\n\n\tconstructor(private structureFilterCommandService: StructureFilterCommandService,\n\t\t\t\tprivate formBuilder: FormBuilder,\n\t\t\t\tprivate cd: ChangeDetectorRef,\n\t\t\t\tprivate structureId: StructureId) {\n\t\tthis.filterForm = this.formBuilder.group({\n\t\t\t[this.filterFieldName]: ['']\n\t\t});\n\n\t}\n\n\tngOnInit() {\n\t\tthis.filterForm\n\t\t\t.valueChanges\n\t\t\t// .pipe(\n\t\t\t// debounceTime(500)\n\t\t\t// )\n\t\t\t.subscribe((f) => {\n\t\t\t\tthis.filter(f[this.filterFieldName]);\n\t\t\t});\n\t}\n\n\tfilter(phrase: string): void {\n\n\t\tif (phrase === undefined || phrase === null) {\n\t\t\tphrase = '';\n\t\t}\n\n\t\tthis.structureFilterCommandService.addFilter(this.columns[0].getFieldId(), '1', phrase, this.structureId);\n\t}\n\n\tclearFilters(): void {\n\t\tthis.filterForm.reset();\n\t}\n\n\tturnOnFilterMode(): void {\n\t\tthis.filterMode = true;\n\t\tthis.cd.detectChanges();\n\t}\n\n\tturnOffFilterMode(): void {\n\t\tthis.filterMode = false;\n\t\tthis.cd.detectChanges();\n\t}\n\n}\n","import {\n\tAfterViewInit,\n\tChangeDetectionStrategy,\n\tChangeDetectorRef,\n\tComponent,\n\tElementRef,\n\tOnInit,\n\tRenderer2,\n\tViewChild,\n\tViewEncapsulation\n} from '@angular/core';\n\nimport { DomainEventBus } from '@generic-ui/hermes';\n\nimport { SmartComponent } from '../../../../common/cdk/smart-component';\n\nimport { StructureHeaderColumnsComponent } from './columns/structure-header-columns.component';\nimport { CellTemplateWithContext } from '../../../composition/domain/read/definition/cell-template-with-context';\nimport { StructureId } from '../../domain/structure-id';\nimport { StructureFilterReadModelRepository } from '../../ui-api/structure/filter/structure.filter.read-model.repository';\nimport { CompositionReadModelService } from '../../../composition/ui-api/composition-read-model.service';\nimport { StructureHeaderFiltersComponent } from './filters/structure-header-filters.component';\nimport { StructureReadModelService } from '../../ui-api/structure/structure-read-model.service';\n\n\n@Component({\n\tselector: 'gui-structure-header',\n\ttemplateUrl: './structure-header.component.html',\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class StructureHeaderComponent extends SmartComponent implements OnInit, AfterViewInit {\n\n\t@ViewChild(StructureHeaderColumnsComponent, { read: ElementRef, static: true })\n\tcontainerRef: ElementRef;\n\n\t@ViewChild(StructureHeaderFiltersComponent, { read: ElementRef, static: true })\n\tfiltersRef: ElementRef;\n\n\theaderColumns: Array<CellTemplateWithContext> = [];\n\n\tfilterRowEnabled: boolean = false;\n\n\tconstructor(private readonly changeDetectorRef: ChangeDetectorRef,\n\t\t\t\tprivate readonly renderer: Renderer2,\n\t\t\t\tprivate readonly eventBus: DomainEventBus,\n\t\t\t\tprivate readonly structureId: StructureId,\n\t\t\t\tprivate readonly structureFilterReadModelRepository: StructureFilterReadModelRepository,\n\t\t\t\tprivate readonly structureReadModelService: StructureReadModelService,\n\t\t\t\tprivate readonly compositionQueryService: CompositionReadModelService) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\n\t\tthis.compositionQueryService\n\t\t\t.onHeaderColumns()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((columns: Array<CellTemplateWithContext>) => {\n\t\t\t\tthis.headerColumns = columns;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\t\tthis.compositionQueryService\n\t\t\t.onContainerWidth()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((width: number) => {\n\t\t\t\tthis.renderer.setStyle(this.containerRef.nativeElement, 'width', width + 'px');\n\t\t\t});\n\n\t\tthis.structureFilterReadModelRepository\n\t\t\t.onFilteringEnabled(this.structureId)\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((enabled: boolean) => {\n\n\t\t\t\tthis.filterRowEnabled = enabled;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.structureReadModelService\n\t\t\t.onRowHeight()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((rowHeight: number) => {\n\n\t\t\t\tconst headerHeight = +(rowHeight) + 2;\n\n\t\t\t\t// if (this.containerRef) {\n\t\t\t\t// \tthis.renderer.setStyle(this.containerRef.nativeElement, 'height', headerHeight + 'px');\n\t\t\t\t// }\n\n\t\t\t\tif (this.filtersRef) {\n\t\t\t\t\tthis.renderer.setStyle(this.filtersRef.nativeElement, 'height', headerHeight + 'px');\n\t\t\t\t}\n\t\t\t});\n\t}\n\n}\n","import { ChangeDetectionStrategy, Component, Input, OnInit, ViewEncapsulation } from '@angular/core';\n\nimport { SmartComponent } from '../../../../../common/cdk/smart-component';\n\nimport { CellTemplateWithContext } from '../../../../composition/domain/read/definition/cell-template-with-context';\nimport { ChangedValueEmitter } from '../../../../composition/domain/read/edit/changed-value.emitter';\nimport { StructureFilterCommandService } from '../../../ui-api/structure/filter/structure.filter.command.service';\nimport { StructureId } from '../../../domain/structure-id';\n\n\n@Component({\n\tselector: 'gui-structure-header-filter',\n\ttemplate: `\n\n\t\t<!--\t\t<ng-container-->\n\t\t<!--\t\t\t\t*ngTemplateOutlet=\"column.editTemplate; context: editContext\">-->\n\t\t<!--\t\t</ng-container>-->\n\n\t\t<button gui-button [primary]=\"true\">Add Filter</button>\n\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class StructureHeaderFilterComponent extends SmartComponent implements OnInit {\n\n\t@Input()\n\tcolumn: CellTemplateWithContext;\n\n\tsub = new ChangedValueEmitter();\n\n\teditContext: any;\n\n\tconstructor(private structureFilterCommandService: StructureFilterCommandService,\n\t\t\t\tprivate structureId: StructureId) {\n\t\tsuper();\n\n\t\tthis.editContext = {\n\t\t\tchanges: this.sub\n\t\t};\n\t}\n\n\tngOnInit() {\n\t\tthis.sub\n\t\t\t.on()\n\t\t\t.subscribe((phrase: string) => this.filter(phrase));\n\t}\n\n\tfilter(phrase: string): void {\n\t\tthis.structureFilterCommandService.addFilter(this.column.getFieldId(), '1', phrase, this.structureId);\n\t}\n\n}\n","import {\n\tChangeDetectionStrategy,\n\tChangeDetectorRef,\n\tComponent,\n\tElementRef,\n\tInject,\n\tInput,\n\tOnInit,\n\tPLATFORM_ID,\n\tRenderer2,\n\tViewEncapsulation\n} from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { combineLatest } from 'rxjs';\n\nimport { SmartComponent } from '../../../../common/cdk/smart-component';\n\nimport { CellTemplateWithAccessor } from '../../../composition/domain/read/definition/cell-template-with-accessor';\nimport { FormationCommandService } from '../../ui-api/formation/formation-command.service';\nimport { StructureCellEditArchive } from '../edit/structure.cell-edit.archive';\nimport { StructureEditModeArchive } from '../edit/structure.edit-mode.archive';\nimport { FormationReadModelService } from '../../ui-api/formation/formation-read-model.service';\nimport { SelectedRowsList } from '../../domain/formation/read/selected-rows/selected-rows-list';\nimport { ItemEntity } from '../../domain/source/item.entity';\nimport { VerticalFormationRepository } from '../../domain/structure/read/vertical-formation/vertical-formation.repository';\nimport { StructureReadModelService } from '../../ui-api/structure/structure-read-model.service';\nimport { StructureRowSelectEnabledArchive } from './row/structure.row-select-enabled.archive';\nimport { StructureId } from '../../domain/structure-id';\nimport { StructureSearchPhraseRepository } from '../../domain/structure/read/searching/phrase/structure.search-phrase.repository';\nimport { StructureSearchHighlightArchive } from '../../domain/structure/read/searching/highlight/structure.search-highlight.archive';\n\n\n@Component({\n\tselector: 'gui-structure-content',\n\ttemplateUrl: `structure-content.component.html`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class StructureContentComponent extends SmartComponent implements OnInit {\n\n\t@Input()\n\tsource: Array<ItemEntity>;\n\n\t@Input()\n\tcolumns: Array<CellTemplateWithAccessor>;\n\n\teditMode = false;\n\n\tcellEditing = false;\n\n\trowHeight: number;\n\n\tsearchPhrase: string = '';\n\n\thighlighting: boolean = true;\n\n\tphrase: boolean = true;\n\n\trowSelecting = StructureRowSelectEnabledArchive.DEFAULT_ROW_SELECT;\n\n\trowDetailOpened = 4;\n\n\tconstructor(@Inject(PLATFORM_ID) private platformId: any,\n\t\t\t\tprivate renderer: Renderer2,\n\t\t\t\tprivate elementRef: ElementRef,\n\t\t\t\tprivate changeDetectorRef: ChangeDetectorRef,\n\t\t\t\tprivate formationCommandService: FormationCommandService,\n\t\t\t\tprivate structureCellEditArchive: StructureCellEditArchive,\n\t\t\t\tprivate structureEditModeArchive: StructureEditModeArchive,\n\t\t\t\tprivate formationQueryService: FormationReadModelService,\n\t\t\t\tprivate structureReadModelService: StructureReadModelService,\n\t\t\t\tprivate structureRowSelectEnabledArchive: StructureRowSelectEnabledArchive,\n\t\t\t\tprivate verticalFormationRepository: VerticalFormationRepository,\n\t\t\t\tprivate structureId: StructureId, // REfactor\n\t\t\t\tprivate structureSearchPhraseRepository: StructureSearchPhraseRepository,\n\t\t\t\tprivate structureSearchHighlightArchive: StructureSearchHighlightArchive) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\n\t\tthis.formationQueryService\n\t\t\t.onSelectedRows()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((rowsList: SelectedRowsList) => {\n\n\t\t\t\tthis.clearSelectedRows();\n\n\t\t\t\trowsList.getIds().forEach((id: string) => {\n\n\t\t\t\t\tconst strippedId = 'gui' + id.replace(/-/g, ''),\n\t\t\t\t\t\tselectedRowEl = this.elementRef.nativeElement.querySelector(`#${strippedId}`);\n\n\t\t\t\t\tif (selectedRowEl) {\n\t\t\t\t\t\tthis.renderer.addClass(selectedRowEl, 'selected');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\tthis.structureEditModeArchive\n\t\t\t.onValue()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((enabled: boolean) => {\n\t\t\t\tthis.editMode = enabled;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\t\tthis.structureCellEditArchive\n\t\t\t.onValue()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((enabled: boolean) => {\n\t\t\t\tthis.cellEditing = enabled;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\t\tthis.structureReadModelService\n\t\t\t.onRowHeight()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((rowHeight: number) => {\n\t\t\t\tthis.rowHeight = rowHeight;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\t\tthis.structureRowSelectEnabledArchive\n\t\t\t.onValue()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((rowSelecting: boolean) => {\n\t\t\t\tthis.rowSelecting = rowSelecting;\n\t\t\t});\n\n\t\tcombineLatest(\n\t\t\tthis.structureSearchPhraseRepository\n\t\t\t\t.onPhrase(this.structureId),\n\t\t\tthis.structureSearchHighlightArchive\n\t\t\t\t.onValue()\n\t\t).pipe(\n\t\t\tthis.takeUntil()\n\t\t )\n\t\t .subscribe((args: Array<any>) => {\n\n\t\t\t const searchPhrase = args[0],\n\t\t\t\t highlighting = args[1];\n\n\t\t\t this.highlighting = highlighting;\n\t\t\t this.searchPhrase = searchPhrase;\n\n\t\t\t if (!this.highlighting) {\n\t\t\t\t this.searchPhrase = '';\n\t\t\t }\n\n\t\t\t this.changeDetectorRef.detectChanges();\n\t\t });\n\t}\n\n\ttrackByFn() {\n\t\treturn 0;\n\t}\n\n\ttranslateY(index: number): string {\n\n\t\tlet height = index * this.rowHeight;\n\n\t\t// if (index > this.rowDetailOpened) {\n\t\t// \theight += 200;\n\t\t// }\n\n\t\treturn `translateY(${height}px)`;\n\t}\n\n\ttoggleSelectedRow(entity: ItemEntity): void {\n\t\tif (this.rowSelecting) {\n\t\t\tthis.formationCommandService.toggleSelectedRow((entity as any).id);\n\t\t}\n\t}\n\n\tprivate clearSelectedRows(): void {\n\t\tconst selectedElements = this.elementRef.nativeElement.querySelectorAll('.selected');\n\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\tselectedElements.forEach((el: any) => {\n\t\t\t\tthis.renderer.removeClass(el, 'selected');\n\t\t\t});\n\t\t}\n\n\t}\n\n}\n","import { ChangeDetectionStrategy, Component, Input, ViewEncapsulation } from '@angular/core';\n\nimport { CellTemplateWithAccessor } from '../../../../composition/domain/read/definition/cell-template-with-accessor';\nimport { ItemEntity } from '../../../domain/source/item.entity';\n\n\n@Component({\n\tselector: 'gui-structure-row',\n\ttemplateUrl: `structure-row.component.html`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class StructureRowComponent {\n\n\t@Input()\n\tentity: ItemEntity;\n\n\t@Input()\n\tcolumns: Array<CellTemplateWithAccessor>;\n\n\t@Input()\n\teditMode: boolean;\n\n\t@Input()\n\tcellEditing: boolean;\n\n\t@Input()\n\tsearchPhrase: string;\n\n\t@Input()\n\tindex: number;\n\n\t@Input()\n\tdetailsEnabled: boolean = false;\n\n\ttrackByFn(): number {\n\t\treturn 0;\n\t}\n\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnChanges, SimpleChanges, ViewEncapsulation } from '@angular/core';\nimport { timer } from 'rxjs';\n\nimport { SmartComponent } from '../../../../../common/cdk/smart-component';\n\nimport { CellTemplateWithAccessor } from '../../../../composition/domain/read/definition/cell-template-with-accessor';\nimport { StructureCellEditArchive } from '../../edit/structure.cell-edit.archive';\nimport { StructureCellEditStore } from '../../edit/structure.cell-edit.store';\nimport { SourceCommandService } from '../../../ui-api/source/source-command.service';\nimport { ChangedValueEmitter } from '../../../../composition/domain/read/edit/changed-value.emitter';\nimport { EditEventType } from '../../../../composition/domain/read/edit/state/edit.event-type';\nimport { StructureEditSourceItemParams } from '../../../domain/source/command/origin/edit/structure.edit-source-item.params';\nimport { StructureCellEditState } from '../../edit/structure.cell-edit.state';\nimport { ItemEntity } from '../../../domain/source/item.entity';\nimport { StructureCellEditCloseAllService } from '../../edit/structure.cell-edit-close-all.service';\n\n\n@Component({\n\tselector: 'gui-structure-cell[entity][cell]',\n\ttemplateUrl: `structure.cell.component.html`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class StructureCellComponent extends SmartComponent implements OnChanges {\n\n\t@Input()\n\tentity: ItemEntity;\n\n\t@Input()\n\tcell: CellTemplateWithAccessor;\n\n\t@Input()\n\teditMode: boolean;\n\n\t@Input()\n\tcellEditingEnabled: boolean;\n\n\t@Input()\n\tsearchPhrase: string;\n\n\tinEditMode: boolean = false;\n\n\teditContext: any;\n\n\tvalueChanges$: ChangedValueEmitter<any>;\n\n\tstatus$: ChangedValueEmitter<any>;\n\n\tactualValue: any;\n\n\tconstructor(private readonly changeDetectorRef: ChangeDetectorRef,\n\t\t\t\tprivate readonly structureCellEditArchive: StructureCellEditArchive,\n\t\t\t\tprivate readonly structureCellEditStore: StructureCellEditStore,\n\t\t\t\tprivate readonly cellEditCloseAllService: StructureCellEditCloseAllService,\n\t\t\t\tprivate readonly sourceCommandService: SourceCommandService) {\n\t\tsuper();\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\n\t\tif (changes.editMode !== undefined) {\n\t\t\tif (this.editMode) {\n\t\t\t\tthis.cellEditingEnabled = true;\n\t\t\t\tthis.enterEditMode(false);\n\t\t\t} else if (!this.editMode) {\n\t\t\t\tthis.exitEditMode();\n\t\t\t}\n\t\t}\n\n\t\tif (!this.editMode) {\n\t\t\tthis.exitEditMode();\n\t\t}\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.cellEditCloseAllService\n\t\t\t.onCloseAll()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe(() => {\n\t\t\t\tthis.exitEditMode();\n\t\t\t});\n\t}\n\n\tisCellEditingEnabled(): boolean {\n\t\treturn this.cellEditingEnabled && this.cell.isCellEditingEnabled();\n\t}\n\n\tenterEditMode(forceCheck: boolean = true): void {\n\n\t\tif (!this.isCellEditingEnabled()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.cellEditCloseAllService.closeAll();\n\n\t\ttimer(0)\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe(() => {\n\t\t\t\tthis.inEditMode = true;\n\n\t\t\t\tthis.valueChanges$ = new ChangedValueEmitter();\n\t\t\t\tthis.status$ = new ChangedValueEmitter<EditEventType>();\n\n\t\t\t\tthis.editContext = {\n\t\t\t\t\tstatus: this.status$,\n\t\t\t\t\tvalueChanges: this.valueChanges$,\n\t\t\t\t\tvalue: this.cell.getValue(this.entity),\n\t\t\t\t\tfocus: forceCheck\n\t\t\t\t};\n\n\t\t\t\tthis.observeFieldStatus();\n\t\t\t\tthis.observeValueChanges();\n\n\t\t\t\tthis.publishEditEnter();\n\n\t\t\t\tif (!forceCheck) {\n\t\t\t\t\tthis.changeDetectorRef.markForCheck();\n\t\t\t\t} else {\n\t\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t\t}\n\t\t\t});\n\n\t}\n\n\texitEditMode(): void {\n\t\tthis.inEditMode = false;\n\t\tthis.changeDetectorRef.detectChanges();\n\t}\n\n\tsubmitChangesAndExit(): void {\n\n\t\tconst itemId = this.entity.getId(),\n\t\t\tupdatedValue = this.actualValue,\n\t\t\tfieldId = this.cell.columnFieldId;\n\n\t\tthis.sourceCommandService.editItem(new StructureEditSourceItemParams(itemId, fieldId, updatedValue));\n\n\t\tthis.exitEditMode();\n\t}\n\n\tprivate observeFieldStatus(): void {\n\n\t\tthis.status$\n\t\t\t.on()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((status: EditEventType) => {\n\n\t\t\t\tswitch (status) {\n\t\t\t\t\tcase EditEventType.SUBMIT:\n\t\t\t\t\t\tthis.submitChangesAndExit();\n\t\t\t\t\t\tthis.publishEditSubmit();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EditEventType.CANCEL:\n\t\t\t\t\t\tthis.exitEditMode();\n\t\t\t\t\t\tthis.publishEditCancel();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tprivate observeValueChanges(): void {\n\n\t\tthis.valueChanges$\n\t\t\t.on()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((value: any) => {\n\t\t\t\tthis.actualValue = value;\n\t\t\t});\n\t}\n\n\tprivate publishEditState(state: StructureCellEditState): void {\n\t\tthis.structureCellEditStore.next(state);\n\t}\n\n\tprivate publishEditEnter(): void {\n\t\tthis.publishEditState(StructureCellEditState.ENTER);\n\t}\n\n\tprivate publishEditCancel(): void {\n\t\tthis.publishEditState(StructureCellEditState.CANCEL);\n\t}\n\n\tprivate publishEditSubmit(): void {\n\t\tthis.publishEditState(StructureCellEditState.SUBMIT);\n\t}\n}\n","import {\n\tAfterViewInit,\n\tChangeDetectionStrategy,\n\tChangeDetectorRef,\n\tComponent,\n\tElementRef,\n\tInject,\n\tNgZone,\n\tOnDestroy,\n\tOnInit,\n\tOptional,\n\tRenderer2,\n\tViewChild,\n\tViewEncapsulation\n} from '@angular/core';\nimport { combineLatest, fromEvent, Subject } from 'rxjs';\nimport { distinctUntilChanged, filter, map, takeUntil } from 'rxjs/operators';\n\nimport { ResizeDetector } from '@generic-ui/fabric';\n\nimport { SmartComponent } from '../../../../common/cdk/smart-component';\nimport { CellTemplateWithAccessor } from '../../../composition/domain/read/definition/cell-template-with-accessor';\nimport { SchemaRowColoring } from '../../domain/schema/schema-row-coloring';\nimport { StructureId } from '../../domain/structure-id';\nimport { StructureCommandService } from '../../ui-api/structure/structure-command.service';\nimport { StructureReadModelService } from '../../ui-api/structure/structure-read-model.service';\nimport { SourceReadModelService } from '../../ui-api/source/source-read-model.service';\nimport { SchemaReadModelService } from '../../ui-api/schema/schema-read-model.service';\nimport { CompositionCommandService } from '../../../composition/ui-api/composition.command-service';\nimport { CompositionReadModelService } from '../../../composition/ui-api/composition-read-model.service';\nimport { FormationReadModelService } from '../../ui-api/formation/formation-read-model.service';\nimport { structureParentComponent } from '../structure-parent-component';\nimport { Structure } from '../../domain/structure/read/structure';\nimport { ItemEntity } from '../../domain/source/item.entity';\n\n\n@Component({\n\tselector: 'gui-structure-container',\n\ttemplateUrl: `structure-container.component.html`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class StructureContainerComponent extends SmartComponent implements OnInit, AfterViewInit, OnDestroy {\n\n\t@ViewChild('container', { static: false })\n\tcontainerRef: ElementRef;\n\n\tcolumns: Array<CellTemplateWithAccessor> = [];\n\n\tsource: Array<ItemEntity> = [];\n\n\theight: number;\n\n\trowColoring: SchemaRowColoring;\n\n\tprivate autoResizeWidthEnabled: boolean = false;\n\n\tprivate scrollObservation$ = new Subject();\n\n\tconstructor(private elementRef: ElementRef,\n\t\t\t\tprivate renderer: Renderer2,\n\t\t\t\tprivate changeDetectorRef: ChangeDetectorRef,\n\t\t\t\tprivate ngZone: NgZone,\n\t\t\t\tprivate structureId: StructureId,\n\t\t\t\tprivate structureCommandService: StructureCommandService,\n\t\t\t\tprivate structureQueryService: StructureReadModelService,\n\t\t\t\tprivate sourceQueryService: SourceReadModelService,\n\t\t\t\tprivate schemaQueryService: SchemaReadModelService,\n\t\t\t\tprivate compositionCommandService: CompositionCommandService,\n\t\t\t\tprivate compositionQueryService: CompositionReadModelService,\n\t\t\t\tprivate formationQueryService: FormationReadModelService,\n\t\t\t\tprivate resizeDetector: ResizeDetector,\n\t\t\t\t@Optional() @Inject(structureParentComponent) private structureParent: any) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\n\t\t/**\n\t\t * TODO One source of truth\n\t\t *\n\t\t * There should only one sub here.\n\t\t */\n\t\tcombineLatest(\n\t\t\tthis.sourceQueryService.onEntities(),\n\t\t\tthis.structureQueryService.onRowHeight()\n\t\t)\n\t\t\t.pipe(this.takeUntil())\n\t\t\t.subscribe((combine: Array<any>) => {\n\n\t\t\t\tconst source: Array<ItemEntity> = combine[0],\n\t\t\t\t\trowHeight = combine[1];\n\n\t\t\t\tthis.source = source;\n\t\t\t\tthis.setHeight(source.length * rowHeight);\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\t\tthis.compositionQueryService\n\t\t\t.onTemplateColumns()\n\t\t\t.pipe(this.takeUntil())\n\t\t\t.subscribe((columns: Array<CellTemplateWithAccessor>) => {\n\t\t\t\tthis.columns = columns;\n\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\t\tthis.compositionQueryService\n\t\t\t.onResizeWidth()\n\t\t\t.pipe(this.takeUntil())\n\t\t\t.subscribe((enabled: boolean) => {\n\t\t\t\tthis.autoResizeWidthEnabled = enabled;\n\t\t\t});\n\n\t\tcombineLatest(\n\t\t\tthis.sourceQueryService.onEntities(),\n\t\t\tthis.schemaQueryService.onContainerHeight(),\n\t\t\tthis.structureQueryService.onRowHeight()\n\t\t)\n\t\t\t.pipe(this.takeUntil())\n\t\t\t.subscribe((combine: Array<any>) => {\n\n\t\t\t\tconst source: Array<ItemEntity> = combine[0],\n\t\t\t\t\theight: number = combine[1],\n\t\t\t\t\trowHeight = combine[2];\n\n\t\t\t\tconst sourceSizeHeight = source.length * rowHeight;\n\n\t\t\t\tif (sourceSizeHeight > height) {\n\t\t\t\t\tthis.setHeight(height);\n\t\t\t\t} else {\n\t\t\t\t\tthis.setHeight(sourceSizeHeight);\n\t\t\t\t}\n\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\t}\n\n\tngAfterViewInit() {\n\n\t\t// turn on when structure is ready\n\t\tif (this.structureParent) {\n\t\t\tthis.resizeDetector\n\t\t\t\t.observe(this.structureParent.getElementRef().nativeElement)\n\t\t\t\t.pipe(\n\t\t\t\t\tfilter(() => this.autoResizeWidthEnabled),\n\t\t\t\t\tmap((element: HTMLElement) => element.offsetWidth),\n\t\t\t\t\tdistinctUntilChanged(),\n\t\t\t\t\tthis.takeUntil()\n\t\t\t\t)\n\t\t\t\t.subscribe((width: number) => {\n\t\t\t\t\tthis.recalculateContainer(width);\n\t\t\t\t});\n\t\t}\n\n\t\tthis.compositionQueryService\n\t\t\t.onContainerWidth()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((width: number) => {\n\t\t\t\tthis.renderer.setStyle(this.containerRef.nativeElement, 'width', width + 'px');\n\t\t\t});\n\n\t\tthis.structureQueryService\n\t\t\t.onVerticalScrollEnabled()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((enabled: boolean) => {\n\t\t\t\tif (enabled) {\n\t\t\t\t\tthis.enableScrollObservation();\n\t\t\t\t} else {\n\t\t\t\t\tthis.disableScrollObservation();\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t// never runs ??\n\t\tthis.structureQueryService\n\t\t\t.onStructure()\n\t\t\t.pipe(\n\t\t\t\tfilter((str: Structure) => {\n\t\t\t\t\treturn str.isVerticalScrollEnabled();\n\t\t\t\t}),\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((structure: Structure) => {\n\n\t\t\t\tconst containerHeight = structure.getContainerHeight(),\n\t\t\t\t\ttopMargin = structure.getTopMargin();\n\n\t\t\t\tthis.renderer.setStyle(this.containerRef.nativeElement, 'padding-top', topMargin + 'px');\n\t\t\t\tthis.renderer.setStyle(this.containerRef.nativeElement, 'height', containerHeight + 'px');\n\t\t\t});\n\t}\n\n\tngOnDestroy() {\n\t\tsuper.ngOnDestroy();\n\t\tthis.resizeDetector.destroy(this.elementRef.nativeElement);\n\t}\n\n\tsetHeight(height: number): void {\n\t\tthis.height = height;\n\t\tthis.renderer.setStyle(this.elementRef.nativeElement, 'height', this.height + 'px');\n\t}\n\n\tprivate recalculateContainer(width: number): void {\n\t\tif (this.autoResizeWidthEnabled) {\n\t\t\tthis.compositionCommandService.setContainerWidth(width);\n\t\t}\n\t}\n\n\tprivate enableScrollObservation(): void {\n\t\tthis.ngZone\n\t\t\t.runOutsideAngular(() => {\n\n\t\t\t\tfromEvent(this.elementRef.nativeElement, 'scroll')\n\t\t\t\t\t.pipe(\n\t\t\t\t\t\t// auditTime(10),\n\t\t\t\t\t\ttakeUntil(this.scrollObservation$),\n\t\t\t\t\t\tthis.takeUntil()\n\t\t\t\t\t)\n\t\t\t\t\t.subscribe((event: any) => {\n\n\t\t\t\t\t\tconst scrollTop = event.target.scrollTop;\n\n\t\t\t\t\t\tthis.structureCommandService.setScrollPosition(scrollTop);\n\t\t\t\t\t});\n\t\t\t});\n\t}\n\n\tprivate disableScrollObservation(): void {\n\t\tthis.scrollObservation$.next();\n\t\tthis.scrollObservation$.complete();\n\t}\n\n}\n","import { Component } from '@angular/core';\n\n@Component({\n\tselector: 'gui-structure-quick-fitlers',\n\ttemplate: `\n\t\n\t\tQuickFilters\n\t\t\n\t`\n})\nexport class StructureQuickFiltersComponent {\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\n\nimport { StructureId } from '../../../../structure-id';\nimport { Reactive } from '../../../../../../../common/cdk/reactive';\n\n\n@Injectable()\nexport class StructureSearchingRepository extends Reactive {\n\n\tprivate enabled = new Map<string, boolean>();\n\n\tprivate enabled$ = new ReplaySubject<Map<string, boolean>>();\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tsetEnabled(enabled: boolean, structureId: StructureId): void {\n\t\tthis.enabled.set(structureId.toString(), enabled);\n\t\tthis.enabled$.next(this.enabled);\n\t}\n\n\tonSearchingEnabled(structureId: StructureId): Observable<boolean> {\n\n\t\treturn this.enabled$\n\t\t\t\t   .asObservable()\n\t\t\t\t   .pipe(\n\t\t\t\t\t   map((map: Map<string, boolean>) => {\n\t\t\t\t\t\t   return map.get(structureId.toString());\n\t\t\t\t\t   }),\n\t\t\t\t\t   distinctUntilChanged()\n\t\t\t\t   );\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { StructureSearchingRepository } from '../../../domain/structure/read/searching/enabled/structure.searching.repository';\nimport { StructureId } from '../../../domain/structure-id';\nimport { globalStructureId } from '../../../domain/global-structure-id';\n\n\n@Injectable()\nexport class StructureSearchReadModelRepository {\n\n\tconstructor(private structureSearchingRepository: StructureSearchingRepository) {\n\t}\n\n\tonSearchEnabled(structureId: StructureId = globalStructureId): Observable<boolean> {\n\t\treturn this.structureSearchingRepository.onSearchingEnabled(structureId);\n\t}\n\n}\n","import { InjectionToken } from '@angular/core';\n\nconst prefix = 'Structure -';\n\nexport const STRUCTURE_CSS_CLASS_NAME = new InjectionToken<string>(`${prefix} - css className`);\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Inject, ViewEncapsulation } from '@angular/core';\n\nimport { SmartComponent } from '../../../../common/cdk/smart-component';\nimport { Structure } from '../../domain/structure/read/structure';\nimport { Paging } from '../../domain/paging/read/paging';\nimport { StructureDefinition } from '../structure-definition';\nimport { StructureId } from '../../domain/structure-id';\nimport { StructureReadModelService } from '../../ui-api/structure/structure-read-model.service';\nimport { PagingReadModelService } from '../../ui-api/paging/paging-read-model.service';\nimport { StructureInfoPanelEnabledArchive } from '../panel/info/structure.info-panel-enabled.archive';\nimport { StructureAggregationArchive } from '../panel/aggregation/structure.aggregation.archive';\nimport { StructureFilterReadModelRepository } from '../../ui-api/structure/filter/structure.filter.read-model.repository';\nimport { StructureSearchReadModelRepository } from '../../ui-api/structure/search/structure-search.read-model.repository';\nimport { STRUCTURE_CSS_CLASS_NAME } from '../../ui-api/structure/structure-tokens';\nimport { StructureAggregationPanelConfig } from '../panel/aggregation/structure.aggregation-panel.config';\n\n\n@Component({\n\tselector: 'gui-structure-blueprint',\n\ttemplateUrl: `structure.blueprint.component.html`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class StructureBlueprintComponent extends SmartComponent {\n\n\tstructure: Structure;\n\n\tsearchEnabled: boolean = false;\n\n\ttopAggregationPanelEnabled: boolean = false;\n\n\tbottomAggregationPanelEnabled: boolean = false;\n\n\tquickFiltersEnabled: boolean = false;\n\n\tinfoPanelEnabled: boolean = false;\n\n\treadonly contentCssClass: string;\n\n\treadonly headerCssClass: string;\n\n\tprivate pagingReadModel: Paging;\n\n\tconstructor(private changeDetectorRef: ChangeDetectorRef,\n\t\t\t\tprivate structureDefinition: StructureDefinition,\n\t\t\t\tprivate structureId: StructureId,\n\t\t\t\tprivate structureQueryService: StructureReadModelService,\n\t\t\t\tprivate pagingQueryService: PagingReadModelService,\n\t\t\t\tprivate structureInfoPanelEnabledArchive: StructureInfoPanelEnabledArchive,\n\t\t\t\tprivate structureAggregationArchive: StructureAggregationArchive,\n\t\t\t\tprivate structureFilterReadModelRepository: StructureFilterReadModelRepository,\n\t\t\t\tprivate structureSearchReadModelRepository: StructureSearchReadModelRepository,\n\t\t\t\t@Inject(STRUCTURE_CSS_CLASS_NAME) private className: string) {\n\t\tsuper();\n\n\t\tthis.headerCssClass = `gui-${this.className}-header`;\n\t\tthis.contentCssClass = `gui-${this.className}-content`;\n\t}\n\n\tngOnInit() {\n\t\tthis.structureQueryService\n\t\t\t.onStructure()\n\t\t\t.pipe(this.takeUntil())\n\t\t\t.subscribe((structure: Structure) => {\n\t\t\t\tthis.structure = structure;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\t\tthis.pagingQueryService\n\t\t\t.onPaging()\n\t\t\t.pipe(this.takeUntil())\n\t\t\t.subscribe((paging: Paging) => {\n\t\t\t\tthis.pagingReadModel = paging;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\t\tthis.structureSearchReadModelRepository\n\t\t\t.onSearchEnabled(this.structureId)\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((enabled: boolean) => {\n\t\t\t\tthis.searchEnabled = enabled;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\n\t\tthis.structureFilterReadModelRepository\n\t\t\t.onQuickFiltersEnabled(this.structureId)\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((enabled: boolean) => {\n\t\t\t\tthis.quickFiltersEnabled = enabled;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\t\tthis.structureAggregationArchive\n\t\t\t.onValue()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((config: StructureAggregationPanelConfig) => {\n\t\t\t\tthis.topAggregationPanelEnabled = config.itTopEnabled();\n\t\t\t\tthis.bottomAggregationPanelEnabled = config.itBottomEnabled();\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\t\tthis.structureInfoPanelEnabledArchive\n\t\t\t.onValue()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((enabled: boolean) => {\n\t\t\t\tthis.infoPanelEnabled = enabled;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\t}\n\n\tgetHeaderTopClasses(): string {\n\t\treturn this.headerCssClass + ' gui-header-top';\n\t}\n\n\tgetHeaderBottomClasses(): string {\n\t\treturn this.headerCssClass + ' gui-header-bottom';\n\t}\n\n\tisColumnHeaderTopEnabled(): boolean {\n\t\treturn this.structureDefinition.isHeaderEnabled() && this.structure && this.structure.isTopHeaderEnabled();\n\t}\n\n\tisColumnHeaderBottomEnabled(): boolean {\n\t\treturn this.structureDefinition.isHeaderEnabled() && this.structure && this.structure.isBottomHeaderEnabled();\n\t}\n\n\tisPagingTopEnabled(): boolean {\n\t\treturn this.structureDefinition.getTopPaging().isEnabled() && this.pagingReadModel && this.pagingReadModel.isPagerTop();\n\t}\n\n\tisPagingBottomEnabled(): boolean {\n\t\treturn this.structureDefinition.getBottomPaging().isEnabled() && this.pagingReadModel && this.pagingReadModel.isPagerBottom();\n\t}\n\n\tisSourceEmpty(): boolean {\n\t\treturn this.structure && this.structure.getEntities().length === 0;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { AggregateStoreRegister, InMemoryAggregateStore } from '@generic-ui/hermes';\n\nimport { StructureAggregate } from '../../../../domain/structure/command/structure.aggregate';\nimport { InMemoryStructureStore } from '../in-memory.structure.store';\n\n\n@Injectable()\nexport class InMemoryStructureAggregateStore extends InMemoryAggregateStore<StructureAggregate> {\n\n\tconstructor(inMemoryStructureStore: InMemoryStructureStore,\n\t\t\t\taggregateStoreRegister: AggregateStoreRegister) {\n\t\tsuper(inMemoryStructureStore, aggregateStoreRegister);\n\t}\n}\n","import { AggregateId, AggregateRepository, Optional } from '@generic-ui/hermes';\n\nimport { StructureAggregate } from './structure.aggregate';\n\nexport abstract class StructureAggregateRepository extends AggregateRepository<StructureAggregate> {\n\n\tabstract getById(aggregateId: AggregateId): Optional<StructureAggregate>;\n\n\tabstract save(aggregate: StructureAggregate): void;\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { AggregateId, Optional } from '@generic-ui/hermes';\n\nimport { StructureAggregateRepository } from '../../../../domain/structure/command/structure-aggregate.repository';\nimport { StructureAggregate } from '../../../../domain/structure/command/structure.aggregate';\n\nimport { InMemoryStructureAggregateStore } from './in-memory.structure.aggregate-store';\n\n\n@Injectable()\nexport class InMemoryStructureAggregateRepository extends StructureAggregateRepository {\n\n\tconstructor(private inMemoryStructureAggregateStore: InMemoryStructureAggregateStore) {\n\t\tsuper();\n\t}\n\n\tgetById(aggregateId: AggregateId): Optional<StructureAggregate> {\n\t\treturn this.inMemoryStructureAggregateStore.getById(aggregateId);\n\t}\n\n\tsave(aggregate: StructureAggregate): void {\n\t\tthis.inMemoryStructureAggregateStore.save(aggregate);\n\t}\n\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class SetSourceLoadingEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'SetSourceLoadingEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class SchemaSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'SchemaSetEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class SchemaHorizontalGridSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'SchemaHorizontalGridSetEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class SchemaVerticalGridSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'SchemaVerticalGridSetEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class SchemaTopHeaderChangedEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'SchemaTopHeaderChangedEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class SchemaBottomHeaderChangedEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'SchemaBottomHeaderChangedEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class RowColoringSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'RowColoringSetEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class PagingSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'PagingSetEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class FormationSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'FormationSetEvent');\n\t}\n\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class ScrollPositionSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'ScrollPositionSetEvent');\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nimport { OriginItemEntity } from '../origin-item-entity';\n\n\nexport class OriginSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tprivate readonly origin: Array<OriginItemEntity>) {\n\t\tsuper(aggregateId, 'OriginSetEvent');\n\t}\n\n\tgetOrigin(): Array<OriginItemEntity> {\n\t\treturn this.origin;\n\t}\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class StructureFilterToggledEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'StructureFilterToggledEvent');\n\t}\n\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\n\nimport { AggregateId, DomainEvent, DomainEventBus } from '@generic-ui/hermes';\n\nimport { StructureRepository } from '../../../../domain/structure/read/structure.repository';\nimport { Structure } from '../../../../domain/structure/read/structure';\nimport { InMemoryStructureReadStore } from './in-memory-structure.read-store';\nimport { StructureCreatedEvent } from '../../../../domain/structure/command/create-structure/structure-created.event';\nimport { SetSourceLoadingEvent } from '../../../../domain/source/command/loading/set-source-loading.event';\nimport { SchemaSetEvent } from '../../../../domain/schema/command/set/schema-set.event';\nimport { SchemaThemeSetEvent } from '../../../../domain/schema/command/theme/schema-theme-set.event';\nimport { SchemaHorizontalGridSetEvent } from '../../../../domain/schema/command/grid/horizontal/schema-horizontal-grid-set.event';\nimport { SchemaVerticalGridSetEvent } from '../../../../domain/schema/command/grid/vertical/schema-vertical-grid-set.event';\nimport { SchemaTopHeaderChangedEvent } from '../../../../domain/schema/command/column-header/top/schema-top-header-changed.event';\nimport { SchemaBottomHeaderChangedEvent } from '../../../../domain/schema/command/column-header/bottom/schema-bottom-header-changed.event';\nimport { RowColoringSetEvent } from '../../../../domain/schema/command/coloring/set/row-coloring-set.event';\nimport { PagingSetEvent } from '../../../../domain/paging/command/set/paging-set.event';\nimport { PrevPageEvent } from '../../../../domain/paging/command/prev-page/prev-page.event';\nimport { NextPageEvent } from '../../../../domain/paging/command/next-page/next-page.event';\nimport { PagesizeChangedEvent } from '../../../../domain/paging/command/change-pagesize/pagesize-changed.event';\nimport { FormationSetEvent } from '../../../../domain/formation/command/set/formation-set.event';\nimport { SelectedRowToggledEvent } from '../../../../domain/formation/command/toggle/selected-row-toggled.event';\nimport { VerticalScrollEnabledSetEvent } from '../../../../domain/structure/command/vertical-formation/set-enabled/vertical-scroll-enabled-set.event';\nimport { ScrollPositionSetEvent } from '../../../../domain/structure/command/vertical-formation/scroll-position/scroll-position-set.event';\nimport { SortToggledEvent } from '../../../../domain/structure/command/sort/toggle/sort-toggled.event';\nimport { OriginSetEvent } from '../../../../domain/source/command/origin/set-origin/origin-set.event';\nimport { StructureFilterToggledEvent } from '../../../../domain/structure/command/filter/toggle/structure.filter-toggled.event';\nimport { StructureSearchPhraseSetDomainEvent } from '../../../../domain/structure/command/search/set-phrase/structure.search-phrase-set.domain-event';\nimport { SortOrderSetEvent } from '../../../../domain/structure/command/sort/order/sort-order-set.event';\nimport { RowHeightSetEvent } from '../../../../domain/structure/command/vertical-formation/set-row-height/row-height-set.event';\n\n\n@Injectable()\nexport class InMemoryStructureRepository extends StructureRepository implements OnDestroy {\n\n\tprivate readonly structureIdToStructure = new Map<string, Structure>();\n\n\tprivate readonly structure$ = new ReplaySubject<Map<string, Structure>>(1);\n\n\tconstructor(domainEventBus: DomainEventBus,\n\t\t\t\tprivate inMemoryStructureQueryStore: InMemoryStructureReadStore) {\n\t\tsuper(domainEventBus);\n\t}\n\n\tonStructure(aggregateId: AggregateId): Observable<Structure> {\n\n\t\treturn this.structure$\n\t\t\t\t   .asObservable()\n\t\t\t\t   .pipe(\n\t\t\t\t\t   filter((structureIdToStructure: Map<string, Structure>) => {\n\n\t\t\t\t\t\t   const key = aggregateId.getId();\n\n\t\t\t\t\t\t   return structureIdToStructure.has(key);\n\t\t\t\t\t   }),\n\t\t\t\t\t   map((structureIdToStructure: Map<string, Structure>) => structureIdToStructure.get(aggregateId.getId()))\n\t\t\t\t   );\n\t}\n\n\tprotected forEvents(): Array<typeof DomainEvent> {\n\t\treturn [\n\t\t\tStructureCreatedEvent,\n\t\t\tSetSourceLoadingEvent,\n\t\t\tSchemaSetEvent,\n\t\t\tSchemaThemeSetEvent,\n\t\t\tSchemaHorizontalGridSetEvent,\n\t\t\tSchemaVerticalGridSetEvent,\n\t\t\tSchemaTopHeaderChangedEvent,\n\t\t\tSchemaBottomHeaderChangedEvent,\n\t\t\tRowColoringSetEvent,\n\t\t\tPagingSetEvent,\n\t\t\tPrevPageEvent,\n\t\t\tNextPageEvent,\n\t\t\tPagesizeChangedEvent,\n\t\t\tFormationSetEvent,\n\t\t\tSelectedRowToggledEvent,\n\t\t\tVerticalScrollEnabledSetEvent,\n\t\t\tScrollPositionSetEvent,\n\t\t\tSortToggledEvent as any,\n\t\t\tStructureFilterToggledEvent,\n\t\t\tStructureSearchPhraseSetDomainEvent,\n\t\t\tSortOrderSetEvent as any,\n\t\t\tOriginSetEvent as any,\n\t\t\tRowHeightSetEvent\n\t\t];\n\t}\n\n\tprotected subs(event: DomainEvent): void {\n\n\t\tconst aggregateId = event.getAggregateId();\n\n\t\tconst optStructure = this.inMemoryStructureQueryStore.getById(aggregateId);\n\n\t\toptStructure.ifPresent((structure: Structure) => {\n\t\t\tconst key = structure.getId().toString();\n\n\t\t\tthis.structureIdToStructure.set(key, structure);\n\n\t\t\tthis.structure$.next(this.structureIdToStructure);\n\t\t});\n\t}\n\n}\n","import { InMemoryStructureAggregateStore } from './commad/in-memory.structure.aggregate-store';\n\nimport { InMemoryStructureAggregateRepository } from './commad/in-memory.structure-aggregate.repository';\nimport { StructureAggregateRepository } from '../../../domain/structure/command/structure-aggregate.repository';\nimport { InMemoryStructureReadStore } from './read/in-memory-structure.read-store';\nimport { StructureRepository } from '../../../domain/structure/read/structure.repository';\nimport { InMemoryStructureRepository } from './read/in-memory.structure.repository';\nimport { InMemoryStructureStore } from './in-memory.structure.store';\n\nexport const inMemoryStructureCommandProviders = [\n\tInMemoryStructureAggregateStore,\n\t{\n\t\tprovide: StructureAggregateRepository,\n\t\tuseClass: InMemoryStructureAggregateRepository\n\t}\n];\n\nexport const inMemoryStructureReadProviders = [\n\tInMemoryStructureReadStore,\n\t{\n\t\tprovide: StructureRepository,\n\t\tuseClass: InMemoryStructureRepository\n\t}\n];\n\nexport const inMemoryStructureProviders = [\n\tInMemoryStructureStore\n];\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { SetVerticalScrollEnabledCommand } from './set-vertical-scroll-enabled.command';\nimport { VerticalScrollEnabledSetEvent } from './vertical-scroll-enabled-set.event';\nimport { StructureAggregate } from '../../structure.aggregate';\n\n\n@Injectable()\nexport class SetVerticalScrollEnabledCommandHandler implements CommandHandler<StructureAggregate, SetVerticalScrollEnabledCommand> {\n\n\tconstructor(private readonly domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<SetVerticalScrollEnabledCommand> {\n\t\treturn SetVerticalScrollEnabledCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: SetVerticalScrollEnabledCommand): void {\n\t\tthis.domainEventPublisher.publish(new VerticalScrollEnabledSetEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(structure: StructureAggregate, command: SetVerticalScrollEnabledCommand): void {\n\n\t\tconst enabled = command.isEnabled();\n\n\t\tconst formation = structure.getVerticalFormation();\n\n\t\tformation.setEnabled(enabled);\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\nimport { SetScrollPositionCommand } from './set-scroll-position.command';\nimport { ScrollPositionSetEvent } from './scroll-position-set.event';\nimport { StructureAggregate } from '../../structure.aggregate';\n\n\n@Injectable()\nexport class SetScrollPositionCommandHandler implements CommandHandler<StructureAggregate, SetScrollPositionCommand> {\n\n\tconstructor(private readonly domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<SetScrollPositionCommand> {\n\t\treturn SetScrollPositionCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: SetScrollPositionCommand): void {\n\t\tthis.domainEventPublisher.publish(new ScrollPositionSetEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(structure: StructureAggregate, command: SetScrollPositionCommand): void {\n\n\t\tconst position = command.getPosition();\n\n\t\tstructure.setScrollPosition(position);\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\nimport { InitFieldsCommand } from './init-fields.command';\nimport { FieldsInitedEvent } from './fields-inited.event';\nimport { StructureAggregate } from '../../structure.aggregate';\nimport { FieldsInitedAggregateEvent } from './fields-inited.aggregate-event';\n\n\n@Injectable()\nexport class InitFieldsCommandHandler implements CommandHandler<StructureAggregate, InitFieldsCommand> {\n\n\tconstructor(private domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<InitFieldsCommand> {\n\t\treturn InitFieldsCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: InitFieldsCommand): void {\n\n\t\tconst compositionId = command.getCompositionId(),\n\t\t\tcolumns = command.getColumns();\n\n\t\tconst aggregateEvents = aggregate.getEvents();\n\n\t\tconst fieldTypes = (aggregateEvents[0] as FieldsInitedAggregateEvent).getFields();\n\n\t\tthis.domainEventPublisher.publish(new FieldsInitedEvent(command.getAggregateId(), compositionId, columns, fieldTypes));\n\t}\n\n\thandleAggregate(structure: StructureAggregate, command: InitFieldsCommand): void {\n\n\t\tconst columns = command.getColumns();\n\n\t\tstructure.createFields(columns);\n\t}\n\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { AggregateId, CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { StructureAggregateRepository } from '../../structure-aggregate.repository';\nimport { ToggleSortCommand } from './toggle-sort.command';\nimport { CompositionId } from '../../../../../../composition/domain/composition-id';\nimport { FieldId } from '../../field/data-type/field.id';\nimport { StructureSorter } from '../structure.sorter';\nimport { SortToggledEvent } from './sort-toggled.event';\nimport { StructureAggregate } from '../../structure.aggregate';\n\n\n@Injectable()\nexport class ToggleSortCommandHandler implements CommandHandler<StructureAggregate, ToggleSortCommand> {\n\n\tconstructor(private readonly structureAggregateRepository: StructureAggregateRepository,\n\t\t\t\tprivate domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<ToggleSortCommand> {\n\t\treturn ToggleSortCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: ToggleSortCommand): void {\n\t}\n\n\thandleAggregate(structure: StructureAggregate, command: ToggleSortCommand): void {\n\n\t\tconst aggregateId = command.getAggregateId(),\n\t\t\tcompositionId = command.getCompositionId(),\n\t\t\tfieldId = command.getFieldId();\n\n\t\tconst sorters = structure.toggleSort(fieldId);\n\n\t\tthis.publishSortEvent(aggregateId, compositionId, fieldId, sorters);\n\t}\n\n\tprivate publishSortEvent(aggregateId: AggregateId, compositionId: CompositionId, fieldId: FieldId, sorters: Array<StructureSorter>): void {\n\n\t\tconst directions = sorters.map((sorter: StructureSorter) => {\n\t\t\treturn {\n\t\t\t\tdirection: sorter.hasDirection(),\n\t\t\t\tfieldId: sorter.getField().getId()\n\t\t\t};\n\t\t});\n\n\t\tthis.domainEventPublisher.publish(new SortToggledEvent(aggregateId, compositionId, directions));\n\t}\n\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class SortingSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId) {\n\t\tsuper(aggregateId, 'SortingSetEvent');\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\nimport { SetSortingCommand } from './set-sorting.command';\nimport { SortingSetEvent } from './sorting-set.event';\nimport { StructureAggregate } from '../../structure.aggregate';\n\n\n@Injectable()\nexport class SetSortingCommandHandler implements CommandHandler<StructureAggregate, SetSortingCommand> {\n\n\tconstructor(private domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<SetSortingCommand> {\n\t\treturn SetSortingCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: SetSortingCommand): void {\n\t\tthis.domainEventPublisher.publish(new SortingSetEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(aggregate: StructureAggregate, command: SetSortingCommand): void {\n\n\t\tconst sortingConfig = command.getSortingConfig();\n\n\t\taggregate.setSortingConfig(sortingConfig);\n\t}\n\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class StructureConfigFilterSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tprivate readonly enabled: boolean) {\n\t\tsuper(aggregateId, 'StructureConfigFilterSetEvent');\n\t}\n\n\tgetEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\nimport { StructureSetConfigFilterCommand } from './structure.set-config-filter.command';\nimport { StructureConfigFilterSetEvent } from './structure.config-filter-set.event';\nimport { StructureAggregate } from '../../structure.aggregate';\n\n\n@Injectable()\nexport class StructureSetConfigFilterCommandHandler implements CommandHandler<StructureAggregate, StructureSetConfigFilterCommand> {\n\n\tconstructor(private readonly domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<StructureSetConfigFilterCommand> {\n\t\treturn StructureSetConfigFilterCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: StructureSetConfigFilterCommand): void {\n\n\t\tconst filterConfig = command.getConfig();\n\n\t\tthis.domainEventPublisher.publish(new StructureConfigFilterSetEvent(command.getAggregateId(), filterConfig.enabled));\n\t}\n\n\thandleAggregate(aggregate: StructureAggregate, command: StructureSetConfigFilterCommand): void {\n\n\t\tconst filterConfig = command.getConfig();\n\n\t\taggregate.setFilterConfig(filterConfig);\n\t}\n\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nexport class StructureConfigSearchingSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tprivate readonly enabled: boolean) {\n\t\tsuper(aggregateId, 'StructureConfigSearchingSetEvent');\n\t}\n\n\tgetEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { StructureSetConfigSearchingCommand } from './structure.set-config-searching.command';\nimport { StructureConfigSearchingSetEvent } from './structure.config-searching-set.event';\nimport { StructureAggregate } from '../../structure.aggregate';\n\n\n@Injectable()\nexport class StructureSetConfigSearchingCommandHandler implements CommandHandler<StructureAggregate, StructureSetConfigSearchingCommand> {\n\n\tconstructor(private domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<StructureSetConfigSearchingCommand> {\n\t\treturn StructureSetConfigSearchingCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: StructureSetConfigSearchingCommand): void {\n\n\t\tconst searchingConfig = command.getConfig();\n\n\t\tthis.domainEventPublisher.publish(new StructureConfigSearchingSetEvent(command.getAggregateId(), searchingConfig.enabled));\n\t}\n\n\thandleAggregate(aggregate: StructureAggregate, command: StructureSetConfigSearchingCommand): void {\n\n\t\tconst searchingConfig = command.getConfig();\n\n\t\taggregate.setSearchingConfig(searchingConfig);\n\t}\n\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\n\nexport class StructureConfigQuickFilterSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tprivate readonly enabled: boolean) {\n\t\tsuper(aggregateId, 'StructureConfigQuickFilterSetEvent');\n\t}\n\n\tgetEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { StructureAggregateRepository } from '../../structure-aggregate.repository';\nimport { StructureSetConfigQuickFilterCommand } from './structure.set-config-quick-filter.command';\nimport { StructureConfigQuickFilterSetEvent } from './structure.config-quick-filter-set.event';\nimport { StructureAggregate } from '../../structure.aggregate';\n\n\n@Injectable()\nexport class StructureSetConfigQuickFilterCommandHandler implements CommandHandler<StructureAggregate, StructureSetConfigQuickFilterCommand> {\n\n\tconstructor(private readonly structureAggregateRepository: StructureAggregateRepository,\n\t\t\t\tprivate domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<StructureSetConfigQuickFilterCommand> {\n\t\treturn StructureSetConfigQuickFilterCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: StructureSetConfigQuickFilterCommand): void {\n\n\t\tconst structureId = command.getAggregateId(),\n\t\t\tquickFiltersConfig = command.getConfig();\n\n\t\tthis.domainEventPublisher.publish(new StructureConfigQuickFilterSetEvent(structureId, quickFiltersConfig.enabled));\n\t}\n\n\thandleAggregate(aggregate: StructureAggregate, command: StructureSetConfigQuickFilterCommand): void {\n\n\t\tconst quickFiltersConfig = command.getConfig();\n\n\t\taggregate.setQuickFiltersConfig(quickFiltersConfig);\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { StructureAggregateRepository } from '../../structure-aggregate.repository';\nimport { StructureToggleFilterCommand } from './structure.toggle-filter.command';\nimport { FieldId } from '../../field/data-type/field.id';\nimport { StructureFilterToggledEvent } from './structure.filter-toggled.event';\nimport { StructureAggregate } from '../../structure.aggregate';\n\n\n@Injectable()\nexport class StructureToggleFilterCommandHandler implements CommandHandler<StructureAggregate, StructureToggleFilterCommand> {\n\n\tconstructor(private readonly structureAggregateRepository: StructureAggregateRepository,\n\t\t\t\tprivate domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<StructureToggleFilterCommand> {\n\t\treturn StructureToggleFilterCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: StructureToggleFilterCommand): void {\n\t\tthis.domainEventPublisher.publish(new StructureFilterToggledEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(aggregate: StructureAggregate, command: StructureToggleFilterCommand): void {\n\n\t\tconst fieldId: FieldId = command.getFieldId(),\n\t\t\texternalFieldId: string = command.getExternalFilterId(),\n\t\t\tfilterValue = command.getFilterValue();\n\n\t\taggregate.toggleFilter(fieldId, externalFieldId, filterValue);\n\t}\n\n}\n","import { DomainEvent } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../structure-id';\nimport { AggregatedValues } from './calculation/aggregated.values';\n\n\nexport class StructureAggregationsChangedEvent extends DomainEvent {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly values: Map<string, AggregatedValues>) {\n\t\tsuper(structureId, 'StructureAggregationsChangedEvent');\n\t}\n\n\tgetAggregations() {\n\t\treturn this.values;\n\t}\n\n}\n","import { AggregateId, DomainEvent } from '@generic-ui/hermes';\n\nimport { OriginItemEntity } from '../origin/origin-item-entity';\n\nexport class StructurePreparedEntitiesSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tprivate readonly preparedItems: Array<OriginItemEntity>) {\n\t\tsuper(aggregateId, 'StructurePreparedEntitiesSetEvent');\n\t}\n\n\tgetPreparedItems(): Array<OriginItemEntity> {\n\t\treturn this.preparedItems;\n\t}\n}\n","import { Injectable } from '@angular/core';\n\nimport { AggregateEvent, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { StructureOriginChangedAggregateEvent } from './origin/structure.origin-changed.aggregate-event';\nimport { OriginSetEvent } from './origin/set-origin/origin-set.event';\nimport { StructureSourceItemEditedAggregateEvent } from './origin/edit/structure.source-item-edited.aggregate-event';\nimport { StructureSourceItemEditedEvent } from './origin/edit/structure.source-item-edited.event';\nimport { StructureAggregationsChangedAggregateEvent } from '../../structure/command/aggregation/structure.aggregations-changed.aggregate-event';\nimport { StructureAggregationsChangedEvent } from '../../structure/command/aggregation/structure.aggregations-changed.event';\nimport { StructurePreparedEntitiesSetAggregateEvent } from './prepared/structure.prepared-entities-set.aggregate-event';\nimport { StructurePreparedEntitiesSetEvent } from './prepared/structure.prepared-entities-set.event';\n\n\n@Injectable()\nexport class StructureSourceDomainEventPublisher {\n\n\tconstructor(private domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tpublish(events: ReadonlyArray<AggregateEvent>): void {\n\n\t\tevents.forEach((event) => {\n\t\t\tthis.publishEvent(event);\n\t\t});\n\t}\n\n\tprivate publishEvent(event: AggregateEvent): void {\n\n\t\tif (event.getType() === 'StructureOriginChangedAggregateEvent') {\n\n\t\t\tconst structureOriginChangedAggregateEvent = (event as StructureOriginChangedAggregateEvent);\n\n\t\t\tconst domainEvent = new OriginSetEvent(structureOriginChangedAggregateEvent.getAggregateId(), structureOriginChangedAggregateEvent.getOrigin());\n\n\t\t\tthis.domainEventPublisher.publish(domainEvent);\n\t\t}\n\n\t\tif (event.getType() === 'StructureSourceItemEditedAggregateEvent') {\n\n\t\t\tconst structureSourceItemEditedAggregateEvent = (event as StructureSourceItemEditedAggregateEvent);\n\n\t\t\tconst domainEvent = new StructureSourceItemEditedEvent(\n\t\t\t\tstructureSourceItemEditedAggregateEvent.getAggregateId(),\n\t\t\t\tstructureSourceItemEditedAggregateEvent.getBeforeItem(),\n\t\t\t\tstructureSourceItemEditedAggregateEvent.getAfterItem()\n\t\t\t);\n\n\t\t\tthis.domainEventPublisher.publish(domainEvent);\n\t\t}\n\n\t\tif (event.getType() === 'StructureAggregationsChangedAggregateEvent') {\n\n\t\t\tconst structureAggregationsChangedAggregateEvent = (event as StructureAggregationsChangedAggregateEvent);\n\n\t\t\tconst domainEvent = new StructureAggregationsChangedEvent(structureAggregationsChangedAggregateEvent.getAggregateId(), structureAggregationsChangedAggregateEvent.getAggregations());\n\n\t\t\tthis.domainEventPublisher.publish(domainEvent);\n\n\t\t}\n\n\t\tif (event.getType() === 'StructurePreparedEntitiesSetAggregateEvent') {\n\n\t\t\tconst structurePreparedEntitiesSetAggregateEvent = (event as StructurePreparedEntitiesSetAggregateEvent);\n\n\t\t\tconst domainEvent = new StructurePreparedEntitiesSetEvent(structurePreparedEntitiesSetAggregateEvent.getAggregateId(), structurePreparedEntitiesSetAggregateEvent.getPreparedItems());\n\n\t\t\tthis.domainEventPublisher.publish(domainEvent);\n\t\t}\n\t}\n\n}\n","import { DomainEvent } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../../structure-id';\n\n\nexport class StructureAggregationEnabledSetEvent extends DomainEvent {\n\n\tconstructor(aggregateId: StructureId,\n\t\t\t\tprivate readonly enabled: boolean) {\n\t\tsuper(aggregateId, 'StructureAggregationEnabledSetEvent');\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled;\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\nimport { StructureSourceDomainEventPublisher } from '../../../../source/command/structure.source.domain-event.publisher';\nimport { StructureSetAggregationEnabledCommand } from './structure.set-aggregation-enabled.command';\nimport { StructureAggregationEnabledSetEvent } from './structure.aggregation-enabled-set.event';\nimport { StructureAggregate } from '../../structure.aggregate';\n\n\n@Injectable()\nexport class StructureSetAggregationEnabledCommandHandler implements CommandHandler<StructureAggregate, StructureSetAggregationEnabledCommand> {\n\n\tconstructor(private readonly structureSourceDomainEventPublisher: StructureSourceDomainEventPublisher,\n\t\t\t\tprivate domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<StructureSetAggregationEnabledCommand> {\n\t\treturn StructureSetAggregationEnabledCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: StructureSetAggregationEnabledCommand): void {\n\n\t\tconst enabled = command.isEnabled(),\n\t\t\taggregateEvents = aggregate.getEvents();\n\n\t\tthis.domainEventPublisher.publish(new StructureAggregationEnabledSetEvent(command.getAggregateId(), enabled));\n\t\tthis.structureSourceDomainEventPublisher.publish(aggregateEvents);\n\t}\n\n\thandleAggregate(structure: StructureAggregate, command: StructureSetAggregationEnabledCommand): void {\n\n\t\tconst enabled = command.isEnabled();\n\n\t\tstructure.setAggregationEnabled(enabled);\n\t}\n\n}\n","export class VerticalRange {\n\n\tconstructor(private readonly start: number,\n\t\t\t\tprivate readonly end: number) {\n\t}\n\n\tgetStart(): number {\n\t\treturn this.start;\n\t}\n\n\tgetEnd(): number {\n\t\treturn this.end;\n\t}\n\n}\n","import { Entity } from '@generic-ui/hermes';\n\nimport { VerticalRange } from './vertical-range';\nimport { Logger } from '../../../../../../common/cdk/logger/logger';\n\n@Entity\nexport class VerticalFormation {\n\n\tprivate rowHeight: number = 42;\n\n\tprivate hiddenItemsTop = 0;\n\n\tprivate hiddenItemsBottom = 1;\n\n\tprivate viewportHeight: number;\n\n\tprivate scrollPosition: number;\n\n\tprivate range: VerticalRange;\n\n\tprivate sourceSize: number;\n\n\tprivate logger: Logger;\n\n\tconstructor(private enabled: boolean = false,\n\t\t\t\tviewportHeight: number = 0,\n\t\t\t\tsourceSize: number = 0,\n\t\t\t\tscrollPosition: number = 0,\n\t\t\t\trowHeight?: number,\n\t\t\t\thiddenItemsTop?: number,\n\t\t\t\thiddenItemsBottom?: number) {\n\t\tthis.viewportHeight = viewportHeight;\n\t\tthis.sourceSize = sourceSize;\n\t\tthis.scrollPosition = scrollPosition;\n\n\t\tif (Number.isInteger(rowHeight)) {\n\t\t\tthis.rowHeight = rowHeight;\n\t\t}\n\n\t\tif (Number.isInteger(hiddenItemsTop)) {\n\t\t\tthis.hiddenItemsTop = hiddenItemsTop;\n\t\t}\n\n\t\tif (Number.isInteger(hiddenItemsBottom)) {\n\t\t\tthis.hiddenItemsBottom = hiddenItemsBottom;\n\t\t}\n\n\t\tthis.calculateRange();\n\t}\n\n\n\tisEnabled(): boolean {\n\t\treturn this.enabled &&\n\t\t\tthis.viewportHeight > 0 &&\n\t\t\tthis.sourceSize > 0;\n\t}\n\n\tgetRowHeight(): number {\n\t\treturn this.rowHeight;\n\t}\n\n\tgetRange(): VerticalRange {\n\t\treturn this.range;\n\t}\n\n\tgetTopMargin(): number {\n\t\treturn this.range.getStart() * this.rowHeight;\n\t}\n\n\tcalculateRange(): any {\n\n\t\tif (this.calcFullHeight() <= this.viewportHeight) {\n\t\t\tthis.range = new VerticalRange(0, this.sourceSize);\n\t\t\treturn;\n\t\t}\n\n\t\tconst itemsInViewport = Math.floor(this.viewportHeight / this.rowHeight);\n\n\t\tconst hiddenElements = Math.floor(this.scrollPosition / this.rowHeight);\n\n\t\tconst topMargin = Math.abs(hiddenElements - this.hiddenItemsTop) * this.rowHeight;\n\n\t\tlet start = (hiddenElements - this.hiddenItemsTop);\n\n\t\tconst viewportElements = Math.ceil(this.viewportHeight / this.rowHeight);\n\n\t\tlet end = start + viewportElements + this.hiddenItemsBottom;\n\n\t\tif (end > this.sourceSize) {\n\t\t\tend = this.sourceSize;\n\t\t\tstart = end - itemsInViewport;\n\t\t}\n\n\t\tthis.range = new VerticalRange(start, end);\n\n\t\treturn {\n\t\t\tstart,\n\t\t\tend,\n\t\t\ttopMargin\n\t\t};\n\t}\n\n\tsetEnabled(enabled: boolean): void {\n\t\tthis.enabled = enabled;\n\n\t\t// TODO dispatch aggregate event\n\t\tif (this.enabled && this.viewportHeight === 0) {\n\t\t\tthis.logger.warn('Height needs to be specified in order for virtual scroll to work.');\n\t\t}\n\n\t\tthis.calculateRange();\n\t}\n\n\tsetSourceSize(sourceSize: number = 0): void {\n\t\tthis.sourceSize = sourceSize;\n\t\tthis.calculateRange();\n\t}\n\n\tsetTopHiddenItemsCount(count: number): void {\n\t\tthis.hiddenItemsTop = count;\n\t\tthis.calculateRange();\n\t}\n\n\tsetBottomHiddenItemsCount(count: number): void {\n\t\tthis.hiddenItemsBottom = count;\n\t\tthis.calculateRange();\n\t}\n\n\tsetScrollPosition(scrollPosition: number): void {\n\t\tthis.scrollPosition = scrollPosition;\n\t\tthis.calculateRange();\n\t}\n\n\tsetViewportHeight(height: number): void {\n\t\tthis.viewportHeight = height;\n\t\tthis.calculateRange();\n\t}\n\n\tsetRowHeight(height: number): void {\n\t\tthis.rowHeight = height;\n\t\tthis.calculateRange();\n\t}\n\n\tsetLogger(logger: Logger): void {\n\t\tthis.logger = logger;\n\t}\n\n\tcalcFullHeight(): number {\n\t\treturn this.sourceSize * this.rowHeight;\n\t}\n\n\tgetViewPortHeight(): number {\n\t\treturn this.viewportHeight;\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Logger } from '../../../../../../common/cdk/logger/logger';\nimport { VerticalFormation } from './vertical-formation';\n\n\n@Injectable()\nexport class VerticalFormationFactory {\n\n\tconstructor(private logger: Logger) {\n\t}\n\n\tcreate(enabled: boolean = false,\n\t\t   viewportHeight: number = 0,\n\t\t   sourceSize: number = 0,\n\t\t   scrollPosition: number = 0,\n\t\t   rowHeight?: number,\n\t\t   hiddenItemsTop?: number,\n\t\t   hiddenItemsBottom?: number): VerticalFormation {\n\n\t\tconst vf = new VerticalFormation(\n\t\t\tenabled,\n\t\t\tviewportHeight,\n\t\t\tsourceSize,\n\t\t\tscrollPosition,\n\t\t\trowHeight,\n\t\t\thiddenItemsTop,\n\t\t\thiddenItemsBottom\n\t\t);\n\n\t\tvf.setLogger(this.logger);\n\n\t\treturn vf;\n\t}\n\n}\n","import { RandomStringGenerator } from '@generic-ui/hermes';\n\nimport { FieldId } from './data-type/field.id';\n\nexport class FieldIdGenerator {\n\n\tgenerateId(): FieldId {\n\n\t\tconst id = RandomStringGenerator.generate();\n\t\treturn new FieldId(id);\n\t}\n\n}\n","import { FieldId } from './field.id';\nimport { DataType } from './data-type';\nimport { OriginItemEntity } from '../../../../source/command/origin/origin-item-entity';\nimport { FieldMatcherType } from '../matcher/field.matcher.type';\nimport { FieldMatchers } from '../matcher/field.matchers';\n\nexport abstract class BaseField {\n\n\tprivate readonly id: FieldId;\n\n\t// TODO\n\tprivate readonly accessor: string | any; //(rawData: any) => any;\n\n\tprivate readonly dataType: DataType;\n\n\tprivate readonly accessorMethod: (entity: OriginItemEntity) => any;\n\n\tprivate readonly matchers: FieldMatchers;\n\n\tprotected constructor(id: FieldId,\n\t\t\t\t\t\t  accessor: any,\n\t\t\t\t\t\t  dataType: DataType,\n\t\t\t\t\t\t  matchers: FieldMatchers) {\n\t\tthis.id = id;\n\t\tthis.accessor = accessor;\n\t\tthis.dataType = dataType;\n\t\tthis.matchers = matchers;\n\n\t\tif (typeof accessor === 'string') {\n\t\t\tthis.accessorMethod = (entity: OriginItemEntity) => entity.getData()[accessor];\n\t\t} else if (typeof accessor === 'function') {\n\t\t\tthis.accessorMethod = (entity: OriginItemEntity) => accessor(entity.getData());\n\t\t}\n\n\t}\n\n\tgetId(): FieldId {\n\t\treturn this.id;\n\t}\n\n\tgetKey(): string {\n\t\treturn this.getId().getId();\n\t}\n\n\tgetDataType(): DataType {\n\t\treturn this.dataType;\n\t}\n\n\tgetAccessor(): string {\n\t\treturn this.accessor;\n\t}\n\n\tgetAccessorMethod(): (entity: OriginItemEntity) => any {\n\t\treturn this.accessorMethod;\n\t}\n\n\tgetMatchers(): FieldMatchers {\n\t\treturn this.matchers;\n\t}\n\n\tgetSearchAccessorMethod(): (entity: OriginItemEntity) => any {\n\n\t\tlet matcher: (i: any) => any;\n\n\t\tthis.matchers\n\t\t\t.getSearchMatcher()\n\t\t\t.ifPresent((m: FieldMatcherType) => {\n\t\t\t\tmatcher = m;\n\t\t\t});\n\n\t\tif (matcher) {\n\t\t\treturn (entity) => {\n\t\t\t\tconst val = this.accessorMethod(entity);\n\t\t\t\treturn matcher(val);\n\t\t\t};\n\t\t} else {\n\t\t\treturn (entity) => {\n\t\t\t\treturn this.accessorMethod(entity);\n\t\t\t};\n\t\t}\n\t}\n\n\tgetValue(entity: OriginItemEntity): any {\n\t\treturn this.accessorMethod(entity);\n\t}\n\n\tgetSortValue(entity: OriginItemEntity): any {\n\t\tlet value = this.accessorMethod(entity);\n\n\t\tthis.matchers\n\t\t\t.getSortMatcher()\n\t\t\t.ifPresent((matcher: FieldMatcherType) => {\n\t\t\t\tvalue = matcher(value);\n\t\t\t});\n\n\t\treturn value;\n\t}\n\n\tgetSearchValue(entity: OriginItemEntity): any {\n\t\tlet value = this.accessorMethod(entity);\n\n\t\tthis.matchers\n\t\t\t.getSearchMatcher()\n\t\t\t.ifPresent((matcher: FieldMatcherType) => {\n\t\t\t\tvalue = matcher(value);\n\t\t\t});\n\n\t\treturn value;\n\t}\n\n\n}\n","import { FieldId } from './field.id';\nimport { DataType } from './data-type';\nimport { OriginItemEntity } from '../../../../source/command/origin/origin-item-entity';\nimport { AggregationType } from '../../aggregation/aggregation.type';\nimport { ColumnAggregationConfig } from '../../../../../../composition/domain/column-aggregation.config';\nimport { FieldMatchers } from '../matcher/field.matchers';\nimport { BaseField } from './base.field';\n\nexport abstract class Field<T> extends BaseField {\n\n\tprivate aggregationEnabled: boolean = true;\n\n\tprivate aggregations: AggregationType;\n\n\tprivate readonly possibleAggregations: AggregationType;\n\n\tprotected constructor(id: FieldId,\n\t\t\t\t\t\t  accessor: any,\n\t\t\t\t\t\t  dataType: DataType,\n\t\t\t\t\t\t  matchers: FieldMatchers,\n\t\t\t\t\t\t  aggregationConfig?: ColumnAggregationConfig) {\n\t\tsuper(id,\n\t\t\taccessor,\n\t\t\tdataType,\n\t\t\tmatchers);\n\n\t\tthis.possibleAggregations = this.assignPossibleAggregations();\n\n\t\tthis.assignAggregations(aggregationConfig);\n\t}\n\n\tabstract assignDefaultAggregations(): AggregationType;\n\n\tabstract assignPossibleAggregations(): AggregationType;\n\n\tabstract search(item: OriginItemEntity, searchPhrase: string): boolean;\n\n\tabstract sort(one: T, two: T): number;\n\n\tabstract filter(value: T, filterPhrase: T): boolean;\n\n\tisAggregation(type: AggregationType): boolean {\n\n\t\tif (!this.isAggregationEnabled()) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !!(this.aggregations & type);\n\t}\n\n\tisAggregationEnabled(): boolean {\n\t\treturn this.aggregationEnabled;\n\t}\n\n\tsetAggregationEnabled(enabled: boolean): void {\n\t\tthis.aggregationEnabled = enabled;\n\t}\n\n\tprivate assignAggregations(aggregationConfig: ColumnAggregationConfig): void {\n\n\t\tif (!!aggregationConfig && Object.keys(aggregationConfig).length !== 0) {\n\n\t\t\tif (aggregationConfig.enabled) {\n\t\t\t\tthis.aggregationEnabled = !!aggregationConfig.enabled;\n\t\t\t}\n\n\t\t\tif (aggregationConfig.aggregationTypes) {\n\n\t\t\t\tthis.aggregations = 0;\n\n\t\t\t\taggregationConfig.aggregationTypes.forEach((t) => {\n\t\t\t\t\tthis.aggregations |= t;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.aggregations = this.assignDefaultAggregations();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.aggregations = this.assignDefaultAggregations();\n\t\t}\n\t}\n}\n","import { Field } from '../field';\nimport { FieldId } from '../field.id';\nimport { ColumnAggregationConfig } from '../../../../../../../composition/domain/column-aggregation.config';\nimport { DataType } from '../data-type';\nimport { AggregationType } from '../../../aggregation/aggregation.type';\nimport { FieldMatchers } from '../../matcher/field.matchers';\nimport { OriginItemEntity } from '../../../../../source/command/origin/origin-item-entity';\n\n\nexport class UnknownField extends Field<any> {\n\n\tconstructor(id: FieldId,\n\t\t\t\taccessor: any,\n\t\t\t\tmatchers: FieldMatchers,\n\t\t\t\taggregationConfig?: ColumnAggregationConfig) {\n\t\tsuper(id,\n\t\t\taccessor,\n\t\t\tDataType.UNKNOWN,\n\t\t\tmatchers,\n\t\t\taggregationConfig);\n\t}\n\n\tassignDefaultAggregations(): AggregationType {\n\t\treturn 0;\n\t\t// return AggregationType.COUNT |\n\t\t// \tAggregationType.DISTINCT;\n\t}\n\n\tassignPossibleAggregations(): AggregationType {\n\t\treturn AggregationType.COUNT |\n\t\t\tAggregationType.DISTINCT;\n\t}\n\n\tsearch(item: OriginItemEntity, searchPhrase: string): boolean {\n\t\treturn false;\n\t}\n\n\tsort(one: any, two: any): number {\n\t\treturn 0;\n\t}\n\n\tfilter(value: any, filterPhrase: any): boolean {\n\t\treturn false;\n\t}\n\n}\n","import { Field } from '../field';\nimport { FieldId } from '../field.id';\nimport { ColumnAggregationConfig } from '../../../../../../../composition/domain/column-aggregation.config';\nimport { DataType } from '../data-type';\nimport { AggregationType } from '../../../aggregation/aggregation.type';\nimport { FieldMatchers } from '../../matcher/field.matchers';\nimport { OriginItemEntity } from '../../../../../source/command/origin/origin-item-entity';\n\n\nexport class NumberField extends Field<number> {\n\tconstructor(id: FieldId,\n\t\t\t\taccessor: any,\n\t\t\t\tmatchers: FieldMatchers,\n\t\t\t\taggregationConfig?: ColumnAggregationConfig) {\n\t\tsuper(id,\n\t\t\taccessor,\n\t\t\tDataType.NUMBER,\n\t\t\tmatchers,\n\t\t\taggregationConfig);\n\t}\n\n\tgetField(): NumberField {\n\t\treturn this;\n\t}\n\n\tassignDefaultAggregations(): AggregationType {\n\t\treturn 0;\n\t\t// return AggregationType.COUNT |\n\t\t// \tAggregationType.DISTINCT |\n\t\t// \tAggregationType.SUM |\n\t\t// \tAggregationType.MIN |\n\t\t// \tAggregationType.MAX |\n\t\t// \tAggregationType.AVERAGE |\n\t\t// \tAggregationType.MEDIAN;\n\t}\n\n\tassignPossibleAggregations(): AggregationType {\n\t\treturn AggregationType.COUNT |\n\t\t\tAggregationType.DISTINCT |\n\t\t\tAggregationType.SUM |\n\t\t\tAggregationType.MIN |\n\t\t\tAggregationType.MAX |\n\t\t\tAggregationType.AVERAGE |\n\t\t\tAggregationType.MEDIAN;\n\t}\n\n\tsearch(item: OriginItemEntity, searchPhrase: string): boolean {\n\t\treturn false;\n\t}\n\n\tsort(numOne: number, numTwo: number): number {\n\n\t\tconst sureNumOne = +numOne,\n\t\t\tsureNumTwo = +numTwo;\n\n\t\treturn sureNumOne - sureNumTwo;\n\t}\n\n\tfilter(value: number, filterPhrase: number): boolean {\n\t\treturn value > filterPhrase;\n\t}\n\n}\n","import { Field } from '../field';\nimport { FieldId } from '../field.id';\nimport { ColumnAggregationConfig } from '../../../../../../../composition/domain/column-aggregation.config';\nimport { DataType } from '../data-type';\nimport { AggregationType } from '../../../aggregation/aggregation.type';\nimport { FieldMatchers } from '../../matcher/field.matchers';\nimport { OriginItemEntity } from '../../../../../source/command/origin/origin-item-entity';\n\n\nexport class StringField extends Field<string> {\n\n\tconstructor(id: FieldId,\n\t\t\t\taccessor: any,\n\t\t\t\tmatchers: FieldMatchers,\n\t\t\t\taggregationConfig?: ColumnAggregationConfig) {\n\t\tsuper(id,\n\t\t\taccessor,\n\t\t\tDataType.STRING,\n\t\t\tmatchers,\n\t\t\taggregationConfig);\n\t}\n\n\tassignDefaultAggregations(): AggregationType {\n\t\treturn 0;\n\t\t// return AggregationType.COUNT |\n\t\t// \tAggregationType.DISTINCT;\n\t}\n\n\tassignPossibleAggregations(): AggregationType {\n\t\treturn AggregationType.COUNT |\n\t\t\tAggregationType.DISTINCT;\n\t}\n\n\tsearch(item: OriginItemEntity, searchPhrase: string): boolean {\n\t\tconst value = this.getSearchValue(item);\n\n\t\tif (typeof value === 'string') {\n\t\t\treturn value.toLowerCase().indexOf(searchPhrase.toLowerCase()) > -1;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tsort(strOne: string, strTwo: string): number {\n\t\tconst sureStrOne = '' + strOne,\n\t\t\tsureStrTwo = '' + strTwo;\n\n\t\treturn sureStrOne.localeCompare(sureStrTwo);\n\t}\n\n\tfilter(value: string, filterPhrase: string): boolean {\n\t\treturn value.toLowerCase().indexOf(filterPhrase.toLowerCase()) > -1;\n\t}\n\n}\n","import { Field } from '../field';\nimport { FieldId } from '../field.id';\nimport { ColumnAggregationConfig } from '../../../../../../../composition/domain/column-aggregation.config';\nimport { DataType } from '../data-type';\nimport { AggregationType } from '../../../aggregation/aggregation.type';\nimport { FieldMatchers } from '../../matcher/field.matchers';\nimport { OriginItemEntity } from '../../../../../source/command/origin/origin-item-entity';\n\n\nexport class BooleanField extends Field<boolean> {\n\n\tconstructor(id: FieldId,\n\t\t\t\taccessor: any,\n\t\t\t\tmatchers: FieldMatchers,\n\t\t\t\taggregationConfig?: ColumnAggregationConfig) {\n\t\tsuper(id,\n\t\t\taccessor,\n\t\t\tDataType.BOOLEAN,\n\t\t\tmatchers,\n\t\t\taggregationConfig);\n\t}\n\n\tassignDefaultAggregations(): AggregationType {\n\t\treturn 0;\n\t\t// return AggregationType.COUNT |\n\t\t// \tAggregationType.DISTINCT |\n\t\t// \tAggregationType.TRUTHY |\n\t\t// \tAggregationType.FALSY;\n\t}\n\n\tassignPossibleAggregations(): AggregationType {\n\t\treturn AggregationType.COUNT |\n\t\t\tAggregationType.DISTINCT |\n\t\t\tAggregationType.TRUTHY |\n\t\t\tAggregationType.FALSY;\n\t}\n\n\tsearch(item: OriginItemEntity, searchPhrase: string): boolean {\n\t\treturn false;\n\t}\n\n\tsort(booleanOne: boolean, booleanTwo: boolean): number {\n\n\t\tconst sureBoolOne = !!booleanOne,\n\t\t\tsureBoolTwo = !!booleanTwo;\n\n\t\treturn (sureBoolOne === sureBoolTwo) ? 0 : sureBoolTwo ? -1 : 1;\n\t}\n\n\tfilter(value: boolean, filterPhrase: boolean): boolean {\n\t\treturn value === filterPhrase;\n\t}\n\n}\n","import { Field } from '../field';\nimport { FieldId } from '../field.id';\nimport { ColumnAggregationConfig } from '../../../../../../../composition/domain/column-aggregation.config';\nimport { DataType } from '../data-type';\nimport { AggregationType } from '../../../aggregation/aggregation.type';\nimport { FieldMatchers } from '../../matcher/field.matchers';\nimport { OriginItemEntity } from '../../../../../source/command/origin/origin-item-entity';\n\n\nexport class DateField extends Field<Date> {\n\n\tconstructor(id: FieldId,\n\t\t\t\taccessor: any,\n\t\t\t\tmatchers: FieldMatchers,\n\t\t\t\taggregationConfig?: ColumnAggregationConfig) {\n\t\tsuper(id,\n\t\t\taccessor,\n\t\t\tDataType.DATE,\n\t\t\tmatchers,\n\t\t\taggregationConfig);\n\t}\n\n\tassignDefaultAggregations(): AggregationType {\n\t\treturn 0;\n\t\t// return AggregationType.COUNT |\n\t\t// \tAggregationType.DISTINCT;\n\t}\n\n\tassignPossibleAggregations(): AggregationType {\n\t\treturn AggregationType.COUNT |\n\t\t\tAggregationType.DISTINCT;\n\t}\n\n\tsearch(item: OriginItemEntity, searchPhrase: string): boolean {\n\t\treturn false;\n\t}\n\n\tsort(dateOne: Date, dateTwo: Date): number {\n\t\treturn dateOne as any - (dateTwo as any);\n\t}\n\n\tfilter(value: Date, filterPhrase: Date): boolean {\n\t\treturn false;\n\t}\n\n}\n","import { Optional } from '@generic-ui/hermes';\n\nimport { FieldMatcherType } from './field.matcher.type';\n\nexport class FieldMatchers {\n\n\tconstructor(private readonly matcher?: FieldMatcherType,\n\t\t\t\tprivate readonly sortMatcher?: FieldMatcherType,\n\t\t\t\tprivate readonly searchMatcher?: FieldMatcherType) { // TODO\n\t}\n\n\tgetMatcher(): Optional<FieldMatcherType> {\n\t\treturn Optional.of(this.matcher);\n\t}\n\n\tgetSortMatcher(): Optional<FieldMatcherType> {\n\n\t\tlet matcher;\n\n\t\tif (this.sortMatcher) {\n\t\t\tmatcher = this.sortMatcher;\n\t\t}\n\n\t\tif (this.matcher) {\n\t\t\tmatcher = this.matcher;\n\t\t}\n\n\t\treturn Optional.of(matcher);\n\t}\n\n\tgetSearchMatcher(): Optional<FieldMatcherType> {\n\n\t\tlet matcher;\n\n\t\tif (this.searchMatcher) {\n\t\t\tmatcher = this.searchMatcher;\n\t\t}\n\n\t\tif (this.matcher) {\n\t\t\tmatcher = this.matcher;\n\t\t}\n\n\t\treturn Optional.of(matcher);\n\t}\n}\n","import { Injectable } from '@angular/core';\n\nimport { FieldIdGenerator } from '../field-id.generator';\nimport { ColumnConfig } from '../../../../../../composition/domain/column.config';\nimport { DataType } from './data-type';\nimport { UnknownField } from './fields/unknown-field';\nimport { NumberField } from './fields/number-field';\nimport { StringField } from './fields/string-field';\nimport { BooleanField } from './fields/boolean-field';\nimport { DateField } from './fields/date-field';\nimport { FieldMatchers } from '../matcher/field.matchers';\nimport { AllFieldTypes } from './all-field-types';\n\n\n@Injectable()\nexport class FieldFactory {\n\n\tconstructor(private readonly fieldIdGenerator: FieldIdGenerator) {\n\t}\n\n\tcreate(column: ColumnConfig): AllFieldTypes {\n\n\t\tconst fieldMatchers = this.createMatchers(column);\n\n\t\tlet columnType = column.type;\n\n\t\tif (columnType === undefined) {\n\t\t\tcolumnType = DataType.STRING;\n\t\t}\n\n\t\tif (columnType === DataType.UNKNOWN) {\n\t\t\treturn new UnknownField(this.fieldIdGenerator.generateId(), column.field as string, fieldMatchers, column.aggregation);\n\t\t}\n\n\t\tif (columnType === DataType.NUMBER) {\n\t\t\treturn new NumberField(this.fieldIdGenerator.generateId(), column.field as string, fieldMatchers, column.aggregation);\n\t\t}\n\n\t\tif (columnType === DataType.STRING) {\n\t\t\treturn new StringField(this.fieldIdGenerator.generateId(), column.field as string, fieldMatchers);\n\t\t}\n\n\t\tif (columnType === DataType.BOOLEAN) {\n\t\t\treturn new BooleanField(this.fieldIdGenerator.generateId(), column.field as string, fieldMatchers);\n\t\t}\n\n\t\tif (columnType === DataType.DATE) {\n\t\t\treturn new DateField(this.fieldIdGenerator.generateId(), column.field as string, fieldMatchers);\n\t\t}\n\n\t}\n\n\tprivate createMatchers(column: ColumnConfig): FieldMatchers {\n\n\t\tlet matcher = column.matcher,\n\t\t\tsortMatcher;\n\n\t\tif (column.sorting) {\n\t\t\tsortMatcher = column.sorting.matcher;\n\t\t}\n\n\t\treturn new FieldMatchers(matcher, sortMatcher);\n\t}\n\n\n}\n","import { AllFieldTypes } from './all-field-types';\nimport { DataType } from './data-type';\nimport { NumberField } from './fields/number-field';\nimport { OriginItemEntity } from '../../../../source/command/origin/origin-item-entity';\nimport { BooleanField } from './fields/boolean-field';\nimport { StringField } from './fields/string-field';\nimport { DateField } from './fields/date-field';\nimport { BaseField } from './base.field';\n\n\nexport class TypeField extends BaseField {\n\n\tstatic of(field: AllFieldTypes): TypeField {\n\t\treturn new TypeField(field);\n\t}\n\n\t// private readonly allDataTypes = [\n\t// \t// DataType\n\t// ]\n\n\tprivate readonly field: AllFieldTypes;\n\n\tconstructor(field: AllFieldTypes) {\n\t\tsuper(\n\t\t\tfield.getId(),\n\t\t\tfield.getAccessor(),\n\t\t\tfield.getDataType(),\n\t\t\tfield.getMatchers()\n\t\t);\n\t\tthis.field = field;\n\t}\n\n\tmapNumber<U>(callback: (field: NumberField) => U): U {\n\t\tif (this.field.getDataType() === DataType.NUMBER) {\n\t\t\treturn callback(this.field as NumberField);\n\t\t}\n\t}\n\n\tifNumber(): NumberField {\n\t\tif (this.field.getDataType() === DataType.NUMBER) {\n\t\t\treturn (this.field as NumberField);\n\t\t}\n\t}\n\n\t/**\n\t * @deprecated\n\t */\n\tgetField(): AllFieldTypes {\n\t\treturn this.field;\n\t}\n\n\tsearch(item: OriginItemEntity, searchPhrase: string): boolean {\n\t\treturn this.field.search(item, searchPhrase);\n\t}\n\n\tfilter(item: OriginItemEntity, filterPhrase: any): boolean {\n\n\t\tconst value = this.field.getValue(item);\n\n\t\tif (this.field.getDataType() === DataType.NUMBER) {\n\t\t\treturn (this.field as NumberField).filter(value, filterPhrase);\n\t\t} else if (this.field.getDataType() === DataType.BOOLEAN) {\n\t\t\treturn (this.field as BooleanField).filter(value, filterPhrase);\n\t\t} else if (this.field.getDataType() === DataType.STRING) {\n\t\t\treturn (this.field as StringField).filter(value, filterPhrase);\n\t\t} else if (this.field.getDataType() === DataType.DATE) {\n\t\t\treturn (this.field as DateField).filter(value, filterPhrase);\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tsort(entityOne: OriginItemEntity, entityTwo: OriginItemEntity, direction: boolean): number {\n\n\t\tlet valueOne = direction ? this.field.getSortValue(entityOne) : this.field.getSortValue(entityTwo),\n\t\t\tvalueTwo = direction ? this.field.getSortValue(entityTwo) : this.field.getSortValue(entityOne);\n\n\t\tif (this.field.getDataType() === DataType.NUMBER) {\n\t\t\treturn (this.field as NumberField).sort(valueOne, valueTwo);\n\t\t} else if (this.field.getDataType() === DataType.BOOLEAN) {\n\t\t\treturn (this.field as BooleanField).sort(valueOne, valueTwo);\n\t\t} else if (this.field.getDataType() === DataType.STRING) {\n\t\t\treturn (this.field as StringField).sort(valueOne, valueTwo);\n\t\t} else if (this.field.getDataType() === DataType.DATE) {\n\t\t\treturn (this.field as DateField).sort(valueOne, valueTwo);\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n\n}\n","import { FieldFactory } from './data-type/field.factory';\nimport { FieldId } from './data-type/field.id';\n\nimport { ColumnConfig } from '../../../../../composition/domain/column.config';\nimport { TypeField } from './data-type/type.field';\n\n\nexport class FieldCollection {\n\n\tprivate readonly fields = new Map<string, TypeField>();\n\n\tconstructor(private readonly fieldFactory: FieldFactory) {\n\t}\n\n\tgetField(fieldId: FieldId): TypeField {\n\n\t\tif (fieldId === null) {\n\t\t\treturn this.getAllFields()[0];\n\t\t}\n\n\t\treturn this.fields.get(fieldId.getId());\n\t}\n\n\tgetAllFieldIds(): Array<string> {\n\t\treturn Array.from(this.fields.keys());\n\t}\n\n\tgetAllFields(): Array<TypeField> {\n\t\treturn Array.from(this.fields.values());\n\t}\n\n\tinitFields(columns: Array<ColumnConfig>): void {\n\n\t\tif (!columns) {\n\t\t\treturn;\n\t\t}\n\n\t\tcolumns.forEach((column: ColumnConfig) => {\n\n\t\t\tconst field = this.fieldFactory.create(column);\n\n\t\t\tconst typeField = new TypeField(field);\n\n\t\t\tthis.addField(typeField);\n\t\t});\n\t}\n\n\taddFields(fields: Array<TypeField>): void {\n\t\tfor (let field of fields) {\n\t\t\tthis.addField(field);\n\t\t}\n\t}\n\n\tprivate addField(field: TypeField): void {\n\t\tthis.fields.set(field.getId().toString(), field);\n\t}\n}\n","import { Injectable } from '@angular/core';\n\nimport { FieldFactory } from './data-type/field.factory';\nimport { FieldCollection } from './field.collection';\n\n\n@Injectable()\nexport class FieldCollectionFactory {\n\n\tconstructor(private fieldFactory: FieldFactory) {\n\t}\n\n\tcreate(): FieldCollection {\n\t\treturn new FieldCollection(this.fieldFactory);\n\t}\n\n}\n","import { FilterId } from './filter.id';\nimport { FieldId } from '../field/data-type/field.id';\nimport { OriginItemEntity } from '../../../source/command/origin/origin-item-entity';\nimport { TypeField } from '../field/data-type/type.field';\n\nexport class StructureFilter {\n\n\tprivate readonly filterId: FilterId;\n\n\tprivate field: TypeField;\n\n\tprivate filterValue: any;\n\n\tconstructor(id: FilterId,\n\t\t\t\tfield: TypeField,\n\t\t\t\tfilterValue: any) { // TODO not any\n\t\tthis.filterId = id;\n\t\tthis.field = field;\n\t\tthis.filterValue = filterValue;\n\t}\n\n\tgetFieldId(): FieldId {\n\t\treturn this.field.getId();\n\t}\n\n\tgetFilterValue(): any {\n\t\treturn this.filterValue;\n\t}\n\n\tsetFilterValue(filterValue: any): void {\n\t\tthis.filterValue = filterValue;\n\t}\n\n\t// Move to container\n\tfilter(entities: Array<OriginItemEntity>): Array<OriginItemEntity> {\n\n\t\tif (entities.length === 0) {\n\t\t\treturn entities;\n\t\t}\n\n\t\treturn entities.filter((item: OriginItemEntity) => {\n\t\t\treturn this.field.filter(item, this.filterValue);\n\t\t});\n\t}\n\n}\n","import { TypeField } from '../field/data-type/type.field';\n\nexport class FilterId {\n\n\tprivate readonly id: string;\n\n\tconstructor(field: TypeField,\n\t\t\t\tfilterId: string) {\n\n\t\tconst fieldId = field.getId().toString();\n\n\t\tthis.id = fieldId + '@' + filterId;\n\t}\n\n\tgetId(): string {\n\t\treturn this.id;\n\t}\n}\n","import { FilterConfig } from '../../../../ui-api/structure/filter/filter-config';\nimport { SearchConfig } from '../../../../ui-api/structure/search/search-config';\nimport { QuickFiltersConfig } from '../../../../ui-api/structure/filter/quick-filters.config';\n\nexport class FilterSettings {\n\n\tprivate filteringEnabled: boolean = false;\n\n\tprivate searchEnabled: boolean = false;\n\n\tprivate quickFiltersEnabled: boolean = false;\n\n\tconstructor(filteringEnabled: boolean = false,\n\t\t\t\tsearchEnabled: boolean = false,\n\t\t\t\tquickFiltersEnabled: boolean = false) {\n\t\tthis.filteringEnabled = filteringEnabled;\n\t\tthis.searchEnabled = searchEnabled;\n\t\tthis.quickFiltersEnabled = quickFiltersEnabled;\n\t}\n\n\tisFilteringEnabled(): boolean {\n\t\treturn this.filteringEnabled;\n\t}\n\n\tisQuickFilteringEnabled(): boolean {\n\t\treturn this.quickFiltersEnabled;\n\t}\n\n\tisSearchingEnabled(): boolean {\n\t\treturn this.searchEnabled;\n\t}\n\n\tsetFilterConfig(config: FilterConfig): void {\n\t\tif (config && config.enabled !== undefined && config.enabled !== null) {\n\t\t\tthis.filteringEnabled = config.enabled;\n\t\t}\n\t}\n\n\tsetSearchingConfig(config: SearchConfig): void {\n\t\tif (config && config.enabled !== undefined && config.enabled !== null) {\n\t\t\tthis.searchEnabled = config.enabled;\n\t\t}\n\t}\n\n\tsetQuickFiltersConfig(config: QuickFiltersConfig): void {\n\t\tif (config && config.enabled !== undefined && config.enabled !== null) {\n\t\t\tthis.quickFiltersEnabled = config.enabled;\n\t\t}\n\t}\n\n}\n","import { StructureFilter } from './structure.filter';\nimport { FilterId } from './filter.id';\nimport { OriginItemEntity } from '../../../source/command/origin/origin-item-entity';\nimport { FilterSettings } from './filter.settings';\nimport { TypeField } from '../field/data-type/type.field';\n\n\nexport class FilterManager {\n\n\tprivate readonly filterSettings = new FilterSettings();\n\n\tprivate readonly filters = new Map<string, StructureFilter>();\n\n\tgetAll(): Array<StructureFilter> {\n\t\treturn Array.from(this.filters)\n\t\t\t\t\t.map((arr) => arr[1]);\n\t}\n\n\tgetSettings(): FilterSettings {\n\t\treturn this.filterSettings;\n\t}\n\n\taddFilter(field: TypeField, externalFilterId: string, filterValue: string): void {\n\n\t\tconst filterId = new FilterId(field, externalFilterId),\n\t\t\tfilter = new StructureFilter(filterId, field, filterValue);\n\n\t\tif (filterValue === '') {\n\t\t\tthis.filters.delete(filterId.getId());\n\t\t} else {\n\t\t\tthis.filters.set(filterId.getId(), filter);\n\t\t}\n\t}\n\n\tfilter(entities: Array<OriginItemEntity>): Array<OriginItemEntity> {\n\t\tconst filters = this.getAll();\n\n\t\tlet filteredEntities = [...entities];\n\n\t\tfor (let filter of filters) {\n\t\t\tfilteredEntities = filter.filter(filteredEntities);\n\t\t}\n\n\t\treturn filteredEntities;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { FilterManager } from './filter.manager';\n\n\n@Injectable()\nexport class FilterManagerFactory {\n\n\tcreate(enabled: boolean = false): FilterManager {\n\t\treturn new FilterManager();\n\t}\n}\n","export const AGGREGATION_CALCULATORS = 'GUI - Aggregation Calculators';\n","import { AggregatedValues } from './aggregated.values';\nimport { DataType } from '../../field/data-type/data-type';\nimport { OriginItemEntity } from '../../../../source/command/origin/origin-item-entity';\nimport { AggregationType } from '../aggregation.type';\nimport { AllFieldTypes } from '../../field/data-type/all-field-types';\n\n\nexport abstract class AggregationCalculator<T, A extends AggregatedValues> {\n\n\tabstract forDataType(dataType: DataType): boolean;\n\n\tabstract prepare(field: AllFieldTypes): void;\n\n\tabstract postCalculate(field: AllFieldTypes, items: Array<OriginItemEntity>): void;\n\n\tabstract aggregate(field: AllFieldTypes, value: T): void;\n\n\tabstract generateAggregatedValues(field: AllFieldTypes): A;\n\n\tcalculate(fields: Array<AllFieldTypes>, items: Array<OriginItemEntity>): Map<string, A> {\n\n\t\tconst filteredFields = fields.filter((field: AllFieldTypes) => this.forDataType(field.getDataType()));\n\n\t\tif (!filteredFields || filteredFields.length === 0 || items.length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet count = new Map<string, number>(),\n\t\t\tdistinct = new Map<string, Set<string>>();\n\n\t\t// init\n\t\tfilteredFields.forEach((field: AllFieldTypes) => {\n\n\t\t\tconst key = field.getKey();\n\n\t\t\tcount.set(key, 0);\n\t\t\tdistinct.set(key, new Set());\n\n\t\t\tthis.prepare(field);\n\t\t});\n\n\t\t// calculate\n\t\titems.forEach((item: OriginItemEntity) => {\n\n\t\t\tfilteredFields.forEach((field: AllFieldTypes) => {\n\n\t\t\t\tconst key = field.getKey(),\n\t\t\t\t\tvalue = field.getValue(item);\n\n\t\t\t\tif (value !== null || value !== undefined || value !== '') {\n\n\t\t\t\t\tif (field.isAggregation(AggregationType.COUNT)) {\n\t\t\t\t\t\tconst countForField = count.get(key);\n\t\t\t\t\t\tcount.set(key, countForField + 1);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (field.isAggregation(AggregationType.DISTINCT)) {\n\t\t\t\t\t\tconst distinctSet = distinct.get(key);\n\t\t\t\t\t\tdistinctSet.add(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.aggregate(field, value);\n\t\t\t});\n\t\t});\n\n\t\tfilteredFields.forEach((field: AllFieldTypes) => {\n\n\t\t\tthis.postCalculate(field, items);\n\n\t\t});\n\n\t\tlet aggregations = new Map();\n\n\t\tfilteredFields.forEach((field: AllFieldTypes) => {\n\n\t\t\tconst key = field.getId().getId();\n\n\t\t\tlet aggregatedValues = this.generateAggregatedValues(field);\n\n\t\t\tif (field.isAggregation(AggregationType.COUNT)) {\n\t\t\t\taggregatedValues.setCount(count.get(key));\n\t\t\t}\n\n\t\t\tif (field.isAggregation(AggregationType.DISTINCT)) {\n\t\t\t\taggregatedValues.setDistinct((distinct.get(key)).size);\n\t\t\t}\n\n\t\t\taggregations.set(key, aggregatedValues);\n\t\t});\n\n\t\treturn aggregations;\n\t}\n\n}\n","export abstract class AggregatedValues {\n\n\tpublic count: number;\n\tpublic distinct: number;\n\n\tsetCount(value: number): void {\n\t\tthis.count = value;\n\t}\n\n\tsetDistinct(value: number): void {\n\t\tthis.distinct = value;\n\t}\n\n}\n","import { AggregatedValues } from '../aggregated.values';\n\nexport class BooleanAggregatedValues extends AggregatedValues {\n\n\tpublic readonly truthy: number;\n\n\tpublic readonly falsy: number;\n\n\tconstructor(truthy: number,\n\t\t\t\tfalsy: number) {\n\t\tsuper();\n\t\tthis.truthy = truthy;\n\t\tthis.falsy = falsy;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { AggregationCalculator } from '../aggregation.calculator';\nimport { BooleanAggregatedValues } from './boolean-aggregated.values';\nimport { DataType } from '../../../field/data-type/data-type';\nimport { Field } from '../../../field/data-type/field';\nimport { AggregationType } from '../../aggregation.type';\nimport { OriginItemEntity } from '../../../../../source/command/origin/origin-item-entity';\n\n\n@Injectable()\nexport class BooleanAggregationCalculator extends AggregationCalculator<boolean, BooleanAggregatedValues> {\n\n\tprivate readonly truthy = new Map<string, number>();\n\tprivate readonly falsy = new Map<string, number>();\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tforDataType(dataType: DataType): boolean {\n\t\treturn dataType === DataType.BOOLEAN;\n\t}\n\n\tprepare(field: Field<boolean>): void {\n\n\t\tconst key = field.getKey();\n\n\t\tif (field.isAggregation(AggregationType.TRUTHY)) {\n\t\t\tthis.truthy.set(key, 0);\n\t\t}\n\n\t\tif (field.isAggregation(AggregationType.FALSY)) {\n\t\t\tthis.falsy.set(key, 0);\n\t\t}\n\t}\n\n\tpostCalculate(field: Field<boolean>, items: Array<OriginItemEntity>): void {\n\t}\n\n\taggregate(field: Field<boolean>, value: boolean): void {\n\n\t\tconst booleanValue = value, // (value as any === 'true'),\n\t\t\tkey = field.getKey(),\n\t\t\ttruthyForField = this.truthy.get(key),\n\t\t\tfalsyForField = this.falsy.get(key);\n\n\t\tif (booleanValue) {\n\t\t\tif (field.isAggregation(AggregationType.TRUTHY)) {\n\t\t\t\tthis.truthy.set(key, truthyForField + 1);\n\t\t\t}\n\t\t} else {\n\t\t\tif (field.isAggregation(AggregationType.FALSY)) {\n\t\t\t\tthis.falsy.set(key, falsyForField + 1);\n\t\t\t}\n\t\t}\n\n\t}\n\n\tgenerateAggregatedValues(field: Field<boolean>): BooleanAggregatedValues {\n\n\t\tconst key = field.getKey();\n\n\t\treturn new BooleanAggregatedValues(\n\t\t\tthis.truthy.get(key),\n\t\t\tthis.falsy.get(key)\n\t\t);\n\t}\n\n}\n","import { AggregatedValues } from '../aggregated.values';\n\nexport class DateAggregatedValues extends AggregatedValues {\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { AggregationCalculator } from '../aggregation.calculator';\nimport { DateAggregatedValues } from './date-aggregated.values';\nimport { DataType } from '../../../field/data-type/data-type';\nimport { Field } from '../../../field/data-type/field';\nimport { OriginItemEntity } from '../../../../../source/command/origin/origin-item-entity';\n\n\n@Injectable()\nexport class DateAggregationCalculator extends AggregationCalculator<Date, DateAggregatedValues> {\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tforDataType(dataType: DataType): boolean {\n\t\treturn dataType === DataType.DATE;\n\t}\n\n\tprepare(field: Field<Date>): void {\n\t}\n\n\tpostCalculate(field: Field<Date>, items: Array<OriginItemEntity>): void {\n\t}\n\n\taggregate(field: Field<Date>, value: Date): void {\n\t}\n\n\tgenerateAggregatedValues(field: Field<Date>): DateAggregatedValues {\n\t\treturn new DateAggregatedValues();\n\t}\n\n}\n","import { AggregatedValues } from '../aggregated.values';\n\nexport class NumberAggregatedValues extends AggregatedValues {\n\n\tpublic readonly sum: number;\n\tpublic readonly min: number;\n\tpublic readonly max: number;\n\tpublic readonly average: number;\n\tpublic readonly median: number;\n\n\tconstructor(sum: number,\n\t\t\t\tmin: number,\n\t\t\t\tmax: number,\n\t\t\t\taverage: number,\n\t\t\t\tmedian: number) {\n\t\tsuper();\n\t\tthis.sum = this.setValueWithPrecision(sum);\n\t\tthis.min = this.setValueWithPrecision(min);\n\t\tthis.max = this.setValueWithPrecision(max);\n\t\tthis.average = this.setValueWithPrecision(average);\n\t\tthis.median = this.setValueWithPrecision(median);\n\t}\n\n\tprivate setValueWithPrecision(value: number): number {\n\t\tif (!value && value !== 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (value === 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn +((value).toFixed(2));\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { AggregationCalculator } from '../aggregation.calculator';\nimport { NumberAggregatedValues } from './number-aggregated.values';\nimport { DataType } from '../../../field/data-type/data-type';\nimport { Field } from '../../../field/data-type/field';\nimport { AggregationType } from '../../aggregation.type';\nimport { OriginItemEntity } from '../../../../../source/command/origin/origin-item-entity';\n\n\n@Injectable()\nexport class NumberAggregationCalculator extends AggregationCalculator<number, NumberAggregatedValues> {\n\n\tprivate readonly sum = new Map<string, number>();\n\tprivate readonly min = new Map<string, number>();\n\tprivate readonly max = new Map<string, number>();\n\tprivate readonly average = new Map<string, number>();\n\tprivate readonly median = new Map<string, number>();\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tforDataType(dataType: DataType): boolean {\n\t\treturn dataType === DataType.NUMBER;\n\t}\n\n\tprepare(field: Field<number>): void {\n\n\t\tconst key = field.getKey();\n\n\t\tthis.sum.set(key, 0);\n\t\tthis.min.set(key, Number.MAX_SAFE_INTEGER);\n\t\tthis.max.set(key, 0);\n\t}\n\n\tpostCalculate(field: Field<number>, items: Array<OriginItemEntity>): void {\n\n\t\tconst key = field.getKey();\n\n\t\tif (field.isAggregation(AggregationType.AVERAGE)) {\n\t\t\tthis.average.set(key, this.sum.get(key) / items.length);\n\t\t}\n\n\t\tif (field.isAggregation(AggregationType.MEDIAN)) {\n\t\t\tthis.median.set(key, field.getValue(items[Math.floor(items.length / 2)]));\n\t\t}\n\t}\n\n\taggregate(field: Field<number>, value: number): void {\n\n\t\tconst numberValue = +value,\n\t\t\tkey = field.getKey(),\n\t\t\tsumForField = this.sum.get(key),\n\t\t\tminForField = this.min.get(key),\n\t\t\tmaxForField = this.max.get(key);\n\n\t\tif (field.isAggregation(AggregationType.SUM) || field.isAggregation(AggregationType.AVERAGE)) {\n\t\t\tthis.sum.set(key, sumForField + numberValue);\n\t\t}\n\n\t\tif (field.isAggregation(AggregationType.MIN)) {\n\t\t\tif (minForField > numberValue) {\n\t\t\t\tthis.min.set(key, numberValue);\n\t\t\t}\n\t\t}\n\n\t\tif (field.isAggregation(AggregationType.MAX)) {\n\t\t\tif (maxForField < numberValue) {\n\t\t\t\tthis.max.set(key, numberValue);\n\t\t\t}\n\t\t}\n\n\t}\n\n\tgenerateAggregatedValues(field: Field<number>): NumberAggregatedValues {\n\n\t\tconst key = field.getKey(),\n\t\t\tsum = field.isAggregation(AggregationType.SUM) ? this.sum.get(key) : undefined,\n\t\t\tmin = field.isAggregation(AggregationType.MIN) ? this.min.get(key) : undefined,\n\t\t\tmax = field.isAggregation(AggregationType.MAX) ? this.max.get(key) : undefined,\n\t\t\taverage = field.isAggregation(AggregationType.AVERAGE) ? this.average.get(key) : undefined,\n\t\t\tmedian = field.isAggregation(AggregationType.MEDIAN) ? this.median.get(key) : undefined;\n\n\t\treturn new NumberAggregatedValues(\n\t\t\tsum,\n\t\t\tmin,\n\t\t\tmax,\n\t\t\taverage,\n\t\t\tmedian\n\t\t);\n\t}\n\n}\n","import { AggregatedValues } from '../aggregated.values';\n\nexport class StringAggregatedValues extends AggregatedValues {\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { AggregationCalculator } from '../aggregation.calculator';\nimport { StringAggregatedValues } from './string-aggregated.values';\nimport { DataType } from '../../../field/data-type/data-type';\nimport { Field } from '../../../field/data-type/field';\nimport { OriginItemEntity } from '../../../../../source/command/origin/origin-item-entity';\n\n\n@Injectable()\nexport class StringAggregationCalculator extends AggregationCalculator<string, StringAggregatedValues> {\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tforDataType(dataType: DataType): boolean {\n\t\treturn dataType === DataType.STRING;\n\t}\n\n\tprepare(field: Field<string>): void {\n\t}\n\n\tpostCalculate(field: Field<string>, items: Array<OriginItemEntity>): void {\n\t}\n\n\taggregate(field: Field<string>, value: string): void {\n\t}\n\n\tgenerateAggregatedValues(field: Field<string>): StringAggregatedValues {\n\t\treturn new StringAggregatedValues();\n\t}\n\n}\n","import { AggregatedValues } from '../aggregated.values';\n\nexport class UnknownAggregatedValues extends AggregatedValues {\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { AggregationCalculator } from '../aggregation.calculator';\nimport { UnknownAggregatedValues } from './unknown-aggregated.values';\nimport { DataType } from '../../../field/data-type/data-type';\nimport { Field } from '../../../field/data-type/field';\nimport { OriginItemEntity } from '../../../../../source/command/origin/origin-item-entity';\n\n\n@Injectable()\nexport class UnknownAggregationCalculator extends AggregationCalculator<any, UnknownAggregatedValues> {\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tforDataType(dataType: DataType): boolean {\n\t\treturn dataType === DataType.UNKNOWN;\n\t}\n\n\tprepare(field: Field<any>): void {\n\t}\n\n\tpostCalculate(field: Field<any>, items: Array<OriginItemEntity>): void {\n\t}\n\n\taggregate(field: Field<any>, value: any): void {\n\t}\n\n\tgenerateAggregatedValues(field: Field<any>): UnknownAggregatedValues {\n\t\treturn new UnknownAggregatedValues();\n\t}\n\n}\n","import { AggregateEvent, AggregateId } from '@generic-ui/hermes';\nimport { AggregatedValues } from './calculation/aggregated.values';\n\n\nexport class StructureAggregationsChangedAggregateEvent extends AggregateEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tprivate readonly aggregatedValues: Map<string, AggregatedValues>) {\n\t\tsuper(aggregateId, 'StructureAggregationsChangedAggregateEvent');\n\t}\n\n\tgetAggregations(): Map<string, AggregatedValues> {\n\t\treturn this.aggregatedValues;\n\t}\n}\n","import { AggregateEvent } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../structure-id';\nimport { FieldId } from '../field/data-type/field.id';\nimport { AggregationCalculator } from './calculation/aggregation.calculator';\nimport { OriginItemEntity } from '../../../source/command/origin/origin-item-entity';\nimport { StructureAggregationsChangedAggregateEvent } from './structure.aggregations-changed.aggregate-event';\nimport { TypeField } from '../field/data-type/type.field';\n\n\nexport class AggregationManager {\n\n\tprivate readonly structureId: StructureId;\n\n\tprivate enabled: boolean = false;\n\n\tprivate readonly values = new Map<FieldId, any>();\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly calculators: Array<AggregationCalculator<any, any>>) {\n\t\tthis.structureId = structureId;\n\t}\n\n\tcalculate(fields: Array<TypeField>, entities: Array<OriginItemEntity>): Array<AggregateEvent> {\n\n\t\tif (!this.enabled) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst calculations = new Map();\n\n\t\tthis.calculators.forEach((calc: AggregationCalculator<any, any>) => {\n\n\t\t\tconst allFields = fields.map((typeField: TypeField) => typeField.getField());\n\n\t\t\tconst aggregatedValues = calc.calculate(allFields, entities);\n\n\t\t\tif (aggregatedValues) {\n\t\t\t\tArray.from(aggregatedValues.keys())\n\t\t\t\t\t .forEach((key: any) => {\n\t\t\t\t\t\t calculations.set(key, aggregatedValues.get(key));\n\t\t\t\t\t });\n\t\t\t}\n\t\t});\n\n\t\tif (calculations.size > 0) {\n\t\t\treturn [\n\t\t\t\tnew StructureAggregationsChangedAggregateEvent(this.structureId, calculations)\n\t\t\t];\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\n\t}\n\n\tsetEnabled(enabled: boolean): void {\n\t\tthis.enabled = enabled;\n\t}\n\n\tadd() {\n\t}\n\n\tremove() {\n\t}\n\n\tupdate() {\n\t}\n\n}\n","import { Inject, Injectable } from '@angular/core';\n\nimport { AGGREGATION_CALCULATORS } from './calculation/aggregation.calculators.token';\nimport { AggregationCalculator } from './calculation/aggregation.calculator';\nimport { StructureId } from '../../../structure-id';\nimport { AggregationManager } from './aggregation.manager';\n\n\n@Injectable()\nexport class AggregationManagerFactory {\n\n\tconstructor(@Inject(AGGREGATION_CALCULATORS) private calculators: Array<AggregationCalculator<any, any>>) {\n\t}\n\n\tcreate(structureId: StructureId): AggregationManager {\n\t\treturn new AggregationManager(structureId, this.calculators);\n\t}\n\n}\n","import { Provider, Type } from '@angular/core';\nimport { AGGREGATION_CALCULATORS } from './calculation/aggregation.calculators.token';\nimport { BooleanAggregationCalculator } from './calculation/boolean/boolean-aggregation.calculator';\nimport { DateAggregationCalculator } from './calculation/date/date-aggregation.calculator';\nimport { NumberAggregationCalculator } from './calculation/number/number-aggregation.calculator';\nimport { StringAggregationCalculator } from './calculation/string/string-aggregation.calculator';\nimport { UnknownAggregationCalculator } from './calculation/unknown/unknown-aggregation.calculator';\nimport { AggregationManagerFactory } from './aggregation.manager.factory';\n\n\nexport function provideAggregationCalculator(clazz: Type<any>): Provider {\n\treturn {\n\t\tprovide: AGGREGATION_CALCULATORS,\n\t\tuseClass: clazz,\n\t\tmulti: true\n\t};\n}\n\nexport const aggregationProviders = [\n\tprovideAggregationCalculator(BooleanAggregationCalculator),\n\tprovideAggregationCalculator(DateAggregationCalculator),\n\tprovideAggregationCalculator(NumberAggregationCalculator),\n\tprovideAggregationCalculator(StringAggregationCalculator),\n\tprovideAggregationCalculator(UnknownAggregationCalculator),\n\n\tAggregationManagerFactory\n];\n","import { Injectable } from '@angular/core';\n\nimport { DomainEventHandler } from '@generic-ui/hermes';\nimport { StructureFilterRepository } from './structure.filter.repository';\nimport { StructureConfigFilterSetEvent } from '../../command/filter/config/structure.config-filter-set.event';\n\n\n@Injectable()\nexport class StructureConfigFilterSetEventHandler extends DomainEventHandler {\n\n\tconstructor(private structureFilterRepository: StructureFilterRepository) {\n\t\tsuper();\n\t}\n\n\thandle(event: StructureConfigFilterSetEvent): void {\n\n\t\tif (event instanceof StructureConfigFilterSetEvent) {\n\t\t\tthis.structureFilterRepository.setEnabled(event.getEnabled(), event.getAggregateId());\n\t\t}\n\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { DomainEventHandler } from '@generic-ui/hermes';\n\nimport { StructureSearchingRepository } from './structure.searching.repository';\n\nimport { StructureConfigSearchingSetEvent } from '../../../command/search/config/structure.config-searching-set.event';\n\n\n@Injectable()\nexport class StructureConfigSearchingSetEventHandler extends DomainEventHandler {\n\n\tconstructor(private structureSearchingRepository: StructureSearchingRepository) {\n\t\tsuper();\n\t}\n\n\thandle(event: StructureConfigSearchingSetEvent): void {\n\n\t\tif (event instanceof StructureConfigSearchingSetEvent) {\n\t\t\tthis.structureSearchingRepository.setEnabled(event.getEnabled(), event.getAggregateId());\n\t\t}\n\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { DomainEventHandler } from '@generic-ui/hermes';\n\nimport { StructureQuickFilterRepository } from './structure.quick-filter.repository';\nimport { StructureConfigQuickFilterSetEvent } from '../../command/filter/quick/structure.config-quick-filter-set.event';\n\n\n@Injectable()\nexport class StructureConfigQuickFilterSetEventHandler extends DomainEventHandler {\n\n\tconstructor(private structureQuickFilterRepository: StructureQuickFilterRepository) {\n\t\tsuper();\n\t}\n\n\thandle(event: StructureConfigQuickFilterSetEvent): void {\n\n\t\tif (event instanceof StructureConfigQuickFilterSetEvent) {\n\t\t\tthis.structureQuickFilterRepository.setEnabled(event.getEnabled(), event.getAggregateId());\n\t\t}\n\n\t}\n\n}\n","import { FieldId } from '../../../domain/structure/command/field/data-type/field.id';\nimport { DataType } from '../../../domain/structure/command/field/data-type/data-type';\n\n\nexport class StructureFieldUiModel {\n\n\tconstructor(private readonly id: FieldId,\n\t\t\t\tprivate readonly dataType: DataType) {\n\t}\n\n\tgetId(): string {\n\t\treturn this.id.getId();\n\t}\n\n\tgetDataType(): DataType {\n\t\treturn this.dataType;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { StructureFieldUiModel } from './structure.field.ui-model';\nimport { TypeField } from '../../../domain/structure/command/field/data-type/type.field';\n\n\n@Injectable()\nexport class StructureFieldUiConverter {\n\n\tconvert(fields: Array<TypeField>): Array<StructureFieldUiModel> {\n\t\treturn fields.map((field: TypeField) => {\n\t\t\treturn this.convertOne(field);\n\t\t});\n\t}\n\n\tprivate convertOne(field: TypeField): StructureFieldUiModel {\n\n\t\treturn new StructureFieldUiModel(field.getId(), field.getDataType());\n\t}\n}\n","import { Injectable } from '@angular/core';\n\nimport { DomainEventHandler } from '@generic-ui/hermes';\n\nimport { StructureFieldUiArchive } from './structure.field.ui-archive';\nimport { StructureFieldUiConverter } from './structure.field.ui-converter';\nimport { FieldsInitedEvent } from '../../../domain/structure/command/field/init/fields-inited.event';\n\n\n@Injectable()\nexport class StructureFieldsInitedEventHandler extends DomainEventHandler {\n\n\tconstructor(private structureFieldsRepository: StructureFieldUiArchive,\n\t\t\t\tprivate structureFieldUiConverter: StructureFieldUiConverter) {\n\t\tsuper();\n\t}\n\n\thandle(event: FieldsInitedEvent): void {\n\n\t\tif (event instanceof FieldsInitedEvent) {\n\n\t\t\tconst fields = this.structureFieldUiConverter.convert(event.getFields());\n\n\t\t\tthis.structureFieldsRepository.next(event.getAggregateId(), fields);\n\t\t}\n\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\nimport { DomainEvent, DomainEventBus } from '@generic-ui/hermes';\n\nimport { StructureId } from '../../../domain/structure-id';\nimport { StructureAggregationsChangedEvent } from '../../../domain/structure/command/aggregation/structure.aggregations-changed.event';\n\n\n@Injectable()\nexport class StructureAggregationUiEventsRepository {\n\n\tconstructor(private readonly domainEventBus: DomainEventBus) {\n\t}\n\n\tonAggregationsChanged(structureId: StructureId): Observable<DomainEvent> {\n\n\t\treturn this.domainEventBus\n\t\t\t\t   .pipe(\n\t\t\t\t\t   filter((event: DomainEvent) => event instanceof StructureAggregationsChangedEvent),\n\t\t\t\t\t   filter((event: DomainEvent) => event.getAggregateId().toString() === structureId.toString())\n\t\t\t\t   );\n\t}\n}\n","export class OriginItemEntity {\n\n\tid: string;\n\n\trawData: any;\n\n\tprivate version: number;\n\n\tprivate position: number;\n\n\tconstructor(id: string,\n\t\t\t\trawData: any,\n\t\t\t\tposition: number,\n\t\t\t\tversion: number = 0) {\n\t\tthis.id = id;\n\t\tthis.rawData = rawData;\n\t\tthis.position = position;\n\t\tthis.version = version;\n\t}\n\n\tgetData(): any {\n\t\treturn this.rawData;\n\t}\n\n\tgetVersion(): number {\n\t\treturn this.version;\n\t}\n\n\tgetPosition(): number {\n\t\treturn this.position;\n\t}\n\n\tbumpVersion(): void {\n\t\tthis.version += 1;\n\t}\n\n\tsetPosition(position: number): void {\n\t\tthis.position = position;\n\t}\n\n\tclone(): OriginItemEntity {\n\n\t\tconst rawData = { ...this.rawData };\n\n\t\treturn new OriginItemEntity(this.id, rawData, this.version);\n\t}\n\n}\n","import { AggregateEvent, AggregateId } from '@generic-ui/hermes';\n\nimport { OriginItemEntity } from '../origin-item-entity';\n\nexport class StructureSourceItemEditedAggregateEvent extends AggregateEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tprivate readonly beforeItem: OriginItemEntity,\n\t\t\t\tprivate readonly afterItem: OriginItemEntity) {\n\t\tsuper(aggregateId, 'StructureSourceItemEditedAggregateEvent');\n\t}\n\n\tgetBeforeItem(): OriginItemEntity {\n\t\treturn this.beforeItem;\n\t}\n\n\tgetAfterItem(): OriginItemEntity {\n\t\treturn this.afterItem;\n\t}\n}\n","import { AggregateEvent, AggregateId } from '@generic-ui/hermes';\n\nimport { OriginItemEntity } from './origin-item-entity';\n\nexport class StructureOriginChangedAggregateEvent extends AggregateEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tprivate readonly origin: Array<OriginItemEntity>) {\n\t\tsuper(aggregateId, 'StructureOriginChangedAggregateEvent');\n\t}\n\n\tgetOrigin(): Array<OriginItemEntity> {\n\t\treturn this.origin;\n\t}\n}\n","import { AggregateEvent, RandomStringGenerator } from '@generic-ui/hermes';\n\nimport { OriginItemEntity } from './origin/origin-item-entity';\nimport { StructureId } from '../../structure-id';\nimport { StructureSourceItemEditedAggregateEvent } from './origin/edit/structure.source-item-edited.aggregate-event';\nimport { StructureOriginChangedAggregateEvent } from './origin/structure.origin-changed.aggregate-event';\nimport { TypeField } from '../../structure/command/field/data-type/type.field';\n\n\nexport class SourceManager {\n\n\tprivate loading: boolean = false;\n\n\tprivate fetched: boolean = false;\n\n\tprivate origin: Array<OriginItemEntity>;\n\n\tprivate entities: Array<OriginItemEntity> = [];\n\n\t// Entities after filtering, searching\n\tprivate preparedEntities: Array<OriginItemEntity> = [];\n\n\tprivate slicedEntities: Array<OriginItemEntity> = [];\n\n\tisLoading(): boolean {\n\t\treturn this.loading;\n\t}\n\n\tisFetched(): boolean {\n\t\treturn this.fetched;\n\t}\n\n\tsetLoading(enabled: boolean): void {\n\t\tthis.loading = enabled;\n\t}\n\n\tsetEntities(ent: Array<OriginItemEntity>): void {\n\t\tthis.entities = ent;\n\t\tthis.recalculatePositions();\n\t}\n\n\tgetEntities(): Array<OriginItemEntity> {\n\t\treturn this.entities;\n\t}\n\n\tsetPreparedEntities(): void {\n\t\tthis.preparedEntities = [...this.entities];\n\t}\n\n\tgetPreparedEntities(): Array<OriginItemEntity> {\n\t\treturn this.preparedEntities;\n\t}\n\n\tsetSlicedEntities(ent: Array<OriginItemEntity>) {\n\t\tthis.slicedEntities = ent;\n\t}\n\n\tgetSlicedEntities(): Array<OriginItemEntity> {\n\t\treturn this.slicedEntities;\n\t}\n\n\tsetOrigin(items: Array<any> = [], structureId: StructureId): AggregateEvent {\n\t\tthis.origin = this.convertItems(items);\n\n\t\treturn this.createOriginChangedEvent(structureId);\n\t}\n\n\tsetConvertedOrigin(items: Array<any> = [], structureId: StructureId): AggregateEvent {\n\t\tthis.origin = items;\n\n\t\treturn this.createOriginChangedEvent(structureId);\n\t}\n\n\tgetOrigin(): Array<OriginItemEntity> {\n\t\treturn this.origin;\n\t}\n\n\tgetOriginSize(): number {\n\t\treturn this.origin.length;\n\t}\n\n\t// editOriginItemByProperty(byField, value: any, field: Field, structureId: StructureId): AggregateEvent {\n\t//\n\t// }\n\n\teditOriginItem(itemId: string, value: any, field: TypeField, structureId: StructureId): ReadonlyArray<AggregateEvent> {\n\n\t\tconst item: OriginItemEntity = this.findOriginItem(itemId),\n\t\t\titemBeforeChange = item.clone();\n\n\t\tif (item) {\n\t\t\titem.rawData[field.getAccessor()] = value;\n\t\t\titem.bumpVersion();\n\t\t}\n\n\t\treturn [\n\t\t\tnew StructureSourceItemEditedAggregateEvent(structureId, itemBeforeChange, item.clone()),\n\t\t\tthis.createOriginChangedEvent(structureId)\n\t\t];\n\t}\n\n\tremoveOriginItem(itemId: string, structureId: StructureId): Array<AggregateEvent> {\n\n\t\tconst index = this.findOriginItemIndex(itemId);\n\n\t\tif (index > -1) {\n\n\t\t\tthis.origin.splice(index, 1);\n\n\t\t\treturn [this.createOriginChangedEvent(structureId)];\n\t\t}\n\n\t\treturn [];\n\t}\n\n\tprivate convertItems(items: Array<any>): Array<OriginItemEntity> {\n\t\treturn items.map((item: any, index: number) => {\n\t\t\treturn new OriginItemEntity(RandomStringGenerator.generate(), item, index);\n\t\t});\n\t}\n\n\tprivate createOriginChangedEvent(structureId: StructureId): AggregateEvent {\n\t\treturn new StructureOriginChangedAggregateEvent(structureId, this.origin);\n\t}\n\n\tprivate findOriginItem(itemId: string): OriginItemEntity {\n\t\treturn this.origin.find((item: OriginItemEntity) => item.id === itemId);\n\t}\n\n\tprivate findOriginItemIndex(itemId: string): number {\n\t\treturn this.origin.findIndex((item: OriginItemEntity) => item.id === itemId);\n\t}\n\n\tprivate recalculatePositions(): void {\n\t\tthis.entities.forEach((ent: OriginItemEntity, index: number) => {\n\t\t\tent.setPosition(index);\n\t\t});\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { SourceManager } from './source.manager';\n\n\n@Injectable()\nexport class SourceManagerFactory {\n\n\tcreateDefault(): SourceManager {\n\t\treturn new SourceManager();\n\t}\n\n\tcreate(): SourceManager {\n\t\treturn new SourceManager();\n\t}\n\n}\n","import { SorterId } from './sorter.id';\nimport { OriginItemEntity } from '../../../source/command/origin/origin-item-entity';\nimport { TypeField } from '../field/data-type/type.field';\n\nexport class StructureSorter {\n\n\tprivate readonly sorterId: SorterId;\n\n\tprivate columnId: string;\n\n\tprivate field: TypeField;\n\n\tprivate rank: number = 1;\n\n\tprivate direction: boolean;\n\n\tconstructor(id: SorterId,\n\t\t\t\tfield: TypeField,\n\t\t\t\tdirection: boolean = true) {\n\t\tthis.sorterId = id;\n\t\tthis.field = field;\n\t\tthis.direction = direction;\n\t}\n\n\tgetId(): SorterId {\n\t\treturn this.sorterId;\n\t}\n\n\tgetRank(): number {\n\t\treturn this.rank;\n\t}\n\n\tgetField(): TypeField {\n\t\treturn this.field;\n\t}\n\n\thasDirection(): boolean {\n\t\treturn this.direction;\n\t}\n\n\tchangeDirection(): void {\n\t\tthis.direction = !this.direction;\n\t}\n\n\tsetDirection(direction: boolean): void {\n\t\tthis.direction = direction;\n\t}\n\n\tsort(entities: Array<OriginItemEntity>): Array<OriginItemEntity> {\n\n\t\tif (entities.length === 0) {\n\t\t\treturn entities;\n\t\t}\n\n\t\treturn entities.sort((entityOne: OriginItemEntity, entityTwo: OriginItemEntity) => {\n\t\t\treturn this.field.sort(entityOne, entityTwo, this.direction);\n\t\t});\n\t}\n\n}\n","export class SorterId {\n\n\tprivate readonly sorterId: string;\n\n\tconstructor(id: string) {\n\t\tthis.sorterId = id;\n\t}\n\n\tgetId(): string {\n\t\treturn this.sorterId;\n\t}\n}\n","import { RandomStringGenerator } from '@generic-ui/hermes';\n\nimport { StructureSorter } from './structure.sorter';\nimport { SortingConfig } from '../../../../ui-api/structure/sorting-config';\nimport { SorterId } from './sorter.id';\nimport { FieldId } from '../field/data-type/field.id';\nimport { OriginItemEntity } from '../../../source/command/origin/origin-item-entity';\nimport { SortOrder } from '../../../../../composition/domain/command/column/sort/sort-order';\nimport { TypeField } from '../field/data-type/type.field';\n\n\nexport class SorterCollection {\n\n\tprivate enabled: boolean;\n\n\tprivate multi: boolean;\n\n\tprivate readonly sorters = new Map<string, StructureSorter>();\n\n\tconstructor(enabled: boolean = false,\n\t\t\t\tmulti: boolean = false) {\n\t\tthis.enabled = enabled;\n\t\tthis.multi = multi;\n\t}\n\n\tsetConfig(config: SortingConfig): void {\n\n\t\tif (config && config.enabled !== undefined && config.enabled !== null) {\n\t\t\tthis.enabled = config.enabled;\n\t\t}\n\n\t\tif (config && config.multiSorting !== undefined && config.multiSorting !== null) {\n\t\t\tthis.multi = config.multiSorting;\n\t\t\tthis.sorters.clear();\n\t\t}\n\n\t}\n\n\ttoggle(field: TypeField): void {\n\n\t\tconst fieldId = field.getId(),\n\t\t\tsorter = this.sorters.get(fieldId.getId());\n\n\t\tif (sorter) {\n\t\t\tif (sorter.hasDirection()) {\n\t\t\t\tsorter.changeDirection();\n\t\t\t} else {\n\t\t\t\tthis.delete(fieldId);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.add(field);\n\t\t}\n\n\t}\n\n\tsetSortOrder(field: TypeField, sortOrder: SortOrder): void {\n\n\t\tconst fieldId = field.getId(),\n\t\t\tsorter = this.sorters.get(fieldId.getId());\n\n\t\tif (sortOrder === SortOrder.NONE) {\n\t\t\tthis.delete(fieldId);\n\t\t} else if (sortOrder === SortOrder.ASC || sortOrder === SortOrder.DESC) {\n\n\t\t\tthis.delete(fieldId);\n\n\t\t\tconst direction = sortOrder === SortOrder.ASC;\n\n\t\t\tthis.add(field, direction);\n\t\t}\n\t}\n\n\tadd(field: TypeField, direction = true): void {\n\t\tthis.addSorter(field.getId(), new StructureSorter(new SorterId(RandomStringGenerator.generate()), field, direction));\n\t}\n\n\taddSorter(fieldId: FieldId, sorter: StructureSorter): void {\n\n\t\tif (!this.multi) {\n\t\t\tthis.sorters.clear();\n\t\t}\n\n\t\tthis.sorters.set(fieldId.getId(), sorter);\n\t}\n\n\tdelete(fieldId: FieldId): void {\n\t\tthis.sorters.delete(fieldId.getId());\n\t}\n\n\tupdate(): void {\n\t}\n\n\t// TODO Remove the loop from sorter.sort\n\tsort(entities: Array<OriginItemEntity>): Array<OriginItemEntity> {\n\t\tconst sorters = this.getAll();\n\n\t\tlet sortedEntities = [...entities];\n\n\t\tfor (let sorter of sorters) {\n\t\t\tsortedEntities = sorter.sort(sortedEntities);\n\t\t}\n\n\t\treturn sortedEntities;\n\t}\n\n\tgetAll(): Array<StructureSorter> {\n\n\t\tif (!this.enabled) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn Array.from(this.sorters)\n\t\t\t\t\t.map((arr) => arr[1])\n\t\t\t\t\t.sort((sorterOne: StructureSorter, sorterTwo: StructureSorter) => {\n\t\t\t\t\t\treturn sorterOne.getRank() - sorterTwo.getRank();\n\t\t\t\t\t})\n\t\t\t\t\t.reverse();\n\t}\n}\n","export class FormationAggregate {\n\n\t/**\n\t * In the future this class can be responsible for managing:\n\t * - expanded / collapsed nodes\n\t * - sorting?\n\t * - filtering?\n\t */\n\n\tconstructor(private selectedRows: Array<string>) {\n\t}\n\n\tgetSelectedRows(): Array<string> {\n\t\treturn this.selectedRows;\n\t}\n\n\ttoggleRow(selectedRow: string): void {\n\n\t\tif (this.selectedRows.length > 0) {\n\n\t\t\tif (this.selectedRows[0] === selectedRow) {\n\t\t\t\tthis.selectedRows = [];\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.selectedRows = [selectedRow];\n\t}\n}\n","export class ColumnHeaderEntity {\n\n\tconstructor(private top: boolean,\n\t\t\t\tprivate bottom: boolean) {\n\t}\n\n\tsetHeaderTop(enabled: boolean): void {\n\t\tthis.top = enabled;\n\t}\n\n\tsetHeaderBottom(enabled: boolean): void {\n\t\tthis.bottom = enabled;\n\t}\n\n\tisHeaderOnTop(): boolean {\n\t\treturn this.top;\n\t}\n\n\tisHeaderOnBottom(): boolean {\n\t\treturn this.bottom;\n\t}\n\n}\n","import { ColumnHeaderEntity } from './column-header/column-header.entity';\nimport { SchemaTheme } from '../schema-theme';\nimport { SchemaRowColoring } from '../schema-row-coloring';\nimport { RootAggregate } from '@generic-ui/hermes';\n\n@RootAggregate\nexport class SchemaAggregate {\n\n\tprivate headerHeight = 28; // ?\n\n\tprivate pagerHeight = 35; // ?\n\n\tprivate containerHeight: number;\n\n\tprivate active: boolean = false;\n\n\tprivate horizontalGrid: boolean = true;\n\n\tprivate verticalGrid: boolean = true;\n\n\tprivate columnHeader: ColumnHeaderEntity = new ColumnHeaderEntity(true, false);\n\n\tprivate theme: SchemaTheme = SchemaTheme.GENERIC;\n\n\tprivate rowColoring: SchemaRowColoring = SchemaRowColoring.ODD;\n\n\tconstructor(private width?: number,\n\t\t\t\tprivate height?: number) {\n\t\tthis.calculateContainerHeight();\n\t}\n\n\tgetRowColoring(): SchemaRowColoring {\n\t\treturn this.rowColoring;\n\t}\n\n\tsetHeight(height: number): void {\n\t\tthis.height = height;\n\n\t\tthis.calculateContainerHeight();\n\t}\n\n\tsetTheme(theme: SchemaTheme): void {\n\t\tthis.theme = theme;\n\n\t\tif (theme === SchemaTheme.MATERIAL) {\n\t\t\tthis.rowColoring = SchemaRowColoring.NONE;\n\t\t\tthis.verticalGrid = false;\n\t\t}\n\n\t\tif (theme === SchemaTheme.LIGHT) {\n\t\t\tthis.rowColoring = SchemaRowColoring.NONE;\n\t\t\tthis.verticalGrid = false;\n\t\t}\n\n\t\tif (theme === SchemaTheme.DARK) {\n\t\t\tthis.rowColoring = SchemaRowColoring.NONE;\n\t\t\tthis.verticalGrid = false;\n\t\t}\n\n\t\tif (theme === SchemaTheme.GENERIC) {\n\t\t\tthis.rowColoring = SchemaRowColoring.ODD;\n\t\t}\n\t}\n\n\tsetRowColoring(coloring: SchemaRowColoring): void {\n\t\tthis.rowColoring = coloring;\n\t}\n\n\tgetTheme(): SchemaTheme {\n\t\treturn this.theme;\n\t}\n\n\tgetWidth(): number {\n\t\treturn this.width;\n\t}\n\n\tgetHeight(): number {\n\t\treturn this.height;\n\t}\n\n\tgetContainerHeight(): number {\n\t\treturn this.height;\n\t\t// return this.containerHeight;\n\t}\n\n\tgetColumnHeader(): ColumnHeaderEntity {\n\t\treturn this.columnHeader;\n\t}\n\n\tsetHeaderTop(enabled: boolean): void {\n\t\tthis.getColumnHeader().setHeaderTop(enabled);\n\t}\n\n\tsetHeaderBottom(enabled: boolean): void {\n\t\tthis.getColumnHeader().setHeaderBottom(enabled);\n\t}\n\n\tsetVerticalGrid(enabled: boolean): void {\n\t\tthis.verticalGrid = enabled;\n\t}\n\n\tsetHorizontalGrid(enabled: boolean): void {\n\t\tthis.horizontalGrid = enabled;\n\t}\n\n\tisVerticalGridEnabled(): boolean {\n\t\treturn this.verticalGrid;\n\t}\n\n\tisHorizontalGridEnabled(): boolean {\n\t\treturn this.horizontalGrid;\n\t}\n\n\tprivate getHeaderHeight(): number {\n\t\treturn this.headerHeight;\n\t}\n\n\tprivate getPagerHeight(): number {\n\t\treturn this.pagerHeight;\n\t}\n\n\tprivate calculateContainerHeight(): void {\n\n\t\tif (!this.height) {\n\t\t\tthis.active = false;\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.active = true;\n\t\t}\n\n\t\tthis.containerHeight = this.height - this.getHeaderHeight() - this.getPagerHeight();\n\t}\n\n}\n","import { OriginItemEntity } from '../../../source/command/origin/origin-item-entity';\nimport { DataType } from '../field/data-type/data-type';\nimport { TypeField } from '../field/data-type/type.field';\n\n\nexport class SearchManager {\n\n\tprivate searchFields: Array<TypeField> = [];\n\n\tprivate searchPhrase: string;\n\n\tprivate enabledDataTypes: Array<DataType> = [\n\t\tDataType.STRING\n\t];\n\n\taddSearchPhrase(fields: Array<TypeField>, searchPhrase: string): void {\n\n\t\tif (!searchPhrase) {\n\t\t\tthis.searchFields = [];\n\t\t\treturn;\n\t\t}\n\n\t\tlet searchableFields =\n\t\t\tfields.filter((field: TypeField) => {\n\t\t\t\treturn this.enabledDataTypes.some((dt: DataType) => dt === field.getDataType());\n\t\t\t});\n\n\t\tif (searchableFields.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.searchFields = searchableFields;\n\n\t\tthis.searchPhrase = searchPhrase;\n\t}\n\n\tremoveSearchFilters(): void {\n\t\tthis.searchFields = [];\n\t}\n\n\tsearch(entities: Array<OriginItemEntity>): Array<OriginItemEntity> {\n\n\t\tif (entities.length === 0 || this.searchFields.length === 0) {\n\t\t\treturn entities;\n\t\t}\n\n\t\tlet searchedItems = new Set<OriginItemEntity>();\n\n\t\tfor (let i = 0; i < entities.length; i += 1) {\n\n\t\t\tthis.searchFields\n\t\t\t\t.filter((field: TypeField) => field.search(entities[i], this.searchPhrase))\n\t\t\t\t.forEach(() => {\n\t\t\t\t\tsearchedItems.add(entities[i]);\n\t\t\t\t});\n\t\t}\n\n\t\treturn Array.from(searchedItems);\n\t}\n\n}\n","import { AggregateEvent, AggregateId } from '@generic-ui/hermes';\n\nimport { OriginItemEntity } from '../origin/origin-item-entity';\n\n\nexport class StructurePreparedEntitiesSetAggregateEvent extends AggregateEvent {\n\n\tconstructor(aggregateId: AggregateId,\n\t\t\t\tprivate readonly preparedItems: Array<OriginItemEntity>) {\n\t\tsuper(aggregateId, 'StructurePreparedEntitiesSetAggregateEvent');\n\t}\n\n\tgetPreparedItems(): Array<OriginItemEntity> {\n\t\treturn this.preparedItems;\n\t}\n\n}\n","import { AggregateEvent } from '@generic-ui/hermes';\n\nimport { ColumnConfig } from '../../../../../../composition/domain/column.config';\nimport { StructureId } from '../../../../structure-id';\nimport { TypeField } from '../data-type/type.field';\n\n\nexport class FieldsInitedAggregateEvent extends AggregateEvent {\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tprivate readonly columns: Array<ColumnConfig>, // TODO merge\n\t\t\t\tprivate readonly fields: Array<TypeField>) {\n\t\tsuper(structureId, 'FieldsInitedAggregateEvent');\n\t}\n\n\tgetColumns(): Array<ColumnConfig> {\n\t\treturn this.columns;\n\t}\n\n\tgetFields(): Array<TypeField> {\n\t\treturn this.fields;\n\t}\n}\n","import { Aggregate, AggregateEvent, RootAggregate } from '@generic-ui/hermes';\n\nimport { PagingAggregate } from '../../paging/command/paging.aggregate';\nimport { SourceManager } from '../../source/command/source.manager';\nimport { VerticalFormation } from './vertical-formation/vertical-formation';\nimport { AggregationManager } from './aggregation/aggregation.manager';\nimport { SorterCollection } from './sort/sorter.collection';\nimport { FilterManager } from './filter/filter.manager';\nimport { FieldCollection } from './field/field.collection';\nimport { FormationAggregate } from '../../formation/command/formation-aggregate';\nimport { SchemaAggregate } from '../../schema/command/schema-aggregate';\nimport { StructureId } from '../../structure-id';\nimport { StructureEditSourceItemParams } from '../../source/command/origin/edit/structure.edit-source-item.params';\nimport { PagingConfig } from '../../paging/paging-config';\nimport { OriginItemEntity } from '../../source/command/origin/origin-item-entity';\nimport { ColumnConfig } from '../../../../composition/domain/column.config';\nimport { SortingConfig } from '../../../ui-api/structure/sorting-config';\nimport { FieldId } from './field/data-type/field.id';\nimport { StructureSorter } from './sort/structure.sorter';\nimport { FilterConfig } from '../../../ui-api/structure/filter/filter-config';\nimport { QuickFiltersConfig } from '../../../ui-api/structure/filter/quick-filters.config';\nimport { SearchConfig } from '../../../ui-api/structure/search/search-config';\nimport { SearchManager } from './search/search.manager';\nimport { StructurePreparedEntitiesSetAggregateEvent } from '../../source/command/prepared/structure.prepared-entities-set.aggregate-event';\nimport { SortOrder } from '../../../../composition/domain/command/column/sort/sort-order';\nimport { FieldsInitedAggregateEvent } from './field/init/fields-inited.aggregate-event';\nimport { SchemaTheme } from '../../schema/schema-theme';\n\n@RootAggregate\nexport class StructureAggregate extends Aggregate {\n\n\tprivate formationAggregate: FormationAggregate;\n\n\tprivate schema: SchemaAggregate;\n\n\tprivate pagingAggregate: PagingAggregate;\n\n\tprivate sourceManager: SourceManager;\n\n\tprivate sorterCollection: SorterCollection;\n\n\tprivate filterManager: FilterManager;\n\n\tprivate searchManager: SearchManager;\n\n\tprivate verticalFormation: VerticalFormation;\n\n\tprivate fieldCollection: FieldCollection;\n\n\tprivate aggregationManager: AggregationManager;\n\n\tconstructor(structureId: StructureId,\n\t\t\t\tpagingAggregate: PagingAggregate,\n\t\t\t\tformationAggregate: FormationAggregate,\n\t\t\t\tsourceManager: SourceManager,\n\t\t\t\tverticalFormation: VerticalFormation,\n\t\t\t\taggregationManager: AggregationManager,\n\t\t\t\tsorterCollection: SorterCollection,\n\t\t\t\tfilterCollection: FilterManager,\n\t\t\t\tsearchManager: SearchManager,\n\t\t\t\tfieldCollection: FieldCollection,\n\t\t\t\tschema: SchemaAggregate) {\n\t\tsuper(structureId, 'StructureAggregate');\n\t\tthis.pagingAggregate = pagingAggregate;\n\t\tthis.formationAggregate = formationAggregate;\n\t\tthis.sourceManager = sourceManager;\n\t\tthis.verticalFormation = verticalFormation;\n\t\tthis.aggregationManager = aggregationManager;\n\t\tthis.sorterCollection = sorterCollection;\n\t\tthis.filterManager = filterCollection;\n\t\tthis.searchManager = searchManager;\n\t\tthis.fieldCollection = fieldCollection;\n\t\tthis.schema = schema;\n\t}\n\n\tinit(): void {\n\t\tthis.initTheme();\n\t}\n\n\tgetVerticalFormation(): VerticalFormation {\n\t\treturn this.verticalFormation;\n\t}\n\n\tsetAggregationEnabled(enabled: boolean): ReadonlyArray<AggregateEvent> {\n\n\t\tthis.aggregationManager.setEnabled(enabled);\n\n\t\tthis.calculateSource();\n\n\t\treturn this.getEvents();\n\t}\n\n\tsetOrigin(items: Array<any>): ReadonlyArray<AggregateEvent> {\n\n\t\tthis.addEvent(\n\t\t\tthis.sourceManager.setOrigin(items, this.getId())\n\t\t);\n\n\t\tthis.calculateSource();\n\n\t\treturn this.getEvents();\n\t}\n\n\teditItem(editParams: StructureEditSourceItemParams): ReadonlyArray<AggregateEvent> {\n\n\t\tconst itemId = editParams.getItemId(),\n\t\t\tfieldId = editParams.getColumnFieldId(),\n\t\t\tfield = this.fieldCollection.getField(fieldId as any), // as FieldId\n\t\t\tvalue = editParams.getValue();\n\n\t\tconst editItemEvents = this.sourceManager.editOriginItem(itemId, value, field, this.getId());\n\n\t\teditItemEvents.forEach((e) => this.addEvent(e));\n\n\t\tthis.calculateSource();\n\n\t\treturn this.getEvents();\n\t}\n\n\tsetHeight(height: number): void {\n\t\tthis.getSchema().setHeight(height);\n\n\t\tconst viewportHeight = this.getSchema().getContainerHeight();\n\n\t\tthis.verticalFormation.setViewportHeight(viewportHeight);\n\n\t\tthis.calculateSourceBasedOnVirtualScroll();\n\t}\n\n\tsetTheme(theme: SchemaTheme): void {\n\t\tthis.getSchema().setTheme(theme);\n\n\t\t// #1707 Move to SchemeAggregate\n\t\tif (theme === SchemaTheme.MATERIAL) {\n\t\t\tthis.getVerticalFormation().setRowHeight(52);\n\t\t}\n\n\t\tif (theme === SchemaTheme.GENERIC) {\n\t\t\tthis.getVerticalFormation().setRowHeight(42);\n\t\t}\n\n\t\tif (theme === SchemaTheme.FABRIC) {\n\t\t\tthis.getVerticalFormation().setRowHeight(36);\n\t\t}\n\n\t\tif (theme === SchemaTheme.LIGHT) {\n\t\t\tthis.getVerticalFormation().setRowHeight(56);\n\t\t}\n\n\t\tif (theme === SchemaTheme.DARK) {\n\t\t\tthis.getVerticalFormation().setRowHeight(38);\n\t\t}\n\t}\n\n\tsetFormation(formation: FormationAggregate): void {\n\t\tthis.formationAggregate = formation;\n\t}\n\n\tsetScrollPosition(position: number): void {\n\t\tthis.verticalFormation.setScrollPosition(position);\n\t\tthis.calculateSourceBasedOnVirtualScroll();\n\t}\n\n\tgetFormation(): FormationAggregate {\n\t\treturn this.formationAggregate;\n\t}\n\n\tsetSchema(schema: SchemaAggregate): void {\n\t\tthis.schema = schema;\n\t}\n\n\tgetSchema(): SchemaAggregate {\n\t\treturn this.schema;\n\t}\n\n\tgetPaging(): PagingAggregate {\n\t\treturn this.pagingAggregate;\n\t}\n\n\tchangePaging(config: PagingConfig) {\n\t\tthis.pagingAggregate.change(config);\n\t\tthis.calculateSource();\n\t}\n\n\tsetPaging(paging: PagingAggregate): void {\n\t\tthis.pagingAggregate = paging;\n\t\tthis.calculateSource();\n\t}\n\n\tnextPage(): void {\n\n\t\tthis.pagingAggregate.nextPage();\n\n\t\tthis.calculateSource();\n\t}\n\n\tprevPage(): void {\n\t\tthis.pagingAggregate.prevPage();\n\t\tthis.calculateSource();\n\t}\n\n\tchangePageSize(pageSize: number): ReadonlyArray<AggregateEvent> {\n\n\t\tconst pagingEvents = this.pagingAggregate.changePageSize(pageSize);\n\n\t\t// TODO\n\t\tpagingEvents.forEach((event) => {\n\t\t\tthis.addEvent(event);\n\t\t});\n\n\t\tthis.calculateSource();\n\n\t\treturn this.getEvents();\n\t}\n\n\tgetEntities(): Array<OriginItemEntity> {\n\t\treturn this.sourceManager.getSlicedEntities();\n\t}\n\n\tgetSource(): SourceManager {\n\t\treturn this.sourceManager;\n\t}\n\n\tcreateFields(columns: Array<ColumnConfig>): ReadonlyArray<AggregateEvent> {\n\t\tthis.fieldCollection.initFields(columns);\n\n\t\tconst typeFields = this.fieldCollection.getAllFields();\n\n\t\tthis.addEvent(\n\t\t\tnew FieldsInitedAggregateEvent(this.getId(), columns, typeFields)\n\t\t);\n\n\t\treturn this.getEvents();\n\t}\n\n\tsetSortingConfig(config: SortingConfig): void {\n\t\tthis.sorterCollection.setConfig(config);\n\t}\n\n\ttoggleSort(fieldId: FieldId): Array<StructureSorter> {\n\n\t\tconst field = this.fieldCollection.getField(fieldId);\n\n\t\tthis.sorterCollection.toggle(field);\n\n\t\tthis.calculateSource();\n\n\t\treturn this.sorterCollection.getAll();\n\t}\n\n\tsetSortOrder(fieldId: FieldId, sortOrder: SortOrder): Array<StructureSorter> {\n\n\t\tconst field = this.fieldCollection.getField(fieldId);\n\n\t\tthis.sorterCollection.setSortOrder(field, sortOrder);\n\n\t\tthis.calculateSource();\n\n\t\treturn this.sorterCollection.getAll();\n\t}\n\n\tsetFilterConfig(config: FilterConfig): void {\n\t\tthis.filterManager.getSettings().setFilterConfig(config);\n\t}\n\n\tsetSearchingConfig(config: SearchConfig): void {\n\t\tthis.filterManager.getSettings().setSearchingConfig(config);\n\t}\n\n\tsetQuickFiltersConfig(config: QuickFiltersConfig): void {\n\t\tthis.filterManager.getSettings().setQuickFiltersConfig(config);\n\t}\n\n\ttoggleFilter(fieldId: FieldId, externalFilterId: string, filterValue: string): Array<AggregateEvent> {\n\n\t\tconst field = this.fieldCollection.getField(fieldId);\n\n\t\t// Field not found\n\t\t// TODO throw aggregate event\n\t\tif (field === undefined) {\n\t\t\treturn [];\n\t\t}\n\n\t\tthis.filterManager.addFilter(field, externalFilterId, filterValue);\n\n\t\tthis.calculateSource();\n\n\t\treturn [];\n\t}\n\n\taddSearchPhrase(phrase: string): Array<AggregateEvent> {\n\n\t\tconst fields = this.fieldCollection.getAllFields();\n\n\t\tthis.searchManager.addSearchPhrase(fields, phrase);\n\n\t\tthis.calculateSource();\n\n\t\treturn [];\n\t}\n\n\tremoveSearchPhrase(): Array<AggregateEvent> {\n\n\t\tthis.searchManager.removeSearchFilters();\n\n\t\tthis.calculateSource();\n\n\t\treturn [];\n\t}\n\n\tprivate calculateSource(): void {\n\n\t\tif (!this.sourceManager.getOrigin() || !this.pagingAggregate) {\n\t\t\treturn;\n\t\t}\n\n\t\t// TODO Refactor\n\t\tthis.sourceManager.setEntities(this.sourceManager.getOrigin());\n\n\t\t// filtering\n\t\tthis.sourceManager.setEntities(this.filterManager.filter(this.sourceManager.getEntities()));\n\n\t\t// search\n\t\tconst searchedEntities = this.searchManager.search(this.sourceManager.getEntities());\n\t\tthis.sourceManager.setEntities(searchedEntities);\n\n\t\t// sorting\n\t\tconst ents = this.sorterCollection.sort(this.sourceManager.getEntities());\n\t\tthis.sourceManager.setEntities(ents);\n\n\t\t// calculate filteredEntities\n\t\tthis.sourceManager.setPreparedEntities();\n\n\t\tthis.pagingAggregate.setSourceSize(this.sourceManager.getPreparedEntities().length);\n\n\t\tthis.addEvent(new StructurePreparedEntitiesSetAggregateEvent(this.getId(), ents));\n\n\t\t// aggregations\n\t\tconst aggregationEvents = this.aggregationManager.calculate(\n\t\t\tthis.fieldCollection.getAllFields(),\n\t\t\tthis.sourceManager.getEntities()\n\t\t);\n\n\t\taggregationEvents.forEach((ae: AggregateEvent) => {\n\t\t\tthis.addEvent(ae);\n\t\t});\n\n\t\t// paging\n\t\tthis.sourceManager.setEntities(this.pagingAggregate.sample(this.sourceManager.getEntities()));\n\n\t\tthis.verticalFormation.setSourceSize(this.sourceManager.getEntities().length);\n\n\t\tthis.calculateSourceBasedOnVirtualScroll();\n\t}\n\n\tprivate calculateSourceBasedOnVirtualScroll(): void {\n\n\t\tif (this.verticalFormation.isEnabled()) {\n\n\t\t\tconst range = this.verticalFormation.getRange();\n\n\t\t\tthis.sourceManager.setSlicedEntities(\n\t\t\t\tthis.sourceManager.getEntities().slice(range.getStart(), range.getEnd())\n\t\t\t);\n\t\t} else {\n\t\t\tthis.sourceManager.setSlicedEntities(\n\t\t\t\tthis.sourceManager.getEntities()\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate initTheme() {\n\t\tconst theme = this.getSchema().getTheme();\n\n\t\tthis.setTheme(theme);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { SchemaAggregate } from './schema-aggregate';\n\n\n@Injectable()\nexport class SchemaAggregateFactory {\n\n\tcreate(): SchemaAggregate {\n\t\treturn new SchemaAggregate();\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { FormationAggregate } from './formation-aggregate';\n\n\n@Injectable()\nexport class FormationAggregateFactory {\n\n\tcreate(): FormationAggregate {\n\t\treturn new FormationAggregate([]);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { SearchManager } from './search.manager';\n\n@Injectable()\nexport class SearchManagerFactory {\n\n\tcreate(): SearchManager {\n\t\treturn new SearchManager();\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { PagingAggregateFactory } from '../../paging/command/paging.aggregate-factory';\nimport { SourceManagerFactory } from '../../source/command/source.manager-factory';\nimport { VerticalFormationFactory } from './vertical-formation/vertical-formation.factory';\nimport { AggregationManagerFactory } from './aggregation/aggregation.manager.factory';\nimport { FilterManagerFactory } from './filter/filter.manager-factory';\nimport { FieldCollectionFactory } from './field/field-collection.factory';\nimport { StructureId } from '../../structure-id';\nimport { StructureAggregate } from './structure.aggregate';\nimport { SorterCollection } from './sort/sorter.collection';\nimport { SchemaAggregateFactory } from '../../schema/command/schema.aggregate-factory';\nimport { FormationAggregateFactory } from '../../formation/command/formation.aggregate-factory';\nimport { SearchManagerFactory } from './search/search.manager-factory';\nimport { AggregateFactory } from '@generic-ui/hermes';\n\n\n@Injectable()\nexport class StructureAggregateFactory extends AggregateFactory<StructureAggregate> {\n\n\tconstructor(private readonly pagingAggregateFactory: PagingAggregateFactory,\n\t\t\t\tprivate readonly sourceManagerFactory: SourceManagerFactory,\n\t\t\t\tprivate readonly formationAggregateFactory: FormationAggregateFactory,\n\t\t\t\tprivate readonly verticalFormationFactory: VerticalFormationFactory,\n\t\t\t\tprivate readonly aggregationManagerFactory: AggregationManagerFactory,\n\t\t\t\tprivate readonly filterManagerFactory: FilterManagerFactory,\n\t\t\t\tprivate readonly searchManagerFactory: SearchManagerFactory,\n\t\t\t\tprivate readonly fieldCollectionFactory: FieldCollectionFactory,\n\t\t\t\tprivate readonly schemaAggregateFactory: SchemaAggregateFactory) {\n\t\tsuper();\n\t}\n\n\tcreate(structureId: StructureId): StructureAggregate {\n\n\t\tconst paging = this.pagingAggregateFactory.createDefault(),\n\t\t\tsource = this.sourceManagerFactory.createDefault(),\n\t\t\tverticalFormation = this.verticalFormationFactory.create(),\n\t\t\tformationAggregate = this.formationAggregateFactory.create();\n\n\t\tconst sorterContainer: SorterCollection = new SorterCollection(),\n\t\t\tfilterContainer = this.filterManagerFactory.create(false),\n\t\t\tfieldContainer = this.fieldCollectionFactory.create(),\n\t\t\taggregationManager = this.aggregationManagerFactory.create(structureId),\n\t\t\tschema = this.schemaAggregateFactory.create(),\n\t\t\tsearchManager = this.searchManagerFactory.create();\n\n\t\tconst structureAggregate = new StructureAggregate(structureId,\n\t\t\tpaging,\n\t\t\tformationAggregate,\n\t\t\tsource,\n\t\t\tverticalFormation,\n\t\t\taggregationManager,\n\t\t\tsorterContainer,\n\t\t\tfilterContainer,\n\t\t\tsearchManager,\n\t\t\tfieldContainer,\n\t\t\tschema\n\t\t);\n\n\t\tthis.init(structureAggregate);\n\n\t\treturn structureAggregate;\n\t}\n\n\tinit(structureAggregate: StructureAggregate): void {\n\t\tstructureAggregate.init();\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { StructureAggregateRepository } from '../../../structure/command/structure-aggregate.repository';\n\nimport { SetPagingCommand } from './set-paging.command';\nimport { PagingSetEvent } from './paging-set.event';\nimport { StructureAggregate } from '../../../structure/command/structure.aggregate';\n\n\n@Injectable()\nexport class SetPagingCommandHandler implements CommandHandler<StructureAggregate, SetPagingCommand> {\n\n\tconstructor(private structureAggregateRepository: StructureAggregateRepository,\n\t\t\t\tprivate domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<SetPagingCommand> {\n\t\treturn SetPagingCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: SetPagingCommand): void {\n\t\tthis.domainEventPublisher.publish(new PagingSetEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(structureAggregate: StructureAggregate, command: SetPagingCommand): void {\n\n\t\tconst pagingConfig = command.getPagingConfig();\n\n\t\tstructureAggregate.changePaging(pagingConfig);\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\nimport { NextPageCommand } from './next-page.command';\nimport { NextPageEvent } from './next-page.event';\nimport { StructureAggregate } from '../../../structure/command/structure.aggregate';\n\n\n@Injectable()\nexport class NextPageCommandHandler implements CommandHandler<StructureAggregate, NextPageCommand> {\n\n\tconstructor(private readonly domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<NextPageCommand> {\n\t\treturn NextPageCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: NextPageCommand): void {\n\t\tthis.domainEventPublisher.publish(new NextPageEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(aggregate: StructureAggregate, command: NextPageCommand): void {\n\n\t\t// missing implementation\n\t\taggregate.nextPage();\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { PrevPageCommand } from './prev-page.command';\nimport { PrevPageEvent } from './prev-page.event';\nimport { StructureAggregate } from '../../../structure/command/structure.aggregate';\n\n\n@Injectable()\nexport class PrevPageCommandHandler implements CommandHandler<StructureAggregate, PrevPageCommand> {\n\n\tconstructor(private domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<PrevPageCommand> {\n\t\treturn PrevPageCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: PrevPageCommand): void {\n\t\tthis.domainEventPublisher.publish(new PrevPageEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(structure: StructureAggregate, command: PrevPageCommand): void {\n\n\t\tstructure.prevPage();\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { AggregateEvent, CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { StructureAggregateRepository } from '../../../structure/command/structure-aggregate.repository';\nimport { ChangePagesizeCommand } from './change-pagesize.command';\nimport { PageChangedEvent } from '../page/page-changed.event';\nimport { PagesizeChangedEvent } from './pagesize-changed.event';\nimport { StructureAggregate } from '../../../structure/command/structure.aggregate';\n\n\n@Injectable()\nexport class ChangePagesizeCommandHandler implements CommandHandler<StructureAggregate, ChangePagesizeCommand> {\n\n\tconstructor(private structureAggregateRepository: StructureAggregateRepository,\n\t\t\t\tprotected domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<ChangePagesizeCommand> {\n\t\treturn ChangePagesizeCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: ChangePagesizeCommand): void {\n\n\t\tconst aggregateEvents = aggregate.getEvents();\n\n\t\t(aggregateEvents as any).forEach((event: AggregateEvent) => {\n\t\t\t(event as any).aggregateId = aggregate.getId();\n\t\t});\n\n\t\tthis.publishAggregateEvents(aggregateEvents, command);\n\t}\n\n\thandleAggregate(structureAggregate: StructureAggregate, command: ChangePagesizeCommand): void {\n\n\t\tconst pageSize = command.getPageSize();\n\n\t\tstructureAggregate.changePageSize(pageSize);\n\t}\n\n\tprivate publishAggregateEvents(events: ReadonlyArray<AggregateEvent>, command: ChangePagesizeCommand): void {\n\n\t\tfor (let event of events) {\n\t\t\tthis.publishAggregateEvent(event, command);\n\t\t}\n\t}\n\n\tprivate publishAggregateEvent(event: AggregateEvent, command: ChangePagesizeCommand): void {\n\n\t\tswitch (event.getType()) {\n\t\t\tcase 'PageChangedAggregateEvent':\n\n\t\t\t\tconst pageChangedEvent = new PageChangedEvent(command.getAggregateId());\n\n\t\t\t\tthis.domainEventPublisher.publish(pageChangedEvent);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PagesizeChangedAggregateEvent':\n\n\t\t\t\tconst pagesizeChangedEvent = new PagesizeChangedEvent(command.getAggregateId());\n\n\t\t\t\tthis.domainEventPublisher.publish(pagesizeChangedEvent);\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","import { HermesModule } from '@generic-ui/hermes';\n\nimport { PagingDispatcher } from '../../domain/paging/command/paging.dispatcher';\nimport { SetPagingCommandHandler } from '../../domain/paging/command/set/set-paging.command-handler';\nimport { NextPageCommandHandler } from '../../domain/paging/command/next-page/next-page.command-handler';\nimport { PrevPageCommandHandler } from '../../domain/paging/command/prev-page/prev-page.command-handler';\nimport { ChangePagesizeCommandHandler } from '../../domain/paging/command/change-pagesize/change-pagesize.command-handler';\nimport { PagingRepository } from '../../domain/paging/read/paging.repository';\nimport { PagingAggregateFactory } from '../../domain/paging/command/paging.aggregate-factory';\nimport { PagingConverter } from '../../domain/paging/paging.converter';\nimport { PagingCommandService } from './paging-command.service';\nimport { PagingReadModelService } from './paging-read-model.service';\nimport { PagingEventService } from './paging-event.service';\n\n\nconst commandProviders = [\n\tPagingDispatcher\n];\n\nconst readProviders = [\n\tPagingRepository\n];\n\nexport const pagingCommandHandlers = [\n\t...HermesModule.registerCommandHandler(SetPagingCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(NextPageCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(PrevPageCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(ChangePagesizeCommandHandler, 'StructureAggregate')\n];\n\nexport const pagingProviders = [\n\t...commandProviders,\n\t...readProviders,\n\n\tPagingAggregateFactory,\n\tPagingConverter,\n\n\tPagingCommandService,\n\tPagingReadModelService,\n\tPagingEventService\n];\n","import { Injectable, Type } from '@angular/core';\n\nimport { Command, CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { SetSchemaVerticalGridCommand } from './set-schema-vertical-grid.command';\nimport { SchemaVerticalGridSetEvent } from './schema-vertical-grid-set.event';\nimport { StructureAggregate } from '../../../../structure/command/structure.aggregate';\n\n\n@Injectable()\nexport class SetSchemaVerticalGridCommandHandler implements CommandHandler<StructureAggregate, SetSchemaVerticalGridCommand> {\n\n\tconstructor(private domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<SetSchemaVerticalGridCommand> {\n\t\treturn SetSchemaVerticalGridCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: Command): void {\n\t\tthis.domainEventPublisher.publish(new SchemaVerticalGridSetEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(aggregate: StructureAggregate, command: SetSchemaVerticalGridCommand): void {\n\n\t\tconst enabled = command.isEnabled(),\n\t\t\tschema = aggregate.getSchema();\n\n\t\tschema.setVerticalGrid(enabled);\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { SetSchemaHorizontalGridCommand } from './set-schema-horizontal-grid.command';\nimport { SchemaHorizontalGridSetEvent } from './schema-horizontal-grid-set.event';\nimport { StructureAggregate } from '../../../../structure/command/structure.aggregate';\n\n\n@Injectable()\nexport class SetSchemaHorizontalGridCommandHandler implements CommandHandler<StructureAggregate, SetSchemaHorizontalGridCommand> {\n\n\tconstructor(private domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<SetSchemaHorizontalGridCommand> {\n\t\treturn SetSchemaHorizontalGridCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: SetSchemaHorizontalGridCommand): void {\n\t\tthis.domainEventPublisher.publish(new SchemaHorizontalGridSetEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(aggregate: StructureAggregate, command: SetSchemaHorizontalGridCommand): void {\n\n\t\tconst schema = aggregate.getSchema(),\n\t\t\tenabled = command.isEnabled();\n\n\t\tschema.setHorizontalGrid(enabled);\n\t}\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { Command, CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { StructureAggregateRepository } from '../../../structure/command/structure-aggregate.repository';\nimport { SetSchemaThemeCommand } from './set-schema-theme.command';\nimport { SchemaThemeSetEvent } from './schema-theme-set.event';\nimport { StructureAggregate } from '../../../structure/command/structure.aggregate';\n\n@Injectable()\nexport class SetSchemaThemeCommandHandler implements CommandHandler<StructureAggregate, SetSchemaThemeCommand> {\n\n\tconstructor(private structureAggregateRepository: StructureAggregateRepository,\n\t\t\t\tprivate domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<SetSchemaThemeCommand> {\n\t\treturn SetSchemaThemeCommand;\n\t}\n\n\thandleAggregate(structure: StructureAggregate, command: SetSchemaThemeCommand): void {\n\n\t\tconst theme = command.getTheme();\n\n\t\tstructure.setTheme(theme);\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: Command): void {\n\t\tthis.domainEventPublisher.publish(new SchemaThemeSetEvent(command.getAggregateId()));\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { ChangeSchemaBottomHeaderCommand } from './change-schema-bottom-header.command';\nimport { SchemaBottomHeaderChangedEvent } from './schema-bottom-header-changed.event';\nimport { StructureAggregate } from '../../../../structure/command/structure.aggregate';\n\n\n@Injectable()\nexport class ChangeSchemaBottomHeaderCommandHandler implements CommandHandler<StructureAggregate, ChangeSchemaBottomHeaderCommand> {\n\n\tconstructor(private domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<ChangeSchemaBottomHeaderCommand> {\n\t\treturn ChangeSchemaBottomHeaderCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: ChangeSchemaBottomHeaderCommand): void {\n\t\tthis.domainEventPublisher.publish(new SchemaBottomHeaderChangedEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(structure: StructureAggregate, command: ChangeSchemaBottomHeaderCommand): void {\n\n\t\tconst schema = structure.getSchema(),\n\t\t\tenabled = command.isEnabled();\n\n\t\tschema.setHeaderBottom(enabled);\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { StructureAggregateRepository } from '../../../../structure/command/structure-aggregate.repository';\nimport { ChangeSchemaTopHeaderCommand } from './change-schema-top-header.command';\nimport { SchemaTopHeaderChangedEvent } from './schema-top-header-changed.event';\nimport { StructureAggregate } from '../../../../structure/command/structure.aggregate';\n\n\n@Injectable()\nexport class ChangeSchemaTopHeaderCommandHandler implements CommandHandler<StructureAggregate, ChangeSchemaTopHeaderCommand> {\n\n\tconstructor(private structureAggregateRepository: StructureAggregateRepository,\n\t\t\t\tprivate domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<ChangeSchemaTopHeaderCommand> {\n\t\treturn ChangeSchemaTopHeaderCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: ChangeSchemaTopHeaderCommand): void {\n\t\tthis.domainEventPublisher.publish(new SchemaTopHeaderChangedEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(aggregate: StructureAggregate, command: ChangeSchemaTopHeaderCommand): void {\n\n\t\tconst schema = aggregate.getSchema(),\n\t\t\tenabled = command.isEnabled();\n\n\t\tschema.setHeaderTop(enabled);\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { Command, CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { SetRowColoringCommand } from './set-row-coloring.command';\nimport { RowColoringSetEvent } from './row-coloring-set.event';\nimport { StructureAggregate } from '../../../../structure/command/structure.aggregate';\n\n\n@Injectable()\nexport class SetRowColoringCommandHandler implements CommandHandler<StructureAggregate, SetRowColoringCommand> {\n\n\tconstructor(private domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<SetRowColoringCommand> {\n\t\treturn SetRowColoringCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: Command): void {\n\t\tthis.domainEventPublisher.publish(new RowColoringSetEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(structure: StructureAggregate, command: SetRowColoringCommand): void {\n\n\t\t// missing implementation\n\t\tconst schema = structure.getSchema(),\n\t\t\tcoloring = command.getColoring();\n\n\t\tschema.setRowColoring(coloring);\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { SetSchemaCommand } from './set-schema.command';\nimport { SchemaSetEvent } from './schema-set.event';\nimport { StructureAggregate } from '../../../structure/command/structure.aggregate';\n\n\n@Injectable()\nexport class SetSchemaCommandHandler implements CommandHandler<StructureAggregate, SetSchemaCommand> {\n\n\tconstructor(private domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<SetSchemaCommand> {\n\t\treturn SetSchemaCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: SetSchemaCommand): void {\n\t\tthis.domainEventPublisher.publish(new SchemaSetEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(aggregate: StructureAggregate, command: SetSchemaCommand): void {\n\n\t\tconst height = command.getHeight();\n\n\t\taggregate.setHeight(height);\n\t}\n\n}\n","import { HermesModule } from '@generic-ui/hermes';\n\nimport { SchemaDispatcher } from '../../domain/schema/command/schema.dispatcher';\nimport { SetSchemaVerticalGridCommandHandler } from '../../domain/schema/command/grid/vertical/set-schema-vertical-grid.command-handler';\nimport { SetSchemaHorizontalGridCommandHandler } from '../../domain/schema/command/grid/horizontal/set-schema-horizontal-grid.command-handler';\nimport { SetSchemaThemeCommandHandler } from '../../domain/schema/command/theme/set-schema-theme.command-handler';\nimport { ChangeSchemaBottomHeaderCommandHandler } from '../../domain/schema/command/column-header/bottom/change-schema-bottom-header.command-handler';\nimport { ChangeSchemaTopHeaderCommandHandler } from '../../domain/schema/command/column-header/top/change-schema-top-header.command-handler';\nimport { SetRowColoringCommandHandler } from '../../domain/schema/command/coloring/set/set-row-coloring.command-handler';\nimport { SetSchemaCommandHandler } from '../../domain/schema/command/set/set-schema.command-handler';\nimport { SchemaRepository } from '../../domain/schema/read/schema-repository';\nimport { SchemaConverter } from '../../domain/schema/schema.converter';\nimport { SchemaCommandService } from './schema-command.service';\nimport { SchemaReadModelService } from './schema-read-model.service';\nimport { SchemaAggregateFactory } from '../../domain/schema/command/schema.aggregate-factory';\n\n\nconst commandProviders = [\n\tSchemaDispatcher,\n\tSchemaAggregateFactory\n];\n\nconst readProviders = [\n\tSchemaRepository\n];\n\nexport const schemaCommandHandlers = [\n\t...HermesModule.registerCommandHandler(SetSchemaCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(SetSchemaVerticalGridCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(SetSchemaHorizontalGridCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(SetSchemaThemeCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(ChangeSchemaBottomHeaderCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(ChangeSchemaTopHeaderCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(SetRowColoringCommandHandler, 'StructureAggregate')\n];\n\nexport const schemaProviders = [\n\t...commandProviders,\n\t...readProviders,\n\n\tSchemaConverter,\n\n\tSchemaCommandService,\n\tSchemaReadModelService\n\n];\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { SetFormationCommand } from './set-formation.command';\nimport { FormationSetEvent } from './formation-set.event';\nimport { StructureAggregate } from '../../../structure/command/structure.aggregate';\n\n\n@Injectable()\nexport class SetFormationCommandHandler implements CommandHandler<StructureAggregate, SetFormationCommand> {\n\n\tconstructor(private readonly domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<SetFormationCommand> {\n\t\treturn SetFormationCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: SetFormationCommand): void {\n\t\tthis.domainEventPublisher.publish(new FormationSetEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(aggregate: StructureAggregate, command: SetFormationCommand): void {\n\n\t\t// missing implementation\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { StructureAggregateRepository } from '../../../structure/command/structure-aggregate.repository';\nimport { ToggleSelectedRowCommand } from './toggle-selected-row.command';\nimport { SelectedRowToggledEvent } from './selected-row-toggled.event';\nimport { StructureAggregate } from '../../../structure/command/structure.aggregate';\n\n\n@Injectable()\nexport class ToggleSelectedRowCommandHandler implements CommandHandler<StructureAggregate, ToggleSelectedRowCommand> {\n\n\tconstructor(private structureAggregateRepository: StructureAggregateRepository,\n\t\t\t\tprivate domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<ToggleSelectedRowCommand> {\n\t\treturn ToggleSelectedRowCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: ToggleSelectedRowCommand): void {\n\t\tthis.domainEventPublisher.publish(new SelectedRowToggledEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(aggregate: StructureAggregate, command: ToggleSelectedRowCommand): void {\n\n\t\tconst formation = aggregate.getFormation(),\n\t\t\tselectedRow = command.getSelectedRow();\n\n\t\tformation.toggleRow(selectedRow);\n\t}\n\n}\n","import { HermesModule } from '@generic-ui/hermes';\n\nimport { FormationDispatcher } from '../../domain/formation/command/formation.dispatcher';\nimport { SetFormationCommandHandler } from '../../domain/formation/command/set/set-formation.command-handler';\nimport { ToggleSelectedRowCommandHandler } from '../../domain/formation/command/toggle/toggle-selected-row.command-handler';\nimport { FormationRepository } from '../../domain/formation/read/formation-repository';\nimport { FormationAggregateFactory } from '../../domain/formation/command/formation.aggregate-factory';\nimport { FormationConverter } from '../../domain/formation/formation.converter';\nimport { FormationEventService } from './formation-event.service';\nimport { FormationCommandService } from './formation-command.service';\nimport { FormationReadModelService } from './formation-read-model.service';\n\nconst commandProviders = [\n\tFormationDispatcher,\n\tFormationAggregateFactory\n];\n\nconst readProviders = [\n\tFormationRepository\n];\n\nexport const formationCommandHandlers = [\n\t...HermesModule.registerCommandHandler(SetFormationCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(ToggleSelectedRowCommandHandler, 'StructureAggregate')\n];\n\nexport const formationProviders = [\n\t...commandProviders,\n\t...readProviders,\n\n\tFormationEventService,\n\n\tFormationConverter,\n\n\tFormationCommandService,\n\tFormationReadModelService\n];\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler } from '@generic-ui/hermes';\nimport { StructureSourceDomainEventPublisher } from '../../structure.source.domain-event.publisher';\nimport { StructureAggregate } from '../../../../structure/command/structure.aggregate';\n\nimport { SetOriginCommand } from './set-origin.command';\n\n\n@Injectable()\nexport class SetOriginCommandHandler implements CommandHandler<StructureAggregate, SetOriginCommand> {\n\n\tconstructor(private structureSourceDomainEventPublisher: StructureSourceDomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<SetOriginCommand> {\n\t\treturn SetOriginCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: SetOriginCommand): void {\n\n\t\tconst aggregateEvents = aggregate.getEvents();\n\n\t\tthis.structureSourceDomainEventPublisher.publish(aggregateEvents);\n\t}\n\n\thandleAggregate(structure: StructureAggregate, command: SetOriginCommand): void {\n\n\t\tconst items = command.getItems();\n\n\t\tstructure.setOrigin(items);\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler } from '@generic-ui/hermes';\n\nimport { StructureEditSourceItemCommand } from './structure.edit-source-item.command';\nimport { StructureSourceDomainEventPublisher } from '../../structure.source.domain-event.publisher';\nimport { StructureAggregate } from '../../../../structure/command/structure.aggregate';\n\n\n@Injectable()\nexport class StructureEditSourceItemCommandHandler implements CommandHandler<StructureAggregate, StructureEditSourceItemCommand> {\n\n\tconstructor(private structureSourceDomainEventPublisher: StructureSourceDomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<StructureEditSourceItemCommand> {\n\t\treturn StructureEditSourceItemCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: StructureEditSourceItemCommand): void {\n\n\t\tconst aggregateEvents = aggregate.getEvents();\n\n\t\tthis.structureSourceDomainEventPublisher.publish(aggregateEvents);\n\t}\n\n\thandleAggregate(structure: StructureAggregate, command: StructureEditSourceItemCommand): void {\n\n\t\tconst params = command.getParams();\n\n\t\tstructure.editItem(params);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { DomainEventHandler } from '@generic-ui/hermes';\nimport { StructureSourceOriginRepository } from './structure.source-origin.repository';\nimport { OriginSetEvent } from '../../command/origin/set-origin/origin-set.event';\n\n\n@Injectable()\nexport class StructureOriginChangedEventHandler extends DomainEventHandler {\n\n\tconstructor(private structureSourceOriginRepository: StructureSourceOriginRepository) {\n\t\tsuper();\n\t}\n\n\thandle(event: OriginSetEvent): void {\n\n\t\tif (event instanceof OriginSetEvent) {\n\t\t\tconst origin = event.getOrigin();\n\n\t\t\tthis.structureSourceOriginRepository.setOrigin(origin, event.getAggregateId());\n\t\t}\n\n\t}\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\n\nimport { StructureRepository } from '../../structure/read/structure.repository';\nimport { StructureId } from '../../structure-id';\nimport { Schema } from '../../schema/read/schema';\nimport { Structure } from '../../structure/read/structure';\n\n\n@Injectable()\nexport class SourceRepository {\n\n\tconstructor(private structureRepository: StructureRepository) {\n\t}\n\n\tselect(structureId: StructureId): Observable<Schema> {\n\n\t\treturn this.structureRepository\n\t\t\t\t   .onStructure(structureId)\n\t\t\t\t   .pipe(\n\t\t\t\t\t   filter((structure: Structure) => structure.getId().toString() === structureId.toString()),\n\t\t\t\t\t   map((structure: Structure) => structure.getSchema())\n\t\t\t\t   );\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { SetSourceLoadingEvent } from './set-source-loading.event';\nimport { SourceSetLoadingCommand } from './source-set-loading.command';\nimport { StructureAggregate } from '../../../structure/command/structure.aggregate';\n\n\n@Injectable()\nexport class SourceSetLoadingCommandHandler implements CommandHandler<StructureAggregate, SourceSetLoadingCommand> {\n\n\tconstructor(private domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<SourceSetLoadingCommand> {\n\t\treturn SourceSetLoadingCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: SourceSetLoadingCommand): void {\n\t\tthis.domainEventPublisher.publish(new SetSourceLoadingEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(aggregate: StructureAggregate, command: SourceSetLoadingCommand): void {\n\n\t\tconst enabled = command.isEnabled(),\n\t\t\tsource = aggregate.getSource();\n\n\t\tsource.setLoading(enabled);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { DomainEventHandler } from '@generic-ui/hermes';\n\nimport { StructurePreparedEntitiesSetEvent } from '../../command/prepared/structure.prepared-entities-set.event';\nimport { StructurePreparedItemsRepository } from './structure.prepared-items.repository';\n\n\n@Injectable()\nexport class StructurePreparedItemsEventHandler extends DomainEventHandler {\n\n\tconstructor(private structurePreparedItemsRepository: StructurePreparedItemsRepository) {\n\t\tsuper();\n\t}\n\n\thandle(event: StructurePreparedEntitiesSetEvent): void {\n\n\t\tif (event instanceof StructurePreparedEntitiesSetEvent) {\n\n\t\t\tconst preparedItems = event.getPreparedItems();\n\n\t\t\tthis.structurePreparedItemsRepository.setItems(preparedItems, event.getAggregateId());\n\t\t}\n\n\t}\n}\n","import { DOMAIN_EVENT_HANDLERS, HermesModule } from '@generic-ui/hermes';\nimport { SourceDispatcher } from '../../domain/source/command/source.dispatcher';\nimport { SourceManagerFactory } from '../../domain/source/command/source.manager-factory';\nimport { SetOriginCommandHandler } from '../../domain/source/command/origin/set-origin/set-origin.command-handler';\nimport { StructureEditSourceItemCommandHandler } from '../../domain/source/command/origin/edit/structure.edit-source-item.command-handler';\nimport { StructureSourceDomainEventPublisher } from '../../domain/source/command/structure.source.domain-event.publisher';\nimport { StructureOriginChangedEventHandler } from '../../domain/source/read/origin/structure.origin-changed.event-handler';\nimport { SourceConverter } from '../../domain/source/source.converter';\nimport { SourceCommandService } from './source-command.service';\nimport { SourceReadModelService } from './source-read-model.service';\nimport { SourceEventService } from './event/source-event.service';\nimport { SourceRepository } from '../../domain/source/read/source.repository';\nimport { StructureSourceOriginRepository } from '../../domain/source/read/origin/structure.source-origin.repository';\nimport { SourceSetLoadingCommandHandler } from '../../domain/source/command/loading/source-set-loading.command-handler';\nimport { StructurePreparedItemsRepository } from '../../domain/source/read/prepared/structure.prepared-items.repository';\nimport { StructurePreparedItemsEventHandler } from '../../domain/source/read/prepared/structure.prepared-items.event-handler';\n\n\nconst commandProviders = [\n\tSourceDispatcher,\n\tSourceManagerFactory,\n\tStructureSourceDomainEventPublisher\n];\n\nconst readProviders = [\n\tSourceRepository,\n\t{\n\t\tprovide: DOMAIN_EVENT_HANDLERS,\n\t\tuseClass: StructureOriginChangedEventHandler,\n\t\tmulti: true\n\t}, {\n\t\tprovide: DOMAIN_EVENT_HANDLERS,\n\t\tuseClass: StructurePreparedItemsEventHandler,\n\t\tmulti: true\n\t},\n\tStructureSourceOriginRepository,\n\tStructurePreparedItemsRepository\n];\n\nexport const sourceCommandHandlers = [\n\t...HermesModule.registerCommandHandler(SourceSetLoadingCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(SetOriginCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(StructureEditSourceItemCommandHandler, 'StructureAggregate')\n];\n\nexport const sourceProviders = [\n\t...commandProviders,\n\t...readProviders,\n\n\tSourceConverter,\n\n\tSourceCommandService,\n\tSourceReadModelService,\n\tSourceEventService\n];\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { StructureSetSearchPhraseCommand } from './structure.set-search-phrase.command';\nimport { StructureSearchPhraseSetDomainEvent } from './structure.search-phrase-set.domain-event';\nimport { StructureSourceDomainEventPublisher } from '../../../../source/command/structure.source.domain-event.publisher';\nimport { StructureAggregate } from '../../structure.aggregate';\n\n\n@Injectable()\nexport class StructureSetSearchPhraseCommandHandler implements CommandHandler<StructureAggregate, StructureSetSearchPhraseCommand> {\n\n\tconstructor(private readonly structureSourceDomainEventPublisher: StructureSourceDomainEventPublisher,\n\t\t\t\tprivate readonly domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<StructureSetSearchPhraseCommand> {\n\t\treturn StructureSetSearchPhraseCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: StructureSetSearchPhraseCommand): void {\n\n\t\tconst phrase = command.getPhrase();\n\n\t\tthis.domainEventPublisher.publish(new StructureSearchPhraseSetDomainEvent(command.getAggregateId(), phrase));\n\t\tthis.structureSourceDomainEventPublisher.publish(aggregate.getEvents());\n\t}\n\n\thandleAggregate(aggregate: StructureAggregate, command: StructureSetSearchPhraseCommand): void {\n\n\t\tconst phrase = command.getPhrase();\n\n\t\taggregate.addSearchPhrase(phrase);\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { AggregateId, CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { StructureAggregateRepository } from '../../structure-aggregate.repository';\nimport { SetSortOrderCommand } from './set-sort-order.command';\nimport { SortOrderSetEvent } from './sort-order-set.event';\nimport { CompositionId } from '../../../../../../composition/domain/composition-id';\nimport { FieldId } from '../../field/data-type/field.id';\nimport { StructureSorter } from '../structure.sorter';\nimport { StructureAggregate } from '../../structure.aggregate';\n\n\n@Injectable()\nexport class SetSortOrderCommandHandler implements CommandHandler<StructureAggregate, SetSortOrderCommand> {\n\n\tconstructor(private readonly structureAggregateRepository: StructureAggregateRepository,\n\t\t\t\tprivate domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<SetSortOrderCommand> {\n\t\treturn SetSortOrderCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: SetSortOrderCommand): void {\n\t}\n\n\thandleAggregate(structure: StructureAggregate, command: SetSortOrderCommand): void {\n\n\t\tconst structureId = command.getAggregateId(),\n\t\t\tcompositionId = command.getCompositionId(),\n\t\t\tfieldId = command.getFieldId(),\n\t\t\tsortOrder = command.getSortOrder();\n\n\t\tconst sorters = structure.setSortOrder(fieldId, sortOrder);\n\n\t\tthis.publishSortEvent(structureId, compositionId, fieldId, sorters);\n\t}\n\n\tprivate publishSortEvent(aggregateId: AggregateId, compositionId: CompositionId, fieldId: FieldId, sorters: Array<StructureSorter>): void {\n\n\t\tconst directions = sorters.map((sorter: StructureSorter) => {\n\t\t\treturn {\n\t\t\t\tdirection: sorter.hasDirection(),\n\t\t\t\tfieldId: sorter.getField().getId()\n\t\t\t};\n\t\t});\n\n\t\tthis.domainEventPublisher.publish(new SortOrderSetEvent(aggregateId, compositionId, directions));\n\t}\n\n}\n","import { Injectable, Type } from '@angular/core';\n\nimport { CommandHandler, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { SetRowHeightCommand } from './set-row-height.command';\nimport { StructureAggregate } from '../../structure.aggregate';\nimport { RowHeightSetEvent } from './row-height-set.event';\n\n\n@Injectable()\nexport class SetRowHeightCommandHandler implements CommandHandler<StructureAggregate, SetRowHeightCommand> {\n\n\tconstructor(private readonly domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tforCommand(): Type<SetRowHeightCommand> {\n\t\treturn SetRowHeightCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: SetRowHeightCommand): void {\n\t\tthis.domainEventPublisher.publish(new RowHeightSetEvent(command.getAggregateId()));\n\t}\n\n\thandleAggregate(structure: StructureAggregate, command: SetRowHeightCommand): void {\n\n\t\tconst rowHeight = command.getRowHeight();\n\n\t\tconst formation = structure.getVerticalFormation();\n\n\t\tformation.setRowHeight(rowHeight);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\nimport { DomainEventHandler } from '@generic-ui/hermes';\n\nimport { StructureSearchPhraseRepository } from './structure.search-phrase.repository';\nimport { StructureSearchPhraseSetDomainEvent } from '../../../command/search/set-phrase/structure.search-phrase-set.domain-event';\n\n\n@Injectable()\nexport class StructureSearchPhraseSetEventHandler extends DomainEventHandler {\n\n\tconstructor(private structureSearchPhraseRepository: StructureSearchPhraseRepository) {\n\t\tsuper();\n\t}\n\n\thandle(event: StructureSearchPhraseSetDomainEvent): void {\n\n\t\tif (event instanceof StructureSearchPhraseSetDomainEvent) {\n\t\t\tthis.structureSearchPhraseRepository.setPhrase(event.getPhrase(), event.getAggregateId());\n\t\t}\n\n\t}\n\n}\n","import { DOMAIN_EVENT_HANDLERS, HermesModule } from '@generic-ui/hermes';\nimport {\n\tinMemoryStructureCommandProviders,\n\tinMemoryStructureProviders,\n\tinMemoryStructureReadProviders\n} from '../../infrastructure/in-memory/structure/in-memory.structure.providers';\nimport { SetVerticalScrollEnabledCommandHandler } from '../../domain/structure/command/vertical-formation/set-enabled/set-vertical-scroll-enabled.command-handler';\nimport { SetScrollPositionCommandHandler } from '../../domain/structure/command/vertical-formation/scroll-position/set-scroll-position.command-handler';\nimport { InitFieldsCommandHandler } from '../../domain/structure/command/field/init/init-fields.command-handler';\nimport { ToggleSortCommandHandler } from '../../domain/structure/command/sort/toggle/toggle-sort.command-handler';\nimport { SetSortingCommandHandler } from '../../domain/structure/command/sort/set-config/set-sorting.command-handler';\nimport { StructureSetConfigFilterCommandHandler } from '../../domain/structure/command/filter/config/structure.set-config-filter.command-handler';\nimport { StructureSetConfigSearchingCommandHandler } from '../../domain/structure/command/search/config/structure.set-config-searching.command-handler';\nimport { StructureSetConfigQuickFilterCommandHandler } from '../../domain/structure/command/filter/quick/structure.set-config-quick-filter.command-handler';\nimport { StructureToggleFilterCommandHandler } from '../../domain/structure/command/filter/toggle/structure.toggle-filter.command-handler';\nimport { StructureSetAggregationEnabledCommandHandler } from '../../domain/structure/command/aggregation/set/structure.set-aggregation-enabled.command-handler';\nimport { VerticalFormationFactory } from '../../domain/structure/command/vertical-formation/vertical-formation.factory';\nimport { FieldCollectionFactory } from '../../domain/structure/command/field/field-collection.factory';\nimport { FilterManagerFactory } from '../../domain/structure/command/filter/filter.manager-factory';\nimport { FieldIdGenerator } from '../../domain/structure/command/field/field-id.generator';\nimport { StructureFilterCommandService } from './filter/structure.filter.command.service';\nimport { FieldFactory } from '../../domain/structure/command/field/data-type/field.factory';\nimport { aggregationProviders } from '../../domain/structure/command/aggregation/aggregation.providers';\nimport { StructureConfigFilterSetEventHandler } from '../../domain/structure/read/filter/structure.config-filter-set.event-handler';\nimport { StructureConfigSearchingSetEventHandler } from '../../domain/structure/read/searching/enabled/structure.config-searching-set.event-handler';\nimport { StructureConfigQuickFilterSetEventHandler } from '../../domain/structure/read/filter/structure.config-quick-filter-set.event-handler';\nimport { StructureFieldsInitedEventHandler } from './field/structure.fields-inited.event-handler';\nimport { VerticalFormationConverter } from '../../domain/structure/read/vertical-formation/vertical-formation.converter';\nimport { StructureFilterReadModelRepository } from './filter/structure.filter.read-model.repository';\nimport { StructureFilterRepository } from '../../domain/structure/read/filter/structure.filter.repository';\nimport { StructureQuickFilterRepository } from '../../domain/structure/read/filter/structure.quick-filter.repository';\nimport { StructureSearchingRepository } from '../../domain/structure/read/searching/enabled/structure.searching.repository';\nimport { StructureSearchReadModelRepository } from './search/structure-search.read-model.repository';\nimport { StructureFieldUiArchive } from './field/structure.field.ui-archive';\nimport { StructureFieldUiConverter } from './field/structure.field.ui-converter';\nimport { StructureFieldUiRepository } from './field/structure.field.ui-repository';\nimport { StructureAggregationCommandService } from './aggregation/structure.aggregation.command-service';\nimport { StructureAggregationUiEventsRepository } from './aggregation/structure.aggregation.ui-events-repository';\nimport { StructureCommandService } from './structure-command.service';\nimport { StructureConverter } from '../../domain/structure/structure.converter';\nimport { StructureAggregateFactory } from '../../domain/structure/command/structure.aggregate-factory';\nimport { StructureReadModelService } from './structure-read-model.service';\nimport { pagingProviders } from '../paging/paging.providers';\nimport { schemaProviders } from '../schema/schema.providers';\nimport { formationProviders } from '../formation/formation.providers';\nimport { sourceProviders } from '../source/source.providers';\nimport { StructureSetSearchPhraseCommandHandler } from '../../domain/structure/command/search/set-phrase/structure.set-search-phrase.command-handler';\nimport { SearchManagerFactory } from '../../domain/structure/command/search/search.manager-factory';\nimport { SetSortOrderCommandHandler } from '../../domain/structure/command/sort/order/set-sort-order.command-handler';\nimport { VerticalFormationRepository } from '../../domain/structure/read/vertical-formation/vertical-formation.repository';\nimport { SetRowHeightCommandHandler } from '../../domain/structure/command/vertical-formation/set-row-height/set-row-height.command-handler';\nimport { StructureSearchPhraseRepository } from '../../domain/structure/read/searching/phrase/structure.search-phrase.repository';\nimport { StructureSearchPhraseSetEventHandler } from '../../domain/structure/read/searching/phrase/structure.search-phrase-set.event-handler';\nimport { StructureSearchDispatcher } from '../../domain/structure/command/search/structure.search.dispatcher';\nimport { StructureSearchEventService } from './search/structure-search-event.service';\nimport { StructureSearchHighlightArchive } from '../../domain/structure/read/searching/highlight/structure.search-highlight.archive';\nimport { StructureSearchPlaceholderArchive } from '../../domain/structure/read/searching/placeholder/structure.search-placeholder.archive';\n\n\nconst commandProviders = [\n\t...inMemoryStructureCommandProviders,\n\tVerticalFormationFactory,\n\tFieldCollectionFactory,\n\tFilterManagerFactory,\n\tSearchManagerFactory,\n\tFieldIdGenerator,\n\tStructureFilterCommandService,\n\tFieldFactory,\n\tStructureSearchDispatcher,\n\n\t...aggregationProviders\n];\n\nconst readProviders = [\n\t{\n\t\tprovide: DOMAIN_EVENT_HANDLERS,\n\t\tuseClass: StructureConfigFilterSetEventHandler,\n\t\tmulti: true\n\t}, {\n\t\tprovide: DOMAIN_EVENT_HANDLERS,\n\t\tuseClass: StructureConfigSearchingSetEventHandler,\n\t\tmulti: true\n\t}, {\n\t\tprovide: DOMAIN_EVENT_HANDLERS,\n\t\tuseClass: StructureConfigQuickFilterSetEventHandler,\n\t\tmulti: true\n\t}, {\n\t\tprovide: DOMAIN_EVENT_HANDLERS,\n\t\tuseClass: StructureFieldsInitedEventHandler,\n\t\tmulti: true\n\t}, {\n\t\tprovide: DOMAIN_EVENT_HANDLERS,\n\t\tuseClass: StructureSearchPhraseSetEventHandler,\n\t\tmulti: true\n\t},\n\t...inMemoryStructureReadProviders,\n\tVerticalFormationConverter,\n\tVerticalFormationRepository,\n\tStructureFilterReadModelRepository,\n\tStructureFilterRepository,\n\tStructureQuickFilterRepository,\n\tStructureSearchingRepository,\n\tStructureSearchReadModelRepository,\n\tStructureFieldUiArchive,\n\tStructureFieldUiConverter,\n\tStructureFieldUiRepository,\n\tStructureSearchPhraseRepository,\n\tStructureSearchHighlightArchive,\n\tStructureSearchPlaceholderArchive\n];\n\nexport const structureCommandHandlers = [\n\t...HermesModule.registerCommandHandler(SetVerticalScrollEnabledCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(SetScrollPositionCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(InitFieldsCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(ToggleSortCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(SetSortingCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(StructureSetConfigFilterCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(StructureSetConfigSearchingCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(StructureSetConfigQuickFilterCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(StructureToggleFilterCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(StructureSetAggregationEnabledCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(StructureSetSearchPhraseCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(SetSortOrderCommandHandler, 'StructureAggregate'),\n\t...HermesModule.registerCommandHandler(SetRowHeightCommandHandler, 'StructureAggregate')\n];\n\nexport const structureProviders = [\n\t...inMemoryStructureProviders,\n\n\t...commandProviders,\n\t...readProviders,\n\n\tStructureSearchEventService,\n\n\tStructureAggregationCommandService,\n\tStructureAggregationUiEventsRepository,\n\n\tStructureAggregateFactory,\n\tStructureConverter,\n\n\tStructureReadModelService,\n\tStructureCommandService,\n\n\t...pagingProviders,\n\t...schemaProviders,\n\t...formationProviders,\n\t...sourceProviders\n];\n","import { Logger } from './logger';\n\nexport class ConsoleLogger extends Logger {\n\n\twarn(text: string): void {\n\t\tconsole.warn(text);\n\t}\n\n\terror(text: string): void {\n\t\tconsole.error(text);\n\t}\n\n}\n","import { NgModule } from '@angular/core';\nimport { Logger } from './logger';\nimport { ConsoleLogger } from './console.logger';\n\n\n@NgModule({\n\tproviders: [{\n\t\tprovide: Logger,\n\t\tuseClass: ConsoleLogger\n\t}]\n})\nexport class LoggerModule {\n}\n","import { Injectable } from '@angular/core';\n\nimport { ItemEntity } from './item.entity';\nimport { OriginItemEntity } from './command/origin/origin-item-entity';\n\n@Injectable()\nexport class ItemEntityFactory {\n\n\tcreate(data: any): ItemEntity;\n\tcreate(data: Array<any>): Array<ItemEntity>;\n\tcreate(data: any): any {\n\n\t\tif (Array.isArray(data)) {\n\t\t\treturn this.createEntities(data);\n\t\t} else {\n\t\t\treturn this.createEntity(data);\n\t\t}\n\t}\n\n\tcreateEntities(data: Array<any>): Array<ItemEntity> {\n\t\treturn data.map((data: any) => this.createEntity(data));\n\t}\n\n\tprivate createEntity(item: OriginItemEntity | any): ItemEntity {\n\n\t\tif (item instanceof OriginItemEntity) {\n\t\t\treturn new ItemEntity(item.rawData, item.getPosition(), item.id, item.getVersion());\n\t\t} else {\n\t\t\treturn new ItemEntity(item, 0);\n\t\t}\n\t}\n}\n","import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\n\nimport { SmartComponent } from '../../../../../common/cdk/smart-component';\n\n@Component({\n\tselector: 'gui-structure-top-panel',\n\ttemplate: `\n\t\t\n\t\t<gui-structure-search-bar></gui-structure-search-bar>\n\t\t\n\t\t\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class StructureTopPanelComponent extends SmartComponent {\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\n}\n","import {\n\tAfterViewInit,\n\tChangeDetectionStrategy,\n\tChangeDetectorRef,\n\tComponent,\n\tElementRef,\n\tOnInit,\n\tRenderer2,\n\tViewChild,\n\tViewEncapsulation\n} from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { debounceTime } from 'rxjs/operators';\n\nimport { SmartComponent } from '../../../../../../common/cdk/smart-component';\n\nimport { StructureCommandService } from '../../../../ui-api/structure/structure-command.service';\nimport { StructureReadModelService } from '../../../../ui-api/structure/structure-read-model.service';\nimport { StructureSearchPlaceholderArchive } from '../../../../domain/structure/read/searching/placeholder/structure.search-placeholder.archive';\nimport { StructureSearchPhraseRepository } from '../../../../domain/structure/read/searching/phrase/structure.search-phrase.repository';\nimport { StructureId } from '../../../../domain/structure-id';\n\n\n@Component({\n\tselector: 'gui-structure-search-bar',\n\ttemplate: `\n\t\t<form #formRef\n\t\t\t  [formGroup]=\"searchForm\">\n\t\t\t<svg class=\"gui-search-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"10.231\" height=\"10.601\" viewBox=\"0 0 10.231 10.601\">\n\t\t\t\t<line x2=\"1.77\" y2=\"1.77\" transform=\"translate(7.4 7.77)\" fill=\"none\" stroke-linecap=\"round\"\n\t\t\t\t\t  stroke-linejoin=\"round\" stroke-width=\"1.5\"/>\n\t\t\t\t<circle cx=\"4.02\" cy=\"4.02\" r=\"4.02\" transform=\"translate(0.5 0.5)\" stroke-width=\"1\" \n\t\t\t\t\t\tstroke-linecap=\"round\" stroke-linejoin=\"round\" fill=\"none\"/>\n\t\t\t</svg>\n\t\t\t<input formControlName=\"searchPhrase\" [placeholder]=\"placeholder\">\n\t\t</form>\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class StructureSearchComponent extends SmartComponent implements OnInit, AfterViewInit {\n\n\tprivate static readonly FORM_SEARCH_NAME = 'searchPhrase';\n\n\t@ViewChild('formRef', { static: false })\n\tformRef: ElementRef;\n\n\tsearchForm: FormGroup;\n\n\tplaceholder = 'Search';\n\n\tconstructor(private formBuilder: FormBuilder,\n\t\t\t\tprivate renderer2: Renderer2,\n\t\t\t\tprivate changeDetectorRef: ChangeDetectorRef,\n\t\t\t\tprivate structureId: StructureId,\n\t\t\t\tprivate structureCommandService: StructureCommandService,\n\t\t\t\tprivate structureReadModelService: StructureReadModelService,\n\t\t\t\tprivate structureSearchPhraseRepository: StructureSearchPhraseRepository,\n\t\t\t\tprivate structureSearchPlaceholderArchive: StructureSearchPlaceholderArchive) {\n\t\tsuper();\n\n\t\tlet controlsConfig = {};\n\t\tcontrolsConfig[StructureSearchComponent.FORM_SEARCH_NAME] = '';\n\n\t\tthis.searchForm = this.formBuilder.group(controlsConfig);\n\t}\n\n\tngOnInit() {\n\t\tthis.observeChanges();\n\n\t\tthis.structureSearchPlaceholderArchive\n\t\t\t.onValue()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((placeholder: string) => {\n\t\t\t\tthis.placeholder = placeholder;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\t\tthis.structureSearchPhraseRepository\n\t\t\t.onPhrase(this.structureId)\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((phrase: string) => {\n\n\t\t\t\tif (phrase === undefined) {\n\t\t\t\t\tphrase = null;\n\t\t\t\t}\n\n\t\t\t\tlet controlsConfig = {};\n\t\t\t\tcontrolsConfig[StructureSearchComponent.FORM_SEARCH_NAME] = phrase;\n\n\t\t\t\tif (phrase !== this.searchForm.get([StructureSearchComponent.FORM_SEARCH_NAME]).value) {\n\t\t\t\t\tthis.searchForm.setValue(controlsConfig);\n\t\t\t\t}\n\n\t\t\t});\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.structureReadModelService\n\t\t\t.onRowHeight()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((rowHeight: number) => {\n\t\t\t\tthis.renderer2.setStyle(this.formRef.nativeElement, 'height', '30px');\n\t\t\t});\n\t}\n\n\tprivate observeChanges(): void {\n\t\tthis.searchForm\n\t\t\t.controls['searchPhrase']\n\t\t\t.valueChanges\n\t\t\t.pipe(\n\t\t\t\tdebounceTime(200),\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((phrase: string) => {\n\t\t\t\tthis.structureCommandService.search(phrase);\n\t\t\t});\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { StructureTopPanelComponent } from './structure.top-panel.component';\nimport { StructureSearchComponent } from './search/structure.search.component';\n\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tReactiveFormsModule\n\t],\n\tdeclarations: [\n\t\tStructureTopPanelComponent,\n\t\tStructureSearchComponent\n\t],\n\texports: [\n\t\tStructureTopPanelComponent,\n\t\tStructureSearchComponent\n\t]\n})\nexport class StructureTopPanelModule {\n}\n","import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\n\n\n@Component({\n\tselector: 'gui-structure-empty-source',\n\ttemplateUrl: `structure-empty-source.component.html`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None,\n\thost: {\n\t\t'[class.gui-structure-empty-source]': 'true'\n\t}\n})\nexport class StructureEmptySourceComponent {\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, Input, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\n\nimport { CellTemplateWithContext } from '../../../../composition/domain/read/definition/cell-template-with-context';\nimport { StructureCommandService } from '../../../ui-api/structure/structure-command.service';\nimport { StructureColumnConfigService } from './structure.column-config.service';\nimport { StructureColumnMenuConfig } from './config/structure.column-menu-config';\nimport { SmartComponent } from '../../../../../common/cdk/smart-component';\nimport { StructureColumnMenuConfigArchive } from './config/structure.column-menu-config.archive';\n\n\n@Component({\n\tselector: 'gui-structure-column-config-trigger',\n\ttemplate: `\n\t\t<div #headerDialogContainer\n\t\t\t *ngIf=\"isEnabled()\"\n\t\t\t class=\"gui-header-menu-icon-wrapper\"\n\t\t\t (click)=\"openConfigDialog()\">\n\n\t\t\t<gui-structure-column-menu-icon [ngClass]=\"'gui-header-menu-icon'\"></gui-structure-column-menu-icon>\n\n\t\t</div>\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None\n})\nexport class StructureColumnConfigTriggerComponent extends SmartComponent implements OnInit {\n\n\t@ViewChild('headerDialogContainer', { static: false })\n\theaderDialogContainer: ElementRef;\n\n\t@Input()\n\tcolumn: CellTemplateWithContext;\n\n\tconfig: StructureColumnMenuConfig;\n\n\tconstructor(private elementRef: ElementRef,\n\t\t\t\tprivate changeDetectorRef: ChangeDetectorRef,\n\t\t\t\tprivate structureCommandService: StructureCommandService,\n\t\t\t\tprivate structureColumnMenuConfigArchive: StructureColumnMenuConfigArchive,\n\t\t\t\tprivate structureColumnConfigService: StructureColumnConfigService) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\t\tthis.structureColumnMenuConfigArchive\n\t\t\t.onValue()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((config: StructureColumnMenuConfig) => {\n\t\t\t\tthis.config = config;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\t}\n\n\topenConfigDialog(): void {\n\t\tthis.structureColumnConfigService.open(this.headerDialogContainer, this.column);\n\t}\n\n\tcloseConfigDialog(): void {\n\t\tthis.structureColumnConfigService.close();\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.config && this.config.isEnabled();\n\t}\n\n}\n","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\n\nimport { Placement } from '@generic-ui/fabric';\n\nimport { SortOrder } from '../../../../../../composition/domain/command/column/sort/sort-order';\nimport { CellTemplateWithContext } from '../../../../../../composition/domain/read/definition/cell-template-with-context';\nimport { StructureCommandService } from '../../../../../ui-api/structure/structure-command.service';\nimport { CompositionReadModelService } from '../../../../../../composition/ui-api/composition-read-model.service';\nimport { SmartComponent } from '../../../../../../../common/cdk/smart-component';\n\n@Component({\n\tselector: 'gui-structure-column-config-sort',\n\ttemplate: `\n\n\t\t<gui-dropdown [placement]=\"placement\"\n\t\t\t\t\t  [dropdownText]=\"'Column Sort'\"\n\t\t\t\t\t  [width]=\"225\"\n\t\t\t\t\t  [showOnHover]=\"true\"\n\t\t\t\t\t  class=\"gui-header-menu-dropdown\">\n\n\t\t\t<gui-dropdown-item (click)=\"setSortOrder(status.ASC)\"\n\t\t\t\t\t\t\t   [class.gui-header-item-active]=\"isAscSort()\">\n\t\t\t\t<div class=\"gui-sort-title\">Ascending<span class=\"gui-sort gui-sort-asc\"></span></div>\n\t\t\t</gui-dropdown-item>\n\n\t\t\t<gui-dropdown-item (click)=\"setSortOrder(status.DESC)\"\n\t\t\t\t\t\t\t   [class.gui-header-item-active]=\"isDescSort()\">\n\t\t\t\t<div class=\"gui-sort-title\">Descending<span class=\"gui-sort gui-sort-desc\"></span></div>\n\t\t\t</gui-dropdown-item>\n\n\t\t\t<gui-dropdown-item (click)=\"setSortOrder(status.NONE)\"\n\t\t\t\t\t\t\t   [class.gui-header-item-active]=\"isNoneSort()\">\n\t\t\t\tNone\n\t\t\t</gui-dropdown-item>\n\n\t\t</gui-dropdown>\n\t`\n})\nexport class StructureColumnConfigSortComponent extends SmartComponent implements OnInit {\n\n\t@Input()\n\tcolumn: CellTemplateWithContext;\n\n\tplacement: Placement = Placement.Right;\n\n\tstatus = SortOrder;\n\n\tsortStatus: SortOrder;\n\n\tconstructor(private changeDetectorRef: ChangeDetectorRef,\n\t\t\t\tprivate structureCommandService: StructureCommandService,\n\t\t\t\tprivate compositionReadModelService: CompositionReadModelService) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\t\tthis.sortStatus = this.column.getSortStatus();\n\n\t\tthis.compositionReadModelService\n\t\t\t.onSortOrder(this.column.getFieldId())\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((sortStatus: SortOrder) => {\n\t\t\t\tthis.sortStatus = sortStatus;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\t}\n\n\tisAscSort(): boolean {\n\t\treturn this.sortStatus === SortOrder.ASC;\n\t}\n\n\tisDescSort(): boolean {\n\t\treturn this.sortStatus === SortOrder.DESC;\n\t}\n\n\tisNoneSort(): boolean {\n\t\treturn this.sortStatus === SortOrder.NONE;\n\t}\n\n\tsetSortOrder(sort: SortOrder): void {\n\t\tevent.stopPropagation();\n\t\tthis.structureCommandService.setSortOrder(this.column.getFieldId(), sort);\n\t}\n}\n","import { Component, Input } from '@angular/core';\n\nimport { CellTemplateWithContext } from '../../../../../../composition/domain/read/definition/cell-template-with-context';\nimport { CompositionCommandService } from '../../../../../../composition/ui-api/composition.command-service';\nimport { StructureColumnConfigService } from '../../structure.column-config.service';\n\n\n@Component({\n\tselector: 'gui-structure-column-config-column-hide',\n\ttemplate: `\n\n\t\t<div class=\"gui-header-menu-item\"\n\t\t\t (click)=\"hideColumn(column)\">\n\t\t\tHide Column\n\t\t</div>\n\t`\n})\nexport class StructureColumnConfigColumnHideComponent {\n\n\t@Input()\n\tcolumn: CellTemplateWithContext;\n\n\tconstructor(private compositionCommandService: CompositionCommandService,\n\t\t\t\tprivate structureColumnConfigService: StructureColumnConfigService) {\n\t}\n\n\thideColumn(column: CellTemplateWithContext): void {\n\t\tthis.compositionCommandService.disableColumn(column.getColumnId());\n\n\t\tthis.structureColumnConfigService.close();\n\t}\n\n}\n","import { Component, Input } from '@angular/core';\n\nimport { CellTemplateWithContext } from '../../../../../../composition/domain/read/definition/cell-template-with-context';\nimport { CompositionCommandService } from '../../../../../../composition/ui-api/composition.command-service';\nimport { StructureColumnConfigService } from '../../structure.column-config.service';\n\n@Component({\n\tselector: 'gui-structure-column-config-column-move',\n\ttemplate: `\n\t\t<div class=\"gui-header-menu-column-move\">\n\t\t\t<div class=\"gui-header-menu-column-move-left\"\n\t\t\t\t (click)=\"moveLeft(column)\">\n\t\t\t\tMove Left\n\t\t\t</div>\n\n\t\t\t<div class=\"gui-header-menu-column-move-right\"\n\t\t\t\t (click)=\"moveRight(column)\">\n\t\t\t\tMove Right\n\t\t\t</div>\n\t\t</div>\n\t`\n})\nexport class StructureColumnConfigColumnMoveComponent {\n\n\t@Input()\n\tcolumn: CellTemplateWithContext;\n\n\tconstructor(private compositionCommandService: CompositionCommandService,\n\t\t\t\tprivate structureColumnConfigService: StructureColumnConfigService) {\n\t}\n\n\tmoveLeft(column: CellTemplateWithContext): void {\n\t\tthis.compositionCommandService.moveLeft(column.getColumnId());\n\t\tthis.structureColumnConfigService.close();\n\t}\n\n\tmoveRight(column: CellTemplateWithContext): void {\n\t\tthis.compositionCommandService.moveRight(column.getColumnId());\n\t\tthis.structureColumnConfigService.close();\n\t}\n\n}\n","import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\n\nexport const selector = 'gui-structure-column-menu-icon';\n\n@Component({\n\tselector: selector,\n\ttemplate: `\n\t\t<svg data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10.32 7.46\">\n\t\t\t<line class=\"cls-1\" x1=\"9.57\" y1=\"3.73\" x2=\"0.75\" y2=\"3.73\"/>\n\t\t\t<line class=\"cls-1\" x1=\"9.57\" y1=\"0.75\" x2=\"0.75\" y2=\"0.75\"/>\n\t\t\t<line class=\"cls-1\" x1=\"9.57\" y1=\"6.71\" x2=\"0.75\" y2=\"6.71\"/>\n\t\t</svg>\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None,\n\thost: {\n\t\t'[class.gui-structure-column-menu-icon]': 'true',\n\t\t'[class.gui-icon]': 'true'\n\t}\n})\nexport class StructureColumnMenuIconComponent {\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { StructureColumnConfigComponent } from './structure.column-config.component';\nimport { StructureColumnConfigTriggerComponent } from './structure.column-config-trigger.component';\nimport { StructureColumnConfigSortComponent } from './main/sort/structure.column-config-sort.component';\nimport { StructureColumnConfigColumnHideComponent } from './main/hide/structure.column-config-column-hide.component';\nimport { StructureColumnConfigColumnMoveComponent } from './main/move/structure.column-config-column-move.component';\nimport { fabricImports } from '../../structure-fabric.imports';\nimport { StructureColumnManagerModule } from '../../column-manager/structure.column-manager.module';\nimport { StructureColumnMenuIconComponent } from './icon/structure.column-menu-icon.component';\n\nconst declarations = [\n\tStructureColumnConfigComponent,\n\tStructureColumnConfigTriggerComponent,\n\tStructureColumnConfigSortComponent,\n\tStructureColumnConfigColumnHideComponent,\n\tStructureColumnConfigColumnMoveComponent,\n\tStructureColumnMenuIconComponent\n];\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tfabricImports,\n\t\tStructureColumnManagerModule\n\t],\n\tdeclarations: declarations,\n\texports: declarations\n})\nexport class StructureColumnMenuModule {\n}\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, ViewEncapsulation } from '@angular/core';\n\nimport { CellTemplateWithContext } from '../../../../composition/domain/read/definition/cell-template-with-context';\nimport { StructureId } from '../../../domain/structure-id';\nimport { StructureAggregationUiEventsRepository } from '../../../ui-api/structure/aggregation/structure.aggregation.ui-events-repository';\nimport { CompositionReadModelService } from '../../../../composition/ui-api/composition-read-model.service';\nimport { StructureAggregationsChangedEvent } from '../../../domain/structure/command/aggregation/structure.aggregations-changed.event';\nimport { SmartComponent } from '../../../../../common/cdk/smart-component';\nimport { SourceReadModelService } from '../../../ui-api/source/source-read-model.service';\n\n\n@Component({\n\tselector: 'gui-structure-aggregation-panel',\n\ttemplate: `\n\n\t\t<ng-container *ngIf=\"enabled && aggregations && !sourceEmpty\">\n\n\t\t\t<div *ngFor=\"let column of headerColumns\"\n\t\t\t\t [style.width.px]=\"column.width\"\n\t\t\t\t class=\"gui-structure-aggregation-cell\">\n\n\t\t\t\t<ng-container *ngIf=\"aggregations && !!aggregations.get(column.getFieldId().getId())\">\n\n\t\t\t\t\t<div *ngIf=\"isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).count)\"\n\t\t\t\t\t\t class=\"gui-structure-aggregation-value\">\n\t\t\t\t\t\t<span>Count</span>\n\t\t\t\t\t\t<span class=\"gui-aggregation-value\">{{ aggregations.get(column.getFieldId().getId()).count }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div *ngIf=\"isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).distinct)\"\n\t\t\t\t\t\t class=\"gui-structure-aggregation-value\">\n\t\t\t\t\t\t<span [gui-tooltip]=\"'Distinct'\">Dist</span>\n\t\t\t\t\t\t<span class=\"gui-aggregation-value\">{{ aggregations.get(column.getFieldId().getId()).distinct }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div *ngIf=\" isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).sum)\"\n\t\t\t\t\t\t class=\"gui-structure-aggregation-value\">\n\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<!--\t\t\t\t\t\t\t<span [gui-tooltip]=\"'Sum'\" -->\n\t\t\t\t\t\t\t<!--\t\t\t\t\t\t\t\t  class=\"gui-math-symbol\">&sum;</span>-->\n\t\t\t\t\t\t\tSum\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"gui-aggregation-value\">{{ aggregations.get(column.getFieldId().getId()).sum }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div *ngIf=\"isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).average)\"\n\t\t\t\t\t\t class=\"gui-structure-aggregation-value\">\n\n\t\t\t\t\t\t<!--\t\t\t\t\t\t<div [gui-tooltip]=\"'Average'\"-->\n\t\t\t\t\t\t<!--\t\t\t\t\t\t\t class=\"gui-mean\">-->\n\t\t\t\t\t\t<!--\t\t\t\t\t\t\t<span>_</span><span>X</span>-->\n\t\t\t\t\t\t<!--\t\t\t\t\t\t</div>-->\n\t\t\t\t\t\t<span [gui-tooltip]=\"'Average'\">Avg</span>\n\t\t\t\t\t\t<span class=\"gui-aggregation-value\">{{ aggregations.get(column.getFieldId().getId()).average }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div *ngIf=\" isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).min)\"\n\t\t\t\t\t\t class=\"gui-structure-aggregation-value\">\n\n\t\t\t\t\t\t<!--\t\t\t\t\t\t<div [gui-tooltip]=\"'Min'\">-->\n\t\t\t\t\t\t<!--\t\t\t\t\t\t\t<span class=\"gui-math-symbol\">&and;</span>-->\n\t\t\t\t\t\t<!--\t\t\t\t\t\t</div>-->\n\t\t\t\t\t\t<span [gui-tooltip]=\"'Min'\">\n\t\t\t\t\t\t\tMin\n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t<span class=\"gui-aggregation-value\">{{ aggregations.get(column.getFieldId().getId()).min }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div *ngIf=\" isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).max)\"\n\t\t\t\t\t\t class=\"gui-structure-aggregation-value\">\n\n\t\t\t\t\t\t<!--\t\t\t\t\t\t<div [gui-tooltip]=\"'Max'\">-->\n\t\t\t\t\t\t<!--\t\t\t\t\t\t\t<span class=\"gui-math-symbol\">&or;</span>-->\n\t\t\t\t\t\t<!--\t\t\t\t\t\t</div>-->\n\n\t\t\t\t\t\t<span [gui-tooltip]=\"'Max'\">\n\t\t\t\t\t\t\tMax\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"gui-aggregation-value\">{{ aggregations.get(column.getFieldId().getId()).max }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div *ngIf=\"isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).median)\"\n\t\t\t\t\t\t class=\"gui-structure-aggregation-value\">\n\n\t\t\t\t\t\t<!--\t\t\t\t\t\t<div [gui-tooltip]=\"'Median'\"-->\n\t\t\t\t\t\t<!--\t\t\t\t\t\t\t class=\"gui-median\">-->\n\t\t\t\t\t\t<!--\t\t\t\t\t\t\t<span>~</span>-->\n\t\t\t\t\t\t<!--\t\t\t\t\t\t\t<span>X</span>-->\n\t\t\t\t\t\t<!--\t\t\t\t\t\t</div>-->\n\n\t\t\t\t\t\t<span [gui-tooltip]=\"'Median'\">Med</span>\n\t\t\t\t\t\t<span class=\"gui-aggregation-value\">{{ aggregations.get(column.getFieldId().getId()).median }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div *ngIf=\"isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).truthy)\"\n\t\t\t\t\t\t class=\"gui-structure-aggregation-value\">\n\t\t\t\t\t\t<span>Truthy</span>\n\t\t\t\t\t\t<span class=\"gui-aggregation-value\">{{ aggregations.get(column.getFieldId().getId()).truthy }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div *ngIf=\"isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).falsy)\"\n\t\t\t\t\t\t class=\"gui-structure-aggregation-value\">\n\t\t\t\t\t\t<span>Falsy</span>\n\t\t\t\t\t\t<span class=\"gui-aggregation-value\">{{ aggregations.get(column.getFieldId().getId()).falsy }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t</ng-container>\n\t\t\t</div>\n\n\t\t</ng-container>\n\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n\tencapsulation: ViewEncapsulation.None,\n\thost: {\n\t\t'[class.gui-structure-aggregation-panel]': 'true'\n\t}\n})\nexport class StructureAggregationPanelComponent extends SmartComponent {\n\n\t@Input()\n\tenabled: boolean;\n\n\tsourceEmpty: boolean = false;\n\n\theaderColumns: Array<CellTemplateWithContext>;\n\n\taggregations: Map<string, any>;\n\n\tconstructor(private changeDetectorRef: ChangeDetectorRef,\n\t\t\t\tprivate structureId: StructureId,\n\t\t\t\tprivate structureAggregationUiEventsRepository: StructureAggregationUiEventsRepository,\n\t\t\t\tprivate sourceReadModelService: SourceReadModelService,\n\t\t\t\tprivate readonly compositionQueryService: CompositionReadModelService) {\n\t\tsuper();\n\n\t\tthis.structureAggregationUiEventsRepository\n\t\t\t.onAggregationsChanged(this.structureId)\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((event: StructureAggregationsChangedEvent) => {\n\n\t\t\t\tthis.aggregations = event.getAggregations();\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\t}\n\n\tngOnInit() {\n\n\t\tthis.sourceReadModelService\n\t\t\t.onEntitiesSize()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((size: number) => {\n\t\t\t\tthis.sourceEmpty = size === 0;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\t\tthis.compositionQueryService\n\t\t\t.onHeaderColumns()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((columns: Array<CellTemplateWithContext>) => {\n\t\t\t\tthis.headerColumns = columns;\n\t\t\t\tthis.changeDetectorRef.detectChanges();\n\t\t\t});\n\n\t}\n\n\tisAggregateTypePresent(aggregation: number): boolean {\n\t\treturn aggregation !== undefined && aggregation !== null;\n\t}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { FabricModule } from '@generic-ui/fabric';\n\nimport { StructureAggregationArchive } from './structure.aggregation.archive';\nimport { StructureAggregationConfigService } from './structure.aggregation-config.service';\nimport { StructureAggregationPanelConfigConverter } from './structure.aggregation-panel.config-converter';\nimport { StructureAggregationPanelComponent } from './structure.aggregation-panel.component';\n\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tFabricModule\n\t],\n\tdeclarations: [\n\t\tStructureAggregationPanelComponent\n\t],\n\texports: [\n\t\tStructureAggregationPanelComponent\n\t],\n\tproviders: [\n\t\tStructureAggregationArchive,\n\t\tStructureAggregationConfigService,\n\t\tStructureAggregationPanelConfigConverter\n\t]\n})\nexport class StructureAggregationPanelModule {\n}\n","import { Injectable } from '@angular/core';\n\nimport { AggregateCommandHandler, AggregateRepository, Command, DomainEventPublisher } from '@generic-ui/hermes';\n\nimport { StructureAggregateRepository } from '../structure-aggregate.repository';\nimport { CreateStructureCommand } from './create-structure.command';\nimport { StructureCreatedEvent } from './structure-created.event';\nimport { StructureAggregate } from '../structure.aggregate';\n\n\n@Injectable()\nexport class CreateStructureCommandHandler implements AggregateCommandHandler<StructureAggregate, CreateStructureCommand> {\n\n\tconstructor(private readonly structureAggregateRepository: StructureAggregateRepository,\n\t\t\t\tprivate domainEventPublisher: DomainEventPublisher) {\n\t}\n\n\tgetAggregateRepository(): AggregateRepository<StructureAggregate> {\n\t\treturn this.structureAggregateRepository;\n\t}\n\n\tforCommand(): Command | any {\n\t\treturn CreateStructureCommand;\n\t}\n\n\tpublishDomainEvents(aggregate: StructureAggregate, command: CreateStructureCommand): void {\n\t\tthis.domainEventPublisher.publish(new StructureCreatedEvent(command.getAggregateId()));\n\t}\n\n}\n","import { Component, Input, SimpleChanges } from '@angular/core';\n\nimport { CellTemplateWithAccessor } from '../../../../../composition/domain/read/definition/cell-template-with-accessor';\nimport { ChangedValueEmitter } from '../../../../../composition/domain/read/edit/changed-value.emitter';\nimport { EditEventType } from '../../../../../composition/domain/read/edit/state/edit.event-type';\nimport { ItemEntity } from '../../../../domain/source/item.entity';\nimport { SmartComponent } from '../../../../../../common/cdk/smart-component';\nimport { StructureEditSourceItemParams } from '../../../../domain/source/command/origin/edit/structure.edit-source-item.params';\nimport { SourceCommandService } from '../../../../ui-api/source/source-command.service';\n\n@Component({\n\tselector: 'gui-structure-cell-edit[entity][cell]',\n\ttemplate: `\n\n\t\t<span >\n\t\t\t<ng-container\n\t\t\t\t\t*ngTemplateOutlet=\"cell.editTemplate;\n\t\t\t\t\t\t\t\t\tcontext: editContext\">\n\t\t\t</ng-container>\n\t\t</span>\n\n\t`\n})\nexport class StructureCellEditComponent extends SmartComponent {\n\n\t@Input()\n\tentity: ItemEntity;\n\n\t@Input()\n\tcell: CellTemplateWithAccessor;\n\n\teditContext: any;\n\n\tvalueChanges$: ChangedValueEmitter<any>;\n\n\tstatus$: ChangedValueEmitter<any>;\n\n\tactualValue: any;\n\n\tconstructor(private readonly sourceCommandService: SourceCommandService) {\n\t\tsuper();\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\n\t\tif (changes.entity !== null && changes.entity !== undefined) {\n\t\t\tthis.initEditContext();\n\t\t}\n\n\t\tif (changes.cell !== null && changes.cell !== undefined) {\n\t\t\tthis.initEditContext();\n\t\t}\n\n\t}\n\n\tngOnInit() {\n\t\tthis.initEditContext();\n\t}\n\n\tprivate submitChanges(): void {\n\t\tconst itemId = this.entity.getId(),\n\t\t\tupdatedValue = this.actualValue,\n\t\t\tfieldId = this.cell.columnFieldId;\n\n\t\tthis.sourceCommandService.editItem(new StructureEditSourceItemParams(itemId, fieldId, updatedValue));\n\n\t}\n\n\tprivate initEditContext(): void {\n\t\tthis.valueChanges$ = new ChangedValueEmitter();\n\t\tthis.status$ = new ChangedValueEmitter<EditEventType>();\n\n\t\tthis.editContext = {\n\t\t\tstatus: this.status$,\n\t\t\tvalueChanges: this.valueChanges$,\n\t\t\tvalue: this.cell.getValue(this.entity),\n\t\t\tfocus: false\n\t\t};\n\n\t\tthis.status$\n\t\t\t.on()\n\t\t\t.pipe(\n\t\t\t\tthis.takeUntil()\n\t\t\t)\n\t\t\t.subscribe((status: EditEventType) => {\n\n\t\t\t\tswitch (status) {\n\t\t\t\t\tcase EditEventType.SUBMIT:\n\t\t\t\t\t\tthis.submitChanges();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t}\n\n}\n","import { Inject, ModuleWithProviders, NgModule, PLATFORM_ID } from '@angular/core';\nimport { CommonModule, isPlatformBrowser } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { FabricModule } from '@generic-ui/fabric';\n\nimport { COMMAND_LOGGER_ENABLED, EVENT_LOGGER_ENABLED, HermesModule } from '@generic-ui/hermes';\n\nimport { fabricImports } from '../ui/structure-fabric.imports';\nimport { StructurePagingModule } from '../ui/paging/structure-paging.module';\nimport { StructureInfoPanelModule } from '../ui/panel/info/structure.info-panel.module';\nimport { CompositionModule } from '../../composition/ui-api/composition.module';\nimport { StructureComponent } from '../ui/structure.component';\nimport { StructureHeaderComponent } from '../ui/header/structure-header.component';\nimport { StructureHeaderColumnsComponent } from '../ui/header/columns/structure-header-columns.component';\nimport { StructureHeaderFiltersComponent } from '../ui/header/filters/structure-header-filters.component';\nimport { StructureHeaderFilterComponent } from '../ui/header/filters/structure.header-filter.component';\nimport { StructureContentComponent } from '../ui/content/structure-content.component';\nimport { StructureRowComponent } from '../ui/content/row/structure-row.component';\nimport { StructureCellComponent } from '../ui/content/cell/structure.cell.component';\nimport { StructureContainerComponent } from '../ui/content/structure-container.component';\nimport { StructureQuickFiltersComponent } from '../ui/header/quick-filters/structure.quick-filters.component';\nimport { StructureBlueprintComponent } from '../ui/blueprint/structure.blueprint.component';\nimport { StructureColumnConfigComponent } from '../ui/header/menu/structure.column-config.component';\nimport { STRUCTURE_CSS_CLASS_NAME } from './structure/structure-tokens';\nimport { StructureDefinition } from '../ui/structure-definition';\nimport { SourceReadModelService } from './source/source-read-model.service';\nimport { StructureIdGenerator } from '../ui/structure-id.generator';\nimport { structureCommandHandlers, structureProviders } from './structure/structure.providers';\nimport { StructureModuleConfig } from '../ui/structure-module-config';\nimport { LoggerModule } from '../../../common/cdk/logger/logger.module';\nimport { ItemEntityFactory } from '../domain/source/item.entity-factory';\nimport { StructureTopPanelModule } from '../ui/panel/top/structure.top-panel.module';\nimport { StructureEmptySourceComponent } from '../ui/content/empty-source/structure-empty-source.component';\nimport { StructureColumnMenuModule } from '../ui/header/menu/structure.column-menu.module';\nimport { StructureAggregationPanelModule } from '../ui/panel/aggregation/structure.aggregation-panel.module';\nimport { StructureColumnManagerModule } from '../ui/column-manager/structure.column-manager.module';\nimport { StructureAggregateFactory } from '../domain/structure/command/structure.aggregate-factory';\nimport { StructureAggregate } from '../domain/structure/command/structure.aggregate';\nimport { InMemoryStructureAggregateRepository } from '../infrastructure/in-memory/structure/commad/in-memory.structure-aggregate.repository';\nimport { CreateStructureCommandHandler } from '../domain/structure/command/create-structure/create-structure-command-handler.service';\nimport { formationCommandHandlers } from './formation/formation.providers';\nimport { pagingCommandHandlers } from './paging/paging.providers';\nimport { schemaCommandHandlers } from './schema/schema.providers';\nimport { sourceCommandHandlers } from './source/source.providers';\nimport { StructureCellEditComponent } from '../ui/content/cell/edit/structure.cell-edit.component';\nimport { StructureThemeConverter } from '../ui/schema/structure.theme.converter';\n\n\nexport function createStructureDefinition() {\n\treturn new StructureDefinition.DefaultBuilder().build();\n}\n\nexport const structureKey = 'StructureAggregate';\n\nconst imports = [\n\tCommonModule,\n\tReactiveFormsModule,\n\tHermesModule,\n\tHermesModule.defineAggregate(\n\t\tstructureKey,\n\t\tStructureAggregateFactory,\n\t\tInMemoryStructureAggregateRepository,\n\t\tCreateStructureCommandHandler,\n\t\t[\n\t\t\t...formationCommandHandlers,\n\t\t\t...pagingCommandHandlers,\n\t\t\t...schemaCommandHandlers,\n\t\t\t...sourceCommandHandlers,\n\t\t\t...structureCommandHandlers\n\t\t]\n\t),\n\t// .withConfig({\n\t// \tloggers: false\n\t// }),\n\t...fabricImports,\n\n\tStructurePagingModule,\n\tStructureInfoPanelModule,\n\tStructureAggregationPanelModule,\n\tStructureTopPanelModule,\n\tStructureColumnMenuModule,\n\tStructureColumnManagerModule,\n\n\tCompositionModule,\n\n\tLoggerModule\n];\n\nconst declarations = [\n\tStructureComponent,\n\tStructureHeaderComponent,\n\tStructureHeaderColumnsComponent,\n\tStructureHeaderFiltersComponent,\n\tStructureHeaderFilterComponent,\n\tStructureContentComponent,\n\tStructureRowComponent,\n\tStructureCellComponent,\n\tStructureCellEditComponent,\n\tStructureContainerComponent,\n\tStructureEmptySourceComponent,\n\tStructureQuickFiltersComponent,\n\tStructureBlueprintComponent\n];\n\nconst entryComponents = [\n\tStructureColumnConfigComponent\n];\n\nconst providers = [\n\t{\n\t\tprovide: STRUCTURE_CSS_CLASS_NAME,\n\t\tuseValue: 'structure'\n\t},\n\t{\n\t\tprovide: StructureDefinition,\n\t\tuseFactory: createStructureDefinition\n\t},\n\tItemEntityFactory,\n\tStructureThemeConverter,\n\n\tSourceReadModelService,\n\n\tStructureIdGenerator,\n\n\t...structureProviders\n\n];\n\nconst exportDeclarations = [\n\tFabricModule,\n\tStructureComponent,\n\tStructureHeaderComponent,\n\tStructureContentComponent,\n\tStructureRowComponent,\n\tStructureContainerComponent,\n\n\t...fabricImports,\n\tStructurePagingModule\n];\n\n@NgModule({\n\timports,\n\tdeclarations,\n\texports: exportDeclarations,\n\tentryComponents\n})\nexport class StructureModule {\n\n\tstatic exportDeclarations = [...exportDeclarations];\n\n\tstatic withConfig(structureConfig: StructureModuleConfig = { cssClassName: '', hermesModuleConfig: { loggers: false } }): ModuleWithProviders {\n\t\treturn {\n\t\t\tngModule: StructureModule,\n\t\t\tproviders: [\n\t\t\t\t{\n\t\t\t\t\tprovide: STRUCTURE_CSS_CLASS_NAME,\n\t\t\t\t\tuseValue: structureConfig.cssClassName\n\t\t\t\t},\n\t\t\t\t{ provide: COMMAND_LOGGER_ENABLED, useValue: structureConfig.hermesModuleConfig.loggers },\n\t\t\t\t{ provide: EVENT_LOGGER_ENABLED, useValue: structureConfig.hermesModuleConfig.loggers },\n\t\t\t\t...providers\n\t\t\t]\n\t\t};\n\t}\n\n\tconstructor(@Inject(PLATFORM_ID) private platformId: any) {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\twindow['hermesApi'].loggers = false;\n\t\t}\n\t}\n\n}\n","import { NgModule, Provider } from '@angular/core';\n\nimport { GridComponent } from '../ui/grid/grid.component';\n\nimport { StructureModule } from '../../../lib/structure/ui-api/structure.module';\n\nimport { GridIdGenerator } from '../ui/grid/register/grid-id.generator';\nimport { GridRegister } from '../ui/grid/register/grid.register';\n\n\nconst imports = [\n\tStructureModule.withConfig({\n\t\tcssClassName: 'grid',\n\t\thermesModuleConfig: {\n\t\t\tloggers: true\n\t\t}\n\t})\n];\n\nconst declarations = [\n\tGridComponent\n];\n\nconst providers = [\n\tGridIdGenerator,\n\tGridRegister\n] as Array<Provider>;\n\nconst exportDeclarations = [\n\tGridComponent\n];\n\nconst entryComponents = [] as Array<any>;\n\nconst elementComponents = [\n\tGridComponent\n];\n\n@NgModule({\n\timports,\n\tdeclarations,\n\tproviders,\n\texports: exportDeclarations,\n\tentryComponents\n})\nexport class GridModule {\n\n\tstatic entryComponents = [...entryComponents];\n\n\tstatic exportDeclarations = [...exportDeclarations];\n\n\tstatic elementComponents = [...elementComponents];\n}\n"]}