!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("@generic-ui/fabric"),require("@generic-ui/hermes"),require("rxjs"),require("rxjs/operators"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("@generic-ui/ngx-grid",["exports","@angular/core","@angular/common","@angular/forms","@generic-ui/fabric","@generic-ui/hermes","rxjs","rxjs/operators","@angular/platform-browser"],e):e(((t=t||self)["generic-ui"]=t["generic-ui"]||{},t["generic-ui"]["ngx-grid"]={}),t.ng.core,t.ng.common,t.ng.forms,t["@generic-ui/fabric"],t["@generic-ui/hermes"],t.rxjs,t.rxjs.operators,t.ng.platformBrowser)}(this,(function(t,e,n,r,i,o,a,s,u){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function g(t,e){function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var p=function(){return(p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function l(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function d(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function f(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}var y={UNKNOWN:0,NUMBER:1,STRING:2,BOOLEAN:3,DATE:4,CUSTOM:5};y[y.UNKNOWN]="UNKNOWN",y[y.NUMBER]="NUMBER",y[y.STRING]="STRING",y[y.BOOLEAN]="BOOLEAN",y[y.DATE]="DATE",y[y.CUSTOM]="CUSTOM";var v={TEXT:0,CHIP:1,LINK:2,IMAGE:3,BOLD:4,ITALIC:5,CHECKBOX:6,CUSTOM:7};v[v.TEXT]="TEXT",v[v.CHIP]="CHIP",v[v.LINK]="LINK",v[v.IMAGE]="IMAGE",v[v.BOLD]="BOLD",v[v.ITALIC]="ITALIC",v[v.CHECKBOX]="CHECKBOX",v[v.CUSTOM]="CUSTOM";var b={TEXT:0,BOLD:1,ITALIC:2,CHIP:3};b[b.TEXT]="TEXT",b[b.BOLD]="BOLD",b[b.ITALIC]="ITALIC",b[b.CHIP]="CHIP";var C={TEXT:0,BOLD:1,ITALIC:2,CHIP:3};C[C.TEXT]="TEXT",C[C.BOLD]="BOLD",C[C.ITALIC]="ITALIC",C[C.CHIP]="CHIP";var A={TEXT:0,BOLD:1,ITALIC:2,CHIP:3,CHECKBOX:4};A[A.TEXT]="TEXT",A[A.BOLD]="BOLD",A[A.ITALIC]="ITALIC",A[A.CHIP]="CHIP",A[A.CHECKBOX]="CHECKBOX";var E={TEXT:0,BOLD:1,ITALIC:2,CHIP:3};E[E.TEXT]="TEXT",E[E.BOLD]="BOLD",E[E.ITALIC]="ITALIC",E[E.CHIP]="CHIP";var I={FABRIC:0,MATERIAL:1,LIGHT:2,DARK:3};I[I.FABRIC]="FABRIC",I[I.MATERIAL]="MATERIAL",I[I.LIGHT]="LIGHT",I[I.DARK]="DARK";var S={NONE:0,EVEN:1,ODD:2};S[S.NONE]="NONE",S[S.EVEN]="EVEN",S[S.ODD]="ODD";var w={UNKNOWN:0,NUMBER:1,STRING:2,BOOLEAN:3,DATE:4,CUSTOM:5};w[w.UNKNOWN]="UNKNOWN",w[w.NUMBER]="NUMBER",w[w.STRING]="STRING",w[w.BOOLEAN]="BOOLEAN",w[w.DATE]="DATE",w[w.CUSTOM]="CUSTOM";var D=function(){function t(){}return t.prototype.convertType=function(t){return"string"==typeof t?this.convertTypeString(t):this.convertTypeEnum(t)},t.prototype.convertTypeEnum=function(t){switch(t){case y.STRING:return w.STRING;case y.NUMBER:return w.NUMBER;case y.BOOLEAN:return w.BOOLEAN;case y.DATE:return w.DATE;case y.UNKNOWN:return w.UNKNOWN;case y.CUSTOM:return w.CUSTOM;default:return w.STRING}},t.prototype.convertTypeString=function(t){switch(t.toLocaleLowerCase()){case"string":return w.STRING;case"number":return w.NUMBER;case"boolean":return w.BOOLEAN;case"date":return w.DATE;case"unknown":return w.UNKNOWN;case"custom":return w.CUSTOM;default:return w.STRING}},t}(),P={COUNT:1024,DISTINCT:1,SUM:2,AVERAGE:4,MIN:8,MAX:16,MEDIAN:32,TRUTHY:64,FALSY:128,EARLIEST:256,LATEST:512};P[P.COUNT]="COUNT",P[P.DISTINCT]="DISTINCT",P[P.SUM]="SUM",P[P.AVERAGE]="AVERAGE",P[P.MIN]="MIN",P[P.MAX]="MAX",P[P.MEDIAN]="MEDIAN",P[P.TRUTHY]="TRUTHY",P[P.FALSY]="FALSY",P[P.EARLIEST]="EARLIEST",P[P.LATEST]="LATEST";var R=function(){function t(){}return t.prototype.convert=function(t){var e={};return void 0!==t.enabled&&null!==t.enabled&&(e.enabled=t.enabled),void 0!==t.aggregationTypes&&null!==t.aggregationTypes&&(e.aggregationTypes=this.convertAggregationTypes(t.aggregationTypes)),e},t.prototype.convertAggregationTypes=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.convertAggregationType(t);null!=r&&n.push(r)})),n},t.prototype.convertAggregationType=function(t){switch(t.toLocaleLowerCase()){case"count":return P.COUNT;case"distinct":return P.DISTINCT;case"sum":return P.SUM;case"average":return P.AVERAGE;case"min":return P.MIN;case"max":return P.MAX;case"median":return P.MEDIAN;case"truthy":return P.TRUTHY;case"falsy":return P.FALSY;case"earliest":return P.EARLIEST;case"latest":return P.LATEST;default:return null}},t}(),T={TEXT:0,CHIP:1,LINK:2,IMAGE:3,BOLD:4,ITALIC:5,CHECKBOX:6,CUSTOM:7,FUNCTION:8};T[T.TEXT]="TEXT",T[T.CHIP]="CHIP",T[T.LINK]="LINK",T[T.IMAGE]="IMAGE",T[T.BOLD]="BOLD",T[T.ITALIC]="ITALIC",T[T.CHECKBOX]="CHECKBOX",T[T.CUSTOM]="CUSTOM",T[T.FUNCTION]="FUNCTION";var M=function(){function t(){}return t.prototype.convert=function(t){return"string"==typeof t?this.convertString(t):"function"==typeof t?t:this.convertEnum(t)},t.prototype.convertString=function(t){switch(t.toLocaleLowerCase()){case"text":return T.TEXT;case"chip":return T.CHIP;case"link":return T.LINK;case"image":return T.IMAGE;case"bold":return T.BOLD;case"italic":return T.ITALIC;case"checkbox":return T.CHECKBOX;case"custom":return T.CUSTOM;default:return T.TEXT}},t.prototype.convertEnum=function(t){switch(t){case v.TEXT:return T.TEXT;case v.CHIP:return T.CHIP;case v.LINK:return T.LINK;case v.IMAGE:return T.IMAGE;case v.BOLD:return T.BOLD;case v.ITALIC:return T.ITALIC;case v.CHECKBOX:return T.CHECKBOX;case v.CUSTOM:return T.CUSTOM;default:return T.TEXT}},t}(),x=function(){function t(){this.columnTypeConverter=new D,this.columnAggregationConverter=new R,this.columnViewConverter=new M}return t.prototype.convert=function(t){var e=this;return t.map((function(t){return e.convertColumn(t)}))},t.prototype.convertColumn=function(t){var e={};return void 0!==t.type&&null!==t.type&&(e.type=this.columnTypeConverter.convertType(t.type)),void 0!==t.header&&null!==t.header&&(e.header=t.header),void 0!==t.field&&null!==t.field&&(e.field=t.field),void 0!==t.width&&null!==t.width&&(e.width=t.width),void 0!==t.view&&null!==t.view&&(e.view=this.columnViewConverter.convert(t.view)),void 0!==t.aggregation&&null!==t.aggregation&&(e.aggregation=this.columnAggregationConverter.convert(t.aggregation)),e},t}();var F={FABRIC:0,MATERIAL:1,LIGHT:2,DARK:3};F[F.FABRIC]="FABRIC",F[F.MATERIAL]="MATERIAL",F[F.LIGHT]="LIGHT",F[F.DARK]="DARK";var O=function(){function t(){}return t.prototype.convert=function(t){return"string"==typeof t?this.convertString(t):this.convertEnum(t)},t.prototype.convertString=function(t){switch(t.toLocaleLowerCase()){case"material":return F.MATERIAL;case"fabric":return F.FABRIC;case"light":return F.LIGHT;case"dark":return F.DARK;default:return F.FABRIC}},t.prototype.convertEnum=function(t){switch(t){case I.MATERIAL:return F.MATERIAL;case I.FABRIC:return F.FABRIC;case I.LIGHT:return F.LIGHT;case I.DARK:return F.DARK;default:return F.FABRIC}},t}(),N={NONE:0,EVEN:1,ODD:2};N[N.NONE]="NONE",N[N.EVEN]="EVEN",N[N.ODD]="ODD";var B=function(){function t(){}return t.prototype.convert=function(t){return"string"==typeof t?this.convertString(t):this.convertEnum(t)},t.prototype.convertString=function(t){switch(t.toLocaleLowerCase()){case"none":return N.NONE;case"even":return N.EVEN;case"odd":return N.ODD;default:return N.EVEN}},t.prototype.convertEnum=function(t){switch(t){case S.NONE:return N.NONE;case S.EVEN:return N.EVEN;case S.ODD:return N.ODD;default:return N.EVEN}},t}(),H=function(){function t(){}return t.prototype.convert=function(t){return t},t.decorators=[{type:e.Injectable}],t}(),k=function(){function t(){this.source=[],this.columns=[],this.pageChanged=new e.EventEmitter,this.pageSizeChanged=new e.EventEmitter,this.itemsSelected=new e.EventEmitter,this.columnsChanged=new e.EventEmitter,this.containerWidthChanged=new e.EventEmitter,this.sourceEdited=new e.EventEmitter,this.cellEditEntered=new e.EventEmitter,this.cellEditCanceled=new e.EventEmitter,this.cellEditSubmitted=new e.EventEmitter,this.gridColumnConverter=new x,this.gridThemeConverter=new O,this.gridRowColoringConverter=new B,this.gridColumnMenuConverter=new H}return t.prototype.ngOnChanges=function(t){void 0!==t.columns&&void 0!==t.columns.currentValue&&(this.columnsConfig=this.gridColumnConverter.convert(this.columns)),void 0!==t.theme&&void 0!==t.theme.currentValue&&(this.themeConfig=this.gridThemeConverter.convert(this.theme)),void 0!==t.rowColoring&&void 0!==t.rowColoring.currentValue&&(this.rowColoringConfig=this.gridRowColoringConverter.convert(this.rowColoring)),void 0!==t.columnMenu&&void 0!==t.columnMenu.currentValue&&(this.columnMenuConfig=this.gridColumnMenuConverter.convert(this.columnMenu))},t.prototype.onPageChange=function(t){this.pageChanged.emit(t)},t.prototype.onPageSizeChange=function(t){this.pageSizeChanged.emit(t)},t.prototype.onItemSelect=function(t){this.itemsSelected.emit(t)},t.prototype.onColumnsChange=function(){this.columnsChanged.emit()},t.prototype.onContainerWidthChange=function(t){this.containerWidthChanged.emit(t)},t.prototype.onSourceEdit=function(t){this.sourceEdited.emit(t)},t.prototype.onCellEditEnter=function(){this.cellEditEntered.emit()},t.prototype.onCellEditSubmit=function(){this.cellEditSubmitted.emit()},t.prototype.onCellEditCancel=function(){this.cellEditCanceled.emit()},t.propDecorators={columnHeaderTop:[{type:e.Input}],columnHeaderBottom:[{type:e.Input}],maxHeight:[{type:e.Input}],width:[{type:e.Input}],autoResizeWidth:[{type:e.Input}],source:[{type:e.Input}],columns:[{type:e.Input}],paging:[{type:e.Input}],verticalGrid:[{type:e.Input}],horizontalGrid:[{type:e.Input}],theme:[{type:e.Input}],rowColoring:[{type:e.Input}],loading:[{type:e.Input}],virtualScroll:[{type:e.Input}],sorting:[{type:e.Input}],filtering:[{type:e.Input}],quickFilters:[{type:e.Input}],searching:[{type:e.Input}],editMode:[{type:e.Input}],cellEditing:[{type:e.Input}],infoPanel:[{type:e.Input}],aggregation:[{type:e.Input}],columnMenu:[{type:e.Input}],pageChanged:[{type:e.Output}],pageSizeChanged:[{type:e.Output}],itemsSelected:[{type:e.Output}],columnsChanged:[{type:e.Output}],containerWidthChanged:[{type:e.Output}],sourceEdited:[{type:e.Output}],cellEditEntered:[{type:e.Output}],cellEditCanceled:[{type:e.Output}],cellEditSubmitted:[{type:e.Output}]},t}();var L=function(){function t(){}return t.prototype.build=function(){return this.buildObject()},t}();var z=function(t){function e(e){var n=t.call(this)||this;return n.enabled=e,n}return g(e,t),e.prototype.buildObject=function(){return new V(this.enabled)},e.prototype.withEnabled=function(t){return this.enabled=t,this},e}(L);var j=function(t){function e(){return t.call(this,e.defaultEnabled)||this}return g(e,t),e.defaultEnabled=!0,e}(z);var V=function(){function t(t){this.enabled=t}return t.prototype.isEnabled=function(){return this.enabled},t.Builder=z,t.DefaultBuilder=j,t}();var U=function(t){function e(e,n,r){var i=t.call(this)||this;return i.headerEnabled=e,i.bottomPaging=n,i.topPaging=r,i.border=!0,i}return g(e,t),e.prototype.buildObject=function(){return new W(this.headerEnabled,this.bottomPaging,this.topPaging,this.border)},e.prototype.withHeader=function(t){return this.headerEnabled=t,this},e.prototype.withBottomPaging=function(t){return this.bottomPaging=t,this},e.prototype.withTopPaging=function(t){return this.topPaging=t,this},e.prototype.withBorder=function(t){return this.border=t,this},e}(L);var Q=function(t){function e(){return t.call(this,e.defaultHeaderEnabled,e.defaultBottomPaging,e.defaultTopPaging)||this}return g(e,t),e.defaultHeaderEnabled=!0,e.defaultBottomPaging=(new V.DefaultBuilder).build(),e.defaultTopPaging=(new V.DefaultBuilder).build(),e}(U);var W=function(){function t(t,e,n,r){this.headerEnabled=t,this.bottomPaging=e,this.topPaging=n,this.border=r}return t.prototype.isHeaderEnabled=function(){return this.headerEnabled},t.prototype.isBorderEnabled=function(){return this.border},t.prototype.getBottomPaging=function(){return this.bottomPaging},t.prototype.getTopPaging=function(){return this.topPaging},t.Builder=U,t.DefaultBuilder=Q,t}();var G=(new W.DefaultBuilder).build(),K=[{provide:W,useValue:G}],X=new e.InjectionToken("StructureParentComponent"),J=function(){function t(){}return t.prototype.generateId=function(){return t.index++,t.PREFIX+t.index},t.PREFIX="gui-grid-",t.index=0,t.decorators=[{type:e.Injectable}],t}();var Y=function(){function t(){this.gridMap=new Map}return t.prototype.register=function(t,e,n){this.gridMap.set(t,{component:e,structureId:n})},t.prototype.unregister=function(t){this.gridMap.delete(t)},t.prototype.getValues=function(t){return this.gridMap.get(t)},t.decorators=[{type:e.Injectable}],t}();var q=function(){function t(t,e){this.gridComponent=t,this.structureId=e}return t.prototype.provide=function(){var t=this.gridComponent;return{changeColumnHeaderTop:function(e){t.columnHeaderTop=e,t.detectChanges()}}},t}();var Z=function(t){function r(e,n,r,i,o){var a=t.call(this)||this;return a.platformId=e,a.elementRef=n,a.changeDetectorRef=r,a.gridRegister=i,a.gridIdGenerator=o,a}return g(r,t),r.prototype.ngOnInit=function(){var t=this,e=this.gridId;void 0===e&&(e=this.gridIdGenerator.generateId()),this.localGridId=e,this.exposeGridId(),this.gridRegister.register(e,this,this.structureRef.getStructureId()),n.isPlatformBrowser(this.platformId)&&(window.getGuiGrid=function(e){var n=t.gridRegister.getValues(e);return n?new q(n.component,n.structureId).provide():void 0})},r.prototype.ngOnDestroy=function(){this.gridRegister.unregister(this.localGridId)},r.prototype.getElementRef=function(){return this.elementRef},r.prototype.getGridId=function(){return""},r.prototype.detectChanges=function(){this.changeDetectorRef.detectChanges()},r.prototype.exposeGridId=function(){this.elementRef.nativeElement.setAttribute("gui-grid-id",this.localGridId)},r.decorators=[{type:e.Component,args:[{selector:"gui-grid",template:'<gui-structure\n\t\t\t   [maxHeight]="maxHeight"\n\t\t\t   [width]="width"\n\t\t\t   [autoResizeWidth]="autoResizeWidth"\n\t\t\t   [columns]="columnsConfig"\n\t\t\t   [columnHeaderTop]="columnHeaderTop"\n\t\t\t   [columnHeaderBottom]="columnHeaderBottom"\n\t\t\t   [source]="source"\n\t\t\t   [paging]="paging"\n\t\t\t   [verticalGrid]="verticalGrid"\n\t\t\t   [horizontalGrid]="horizontalGrid"\n\t\t\t   [theme]="themeConfig"\n\t\t\t   [rowColoring]="rowColoringConfig"\n\t\t\t   [loading]="loading"\n\t\t\t   [virtualScroll]="virtualScroll"\n\t\t\t   [sorting]="sorting"\n\t\t\t   [filtering]="filtering"\n\t\t\t   [quickFilters]="quickFilters"\n\t\t\t   [searching]="searching"\n\t\t\t   [editMode]="editMode"\n\t\t\t   [cellEditing]="cellEditing"\n\t\t\t   [infoPanel]="infoPanel"\n\t\t\t   [columnMenu]="columnMenuConfig"\n\t\t\t   [aggregation]="aggregation"\n\t\t\t   (pageChanged)="onPageChange($event)"\n\t\t\t   (pageSizeChanged)="onPageSizeChange($event)"\n\t\t\t   (itemsSelected)="onItemSelect($event)"\n\t\t\t   (columnsChanged)="onColumnsChange()"\n\t\t\t   (containerWidthChanged)="onContainerWidthChange($event)"\n\t\t\t   (sourceEdited)="onSourceEdit($event)"\n\t\t\t   (cellEditEntered)="onCellEditEnter()"\n\t\t\t   (cellEditSubmitted)="onCellEditSubmit()"\n\t\t\t   (cellEditCanceled)="onCellEditCancel()"\n\t\t\t   #structure >\n</gui-structure>\n',providers:m(K,[{provide:X,useExisting:r}]),host:{"[class]":'"gui-grid"',"[style.height]":"maxHeight"},encapsulation:e.ViewEncapsulation.None,styles:[".gui-grid{display:block;width:100%}"]}]}],r.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[e.PLATFORM_ID]}]},{type:e.ElementRef},{type:e.ChangeDetectorRef},{type:Y},{type:J}]},r.propDecorators={structureRef:[{type:e.ViewChild,args:["structure",{static:!0}]}],gridId:[{type:e.Input}]},r}(k);var _=[i.FabricBadgeModule,i.FabricButtonModule,i.FabricButtonGroupModule,i.FabricCheckboxModule,i.FabricChipModule,i.FabricDropdownModule,i.FabricRadioButtonModule,i.FabricRadioGroupModule,i.FabricProgressBarModule,i.FabricProgressSpinnerModule,i.FabricSelectModule,i.FabricSpinnerModule,i.FabricTabModule,i.FabricToggleButtonModule,i.FabricInputModule,i.FabricDialogModule,i.FabricInlineDialogModule,i.FabricTabModule],$=function(){function t(){this.unsubscribe$=new a.Subject}return t.prototype.ngOnDestroy=function(){this.unsubscribe()},t.prototype.unsubscribe=function(){this.unsubscribe$.next(),this.unsubscribe$.complete()},t.prototype.takeUntil=function(){return s.takeUntil(this.unsubscribe$)},t}();var tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e}($),et=function(){};var nt=function(){function t(t){this.structureRepository=t}return t.prototype.on=function(t){return this.structureRepository.onStructure(t).pipe(s.filter((function(e){return e.getId().toString()===t.toString()})),s.map((function(t){return t.getPaging()})))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:et}]},t}();var rt=function(t){function e(e){return t.call(this,e)||this}return g(e,t),e}(o.AggregateId),it=new rt("-1"),ot=function(){function t(t){this.pagingRepository=t}return t.prototype.onPaging=function(t){return void 0===t&&(t=it),this.pagingRepository.on(t)},t.prototype.onSinglePaging=function(t){return void 0===t&&(t=it),this.onPaging(t).pipe(s.take(1))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:nt}]},t}();var at=function(t){function e(e,n){var r=t.call(this,e,"SetPagingCommand")||this;return r.structureId=e,r.payload=n,r}return g(e,t),e}(o.Command);var st=function(t){function e(e,n){var r=t.call(this,e,"ChangePagesizeCommand")||this;return r.structureId=e,r.pageSize=n,r}return g(e,t),e}(o.Command);var ut=function(t){function e(e){var n=t.call(this,e,"NextPageCommand")||this;return n.structureId=e,n}return g(e,t),e}(o.Command);var ct=function(t){function e(e){var n=t.call(this,e,"PrevPageCommand")||this;return n.structureId=e,n}return g(e,t),e}(o.Command);var gt=function(){function t(t){this.commandDispatcher=t}return t.prototype.setPaging=function(t,e){this.commandDispatcher.dispatch(new at(t,e))},t.prototype.changePageSize=function(t,e){this.commandDispatcher.dispatch(new st(t,e))},t.prototype.nextPage=function(t){this.commandDispatcher.dispatch(new ut(t))},t.prototype.prevPage=function(t){this.commandDispatcher.dispatch(new ct(t))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:o.CommandDispatcher}]},t}();var pt=function(){function t(t){this.pagingDispatcher=t}return t.prototype.enable=function(t){void 0===t&&(t=it),this.pagingDispatcher.setPaging(t,{enabled:!0})},t.prototype.disable=function(t){void 0===t&&(t=it),this.pagingDispatcher.setPaging(t,{enabled:!1})},t.prototype.setPaging=function(t,e){void 0===e&&(e=it),this.pagingDispatcher.setPaging(e,t)},t.prototype.changePageSize=function(t,e){void 0===e&&(e=it),this.pagingDispatcher.changePageSize(e,t)},t.prototype.nextPage=function(t){void 0===t&&(t=it),this.pagingDispatcher.nextPage(t)},t.prototype.prevPage=function(t){void 0===t&&(t=it),this.pagingDispatcher.prevPage(t)},t.prototype.goToPage=function(t,e){if(e<t)for(;e!==t;)this.nextPage(),e+=1;else for(;e!==t;)this.prevPage(),e-=1},t.prototype.changePagerTop=function(t,e){void 0===e&&(e=it),this.pagingDispatcher.setPaging(e,{pagerTop:t})},t.prototype.changePagerBottom=function(t,e){void 0===e&&(e=it),this.pagingDispatcher.setPaging(e,{pagerBottom:t})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:gt}]},t}();var lt=function(){function t(){this.origin=new Map,this.origin$=new a.ReplaySubject}return t.prototype.setOrigin=function(t,e){this.origin.set(e.toString(),t),this.origin$.next(this.origin)},t.prototype.onOrigin=function(t){return this.origin$.asObservable().pipe(s.map((function(e){return e.get(t.toString())})),s.distinctUntilChanged())},t.decorators=[{type:e.Injectable}],t}();var dt=function(){function t(){this.origin=new Map,this.origin$=new a.ReplaySubject}return t.prototype.setItems=function(t,e){this.origin.set(e.toString(),t),this.origin$.next(this.origin)},t.prototype.onPreparedItems=function(t){return this.origin$.asObservable().pipe(s.map((function(e){return e.get(t.toString())})),s.distinctUntilChanged())},t.decorators=[{type:e.Injectable}],t}();var ht=function(){function t(t,e,n){this.structureRepository=t,this.structurePreparedItemsRepository=e,this.structureSourceOriginRepository=n}return t.prototype.onEntities=function(t){return void 0===t&&(t=it),this.structureRepository.onStructure(t).pipe(s.map((function(t){return t.getEntities()})),s.distinctUntilChanged((function(t,e){if(t.length!==e.length)return!1;var n=!0;return t.forEach((function(t,r){t.equals(e[r])||(n=!1)})),n})))},t.prototype.onEntitiesSize=function(t){return void 0===t&&(t=it),this.onEntities(t).pipe(s.map((function(t){return t.length})))},t.prototype.onSingleEntities=function(t){return void 0===t&&(t=it),this.onEntities(t).pipe(s.take(1))},t.prototype.onOriginSize=function(t){return void 0===t&&(t=it),this.structureSourceOriginRepository.onOrigin(t).pipe(s.map((function(t){return t.length})))},t.prototype.onLoading=function(t){return void 0===t&&(t=it),this.structureRepository.onStructure(t).pipe(s.map((function(t){return t.getSource().isLoading()})))},t.prototype.onPreparedEntities=function(t){return void 0===t&&(t=it),this.structurePreparedItemsRepository.onPreparedItems(t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:et},{type:dt},{type:lt}]},t}();var ft=function(t){function n(e,n,r,i){var o=t.call(this)||this;return o.changeDetectorRef=e,o.pagingQueryService=n,o.pagingCommandService=r,o.sourceQueryService=i,o.alternativeDisplay=!1,o}return g(n,t),n.prototype.ngOnInit=function(){var t=this;this.pagingQueryService.onPaging().pipe(this.takeUntil()).subscribe((function(e){t.paging=e,t.changeDetectorRef.detectChanges()})),this.sourceQueryService.onOriginSize().pipe(this.takeUntil()).subscribe((function(e){t.sourceSize=e,t.changeDetectorRef.detectChanges()}))},n.prototype.changePageSize=function(t){this.pagingCommandService.changePageSize(t)},n.prototype.nextPage=function(){this.sourceSize&&this.pagingCommandService.nextPage()},n.prototype.prevPage=function(){this.pagingCommandService.prevPage()},n.decorators=[{type:e.Component,args:[{selector:"gui-structure-paging",template:'<ng-container *ngIf="paging && !alternativeDisplay">\n\n\t<gui-structure-paging-select\n\t\t[paging]="paging"\n\t\t(pageSizeChanged)="changePageSize($event)">\n\t</gui-structure-paging-select>\n\n\t<gui-structure-paging-stats\n\t\t[paging]="paging">\n\t</gui-structure-paging-stats>\n\n\t<gui-structure-paging-navigator\n\t\t[paging]="paging"\n\t\t[sourceSize]="sourceSize"\n\t\t(prevPageChanged)="prevPage()"\n\t\t(nextPageChanged)="nextPage()">\n\t</gui-structure-paging-navigator>\n\n</ng-container>\n\n<ng-container *ngIf="paging && alternativeDisplay">\n\n\t\t<gui-structure-paging-select\n\t\t\t[paging]="paging"\n\t\t\t(pageSizeChanged)="changePageSize($event)">\n\t\t</gui-structure-paging-select>\n\n\t\t<gui-structure-alternative-paging-navigator\n\t\t\t[paging]="paging"\n\t\t\t[sourceSize]="sourceSize"\n\t\t\t(prevPageChanged)="prevPage()"\n\t\t\t(nextPageChanged)="nextPage()">\n\n\t\t\t<gui-structure-alternative-paging-pages\n\t\t\t\t[paging]="paging"\n\t\t\t\t[sourceSize]="sourceSize">\n\t\t\t</gui-structure-alternative-paging-pages>\n\n\t\t</gui-structure-alternative-paging-navigator>\n\n</ng-container>\n',changeDetection:e.ChangeDetectionStrategy.OnPush}]}],n.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:ot},{type:pt},{type:ht}]},n}(tt);var mt=function(){function t(t,e,n,r,i,o,a,s,u,c,g){this.enabled=t,this.page=e,this.pageSize=n,this.pageSizes=r,this.pagerTop=i,this.pagerBottom=o,this.isNextDisabled=a,this.isPrevDisabled=s,this.start=u,this.end=c,this.sourceSize=g}return t.prototype.isEnabled=function(){return this.enabled},t.prototype.getPage=function(){return this.page},t.prototype.getPageSize=function(){return this.pageSize},t.prototype.getPageSizes=function(){return this.pageSizes},t.prototype.isPagerTop=function(){return this.pagerTop},t.prototype.isPagerBottom=function(){return this.pagerBottom},t.prototype.isNextPageDisabled=function(){return this.isNextDisabled},t.prototype.isPrevPageDisabled=function(){return this.isPrevDisabled},t.prototype.getStart=function(){return this.start},t.prototype.getEnd=function(){return this.end},t.prototype.getSourceSize=function(){return this.sourceSize},t.prototype.calculateVisiblePages=function(t,e,n){return t-e<n&&n<t+e},t.prototype.sample=function(t){var e=this.getStart();return 0!==e&&(e-=1),t.slice(e,this.getEnd())},t}();var yt=function(){function t(){this.nextPageChanged=new e.EventEmitter,this.prevPageChanged=new e.EventEmitter,this.prevDisabled=!1,this.nextDisabled=!1}return t.prototype.ngOnChanges=function(){this.calculatePrev(),this.calculateNext()},t.prototype.prevPage=function(){this.prevPageChanged.emit()},t.prototype.nextPage=function(){this.nextPageChanged.emit()},t.prototype.calculatePrev=function(){this.paging&&(this.prevDisabled=this.paging.isPrevPageDisabled())},t.prototype.calculateNext=function(){(this.paging||this.sourceSize)&&(this.nextDisabled=this.paging.isNextPageDisabled())},t.decorators=[{type:e.Component,args:[{selector:"gui-structure-paging-navigator",template:'<gui-button-group>\n\t<button gui-button\n\t\t\t[disabled]="prevDisabled"\n\t\t\t(click)="prevPage()"\n\t\t\tclass="gui-structure-paging-navigator-prev">\n\t\tPrev\n\t</button>\n\n\t<button gui-button\n\t\t\t[disabled]="nextDisabled"\n\t\t\t(click)="nextPage()"\n\t\t\tclass="gui-structure-paging-navigator-next">\n\t\tNext\n\t</button>\n</gui-button-group>\n',changeDetection:e.ChangeDetectionStrategy.OnPush}]}],t.propDecorators={paging:[{type:e.Input}],sourceSize:[{type:e.Input}],nextPageChanged:[{type:e.Output}],prevPageChanged:[{type:e.Output}]},t}();var vt=function(){function t(){this.pageSizeChanged=new e.EventEmitter}return t.prototype.changePageSize=function(t){this.pageSizeChanged.emit(t)},t.decorators=[{type:e.Component,args:[{selector:"gui-structure-paging-select",template:'<span>Items per page:</span>\n<gui-select [options]="paging.getPageSizes()"\n\t\t\t[selected]="paging.getPageSize()"\n\t\t\t[width]="25"\n\t\t\t(optionChanged)="changePageSize($event)">\n</gui-select>\n',changeDetection:e.ChangeDetectionStrategy.OnPush}]}],t.propDecorators={paging:[{type:e.Input}],pageSizeChanged:[{type:e.Output}]},t}();var bt=function(){function t(){}return t.prototype.ngOnChanges=function(t){this.calculate()},t.prototype.calculate=function(){this.paging&&(this.firstItemIndex=this.paging.getStart(),this.lastItemIndex=this.paging.getEnd(),this.sourceSize=this.paging.getSourceSize())},t.prototype.isSourceNotEmpty=function(){return this.sourceSize>0},t.decorators=[{type:e.Component,args:[{selector:"gui-structure-paging-stats",template:'<ng-container *ngIf="isSourceNotEmpty(); else noSource;">\n\t<span class="gui-structure-paging-source-stats">\n\t\t<span>{{firstItemIndex}}</span>\n\t\t-\n\t\t<span>{{lastItemIndex}}</span>\n\t</span>\n\t<span>\n\t\tof\n\t</span>\n\t<span class="gui-structure-paging-source-size">\n\t\t{{sourceSize}}\n\t</span>\n</ng-container>\n\n<ng-template #noSource>\n\t<span class="gui-structure-paging-source-stats gui-structure-paging-no-items">\n\t\tThere is no items.\n\t</span>\n</ng-template>\n',changeDetection:e.ChangeDetectionStrategy.OnPush}]}],t.propDecorators={paging:[{type:e.Input}]},t}();var Ct=function(){function t(t){this.pagingCommandService=t,this.nextPageChanged=new e.EventEmitter,this.prevPageChanged=new e.EventEmitter,this.prevDisabled=!1,this.nextDisabled=!1}return t.prototype.ngOnChanges=function(){this.calculatePrev(),this.calculateNext()},t.prototype.prevPage=function(){this.prevPageChanged.emit()},t.prototype.nextPage=function(){this.nextPageChanged.emit()},t.prototype.firstPage=function(){this.pagingCommandService.goToPage(1,this.paging.getPage())},t.prototype.lastPage=function(){var t=Math.ceil(this.sourceSize/this.paging.getPageSize());this.pagingCommandService.goToPage(t,this.paging.getPage())},t.prototype.calculatePrev=function(){this.paging&&(this.prevDisabled=this.paging.isPrevPageDisabled())},t.prototype.calculateNext=function(){(this.paging||this.sourceSize)&&(this.nextDisabled=this.paging.isNextPageDisabled())},t.decorators=[{type:e.Component,args:[{selector:"gui-structure-alternative-paging-navigator",template:'<button gui-button\n\t\t[disabled]="prevDisabled"\n\t\t(click)="firstPage()">\n\t<<\n</button>\n\n<button gui-button\n\t\t[disabled]="prevDisabled"\n\t\t(click)="prevPage()"\n\t\tclass="gui-structure-paging-navigator-prev">\n\t< Prev\n</button>\n\n<ng-content></ng-content>\n\n<button gui-button\n\t\t[disabled]="nextDisabled"\n\t\t(click)="nextPage()"\n\t\tclass="gui-structure-paging-navigator-next">\n\tNext >\n</button>\n\n<button gui-button\n\t\t[disabled]="nextDisabled"\n\t\t(click)="lastPage()">\n\t>>\n</button>\n',changeDetection:e.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:pt}]},t.propDecorators={paging:[{type:e.Input}],sourceSize:[{type:e.Input}],nextPageChanged:[{type:e.Output}],prevPageChanged:[{type:e.Output}]},t}();var At=function(){function t(t){this.pagingCommandService=t,this.sourceSize=0,this.numberOfVisiblePages=3}return t.prototype.ngOnChanges=function(t){this.calculate()},t.prototype.calculate=function(){if(this.paging&&this.sourceSize){var t=Math.ceil(this.sourceSize/this.paging.getPageSize());if(this.currentPage=this.paging.getPage(),this.pages=[],this.pages.length<=t)for(var e=1;e<=t;e++)this.pages.push(e)}},t.prototype.isSourceNotEmpty=function(){return this.sourceSize>0},t.prototype.goToPage=function(t){var e=this.paging.getPage();this.pagingCommandService.goToPage(t,e)},t.prototype.calculateVisiblePages=function(t){return this.paging.calculateVisiblePages(this.currentPage,this.numberOfVisiblePages,t)},t.prototype.activePage=function(t){return this.currentPage===t},t.decorators=[{type:e.Component,args:[{selector:"gui-structure-alternative-paging-pages",template:'<ng-container *ngIf="isSourceNotEmpty(); else noSource;">\n\n\t\t<div *ngFor="let page of pages">\n\t\t\t<div [class.gui-paging-visible-page]="calculateVisiblePages(page)" >\n\t\t\t\t<div\n\t\t\t\t\t[class.gui-paging-active-page]="activePage(page)"\n\t\t\t\t\t(click)="goToPage(page)" class="gui-paging-page">\n\t\t\t\t\t{{page}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n</ng-container>\n\n<ng-template #noSource>\n\t<span class="gui-structure-paging-source-stats gui-structure-paging-no-items">\n\t\tThere is no items.\n\t</span>\n</ng-template>\n',changeDetection:e.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:pt}]},t.propDecorators={paging:[{type:e.Input}],sourceSize:[{type:e.Input}]},t}();var Et=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule,i.FabricModule],declarations:[ft,yt,vt,bt,Ct,At],exports:[ft,yt,vt,bt,Ct,At]}]}],t}(),It=function(){function t(){}return t.prototype.transform=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},t.decorators=[{type:e.Pipe,args:[{name:"numberFormatter"}]}],t}(),St=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[It],exports:[It]}]}],t}(),wt=function(){function t(){}return t.decorators=[{type:e.Component,args:[{template:'\n\t\t<div class="gui-structure-info-modal">\n\t\t\t<p>Generic UI Grid</p>\n\t\t\t<p>version 0.5.4</p>\n\n\t\t\t<p>Links:</p>\n\t\t\t<ul>\n\n\t\t\t\t<li>\n\t\t\t\t\t<a href="http://generic-ui.com/">Website</a>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href="http://generic-ui.com/guide/">Documentation</a>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href="https://github.com/generic-ui/generic-ui/tree/master/ngx-grid">Github</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\n\t\t\t<p>Feedback:</p>\n\t\t\t<ul>\n\n\t\t\t\t<li>\n\t\t\t\t\t<a href="https://github.com/generic-ui/generic-ui/issues">Report a bug</a>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href="https://github.com/generic-ui/generic-ui/issues">Suggest an idea</a>\n\t\t\t\t</li>\n\n\t\t\t</ul>\n\t\t</div>\n\t',changeDetection:e.ChangeDetectionStrategy.OnPush}]}],t}(),Dt=function(t){function n(e,n,r){var i=t.call(this)||this;return i.sourceQueryService=e,i.dialog=n,i.changeDetectorRef=r,i.infoPanel=wt,i}return g(n,t),n.prototype.ngOnInit=function(){var t=this;this.sourceQueryService.onOriginSize().pipe(this.takeUntil()).subscribe((function(e){t.totalItemsSize=e,t.changeDetectorRef.detectChanges()})),this.sourceQueryService.onPreparedEntities().pipe(this.takeUntil()).subscribe((function(e){t.preparedItemsSize=e.length,t.changeDetectorRef.detectChanges()}))},n.prototype.openInfo=function(){this.dialog.open(this.infoPanel)},n.decorators=[{type:e.Component,args:[{selector:"gui-structure-info-panel",template:'\n\n\t\t<ng-container *ngIf="preparedItemsSize !== undefined && totalItemsSize !== undefined">\n\t\t\t\n\t\t\t<p *ngIf="preparedItemsSize === totalItemsSize">\n\t\t\t\tShowing <b>{{totalItemsSize | numberFormatter}}</b> items\n\t\t\t</p>\n\n\t\t\t<p *ngIf="preparedItemsSize !== totalItemsSize">\n\t\t\t\tShowing <b>{{preparedItemsSize | numberFormatter}}</b> out of <b>{{totalItemsSize | numberFormatter}}</b> items\n\t\t\t</p>\n\t\t\t\n\t\t</ng-container>\n\t\t<div>\n\t\t\t<p (click)="openInfo()">\n\t\t\t\t<button>i</button>\n\t\t\t\tInfo\n\t\t\t</p>\n\t\t</div>\n\t',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[{type:ht},{type:i.FabricDialogService},{type:e.ChangeDetectorRef}]},n}(tt);var Pt=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule,St],declarations:[Dt,wt],exports:[wt,Dt],entryComponents:[wt]}]}],t}(),Rt=function(){function t(){}return t.prototype.getTemplate=function(t){switch(t){case T.TEXT:return this.textTemplate;case T.CHIP:return this.chipTemplate;case T.LINK:return this.linkTemplate;case T.IMAGE:return this.imageTemplate;case T.CHECKBOX:return this.checkboxTemplate;case T.BOLD:return this.boldTemplate;case T.ITALIC:return this.italicTemplate;case T.CUSTOM:return this.customTemplate;case T.FUNCTION:return this.functionTemplate;default:return this.textTemplate}},t.decorators=[{type:e.Component,args:[{template:'\n\n\t\t<ng-template #text let-element="element">\n\t\t\t{{ element }}\n\t\t</ng-template>\n\n\t\t<ng-template #number let-element="element">\n\t\t\t<span class="gui-cell-number">\n\t\t\t\t{{ element }}\n\t\t\t</span>\n\t\t</ng-template>\n\n\t\t<ng-template #chip let-element="element">\n\t\t\t<gui-chip>\n\t\t\t\t{{ element }}\n\t\t\t</gui-chip>\n\t\t</ng-template>\n\n\t\t<ng-template #link let-element="element">\n\t\t\t<a gui-button link="true" href="{{ element }}">\n\t\t\t\t{{ element }}\n\t\t\t</a>\n\t\t</ng-template>\n\n\t\t<ng-template #image let-element="element">\n\t\t\t<img src="{{ element }}"/>\n\t\t</ng-template>\n\n\t\t<ng-template #checkbox let-element="element">\n\t\t\t<span class="gui-cell-boolean">\n\t\t\t\t<gui-checkbox [checked]="!!element" [disabled]="true"></gui-checkbox>\n\t\t\t</span>\n\t\t</ng-template>\n\n\t\t<ng-template #bold let-element="element">\n\t\t\t<span class="gui-bold">{{ element }}</span>\n\t\t</ng-template>\n\n\t\t<ng-template #italic let-element="element">\n\t\t\t<span class="gui-italic">{{ element }}</span>\n\t\t</ng-template>\n\n\t\t<ng-template #custom let-element="element" >\n\t\t\t{{ element }}\n\t\t</ng-template>\n\n\t\t<ng-template #function let-element="element" >\n\t\t\t<gui-function-view [element]="element" ></gui-function-view>\n\t\t</ng-template>\n\n\t'}]}],t.propDecorators={textTemplate:[{type:e.ViewChild,args:["text",{read:e.TemplateRef,static:!0}]}],numberTemplate:[{type:e.ViewChild,args:["number",{read:e.TemplateRef,static:!0}]}],chipTemplate:[{type:e.ViewChild,args:["chip",{read:e.TemplateRef,static:!0}]}],linkTemplate:[{type:e.ViewChild,args:["link",{read:e.TemplateRef,static:!0}]}],imageTemplate:[{type:e.ViewChild,args:["image",{read:e.TemplateRef,static:!0}]}],checkboxTemplate:[{type:e.ViewChild,args:["checkbox",{read:e.TemplateRef,static:!0}]}],boldTemplate:[{type:e.ViewChild,args:["bold",{read:e.TemplateRef,static:!0}]}],italicTemplate:[{type:e.ViewChild,args:["italic",{read:e.TemplateRef,static:!0}]}],customTemplate:[{type:e.ViewChild,args:["custom",{read:e.TemplateRef,static:!0}]}],functionTemplate:[{type:e.ViewChild,args:["function",{read:e.TemplateRef,static:!0}]}]},t}();var Tt=function(){function t(){this.subject$=new a.ReplaySubject(1)}return t.prototype.emit=function(t){this.subject$.next(t)},t.prototype.select=function(){return this.subject$.asObservable()},t}();var Mt={SUBMIT:0,BLUR:1,CANCEL:2};Mt[Mt.SUBMIT]="SUBMIT",Mt[Mt.BLUR]="BLUR",Mt[Mt.CANCEL]="CANCEL";var xt=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.ENTER_KEY_CODE=13,e.ESC_KEY_CODE=27,e}return g(n,t),n.prototype.submit=function(){this.emitStatus(Mt.SUBMIT)},n.prototype.cancel=function(){this.emitStatus(Mt.CANCEL)},n.prototype.emitStatus=function(t){this.status&&this.status.emit(t)},n.propDecorators={value:[{type:e.Input}],valueChanges:[{type:e.Input}],status:[{type:e.Input}],focus:[{type:e.Input}]},n}(tt);var Ft=function(t){function n(e){var n,r=t.call(this)||this;return r.formBuilder=e,r.filterFieldName="phrase",r.filterForm=r.formBuilder.group(((n={})[r.filterFieldName]=[""],n)),r}return g(n,t),n.prototype.ngOnChanges=function(t){void 0!==t.value&&this.filterForm.get(this.filterFieldName).setValue(this.value)},n.prototype.ngOnInit=function(){this.observeChanges()},n.prototype.ngAfterViewInit=function(){var t=this,e=this.inputRef.nativeElement;this.focusField(e),this.emitValueChange(e.value),a.fromEvent(e,"blur").pipe(this.takeUntil()).subscribe((function(){t.unsubscribe(),t.submit()}));var n=a.fromEvent(e,"keyup");n.pipe(s.filter((function(e){return e.keyCode===t.ENTER_KEY_CODE})),this.takeUntil()).subscribe((function(){t.unsubscribe(),t.submit()})),n.pipe(s.filter((function(e){return e.keyCode===t.ESC_KEY_CODE})),this.takeUntil()).subscribe((function(){t.unsubscribe(),t.cancel()}))},n.prototype.focusField=function(t){this.focus&&t.focus()},n.prototype.observeChanges=function(){var t=this;this.filterForm.controls[this.filterFieldName].valueChanges.pipe(this.takeUntil()).subscribe((function(e){t.emitValueChange(e)}))},n.prototype.emitValueChange=function(t){this.valueChanges&&this.valueChanges.emit(t)},n.propDecorators={inputRef:[{type:e.ViewChild,args:["input",{static:!0}]}]},n}(xt);var Ot=function(t){function n(e){return t.call(this,e)||this}return g(n,t),n.decorators=[{type:e.Component,args:[{selector:"gui-number-edit",template:'\n\n\t\t<form [formGroup]="filterForm" >\n\t\t\t<input #input [formControlName]="filterFieldName" type="number" class="gui-input" />\n\t\t</form>\n\n\t',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[{type:r.FormBuilder}]},n}(Ft);function Nt(t,e){if("function"!=typeof Object.getPrototypeOf(t)[e])throw new Error('Method "'+e+'" of class "'+t.constructor.name+"\" doesn't override any method of base class.")}var Bt=function(t){function n(e){return t.call(this,e)||this}return g(n,t),n.prototype.focusField=function(t){this.focus&&(t.focus(),t.setSelectionRange(0,t.value.length))},n.decorators=[{type:e.Component,args:[{selector:"gui-string-edit",template:'\n\n\t\t<form [formGroup]="filterForm" >\n\t\t\t<input #input [formControlName]="filterFieldName" type="type" class="gui-input" />\n\t\t</form>\n\n\t',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[{type:r.FormBuilder}]},l([Nt,d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],n.prototype,"focusField",null),n}(Ft),Ht=function(){function t(){}return t.prototype.getTemplate=function(t){switch(t){case w.STRING:return this.stringTemplate;case w.NUMBER:return this.numberTemplate;case w.BOOLEAN:return this.booleanTemplate;default:return this.emptyTemplate}},t.decorators=[{type:e.Component,args:[{template:'\n\n\t\t<ng-template #string let-valueChanges="valueChanges" let-value="value" let-status="status" let-focus="focus" >\n\t\t\t<gui-string-edit [valueChanges]="valueChanges" [value]="value" [status]="status" [focus]="focus">\n\t\t\t</gui-string-edit>\n\t\t</ng-template>\n\n\t\t<ng-template #number let-valueChanges="valueChanges" let-value="value" let-status="status" let-focus="focus" >\n\t\t\t<gui-number-edit [valueChanges]="valueChanges" [value]="value" [status]="status" [focus]="focus">\n\t\t\t</gui-number-edit>\n\t\t</ng-template>\n\n\t\t<ng-template #boolean let-valueChanges="valueChanges" let-value="value" let-status="status" let-focus="focus" >\n\t\t\t<gui-boolean-edit [valueChanges]="valueChanges" [value]="value" [status]="status" [focus]="focus">\n\t\t\t</gui-boolean-edit>\n\t\t</ng-template>\n\n\t\t<ng-template #empty>\n\n\t\t</ng-template>\n\n\t'}]}],t.propDecorators={stringTemplate:[{type:e.ViewChild,args:["string",{read:e.TemplateRef,static:!0}]}],numberTemplate:[{type:e.ViewChild,args:["number",{read:e.TemplateRef,static:!0}]}],booleanTemplate:[{type:e.ViewChild,args:["boolean",{read:e.TemplateRef,static:!0}]}],emptyTemplate:[{type:e.ViewChild,args:["empty",{read:e.TemplateRef,static:!0}]}]},t}();var kt=function(t){function n(){var e=t.call(this)||this;return e.filterFieldName="booleanEdit",e}return g(n,t),n.prototype.ngAfterViewInit=function(){var t=this,e=this.checkboxRef.nativeElement.querySelector('input[type="checkbox"]');e.focus(),a.fromEvent(e,"blur").pipe(s.debounceTime(400),this.takeUntil()).subscribe((function(){t.unsubscribe(),t.submit()}))},n.prototype.toggle=function(t){this.valueChanges.emit(t)},n.decorators=[{type:e.Component,args:[{selector:"gui-boolean-edit",template:'\n\n\t\t<gui-checkbox #checkbox\n\t\t\t\t\t  [checked]="value"\n\t\t\t\t\t  [name]="filterFieldName"\n\t\t\t\t\t  (changed)="toggle($event)"></gui-checkbox>\n\n\t',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[]},n.propDecorators={checkboxRef:[{type:e.ViewChild,args:["checkbox",{read:e.ElementRef,static:!0}]}]},n}(xt);var Lt=function(){function t(){}return t.decorators=[{type:e.Component,args:[{selector:"gui-column",template:""}]}],t.propDecorators={cellTemplate:[{type:e.ContentChild,args:[e.TemplateRef,{static:!1}]}],header:[{type:e.Input}]},t}();var zt=function(){function t(t){this.sanitizer=t}return t.prototype.ngOnChanges=function(){this.safeHTML=this.sanitizer.bypassSecurityTrustHtml(this.element)},t.decorators=[{type:e.Component,args:[{selector:"gui-function-view",template:'\n\n\t\t<div [innerHTML]="safeHTML"></div>\n\n\t'}]}],t.ctorParameters=function(){return[{type:u.DomSanitizer}]},t.propDecorators={element:[{type:e.Input}]},t}();var jt={PERCENTAGE:0,NUMBER:1,AUTO:2};jt[jt.PERCENTAGE]="PERCENTAGE",jt[jt.NUMBER]="NUMBER",jt[jt.AUTO]="AUTO";var Vt=function(){function t(t){this.baseWidth=t,this.setWidthAndType(t)}return t.prototype.getWidth=function(){return this.width},t.prototype.getColumnType=function(){return this.template},t.prototype.isTypePercentage=function(){return this.template===jt.PERCENTAGE},t.prototype.isTypeAuto=function(){return this.template===jt.AUTO},t.prototype.isTypeNumber=function(){return this.template===jt.NUMBER},t.prototype.setWidth=function(t){this.width=t},t.prototype.setWidthAndType=function(t){null==t||"auto"===t?(this.template=jt.AUTO,this.setWidth(null)):this.isPercentage(t)?(this.template=jt.PERCENTAGE,this.setWidth(this.percentageToNumber(""+t))):(this.isStringNumber(t),this.template=jt.NUMBER,this.setWidth(+t))},t.prototype.clone=function(){return new t(this.baseWidth)},t.prototype.isPercentage=function(t){return"string"==typeof t&&"%"===t[t.length-1]},t.prototype.percentageToNumber=function(t){return+t.slice(0,-1)},t.prototype.isStringNumber=function(t){var e=+t;return Number.isNaN(e)},t}();var Ut=function(){function t(t){this.MIN_COLUMN_WIDTH=t}return t.prototype.calculateMinWidth=function(t){var e=this.segregateColumns(t),n=e.staticColumns,r=e.fluidColumns,i=0;return n.forEach((function(t){i+=t.getWidth()})),i+=r.length*this.MIN_COLUMN_WIDTH},t.prototype.segregateColumns=function(t){var e=this;return{staticColumns:t.filter((function(t){return t.isTypeNumber()&&t.getWidth()>e.MIN_COLUMN_WIDTH})),fluidColumns:t.filter((function(t){return t.isTypeAuto()||t.isTypePercentage()||t.isTypeNumber()&&t.getWidth()<=e.MIN_COLUMN_WIDTH}))}},t}();var Qt=function(){function t(t,e,n){this.source=t,this.width=e,this.MIN_COLUMN_WIDTH=n,this.columns=this.source.map((function(t){return t.clone()}))}return t.prototype.calculate=function(){var t=this.width,e=m(this.columns);this.adjustMinimalWidth(e);var n=[];if(e.forEach((function(e,r){e.isTypeNumber()?t-=e.getWidth():n.push(e)})),0!==(e=n).length){var r=t/e.length;e.forEach((function(t,e){t.setWidth(r)}))}return this.columns},t.prototype.adjustMinimalWidth=function(t){var e=this;t.forEach((function(t){t.isTypeNumber()&&t.getWidth()<e.MIN_COLUMN_WIDTH&&t.setWidthAndType(e.MIN_COLUMN_WIDTH)}))},t.prototype.adjustPercentageWidth=function(){var t,e;this.columns.filter((function(t){return t.isTypePercentage()}));try{for(var n=h(this.columns),r=n.next();!r.done;r=n.next()){var i=r.value;i.getColumnType()===jt.PERCENTAGE&&i.setWidth(this.width*i.getWidth()*.01)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.adjustAutoWidth=function(){for(var t,e,n=this.width,r=[],i=0;i<this.columns.length;i+=1){(u=this.columns[i]).getColumnType()!==jt.AUTO?n-=u.getWidth():r.push(u)}if(r.length>0){var o=n/r.length;try{for(var a=h(r),s=a.next();!s.done;s=a.next()){var u;(u=s.value).setWidth(o)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}}},t}();var Wt=function(){function t(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=100),this.MIN_COLUMN_WIDTH=t,this.baseColumnWidths=e.map((function(t){return new Vt(t.width)})),this.columnWidths=e.map((function(t){return new Vt(t.width)})),this.setContainerWidth(n),this.calculate()}return t.prototype.getColumns=function(){return this.baseColumnWidths},t.prototype.getColumnsWidth=function(){return this.width},t.prototype.getWidths=function(){return this.columnWidths.map((function(t){return t.getWidth()}))},t.prototype.getMinWidth=function(){return new Ut(this.MIN_COLUMN_WIDTH).calculateMinWidth(this.columnWidths)},t.prototype.setWidth=function(t){this.setContainerWidth(t),this.calculate()},t.prototype.setColumns=function(t){this.baseColumnWidths=t.map((function(t){return new Vt(t.width)})),this.columnWidths=t.map((function(t){return new Vt(t.width)})),this.calculate()},t.prototype.calculate=function(){if(this.baseColumnWidths&&this.width){var t=new Qt(this.baseColumnWidths,this.width,this.MIN_COLUMN_WIDTH);this.columnWidths=t.calculate()}},t.prototype.setContainerWidth=function(t){this.getMinWidth()>t?this.width=this.getMinWidth():this.width=t,this.calculate()},t}();var Gt={ASC:0,DESC:1,NONE:2};Gt[Gt.ASC]="ASC",Gt[Gt.DESC]="DESC",Gt[Gt.NONE]="NONE";var Kt=function(){function t(t){this.templateFunction=function(t){return t},"function"==typeof t?(this.view=T.FUNCTION,this.templateFunction=t):this.view=t}return t.prototype.getCellView=function(){return this.view},t.prototype.getTemplateFunction=function(){return this.templateFunction},t}();var Xt=function(){function t(t,e,n,r){this.sortStatus=Gt.NONE,this.view=new Kt(T.TEXT),this.columnField=t,e&&(this.header=e),n&&(this.view=n),r&&(this.width=r)}return t.prototype.getField=function(){return this.columnField},t.prototype.getHeader=function(){return this.header},t.prototype.getDataType=function(){return this.columnField.getDataType()},t.prototype.getCellView=function(){return this.view.getCellView()},t.prototype.getTemplateFunction=function(){return this.view.getTemplateFunction()},t.prototype.setSortStatus=function(t){this.sortStatus=t},t.prototype.setView=function(t){this.view=t},t}();var Jt=function(){function t(){}return t.prototype.create=function(t){return Array.isArray(t)?this.createColumns(t):this.createColumn(t)},t.prototype.createColumn=function(t){var e=t.getColumn(),n=t.getField(),r=new Xt(n);return void 0!==e.header&&(r.header=e.header),void 0!==e.view&&r.setView(new Kt(e.view)),void 0!==e.width&&(r.width=this.convertWidth(e.width)),r},t.prototype.createColumns=function(t){var e=this,n=[];return t.forEach((function(t){n.push(e.createColumn(t))})),n},t.prototype.convertWidth=function(t){return+t},t.decorators=[{type:e.Injectable}],t}(),Yt=function(t){function e(e,n){var r=t.call(this,e,"ColumnsSetAggregateEvent")||this;return r.columns=n,r}return g(e,t),e}(o.AggregateEvent);var qt=function(t){function e(e){return t.call(this,e,"CompositionWidthSetAggregateEvent")||this}return g(e,t),e}(o.AggregateEvent),Zt=function(t){function e(e,n){var r=t.call(this,e,"CompositionContainerWidthSetAggregateEvent")||this;return r.containerWidth=n,r}return g(e,t),e}(o.AggregateEvent);var _t=function(t){function e(e){return t.call(this,e,"CompositionResizeWidthSetAggregateEvent")||this}return g(e,t),e}(o.AggregateEvent),$t=function(t){function e(e,n,r,i){void 0===n&&(n=[]);var o=t.call(this,e)||this;o.MIN_COLUMN_WIDTH=50,o.columnWidthCollection=new Wt(o.MIN_COLUMN_WIDTH),o.activeColumns=[],o.resizeWidthEnabled=!0,o.columnFactory=new Jt;var a=n.map((function(t){return t.getColumn()}));return o.baseParams=n,o.baseColumns=a,o.width=r,o.activeColumns=o.columnFactory.create(n),o.columnWidthCollection=new Wt(o.MIN_COLUMN_WIDTH,a,r),null!=i&&(o.resizeWidthEnabled=i),o}var n;return g(e,t),n=e,e.prototype.getColumns=function(){return this.activeColumns},e.prototype.getWidth=function(){return this.resizeWidthEnabled?this.containerWidth:this.width},e.prototype.isResizeEnabled=function(){return this.resizeWidthEnabled},e.prototype.isReady=function(){return!!this.getWidth()&&this.activeColumns.length>0},e.prototype.clone=function(){var t=m(this.activeColumns),e=new n(this.getId(),this.baseParams,this.width,this.resizeWidthEnabled);return e.containerWidth=this.containerWidth,e.activeColumns=t,e.columnWidthCollection=this.columnWidthCollection,e},e.prototype.setColumns=function(t){var e=t.map((function(t){return t.getColumn()}));this.columnWidthCollection.setColumns(e);var n=this.columnFactory.create(t),r=this.columnWidthCollection.getWidths();this.updateColumnsWidths(n,r),this.setActiveColumnsWithEvent(n)},e.prototype.setContainerWidth=function(t){this.setContainerWidthWithEvent(t),this.recalculateColumns()},e.prototype.setWidth=function(t){this.setWidthWithEvent(t),this.setResizeWidthWithEvent(!1),this.recalculateColumns()},e.prototype.setResizeWidth=function(t){this.setResizeWidthWithEvent(t)},e.prototype.changeSort=function(t){var e,n;this.activeColumns.forEach((function(t){t.setSortStatus(Gt.NONE)}));var r=function(t){var e=t.fieldId,n=t.direction?Gt.ASC:Gt.DESC,r=i.activeColumns.filter((function(t){return t.getField().getId().getId()===e.getId()}));r.length>0&&r.forEach((function(t){t.setSortStatus(n)}))},i=this;try{for(var o=h(t),a=o.next();!a.done;a=o.next()){r(a.value)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},e.prototype.recalculateColumns=function(){this.columnWidthCollection.setWidth(this.getWidth());var t=m(this.activeColumns),e=this.columnWidthCollection.getWidths();this.updateColumnsWidths(t,e),this.setActiveColumnsWithEvent(t)},e.prototype.updateColumnsWidths=function(t,e){t.forEach((function(t,n){t.width=e[n]}))},e.prototype.setActiveColumnsWithEvent=function(t){this.activeColumns=t,this.addEvent(new Yt(this.getId(),t))},e.prototype.setWidthWithEvent=function(t){var e=new Ut(this.MIN_COLUMN_WIDTH).calculateMinWidth(this.columnWidthCollection.getColumns());this.width=e>t?e:t,this.addEvent(new qt(this.getId()))},e.prototype.setContainerWidthWithEvent=function(t){var e=new Ut(this.MIN_COLUMN_WIDTH).calculateMinWidth(this.columnWidthCollection.getColumns());this.containerWidth=e>t?e:t,this.addEvent(new Zt(this.getId(),t))},e.prototype.setResizeWidthWithEvent=function(t){this.resizeWidthEnabled=t,this.addEvent(new _t(this.getId()))},e.ctorParameters=function(){return[{type:o.AggregateId},{type:Array},{type:Number},{type:Boolean}]},e=n=l([o.RootAggregate,d("design:paramtypes",[o.AggregateId,Array,Number,Boolean])],e)}(o.Aggregate);var te=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return g(n,t),n.decorators=[{type:e.Injectable}],n}(o.InMemoryStore),ee=function(t){function n(e,n){return t.call(this,e,n)||this}return g(n,t),n.prototype.getById=function(e){var n=t.prototype.getById.call(this,e);return n?n.clone():null},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:te},{type:o.AggregateStoreRegister}]},l([Nt,d("design:type",Function),d("design:paramtypes",[o.AggregateId]),d("design:returntype",$t)],n.prototype,"getById",null),n}(o.InMemoryAggregateStore),ne=function(){};var re=function(t){function n(e){var n=t.call(this)||this;return n.inMemoryCompositionAggregateStore=e,n}return g(n,t),n.prototype.getById=function(t){return this.inMemoryCompositionAggregateStore.getById(t)},n.prototype.save=function(t){this.inMemoryCompositionAggregateStore.save(t)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:ee}]},n}(ne);var ie=function(){function t(t,e){this.templatesComponentDefinition=t,this.componentFactoryResolver=e,this.templates=new Map,this.templatesComponent=null,this.createTemplatesComponent()}return t.prototype.getTemplates=function(){return this.templates},t.prototype.destroy=function(){this.templatesComponent&&(this.templatesComponent.destroy(),this.templatesComponent=null)},t.prototype.createTemplatesComponent=function(){var t=this.componentFactoryResolver.resolveComponentFactory(this.templatesComponentDefinition),n=e.Injector.create({providers:[]});this.templatesComponent=t.create(n),this.generateMap()},t.prototype.generateMap=function(){var t=this;this.generateMapKeys().forEach((function(e){t.findAndSetTemplate(e)}))},t.prototype.findAndSetTemplate=function(t){var e=this.templatesComponent.instance.getTemplate(t);this.templates.set(t,e)},t}();var oe=function(t){function n(e){return t.call(this,Rt,e)||this}return g(n,t),n.prototype.generateMapKeys=function(){return Object.keys(T).map((function(t){return T[t]}))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:e.ComponentFactoryResolver}]},n}(ie),ae=function(){function t(t){this.columnTemplateFactory=t}return t.prototype.findTemplate=function(t){return this.columnTemplateFactory.getTemplates().get(t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:oe}]},t}();var se=function(t){function n(e){return t.call(this,Ht,e)||this}return g(n,t),n.prototype.generateMapKeys=function(){return Object.keys(w).map((function(t){return w[t]}))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:e.ComponentFactoryResolver}]},n}(ie),ue=function(){function t(t){this.editTemplateFactory=t}return t.prototype.findTemplate=function(t){return this.editTemplateFactory.getTemplates().get(t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:se}]},t}();var ce=function(){function t(t,e,n,r,i,o){this.viewTemplate=t,this.editTemplate=e,this.context=n,this.width=r,this.fieldId=i,this.sortStatus=o}return t.prototype.getFieldId=function(){return this.fieldId},t.prototype.getSortStatus=function(){return this.sortStatus},t.prototype.isAscSort=function(){return this.sortStatus===Gt.ASC},t.prototype.isDescSort=function(){return this.sortStatus===Gt.DESC},t.prototype.isNoSort=function(){return this.sortStatus===Gt.NONE},t}();var ge=function(t){this.element=t};var pe=function(){function t(t){this.id=t}return t.prototype.getId=function(){return this.id},t.prototype.toString=function(){return this.id},t.prototype.equals=function(t){return t.getId()===this.id},t}();var le=function(t,e,n,r,i,o){this.template=t,this.editTemplate=e,this.editable=n,this.accessor=r,this.width=i,this.columnFieldId=o};var de=function(){function t(t,e,n){void 0===n&&(n=Gt.NONE),this.field=t,this.header=e,this.sortStatus=n}return t.prototype.setHeader=function(t){this.header=t},t.prototype.setField=function(t){this.field=t},t.prototype.getHeaderCellTemplateWithContext=function(t){var e,n=this.header;"string"==typeof n?e=new ge(n):"function"==typeof n&&(e=new ge(n(t)));var r=new pe(this.field.getId().getId());return new ce(this.headerTemplate,this.editTemplate,e,this.width,r,this.sortStatus)},t.prototype.getContentCellTemplateWithAccessor=function(){var t=this;return new le(this.cellTemplate,this.editTemplate,!0,(function(e){return t.templateFunction(t.field.getAccessor()(e))}),this.width,this.field.getId())},t}();var he=function(){function t(t,e){this.viewTemplateRepository=t,this.editTemplateRepository=e}return t.prototype.create=function(t){var e=new de(t.getField(),t.getHeader(),t.sortStatus);return e.cellTemplate=this.findViewTemplate(t.getCellView()),e.headerTemplate=this.findViewTemplate(T.TEXT),e.templateFunction=t.getTemplateFunction(),e.editTemplate=this.findEditTemplate(t.getDataType()),e.width=+t.width,e},t.prototype.createColumns=function(t){var e=this;return t.map((function(t){return e.create(t)}))},t.prototype.findViewTemplate=function(t){return t===T.FUNCTION?this.viewTemplateRepository.findTemplate(T.FUNCTION):this.viewTemplateRepository.findTemplate(t)},t.prototype.findEditTemplate=function(t){return this.editTemplateRepository.findTemplate(t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:ae},{type:ue}]},t}();var fe=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.ready=n,a.columns=r,a.width=i,a.resizeWidth=o,a}return g(e,t),e.prototype.getColumns=function(){return this.columns},e.prototype.getHeaderColumns=function(){return this.columns.map((function(t,e){return t.getHeaderCellTemplateWithContext(e)}))},e.prototype.getTemplateColumns=function(){return this.columns.map((function(t){return t.getContentCellTemplateWithAccessor()}))},e.prototype.getWidth=function(){return this.width},e.prototype.getContainerWidth=function(){return+this.width-2},e.prototype.isReady=function(){return this.ready},e.prototype.isResizeWidthEnabled=function(){return this.resizeWidth},e.prototype.equals=function(t){return this.width===t.width&&this.resizeWidth===t.resizeWidth&&this.equalsByColumns(t.columns)},e.prototype.equalsByColumns=function(t){return this.columns.length===t.length},e}(o.ReadModel);var me=function(){function t(t){this.columnDefinitionFactory=t}return t.prototype.convert=function(t){var e=t.isReady(),n=t.getColumns(),r=this.convertColumnsToColumnDef(n),i=t.getWidth(),o=t.isResizeEnabled(),a=t.getId();return new fe(a,e,r,i,o)},t.prototype.convertColumnsToColumnDef=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.columnDefinitionFactory.create(t);n.push(r)})),n},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:he}]},t}();var ye=function(t){function n(e,n){var r=t.call(this,e)||this;return r.inMemoryCompositionStore=e,r.compositionConverter=n,r}return g(n,t),n.prototype.toReadModel=function(t){return this.compositionConverter.convert(t)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:te},{type:me}]},n}(o.InMemoryReadModelStore);var ve=function(){};var be=function(t){function e(e){return t.call(this,e,"CompositionInitedEvent")||this}return g(e,t),e}(o.DomainEvent),Ce=function(t){function e(e){return t.call(this,e,"CompositionResizeWidthSetEvent")||this}return g(e,t),e}(o.DomainEvent),Ae=function(t){function e(e){return t.call(this,e,"ColumnsSetEvent")||this}return g(e,t),e}(o.DomainEvent),Ee=function(t){function e(e,n){return t.call(this,e,"CompositionContainerWidthSetEvent",n)||this}return g(e,t),e}(o.DomainEvent),Ie=function(t){function e(e){return t.call(this,e,"CompositionWidthSetEvent")||this}return g(e,t),e}(o.DomainEvent),Se=function(t){function e(e,n){var r=t.call(this,e,"CompositionChangeSortStatusEvent")||this;return r.columns=n,r}return g(e,t),e.prototype.getCompositionId=function(){return this.aggregateId},e.prototype.getColumns=function(){return this.columns},e}(o.DomainEvent);var we=function(t){function n(e,n){var r=t.call(this)||this;return r.domainEventBus=e,r.inMemoryCompositionQueryStore=n,r.composition$=new a.ReplaySubject(1),r.unsubscribe$=new a.Subject,r.domainEventBus.ofEvent(be,Ce,Ae,Ee,Ie,Se).pipe(s.takeUntil(r.unsubscribe$)).subscribe((function(t){var e=t.aggregateId,n=r.inMemoryCompositionQueryStore.getById(e);r.composition$.next(n)})),r}return g(n,t),n.prototype.ngOnDestroy=function(){this.unsubscribe$.next(),this.unsubscribe$.complete()},n.prototype.on=function(t){return this.composition$.asObservable().pipe(s.filter((function(e){return e.getId().toString()===t.toString()})),s.filter((function(t){return t.isReady()})))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:o.DomainEventBus},{type:ye}]},n}(ve);var De=[ee,{provide:ne,useClass:re}],Pe=[ye,{provide:ve,useClass:we}],Re=[te],Te=function(){function t(){}return t.prototype.create=function(t){return new $t(t)},t.decorators=[{type:e.Injectable}],t}(),Me=function(t){function e(e){var n=t.call(this,e,"InitCompositionCommand")||this;return n.compositionId=e,n}return g(e,t),e}(o.Command);var xe=function(t){function e(e,n){var r=t.call(this,e,"SetColumnsCommand")||this;return r.compositionId=e,r.columns=n,r}return g(e,t),e.prototype.getParams=function(){return this.columns},e}(o.Command);var Fe=function(t){function e(e,n){var r=t.call(this,e,"SetCompositionWidthCommand")||this;return r.structureId=e,r.width=n,r}return g(e,t),e}(o.Command);var Oe=function(t){function e(e,n){var r=t.call(this,e,"SetCompositionContainerWidthCommand")||this;return r.structureId=e,r.width=n,r}return g(e,t),e}(o.Command);var Ne=function(t){function e(e,n){var r=t.call(this,e,"SetCompositionResizeWidthCommand")||this;return r.structureId=e,r.enabled=n,r}return g(e,t),e}(o.Command);var Be=function(t){function e(e,n){var r=t.call(this,e,"CompositionChangeSortStatusCommand")||this;return r.compositionId=e,r.sortParams=n,r}return g(e,t),e.prototype.getCompositionId=function(){return this.compositionId},e.prototype.getSortParams=function(){return this.sortParams},e}(o.Command);var He=function(){function t(t){this.commandDispatcher=t}return t.prototype.init=function(t){this.commandDispatcher.dispatch(new Me(t))},t.prototype.setColumns=function(t,e){this.commandDispatcher.dispatch(new xe(t,e))},t.prototype.setWidth=function(t,e){this.commandDispatcher.dispatch(new Fe(t,e))},t.prototype.setContainerWidth=function(t,e){this.commandDispatcher.dispatch(new Oe(t,e))},t.prototype.setResizeWidth=function(t,e){this.commandDispatcher.dispatch(new Ne(t,e))},t.prototype.changeSort=function(t,e){this.commandDispatcher.dispatch(new Be(t,e))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:o.CommandDispatcher}]},t}();var ke=function(t){function n(e,n,r){var i=t.call(this,Me,be,r)||this;return i.compositionAggregateRepository=e,i.compositionAggregateFactory=n,i}return g(n,t),n.prototype.handle=function(t){var e=t.compositionId,n=this.compositionAggregateFactory.create(e);this.compositionAggregateRepository.save(n)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:ne},{type:Te},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var Le="CompositionResizeWidthSetAggregateEvent",ze="ColumnsSetAggregateEvent",je="CompositionContainerWidthSetAggregateEvent",Ve="CompositionWidthSetAggregateEvent",Ue=function(){function t(){}return t.prototype.convert=function(t){return Array.isArray(t)?this.convertEvents(t):this.convertEvent(t)},t.prototype.convertEvents=function(t){var e=this;return t.map((function(t){return e.convertEvent(t)}))},t.prototype.convertEvent=function(t){switch(t.getType()){case Le:return new Ce(t.getAggregateId());case ze:return new Ae(t.getAggregateId());case je:var e=t.containerWidth;return new Ee(t.getAggregateId(),e);case Ve:return new Ie(t.getAggregateId())}},t.decorators=[{type:e.Injectable}],t}(),Qe=function(t){function n(e,n,r){var i=t.call(this,xe)||this;return i.compositionAggregateRepository=e,i.domainEventPublisher=n,i.compositionEventConverter=r,i}return g(n,t),n.prototype.handle=function(t){var e=t.getAggregateId(),n=t.getParams(),r=this.compositionAggregateRepository.getById(e);r.setColumns(n),this.compositionAggregateRepository.save(r),this.publishEvents(r,t)},n.prototype.publishEvents=function(t,e){var n=t.getEvents(),r=this.compositionEventConverter.convert(n);this.domainEventPublisher.publish(r)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:ne},{type:o.DomainEventPublisher},{type:Ue}]},n}(o.CommandHandler);var We=function(t){function n(e,n,r){var i=t.call(this,Fe,Ie,r)||this;return i.compositionAggregateRepository=e,i.columnConverter=n,i}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=t.width,r=this.compositionAggregateRepository.getById(e);r.setWidth(n),this.compositionAggregateRepository.save(r)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:ne},{type:Jt},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var Ge=function(t){function n(e,n,r){var i=t.call(this,Ne,Ce,r)||this;return i.compositionAggregateRepository=e,i.columnConverter=n,i}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=t.enabled,r=this.compositionAggregateRepository.getById(e);r.setResizeWidth(n),this.compositionAggregateRepository.save(r)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:ne},{type:Jt},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var Ke=function(t){function n(e,n,r){var i=t.call(this,Oe)||this;return i.compositionAggregateRepository=e,i.domainEventPublisher=n,i.compositionEventConverter=r,i}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=t.width,r=this.compositionAggregateRepository.getById(e);r.setContainerWidth(n),this.compositionAggregateRepository.save(r),this.publishAggregateEvents(r.getEvents())},n.prototype.publishAggregateEvents=function(t){var e=this.compositionEventConverter.convert(t);this.domainEventPublisher.publish(e)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:ne},{type:o.DomainEventPublisher},{type:Ue}]},n}(o.CommandHandler);var Xe=function(t){function n(e,n,r){var i=t.call(this,Be)||this;return i.compositionAggregateRepository=e,i.domainEventPublisher=n,i.compositionEventConverter=r,i}return g(n,t),n.prototype.handle=function(t){var e=t.getCompositionId(),n=t.getSortParams(),r=this.compositionAggregateRepository.getById(e);r.changeSort(n),this.compositionAggregateRepository.save(r);var i=r.getColumns();this.domainEventPublisher.publish(new Se(e,i))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:ne},{type:o.DomainEventPublisher},{type:Ue}]},n}(o.CommandHandler);var Je=function(){function t(t,e,n){this.fieldId=t,this.accessor=e,this.dataType=n}return t.prototype.getId=function(){return this.fieldId},t.prototype.getValue=function(t){return this.accessor(t)},t.prototype.getAccessor=function(){return this.accessor},t.prototype.getDataType=function(){return this.dataType},t}();var Ye=function(){function t(){}return t.prototype.create=function(t,e,n){return new Je(t,e,n)},t.decorators=[{type:e.Injectable}],t}(),qe=function(){function t(t){this.domainEventBus=t}return t.prototype.onColumnsChanged=function(t){return this.domainEventBus.ofEvent(Ae).pipe(s.filter((function(e){return e.aggregateId.toString()===t.toString()})))},t.prototype.onWidthChanged=function(t){return this.domainEventBus.ofEvent(Ae).pipe(s.filter((function(e){return e.aggregateId.toString()===t.toString()})))},t.prototype.onContainerWidthChanged=function(t){return this.domainEventBus.ofEvent(Ee).pipe(s.filter((function(e){return e.getAggregateId().equals(t)})),s.map((function(t){return t.getPayload()})),s.filter((function(t){return!!t})))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:o.DomainEventBus}]},t}();var Ze=function(t){function e(e){return t.call(this,e)||this}return g(e,t),e}(o.AggregateId),_e=new Ze("-1"),$e=function(){function t(t){this.compositionRepository=t}return t.prototype.onWidth=function(t){return void 0===t&&(t=_e),this.compositionRepository.on(t).pipe(s.map((function(t){return t.getWidth()})))},t.prototype.onContainerWidth=function(t){return void 0===t&&(t=_e),this.compositionRepository.on(t).pipe(s.map((function(t){return t.getContainerWidth()})))},t.prototype.onWidthForEachColumn=function(t){return void 0===t&&(t=_e),this.compositionRepository.on(t).pipe(s.map((function(t){return t.getColumns().map((function(t){return t.width}))})))},t.prototype.onHeaderColumns=function(t){return void 0===t&&(t=_e),this.compositionRepository.on(t).pipe(s.map((function(t){return t.getHeaderColumns()})))},t.prototype.onSortOrder=function(t,e){return void 0===e&&(e=_e),this.compositionRepository.on(e).pipe(s.map((function(t){return t.getHeaderColumns()})),s.map((function(e){return e.filter((function(e){return e.getFieldId().equals(t)}))})),s.filter((function(t){return t.length>0})),s.map((function(t){return t[0].getSortStatus()})))},t.prototype.onTemplateColumns=function(t){return void 0===t&&(t=_e),this.compositionRepository.on(t).pipe(s.map((function(t){return t.getTemplateColumns()})))},t.prototype.onResizeWidth=function(t){return void 0===t&&(t=_e),this.compositionRepository.on(t).pipe(s.map((function(t){return t.isResizeWidthEnabled()})))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:ve}]},t}();var tn=function(){function t(t){this.compositionDispatcher=t}return t.prototype.init=function(t){void 0===t&&(t=_e),this.compositionDispatcher.init(t)},t.prototype.setColumns=function(t,e){void 0===e&&(e=_e),this.compositionDispatcher.setColumns(e,t)},t.prototype.setWidth=function(t,e){void 0===e&&(e=_e),this.compositionDispatcher.setWidth(e,t)},t.prototype.setContainerWidth=function(t,e){void 0===e&&(e=_e),this.compositionDispatcher.setContainerWidth(e,t)},t.prototype.setResizeWidth=function(t,e){void 0===e&&(e=_e),this.compositionDispatcher.setResizeWidth(e,t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:He}]},t}();var en=function(t){function e(e,n,r){var i=t.call(this,e,"ToggleSortEvent")||this;return i.compositionId=n,i.directions=r,i}return g(e,t),e.prototype.getCompositionId=function(){return this.compositionId},e.prototype.getDirections=function(){return this.directions},e}(o.DomainEvent);var nn=function(){function t(t){this.id=t}return t.prototype.getId=function(){return this.id},t}();var rn=function(t,e){this.fieldId=t,this.direction=e};var on=function(t){function e(e,n,r){var i=t.call(this,e,"SortOrderSetEvent")||this;return i.compositionId=n,i.directions=r,i}return g(e,t),e.prototype.getCompositionId=function(){return this.compositionId},e.prototype.getDirections=function(){return this.directions},e}(o.DomainEvent);var an=function(t){function n(e){var n=t.call(this)||this;return n.compositionDispatcher=e,n}return g(n,t),n.prototype.handle=function(t){if(t instanceof en){var e=t.getCompositionId(),n=t.getDirections().map((function(t){var e=new nn(t.fieldId.getId());return new rn(e,t.direction)}));this.compositionDispatcher.changeSort(e,n)}if(t instanceof on){e=t.getCompositionId(),n=t.getDirections().map((function(t){var e=new nn(t.fieldId.getId());return new rn(e,t.direction)}));this.compositionDispatcher.changeSort(e,n)}},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:He}]},n}(o.DomainEventHandler);var sn=function(t){function e(e,n,r,i){var o=t.call(this,e,"FieldsInitedEvent")||this;return o.compositionId=n,o.columns=r,o.fields=i,o}return g(e,t),e.prototype.getFields=function(){return this.fields},e}(o.DomainEvent);var un=function(){function t(t,e){this.column=t,this.field=e}return t.prototype.getColumn=function(){return this.column},t.prototype.getField=function(){return this.field},t}();var cn=function(t){function n(e,n){var r=t.call(this)||this;return r.compositionDispatcher=e,r.columnFieldFactory=n,r}return g(n,t),n.prototype.handle=function(t){if(t instanceof sn){var e=t.getFields(),n=this.convertColumnFieldIds(e),r=t.columns,i=this.convertColumns(r,e,n);this.compositionDispatcher.setColumns(t.compositionId,i)}},n.prototype.convertColumnFieldIds=function(t){return t?t.map((function(t){return new nn(t.getId().getId())})):[]},n.prototype.convertColumns=function(t,e,n){var r=this;return t?t.map((function(t,i){var o=n[i],a=e[i],s=r.columnFieldFactory.create(o,a.getAccessorMethod(),a.getDataType());return new un(t,s)})):[]},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:He},{type:Ye}]},n}(o.DomainEventHandler);var gn=m(De,[He,Te,{provide:o.COMMAND_HANDLERS,useClass:ke,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:Qe,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:We,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:Ge,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:Ke,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:Xe,multi:!0},Jt,Ue,Ye]),pn=m(Pe,[{provide:o.DOMAIN_EVENT_HANDLERS,useClass:cn,multi:!0},{provide:o.DOMAIN_EVENT_HANDLERS,useClass:an,multi:!0},he,ae,oe,se,ue]),ln=m(Re,gn,pn,[me,tn,$e,qe]),dn=[Rt,Ht,Bt,Ot,kt,Lt,zt],hn=[Rt,Ht,Lt,i.FabricChipModule,i.FabricCheckboxModule,i.FabricButtonModule,i.FabricInputModule,zt],fn=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule,r.ReactiveFormsModule,i.FabricChipModule,i.FabricCheckboxModule,i.FabricButtonModule,i.FabricInputModule],providers:m(ln),declarations:[dn],exports:hn,entryComponents:[Rt,Ht,i.FabricChipComponent,i.FabricCheckboxComponent,i.FabricButtonComponent,i.FabricInputComponent]}]}],t}(),mn=function(){function t(){this.increment=0}return t.prototype.generateId=function(){return this.increment++,this.increment},t}();var yn=function(){};var vn=function(t){function e(e){return t.call(this,e,"PageChangedAggregateEvent")||this}return g(e,t),e}(o.AggregateEvent),bn=function(t){function e(e){return t.call(this,e,"PagesizeChangedAggregateEvent")||this}return g(e,t),e}(o.AggregateEvent),Cn=function(){function t(t,e,n,r,i,o,a,s){this.enabled=t,this.page=e,this.pageSize=n,this.pageSizes=r,this.pagerTop=i,this.pagerBottom=o,this.sourceSize=a,this.events=[],this.logger=s}return t.default=function(e){return new t(!1,1,25,[10,25,50,100],!1,!0,0,e)},t.fromConfig=function(e,n){var r=t.default(n);return new t(e.enabled||r.isEnabled(),e.page||r.getPage(),e.pageSize||r.getPageSize(),e.pageSizes||r.getPageSizes(),e.pagerTop||r.isPagerTop(),e.pagerBottom||r.isPagerBottom(),0,n)},t.prototype.isEnabled=function(){return this.enabled},t.prototype.isDisabled=function(){return!this.enabled},t.prototype.getPage=function(){return this.page},t.prototype.getPageSize=function(){return this.pageSize},t.prototype.getPageSizes=function(){return this.pageSizes},t.prototype.isPagerTop=function(){return!this.isDisabled()&&this.pagerTop},t.prototype.isPagerBottom=function(){return!this.isDisabled()&&this.pagerBottom},t.prototype.getSourceSize=function(){return this.sourceSize},t.prototype.change=function(t){void 0!==t.enabled&&(this.enabled=t.enabled),void 0!==t.page&&(this.page=t.page,void 0===t.enabled&&(this.enabled=!0)),void 0!==t.pageSize&&(this.pageSize=t.pageSize,void 0===t.enabled&&(this.enabled=!0)),void 0!==t.pageSizes&&(this.pageSizes=t.pageSizes,void 0===t.enabled&&(this.enabled=!0)),void 0!==t.pagerTop&&(this.pagerTop=t.pagerTop,void 0===t.enabled&&(this.enabled=!0)),void 0!==t.pagerBottom&&(this.pagerBottom=t.pagerBottom,void 0===t.enabled&&(this.enabled=!0)),!0===this.enabled&&!1===t.pagerTop&&!1===t.pagerBottom&&(this.pagerBottom=!0,this.logger.warn("Pagers cannot be turn off when paging is enabled."))},t.prototype.setSourceSize=function(t){this.sourceSize=t},t.prototype.nextPage=function(){var t=this.page;this.isNextPageDisabled()||(t+=1),this.page=t},t.prototype.prevPage=function(){var t=this.page;this.isPrevPageDisabled()||(t-=1),this.page=t},t.prototype.changePageSize=function(t){return this.pageSizes.find((function(e){return e===t}))&&(this.setPage(1),this.setPageSize(t)),this.events},t.prototype.isNextPageDisabled=function(){return 0===this.sourceSize||this.page===Math.ceil(this.sourceSize/this.pageSize)},t.prototype.isPrevPageDisabled=function(){return 1===this.page},t.prototype.calculateStart=function(){var t=1+(this.page-1)*this.pageSize;return this.sourceSize<t?0:t},t.prototype.calculateEnd=function(){var t=this.page*this.pageSize;return this.sourceSize<t?this.sourceSize:t},t.prototype.sample=function(t){if(this.isDisabled())return t;var e=this.calculateStart();return 0!==e&&(e-=1),t.slice(e,this.calculateEnd())},t.prototype.setPage=function(t){this.page=t,this.events.push(new vn(new rt("TODO need to be changed")))},t.prototype.setPageSize=function(t){this.pageSize=t,this.events.push(new bn(new rt("TODO need to be changed")))},t}();var An=function(){function t(t){this.logger=t}return t.prototype.createDefault=function(){return Cn.default(this.logger)},t.prototype.createFromConfig=function(t){return Cn.fromConfig(t,this.logger)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:yn}]},t}();var En=function(t){function n(e,n,r){var i=t.call(this,r)||this;return i.structureId=e,i.aggregateFactory=n,i}return g(n,t),n.prototype.setDefaultPaging=function(){var e=this.aggregateFactory.createDefault();t.prototype.setPaging.call(this,{page:e.getPage(),pageSize:e.getPageSize(),pageSizes:e.getPageSizes()},this.structureId)},n.prototype.setPaging=function(e){t.prototype.setPaging.call(this,e,this.structureId)},n.prototype.changePageSize=function(e){t.prototype.changePageSize.call(this,e,this.structureId)},n.prototype.nextPage=function(){t.prototype.nextPage.call(this,this.structureId)},n.prototype.prevPage=function(){t.prototype.prevPage.call(this,this.structureId)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:rt},{type:An},{type:gt}]},l([Nt,d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],n.prototype,"setPaging",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Number]),d("design:returntype",void 0)],n.prototype,"changePageSize",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",void 0)],n.prototype,"nextPage",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",void 0)],n.prototype,"prevPage",null),n}(pt);var In=function(t){function n(e,n){var r=t.call(this,n)||this;return r.structureId=e,r}return g(n,t),n.prototype.onPaging=function(){return t.prototype.onPaging.call(this,this.structureId)},n.prototype.onSinglePaging=function(){return t.prototype.onPaging.call(this,this.structureId).pipe(s.take(1))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:rt},{type:nt}]},l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onPaging",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onSinglePaging",null),n}(ot);var Sn=function(t){function e(e,n){var r=t.call(this,e,"SetSchemaCommand")||this;return r.structureId=e,r.height=n,r}return g(e,t),e}(o.Command);var wn=function(t){function e(e,n){var r=t.call(this,e,"SetSchemaVerticalGridCommand")||this;return r.structureId=e,r.enabled=n,r}return g(e,t),e}(o.Command);var Dn=function(t){function e(e,n){var r=t.call(this,e,"SetSchemaHorizontalGridCommand")||this;return r.structureId=e,r.enabled=n,r}return g(e,t),e}(o.Command);var Pn=function(t){function e(e,n){var r=t.call(this,e,"SetSchemaThemeCommand")||this;return r.structureId=e,r.theme=n,r}return g(e,t),e}(o.Command);var Rn=function(t){function e(e,n){var r=t.call(this,e,"SetRowColoringCommand")||this;return r.structureId=e,r.coloring=n,r}return g(e,t),e}(o.Command);var Tn=function(t){function e(e,n){var r=t.call(this,e,"ChangeSchemaTopHeaderCommand")||this;return r.structureId=e,r.enabled=n,r}return g(e,t),e}(o.Command);var Mn=function(t){function e(e,n){var r=t.call(this,e,"ChangeSchemaBottomHeaderCommand")||this;return r.structureId=e,r.enabled=n,r}return g(e,t),e}(o.Command);var xn=function(){function t(t){this.commandDispatcher=t}return t.prototype.setSchema=function(t,e){this.commandDispatcher.dispatch(new Sn(t,e))},t.prototype.changeVerticalGrid=function(t,e){this.commandDispatcher.dispatch(new wn(t,e))},t.prototype.changeHorizontalGrid=function(t,e){this.commandDispatcher.dispatch(new Dn(t,e))},t.prototype.setTheme=function(t,e){this.commandDispatcher.dispatch(new Pn(t,e))},t.prototype.setRowColoring=function(t,e){void 0===t&&(t=it),this.commandDispatcher.dispatch(new Rn(t,e))},t.prototype.changeTopHeader=function(t,e){this.commandDispatcher.dispatch(new Tn(t,e))},t.prototype.changeBottomHeader=function(t,e){this.commandDispatcher.dispatch(new Mn(t,e))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:o.CommandDispatcher}]},t}();var Fn=function(){function t(t){this.structureRepository=t}return t.prototype.on=function(t){return this.structureRepository.onStructure(t).pipe(s.filter((function(e){return e.getId().toString()===t.toString()})),s.map((function(t){return t.getSchema()})))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:et}]},t}();var On=function(){function t(t){this.schemaRepository=t}return t.prototype.onSchema=function(t){return void 0===t&&(t=it),this.schemaRepository.on(t)},t.prototype.onSingleSchema=function(t){return void 0===t&&(t=it),this.onSchema(t).pipe(s.take(1))},t.prototype.onHeight=function(t){return void 0===t&&(t=it),this.schemaRepository.on(t).pipe(s.map((function(t){return t.getHeight()})),s.filter((function(t){return void 0!==t})))},t.prototype.onContainerHeight=function(t){return void 0===t&&(t=it),this.schemaRepository.on(t).pipe(s.map((function(t){return t.getContainerHeight()})),s.filter((function(t){return void 0!==t})))},t.prototype.onCssClasses=function(t){return void 0===t&&(t=it),this.schemaRepository.on(t).pipe(s.map((function(t){return t.getCssClasses()})))},t.prototype.onColumnHeader=function(t){return void 0===t&&(t=it),this.schemaRepository.on(t).pipe(s.map((function(t){return t.getColumnHeader()})))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:Fn}]},t}();var Nn=function(){function t(t,e){this.schemaDispatcher=t,this.schemaQueryService=e,this.unsubscribe$=new a.Subject}return t.prototype.ngOnDestroy=function(){this.unsubscribe$.next(),this.unsubscribe$.complete()},t.prototype.setSchema=function(t,e){void 0===e&&(e=it),this.schemaDispatcher.setSchema(e,t)},t.prototype.setHeight=function(t,e){void 0===e&&(e=it),this.schemaDispatcher.setSchema(e,t)},t.prototype.changeVerticalGrid=function(t,e){void 0===e&&(e=it),this.schemaDispatcher.changeVerticalGrid(e,t)},t.prototype.changeHorizontalGrid=function(t,e){void 0===e&&(e=it),this.schemaDispatcher.changeHorizontalGrid(e,t)},t.prototype.setTheme=function(t,e){void 0===e&&(e=it),this.schemaDispatcher.setTheme(e,t)},t.prototype.setRowColoring=function(t,e){void 0===e&&(e=it),this.schemaDispatcher.setRowColoring(e,t)},t.prototype.changeTopHeader=function(t,e){void 0===e&&(e=it),this.schemaDispatcher.changeTopHeader(e,t)},t.prototype.changeBottomHeader=function(t,e){void 0===e&&(e=it),this.schemaDispatcher.changeBottomHeader(e,t)},t.prototype.toggleVerticalGrid=function(t){var e=this;void 0===t&&(t=it),this.schemaQueryService.onCssClasses(t).pipe(s.map((function(t){return t.verticalGrid})),s.filter((function(t){return void 0!==t})),s.take(1),s.takeUntil(this.unsubscribe$)).subscribe((function(n){e.changeVerticalGrid(!n,t)}))},t.prototype.toggleHorizontalGrid=function(t){var e=this;void 0===t&&(t=it),this.schemaQueryService.onCssClasses(t).pipe(s.map((function(t){return t.horizontalGrid})),s.filter((function(t){return void 0!==t})),s.take(1),s.takeUntil(this.unsubscribe$)).subscribe((function(n){e.changeHorizontalGrid(!n,t)}))},t.prototype.toggleTopHeader=function(t){var e=this;void 0===t&&(t=it),this.schemaQueryService.onColumnHeader(t).pipe(s.map((function(t){return t.isTopHeaderEnabled()})),s.take(1),s.takeUntil(this.unsubscribe$)).subscribe((function(n){e.changeTopHeader(!n,t)}))},t.prototype.toggleBottomHeader=function(t){var e=this;void 0===t&&(t=it),this.schemaQueryService.onColumnHeader(t).pipe(s.map((function(t){return t.isBottomHeaderEnabled()})),s.take(1),s.takeUntil(this.unsubscribe$)).subscribe((function(n){e.changeBottomHeader(!n,t)}))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:xn},{type:On}]},t}();var Bn={NONE:0,EVEN:1,ODD:2};Bn[Bn.NONE]="NONE",Bn[Bn.EVEN]="EVEN",Bn[Bn.ODD]="ODD";var Hn=function(t){function n(e,n,r){var i=t.call(this,r,n)||this;return i.structureId=e,i}return g(n,t),n.prototype.setDefaultSchema=function(){t.prototype.setSchema.call(this,Number.MAX_SAFE_INTEGER,this.structureId)},n.prototype.setSchema=function(e,n){void 0===n&&(n=it),t.prototype.setSchema.call(this,e,this.structureId)},n.prototype.setHeight=function(e){t.prototype.setHeight.call(this,e,this.structureId)},n.prototype.changeVerticalGrid=function(e){t.prototype.changeVerticalGrid.call(this,e,this.structureId)},n.prototype.changeHorizontalGrid=function(e){t.prototype.changeHorizontalGrid.call(this,e,this.structureId)},n.prototype.toggleVerticalGrid=function(){t.prototype.toggleVerticalGrid.call(this,this.structureId)},n.prototype.toggleHorizontalGrid=function(){t.prototype.toggleHorizontalGrid.call(this,this.structureId)},n.prototype.setTheme=function(e){t.prototype.setTheme.call(this,e,this.structureId)},n.prototype.setRowColoring=function(e,n){void 0===n&&(n=it),t.prototype.setRowColoring.call(this,e,this.structureId)},n.prototype.changeTopHeader=function(e,n){void 0===n&&(n=it),t.prototype.changeTopHeader.call(this,e,this.structureId)},n.prototype.changeBottomHeader=function(e,n){void 0===n&&(n=it),t.prototype.changeBottomHeader.call(this,e,this.structureId)},n.prototype.toggleTopHeader=function(){t.prototype.toggleTopHeader.call(this,this.structureId)},n.prototype.toggleBottomHeader=function(){t.prototype.toggleBottomHeader.call(this,this.structureId)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:rt},{type:On},{type:xn}]},l([Nt,d("design:type",Function),d("design:paramtypes",[Number,rt]),d("design:returntype",void 0)],n.prototype,"setSchema",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Number]),d("design:returntype",void 0)],n.prototype,"setHeight",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Boolean]),d("design:returntype",void 0)],n.prototype,"changeVerticalGrid",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Boolean]),d("design:returntype",void 0)],n.prototype,"changeHorizontalGrid",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",void 0)],n.prototype,"toggleVerticalGrid",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",void 0)],n.prototype,"toggleHorizontalGrid",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Number]),d("design:returntype",void 0)],n.prototype,"setTheme",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Number,rt]),d("design:returntype",void 0)],n.prototype,"setRowColoring",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Boolean,rt]),d("design:returntype",void 0)],n.prototype,"changeTopHeader",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Boolean,rt]),d("design:returntype",void 0)],n.prototype,"changeBottomHeader",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",void 0)],n.prototype,"toggleTopHeader",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",void 0)],n.prototype,"toggleBottomHeader",null),n}(Nn);var kn=function(t){function n(e,n){var r=t.call(this,n)||this;return r.structureId=e,r}return g(n,t),n.prototype.onSchema=function(){return t.prototype.onSchema.call(this,this.structureId)},n.prototype.onHeight=function(){return t.prototype.onHeight.call(this,this.structureId)},n.prototype.onContainerHeight=function(){return t.prototype.onContainerHeight.call(this,this.structureId)},n.prototype.onSingleSchema=function(){return t.prototype.onSingleSchema.call(this,this.structureId)},n.prototype.onCssClasses=function(){return t.prototype.onCssClasses.call(this,this.structureId)},n.prototype.onColumnHeader=function(e){return void 0===e&&(e=it),t.prototype.onColumnHeader.call(this,this.structureId)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:rt},{type:Fn}]},l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onSchema",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onHeight",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onContainerHeight",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onSingleSchema",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onCssClasses",null),l([Nt,d("design:type",Function),d("design:paramtypes",[rt]),d("design:returntype",a.Observable)],n.prototype,"onColumnHeader",null),n}(On);var Ln=function(t){function e(e,n){var r=t.call(this,e,"SetFormationCommand")||this;return r.structureId=e,r.payload=n,r}return g(e,t),e}(o.Command);var zn=function(t){function e(e,n){var r=t.call(this,e,"ToggleSelectedRowCommand")||this;return r.structureId=e,r.selectedRow=n,r}return g(e,t),e}(o.Command);var jn=function(){function t(t){this.commandDispatcher=t}return t.prototype.setDefault=function(t){this.commandDispatcher.dispatch(new Ln(t))},t.prototype.toggleSelectedRow=function(t,e){this.commandDispatcher.dispatch(new zn(t,e))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:o.CommandDispatcher}]},t}();var Vn=function(){function t(t){this.formationDispatcher=t}return t.prototype.setDefaultFormation=function(t){void 0===t&&(t=it),this.formationDispatcher.setDefault(t)},t.prototype.toggleSelectedRow=function(t,e){void 0===e&&(e=it),this.formationDispatcher.toggleSelectedRow(e,t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:jn}]},t}();var Un=function(t){function n(e,n){var r=t.call(this,n)||this;return r.structureId=e,r}return g(n,t),n.prototype.setDefault=function(){t.prototype.setDefaultFormation.call(this,this.structureId)},n.prototype.toggleSelectedRow=function(e){t.prototype.toggleSelectedRow.call(this,e,this.structureId)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:rt},{type:jn}]},l([Nt,d("design:type",Function),d("design:paramtypes",[String]),d("design:returntype",void 0)],n.prototype,"toggleSelectedRow",null),n}(Vn);var Qn=function(){function t(t){this.structureRepository=t}return t.prototype.onFormation=function(t){return this.structureRepository.onStructure(t).pipe(s.filter((function(e){return e.getId().toString()===t.toString()})),s.map((function(t){return t.getFormation()})))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:et}]},t}();var Wn=function(){function t(t){this.formationRepository=t}return t.prototype.onSelectedRows=function(t){return void 0===t&&(t=it),this.formationRepository.onFormation(t).pipe(s.map((function(t){return t.getSelectedRows()})))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:Qn}]},t}();var Gn=function(t){function n(e,n){var r=t.call(this,n)||this;return r.structureId=e,r}return g(n,t),n.prototype.onSelectedRows=function(){return t.prototype.onSelectedRows.call(this,this.structureId)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:rt},{type:Qn}]},l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onSelectedRows",null),n}(Wn);var Kn=function(t){function e(e,n){var r=t.call(this,e,"StructureSetConfigFilterCommand")||this;return r.structureId=e,r.filterConfig=n,r}return g(e,t),e.prototype.getConfig=function(){return this.filterConfig},e}(o.Command);var Xn=function(t){function e(e,n,r,i){var o=t.call(this,e,"StructureToggleFilterCommand")||this;return o.structureId=e,o.fieldId=n,o.externalFilterId=r,o.filterValue=i,o}return g(e,t),e}(o.Command);var Jn=function(){function t(t){this.commandDispatcher=t}return t.prototype.setFilteringEnabled=function(t,e){this.commandDispatcher.dispatch(new Kn(e,t))},t.prototype.addFilter=function(t,e,n,r){this.commandDispatcher.dispatch(new Xn(r,t,e,n))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:o.CommandDispatcher}]},t}();var Yn=function(t){function e(e,n){var r=t.call(this,e,"SourceSetLoadingCommand")||this;return r.structureId=e,r.enabled=n,r}return g(e,t),e}(o.Command);var qn=function(t){function e(e,n){void 0===n&&(n=[]);var r=t.call(this,e,"SetOriginCommand")||this;return r.structureId=e,r.items=n,r}return g(e,t),e}(o.Command);var Zn=function(t){function e(e,n){var r=t.call(this,e,"StructureEditSourceItemCommand")||this;return r.structureId=e,r.params=n,r}return g(e,t),e.prototype.getParams=function(){return this.params},e}(o.Command);var _n=function(){function t(t){this.commandDispatcher=t}return t.prototype.setLoading=function(t,e){this.commandDispatcher.dispatch(new Yn(t,e))},t.prototype.setOrigin=function(t,e){this.commandDispatcher.dispatch(new qn(t,e))},t.prototype.editItem=function(t,e){this.commandDispatcher.dispatch(new Zn(t,e))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:o.CommandDispatcher}]},t}();var $n=function(t){function e(e){var n=t.call(this,e,"InitStructureCommand")||this;return n.structureId=e,n}return g(e,t),e}(o.Command);var tr=function(t){function e(e,n){var r=t.call(this,e,"SetVerticalScrollEnabledCommand")||this;return r.structureId=e,r.enabled=n,r}return g(e,t),e}(o.Command);var er=function(t){function e(e,n){var r=t.call(this,e,"SetScrollPositionCommand")||this;return r.structureId=e,r.position=n,r}return g(e,t),e}(o.Command);var nr=function(t){function e(e,n){var r=t.call(this,e,"SetSortingCommand")||this;return r.structureId=e,r.sortingConfig=n,r}return g(e,t),e.prototype.getSortingConfig=function(){return this.sortingConfig},e}(o.Command);var rr=function(t){function e(e,n,r){var i=t.call(this,e,"ToggleSortCommand")||this;return i.structureId=e,i.compositionId=n,i.fieldId=r,i}return g(e,t),e.prototype.getCompositionId=function(){return this.compositionId},e.prototype.getFieldId=function(){return this.fieldId},e}(o.Command);var ir=function(t){function e(e,n){var r=t.call(this,e,"StructureSetConfigQuickFilterCommand")||this;return r.structureId=e,r.quickFiltersConfig=n,r}return g(e,t),e.prototype.getConfig=function(){return this.quickFiltersConfig},e}(o.Command);var or=function(t){function e(e,n){var r=t.call(this,e,"StructureSetConfigSearchingCommand")||this;return r.structureId=e,r.searchConfig=n,r}return g(e,t),e.prototype.getConfig=function(){return this.searchConfig},e}(o.Command);var ar=function(t){function e(e,n,r){var i=t.call(this,e,"InitFieldsCommand")||this;return i.structureId=e,i.compositionId=n,i.columns=r,i}return g(e,t),e}(o.Command);var sr=function(t){function e(e,n){var r=t.call(this,e,"StructureSetSearchPhraseCommand")||this;return r.structureId=e,r.phrase=n,r}return g(e,t),e}(o.Command);var ur=function(t){function e(e,n,r,i){var o=t.call(this,e,"SetSortOrderCommand")||this;return o.compositionId=n,o.fieldId=r,o.sortOrder=i,o}return g(e,t),e.prototype.getCompositionId=function(){return this.compositionId},e.prototype.getFieldId=function(){return this.fieldId},e.prototype.getSortOrder=function(){return this.sortOrder},e}(o.Command);var cr=function(){function t(t,e,n){this.commandDispatcher=t,this.structureFilterCommandService=e,this.sourceDispatcher=n}return t.prototype.init=function(t){void 0===t&&(t=it),this.commandDispatcher.dispatch(new $n(t))},t.prototype.enableVerticalScroll=function(t){void 0===t&&(t=it),this.commandDispatcher.dispatch(new tr(t,!0))},t.prototype.disableVerticalScroll=function(t){void 0===t&&(t=it),this.commandDispatcher.dispatch(new tr(t,!1))},t.prototype.setScrollPosition=function(t,e){void 0===e&&(e=it),this.commandDispatcher.dispatch(new er(e,t))},t.prototype.setOrigin=function(t,e){void 0===e&&(e=it),this.sourceDispatcher.setOrigin(e,t)},t.prototype.setSortingConfig=function(t,e){void 0===e&&(e=it),this.commandDispatcher.dispatch(new nr(e,t))},t.prototype.toggleSort=function(t,e,n){void 0===n&&(n=it),this.commandDispatcher.dispatch(new rr(n,e,t))},t.prototype.setSortOrder=function(t,e,n,r){void 0===r&&(r=it),this.commandDispatcher.dispatch(new ur(r,n,t,e))},t.prototype.setFilterConfig=function(t,e){void 0===e&&(e=it),this.structureFilterCommandService.setFilteringEnabled(t,e)},t.prototype.setQuickFiltersConfig=function(t,e){void 0===e&&(e=it),this.commandDispatcher.dispatch(new ir(e,t))},t.prototype.initFields=function(t,e,n){void 0===n&&(n=it),this.commandDispatcher.dispatch(new ar(n,e,t))},t.prototype.setSearchingConfig=function(t,e){void 0===e&&(e=it),this.commandDispatcher.dispatch(new or(e,t))},t.prototype.search=function(t,e){void 0===e&&(e=it),this.commandDispatcher.dispatch(new sr(e,t))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:o.CommandDispatcher},{type:Jn},{type:_n}]},t}();var gr=function(t){function n(e,n,r,i,o){var a=t.call(this,r,i,o)||this;return a.structureId=e,a.compositionId=n,a}return g(n,t),n.prototype.init=function(){t.prototype.init.call(this,this.structureId)},n.prototype.enableVerticalScroll=function(){t.prototype.enableVerticalScroll.call(this,this.structureId)},n.prototype.disableVerticalScroll=function(){t.prototype.disableVerticalScroll.call(this,this.structureId)},n.prototype.setOrigin=function(e){t.prototype.setOrigin.call(this,e,this.structureId)},n.prototype.setScrollPosition=function(e){t.prototype.setScrollPosition.call(this,e,this.structureId)},n.prototype.setSortingConfig=function(e,n){void 0===n&&(n=it),t.prototype.setSortingConfig.call(this,e,this.structureId)},n.prototype.toggleSort=function(e){t.prototype.toggleSort.call(this,e,this.compositionId,this.structureId)},n.prototype.setSortOrder=function(e,n){t.prototype.setSortOrder.call(this,e,n,this.compositionId,this.structureId)},n.prototype.setFilterConfig=function(e,n){void 0===n&&(n=it),t.prototype.setFilterConfig.call(this,e,this.structureId)},n.prototype.setQuickFiltersConfig=function(e,n){void 0===n&&(n=it),t.prototype.setQuickFiltersConfig.call(this,e,this.structureId)},n.prototype.setSearchingConfig=function(e,n){void 0===n&&(n=it),t.prototype.setSearchingConfig.call(this,e,this.structureId)},n.prototype.initFields=function(e){t.prototype.initFields.call(this,e,this.compositionId,this.structureId)},n.prototype.search=function(e){t.prototype.search.call(this,e,this.structureId)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:rt},{type:Ze},{type:o.CommandDispatcher},{type:Jn},{type:_n}]},l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",void 0)],n.prototype,"init",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",void 0)],n.prototype,"enableVerticalScroll",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",void 0)],n.prototype,"disableVerticalScroll",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Array]),d("design:returntype",void 0)],n.prototype,"setOrigin",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Number]),d("design:returntype",void 0)],n.prototype,"setScrollPosition",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Object,rt]),d("design:returntype",void 0)],n.prototype,"setSortingConfig",null),l([Nt,d("design:type",Function),d("design:paramtypes",[pe]),d("design:returntype",void 0)],n.prototype,"toggleSort",null),l([Nt,d("design:type",Function),d("design:paramtypes",[pe,Number]),d("design:returntype",void 0)],n.prototype,"setSortOrder",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Object,rt]),d("design:returntype",void 0)],n.prototype,"setFilterConfig",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Object,rt]),d("design:returntype",void 0)],n.prototype,"setQuickFiltersConfig",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Object,rt]),d("design:returntype",void 0)],n.prototype,"setSearchingConfig",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Array]),d("design:returntype",void 0)],n.prototype,"initFields",null),l([Nt,d("design:type",Function),d("design:paramtypes",[String]),d("design:returntype",void 0)],n.prototype,"search",null),n}(cr);var pr=function(){function t(t){this.structureRepository=t}return t.prototype.onStructure=function(t){return void 0===t&&(t=it),this.structureRepository.onStructure(t)},t.prototype.onVerticalScrollEnabled=function(t){return void 0===t&&(t=it),this.structureRepository.onStructure(t).pipe(s.map((function(t){return t.isVerticalScrollEnabled()})),s.distinctUntilChanged())},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:et}]},t}();var lr=function(t){function n(e,n){var r=t.call(this,n)||this;return r.structureId=e,r}return g(n,t),n.prototype.onStructure=function(){return t.prototype.onStructure.call(this,this.structureId)},n.prototype.onVerticalScrollEnabled=function(){return t.prototype.onVerticalScrollEnabled.call(this,this.structureId)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:rt},{type:et}]},l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onStructure",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onVerticalScrollEnabled",null),n}(pr);var dr=function(t){function n(){return t.call(this)||this}return g(n,t),n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[]},n}(o.AggregateArchive),hr=function(){function t(t){this.structureFieldUiArchive=t}return t.prototype.onFields=function(t){return this.structureFieldUiArchive.when(t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:dr}]},t}();var fr=function(){function t(t,e,n){this.itemId=t,this.columnFieldId=e,this.value=n}return t.prototype.getItemId=function(){return this.itemId},t.prototype.getColumnFieldId=function(){return this.columnFieldId},t.prototype.getValue=function(){return this.value},t}();var mr=function(t){function n(e,n,r){var i=t.call(this)||this;return i.sourceDispatcher=e,i.structureFieldUiRepository=n,i.sourceQueryService=r,i}return g(n,t),n.prototype.setOrigin=function(t,e){void 0===e&&(e=it),this.sourceDispatcher.setOrigin(e,t)},n.prototype.setLoading=function(t,e){void 0===e&&(e=it),this.sourceDispatcher.setLoading(e,t)},n.prototype.editItem=function(t,e){void 0===e&&(e=it),this.sourceDispatcher.editItem(e,t)},n.prototype.editItemByIndex=function(t,e,n,r){var i=this;void 0===r&&(r=it);var o=this.sourceQueryService.onSingleEntities().pipe(s.map((function(e){return e[t].getId()}))),u=this.structureFieldUiRepository.onFields(r);a.zip(o,u).pipe(s.take(1),this.takeUntil()).subscribe((function(t){var o=t[0],a=t[1];i.editItem(new fr(o,a[e],n),r)}))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:_n},{type:hr},{type:ht}]},n}($);var yr=function(t){function n(e,n,r,i){var o=t.call(this,n,r,i)||this;return o.structureId=e,o}return g(n,t),n.prototype.setOrigin=function(e){t.prototype.setOrigin.call(this,e,this.structureId)},n.prototype.setLoading=function(e){t.prototype.setLoading.call(this,e,this.structureId)},n.prototype.editItem=function(e){t.prototype.editItem.call(this,e,this.structureId)},n.prototype.editItemByIndex=function(e,n,r){t.prototype.editItemByIndex.call(this,e,n,r,this.structureId)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:rt},{type:_n},{type:hr},{type:ht}]},l([Nt,d("design:type",Function),d("design:paramtypes",[Array]),d("design:returntype",void 0)],n.prototype,"setOrigin",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Boolean]),d("design:returntype",void 0)],n.prototype,"setLoading",null),l([Nt,d("design:type",Function),d("design:paramtypes",[fr]),d("design:returntype",void 0)],n.prototype,"editItem",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Number,Number,Object]),d("design:returntype",void 0)],n.prototype,"editItemByIndex",null),n}(mr);var vr=function(t){function n(e,n,r,i){var o=t.call(this,n,r,i)||this;return o.structureId=e,o}return g(n,t),n.prototype.onEntities=function(){return t.prototype.onEntities.call(this,this.structureId)},n.prototype.onEntitiesSize=function(){return t.prototype.onEntitiesSize.call(this,this.structureId)},n.prototype.onOriginSize=function(){return t.prototype.onOriginSize.call(this,this.structureId)},n.prototype.onSingleEntities=function(){return t.prototype.onSingleEntities.call(this,this.structureId)},n.prototype.onLoading=function(){return t.prototype.onLoading.call(this,this.structureId)},n.prototype.onPreparedEntities=function(){return t.prototype.onPreparedEntities.call(this,this.structureId)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:rt},{type:et},{type:dt},{type:lt}]},l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onEntities",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onEntitiesSize",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onOriginSize",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onSingleEntities",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onLoading",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onPreparedEntities",null),n}(ht);var br=function(t){function n(e,n){var r=t.call(this,n)||this;return r.compositionId=e,r}return g(n,t),n.prototype.init=function(e){void 0===e&&(e=_e),t.prototype.init.call(this,this.compositionId)},n.prototype.setColumns=function(e){t.prototype.setColumns.call(this,e,this.compositionId)},n.prototype.setWidth=function(e,n){void 0===n&&(n=_e),t.prototype.setWidth.call(this,e,this.compositionId)},n.prototype.setContainerWidth=function(e,n){void 0===n&&(n=_e),t.prototype.setContainerWidth.call(this,e,this.compositionId)},n.prototype.setResizeWidth=function(e,n){void 0===n&&(n=_e),t.prototype.setResizeWidth.call(this,e,this.compositionId)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ze},{type:He}]},l([Nt,d("design:type",Function),d("design:paramtypes",[Ze]),d("design:returntype",void 0)],n.prototype,"init",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Array]),d("design:returntype",void 0)],n.prototype,"setColumns",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Number,Ze]),d("design:returntype",void 0)],n.prototype,"setWidth",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Number,Ze]),d("design:returntype",void 0)],n.prototype,"setContainerWidth",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Boolean,Ze]),d("design:returntype",void 0)],n.prototype,"setResizeWidth",null),n}(tn);var Cr=function(t){function n(e,n){var r=t.call(this,n)||this;return r.compositionId=e,r}return g(n,t),n.prototype.onHeaderColumns=function(){return t.prototype.onHeaderColumns.call(this,this.compositionId)},n.prototype.onSortOrder=function(e){return t.prototype.onSortOrder.call(this,e,this.compositionId)},n.prototype.onTemplateColumns=function(){return t.prototype.onTemplateColumns.call(this,this.compositionId)},n.prototype.onWidthForEachColumn=function(){return t.prototype.onWidthForEachColumn.call(this,this.compositionId)},n.prototype.onWidth=function(){return t.prototype.onWidth.call(this,this.compositionId)},n.prototype.onContainerWidth=function(e){return void 0===e&&(e=_e),t.prototype.onContainerWidth.call(this,this.compositionId)},n.prototype.onResizeWidth=function(){return t.prototype.onResizeWidth.call(this,this.compositionId)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ze},{type:ve}]},l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onHeaderColumns",null),l([Nt,d("design:type",Function),d("design:paramtypes",[pe]),d("design:returntype",a.Observable)],n.prototype,"onSortOrder",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onTemplateColumns",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onWidthForEachColumn",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onWidth",null),l([Nt,d("design:type",Function),d("design:paramtypes",[Ze]),d("design:returntype",a.Observable)],n.prototype,"onContainerWidth",null),l([Nt,d("design:type",Function),d("design:paramtypes",[]),d("design:returntype",a.Observable)],n.prototype,"onResizeWidth",null),n}($e);var Ar=[{provide:pt,useClass:En},{provide:ot,useClass:In},{provide:Nn,useClass:Hn},{provide:On,useClass:kn},{provide:Vn,useClass:Un},{provide:Wn,useClass:Gn},{provide:cr,useClass:gr},{provide:pr,useClass:lr},{provide:mr,useClass:yr},{provide:ht,useClass:vr},{provide:tn,useClass:br},{provide:$e,useClass:Cr}],Er=function(){function t(t,e){this.rendererFactory2=t,this.schemaQueryService=e,this.VERTICAL_GRID_CLASS_NAME="gui-vertical-grid",this.HORIZONTAL_GRID_CLASS_NAME="gui-horizontal-grid",this.THEME_FABRIC_CLASS_NAME="gui-fabric",this.THEME_MATERIAL_CLASS_NAME="gui-material",this.THEME_LIGHT_CLASS_NAME="gui-light",this.THEME_DARK_CLASS_NAME="gui-dark",this.ROW_COLORING_ODD="gui-rows-odd",this.ROW_COLORING_EVEN="gui-rows-even",this.cssClass=null,this.unsubscribe$=new a.Subject,this.renderer=this.rendererFactory2.createRenderer(null,null)}return t.prototype.ngOnDestroy=function(){this.unsubscribe$.next(),this.unsubscribe$.complete()},t.prototype.init=function(t,e){var n=this;this.cssHostRef=t,this.schemaQueryService.onCssClasses(e).pipe(s.takeUntil(this.unsubscribe$)).subscribe((function(t){var e=n.updateState(t);n.renderCssClasses(e)}))},t.prototype.updateState=function(t){var e=this;if(this.cssClass){var n={};return Object.keys(this.cssClass).forEach((function(r){t[r]!==e.cssClass[r]&&(n[r]=t[r])})),this.cssClass=t,n}return this.cssClass=t,this.cssClass},t.prototype.renderCssClasses=function(t){t.hasOwnProperty("verticalGrid")&&this.toggleCssClass(t.verticalGrid,this.VERTICAL_GRID_CLASS_NAME),t.hasOwnProperty("horizontalGrid")&&this.toggleCssClass(t.horizontalGrid,this.HORIZONTAL_GRID_CLASS_NAME),t.hasOwnProperty("theme")&&(this.removeThemeCssClasses(),this.addClass(this.resolveThemeClassName(t.theme))),t.hasOwnProperty("rowColoring")&&(this.removeRowColoringClasses(),this.addClass(this.resolveRowColoringClassName(t.rowColoring)))},t.prototype.toggleCssClass=function(t,e){t?this.addClass(e):this.removeClass(e)},t.prototype.removeThemeCssClasses=function(){var t=this;Object.keys(F).map((function(t){return F[t]})).map((function(e){return t.resolveThemeClassName(e)})).filter((function(t){return!!t})).forEach((function(e){t.removeClass(e)}))},t.prototype.resolveThemeClassName=function(t){switch(t){case F.FABRIC:case F[F.FABRIC]:return this.THEME_FABRIC_CLASS_NAME;case F.MATERIAL:case F[F.MATERIAL]:return this.THEME_MATERIAL_CLASS_NAME;case F.LIGHT:case F[F.LIGHT]:return this.THEME_LIGHT_CLASS_NAME;case F.DARK:case F[F.DARK]:return this.THEME_DARK_CLASS_NAME;default:return this.THEME_FABRIC_CLASS_NAME}},t.prototype.resolveRowColoringClassName=function(t){switch(t){case Bn.ODD:case Bn[Bn.ODD]:return this.ROW_COLORING_ODD;case Bn.EVEN:case Bn[Bn.EVEN]:return this.ROW_COLORING_EVEN;default:return null}},t.prototype.removeRowColoringClasses=function(){var t=this;Object.keys(Bn).map((function(t){return Bn[t]})).map((function(e){return t.resolveRowColoringClassName(e)})).filter((function(t){return!!t})).forEach((function(e){t.removeClass(e)}))},t.prototype.addClass=function(t){t&&this.renderer.addClass(this.cssHostRef.nativeElement,t)},t.prototype.removeClass=function(t){t&&this.renderer.removeClass(this.cssHostRef.nativeElement,t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.RendererFactory2},{type:On}]},t}();var Ir=function(){function t(t){this.archive$=t?new a.BehaviorSubject(t):new a.ReplaySubject(1)}return t.prototype.onValue=function(){return this.archive$.asObservable()},t.prototype.next=function(t){this.archive$.next(t)},t}();var Sr=function(t){function n(){return t.call(this)||this}return g(n,t),n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[]},n}(Ir),wr=function(t){function n(){return t.call(this)||this}return g(n,t),n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[]},n}(Ir),Dr=function(t){function n(){return t.call(this)||this}return g(n,t),n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[]},n}(Ir),Pr=function(t){function n(){return t.call(this,!1)||this}return g(n,t),n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[]},n}(Ir),Rr=function(){function t(t,e){this.top=!1,this.bottom=!0,null!=t&&(this.top=t),null!=e&&(this.bottom=e)}return t.prototype.itTopEnabled=function(){return this.top},t.prototype.itBottomEnabled=function(){return this.bottom},t}();var Tr=function(t){function n(){return t.call(this,new Rr)||this}return g(n,t),n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[]},n}(Ir),Mr=function(){function t(){}return t.prototype.convert=function(t){return t.enabled?new Rr(t.top,t.bottom):new Rr(!1,!1)},t.decorators=[{type:e.Injectable}],t}(),xr=function(t){function e(e,n){var r=t.call(this,e,"StructureSetAggregationEnabledCommand")||this;return r.structureId=e,r.enabled=n,r}return g(e,t),e}(o.Command);var Fr=function(){function t(t){this.commandDispatcher=t}return t.prototype.setAggregationEnabled=function(t,e){this.commandDispatcher.dispatch(new xr(e,t))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:o.CommandDispatcher}]},t}();var Or=function(){function t(t,e,n,r){this.structureAggregationPanelConfigConverter=t,this.structureAggregationArchive=e,this.structureAggregationCommandService=n,this.structureId=r}return t.prototype.set=function(t){var e=this.structureAggregationPanelConfigConverter.convert(t);this.structureAggregationArchive.next(e),this.structureAggregationCommandService.setAggregationEnabled(t.enabled,this.structureId)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:Mr},{type:Tr},{type:Fr},{type:rt}]},t}();var Nr=new e.InjectionToken("StructureComponentToken"),Br={ENTER:0,SUBMIT:1,CANCEL:2};Br[Br.ENTER]="ENTER",Br[Br.SUBMIT]="SUBMIT",Br[Br.CANCEL]="CANCEL";var Hr=function(t){function n(n,r,i,o,a,s,u,c,g,p,l,d,h,f,m,y,v){var b=t.call(this)||this;return b.structureId=n,b.compositionId=r,b.structureCommandService=i,b.pagingCommandService=o,b.pagingEventService=a,b.sourceCommandService=s,b.sourceEventService=u,b.schemaCommandService=c,b.compositionCommandService=g,b.compositionEventService=p,b.formationEventService=l,b.structureEditModeArchive=d,b.structureCellEditArchive=h,b.structureInfoPanelEnabledArchive=f,b.structureAggregationConfigService=m,b.structureCellEditStore=y,b.structureColumnMenuConfigArchive=v,b.source=[],b.columns=[],b.pageChanged=new e.EventEmitter,b.pageSizeChanged=new e.EventEmitter,b.itemsSelected=new e.EventEmitter,b.columnsChanged=new e.EventEmitter,b.containerWidthChanged=new e.EventEmitter,b.sourceEdited=new e.EventEmitter,b.cellEditEntered=new e.EventEmitter,b.cellEditCanceled=new e.EventEmitter,b.cellEditSubmitted=new e.EventEmitter,b}return g(n,t),n.prototype.ngOnChanges=function(t){if(void 0!==t.columnMenu&&void 0!==t.columnMenu.currentValue&&this.structureColumnMenuConfigArchive.nextConfig(this.columnMenu),void 0!==t.infoPanel&&void 0!==t.infoPanel.currentValue&&this.structureInfoPanelEnabledArchive.next(this.infoPanel),void 0!==t.aggregation&&void 0!==t.aggregation.currentValue&&this.structureAggregationConfigService.set(this.aggregation),void 0!==t.editMode&&void 0!==t.editMode.currentValue&&this.structureEditModeArchive.next(this.editMode),void 0!==t.cellEditing&&void 0!==t.cellEditing.currentValue&&this.structureCellEditArchive.next(this.cellEditing),void 0!==t.width&&void 0!==t.width.currentValue&&this.compositionCommandService.setWidth(this.width),void 0!==t.autoResizeWidth&&void 0!==t.autoResizeWidth.currentValue&&this.compositionCommandService.setResizeWidth(this.autoResizeWidth),void 0!==t.columnHeaderTop&&void 0!==t.columnHeaderTop.currentValue&&this.schemaCommandService.changeTopHeader(this.columnHeaderTop),void 0!==t.columnHeaderBottom&&void 0!==t.columnHeaderBottom.currentValue&&this.schemaCommandService.changeBottomHeader(this.columnHeaderBottom),void 0!==t.loading&&void 0!==t.loading.currentValue&&this.sourceCommandService.setLoading(this.loading),void 0!==t.paging&&void 0!==t.paging.currentValue){var e=void 0;e="boolean"==typeof this.paging?{enabled:this.paging}:this.paging,this.pagingCommandService.setPaging(e)}if(t.columns&&this.structureCommandService.initFields(this.columns,this.compositionId,this.structureId),void 0!==t.verticalGrid&&void 0!==t.verticalGrid.currentValue&&this.schemaCommandService.changeVerticalGrid(this.verticalGrid),void 0!==t.horizontalGrid&&void 0!==t.horizontalGrid.currentValue&&this.schemaCommandService.changeHorizontalGrid(this.horizontalGrid),void 0!==t.theme&&void 0!==t.theme.currentValue&&this.schemaCommandService.setTheme(this.theme),void 0!==t.rowColoring&&void 0!==t.rowColoring.currentValue&&this.schemaCommandService.setRowColoring(this.rowColoring),t.maxHeight&&this.maxHeight&&this.schemaCommandService.setHeight(this.maxHeight),void 0!==t.virtualScroll&&void 0!==t.virtualScroll.currentValue&&(this.virtualScroll?this.structureCommandService.enableVerticalScroll():this.structureCommandService.disableVerticalScroll()),void 0!==t.sorting&&void 0!==t.sorting.currentValue){var n=void 0;n="boolean"==typeof this.sorting?{enabled:this.sorting}:this.sorting,this.structureCommandService.setSortingConfig(n)}if(void 0!==t.filtering&&void 0!==t.filtering.currentValue){var r=void 0;r="boolean"==typeof this.filtering?{enabled:this.filtering}:this.filtering,this.structureCommandService.setFilterConfig(r)}if(void 0!==t.quickFilters&&void 0!==t.quickFilters.currentValue){var i=void 0;i="boolean"==typeof this.quickFilters?{enabled:this.quickFilters}:this.quickFilters,this.structureCommandService.setQuickFiltersConfig(i)}if(void 0!==t.searching&&void 0!==t.searching.currentValue){var o=void 0;o="boolean"==typeof this.searching?{enabled:this.searching}:this.searching,this.structureCommandService.setSearchingConfig(o)}t.source&&this.sourceCommandService.setOrigin(this.source)},n.prototype.ngOnInit=function(){var t=this;this.pagingEventService.onPageChange(this.structureId).pipe(this.takeUntil()).subscribe((function(e){t.pageChanged.emit(e)})),this.pagingEventService.onPageSizeChange(this.structureId).pipe(this.takeUntil()).subscribe((function(e){t.pageSizeChanged.emit(e)})),this.formationEventService.onItemSelected(this.structureId).pipe(this.takeUntil()).subscribe((function(e){t.itemsSelected.emit(e)})),this.compositionEventService.onColumnsChanged(this.compositionId).pipe(s.skip(1),this.takeUntil()).subscribe((function(){t.columnsChanged.emit()})),this.compositionEventService.onContainerWidthChanged(this.compositionId).pipe(this.takeUntil()).subscribe((function(e){t.containerWidthChanged.emit(e)})),this.sourceEventService.onSourceEdited(this.structureId).pipe().subscribe((function(e){t.sourceEdited.emit(e)})),this.structureCellEditStore.onValue().pipe(this.takeUntil()).subscribe((function(e){switch(e){case Br.ENTER:t.cellEditEntered.emit();break;case Br.SUBMIT:t.cellEditSubmitted.emit();break;case Br.CANCEL:t.cellEditCanceled.emit()}}))},n.prototype.onPageChange=function(t){this.pageChanged.emit(t)},n.propDecorators={columnHeaderTop:[{type:e.Input}],columnHeaderBottom:[{type:e.Input}],maxHeight:[{type:e.Input}],width:[{type:e.Input}],autoResizeWidth:[{type:e.Input}],source:[{type:e.Input}],columns:[{type:e.Input}],paging:[{type:e.Input}],verticalGrid:[{type:e.Input}],horizontalGrid:[{type:e.Input}],theme:[{type:e.Input}],rowColoring:[{type:e.Input}],loading:[{type:e.Input}],virtualScroll:[{type:e.Input}],sorting:[{type:e.Input}],filtering:[{type:e.Input}],quickFilters:[{type:e.Input}],searching:[{type:e.Input}],editMode:[{type:e.Input}],cellEditing:[{type:e.Input}],infoPanel:[{type:e.Input}],aggregation:[{type:e.Input}],columnMenu:[{type:e.Input}],pageChanged:[{type:e.Output}],pageSizeChanged:[{type:e.Output}],itemsSelected:[{type:e.Output}],columnsChanged:[{type:e.Output}],containerWidthChanged:[{type:e.Output}],sourceEdited:[{type:e.Output}],cellEditEntered:[{type:e.Output}],cellEditCanceled:[{type:e.Output}],cellEditSubmitted:[{type:e.Output}]},n}(tt);var kr=function(t){function e(e){return t.call(this,e,"NextPageEvent")||this}return g(e,t),e}(o.DomainEvent),Lr=function(t){function e(e){return t.call(this,e,"PrevPageEvent")||this}return g(e,t),e}(o.DomainEvent),zr=function(t){function e(e){return t.call(this,e,"PageChangedEvent")||this}return g(e,t),e}(o.DomainEvent),jr=function(t){function e(e){return t.call(this,e,"PagesizeChangedEvent")||this}return g(e,t),e}(o.DomainEvent),Vr=function(){function t(t,e){this.domainEventBus=t,this.pagingQueryService=e}return t.prototype.onPageChange=function(t){var e=this;return this.domainEventBus.ofEvent(kr,Lr,zr).pipe(s.filter((function(e){return e.aggregateId.toString()===t.toString()})),s.switchMap((function(n){return e.pagingQueryService.onPaging(t).pipe(s.map((function(t){return t.getPage()})),s.take(1))})))},t.prototype.onPageSizeChange=function(t){var e=this;return this.domainEventBus.ofEvent(jr).pipe(s.filter((function(e){return e.aggregateId.toString()===t.toString()})),s.switchMap((function(n){return e.pagingQueryService.onPaging(t).pipe(s.map((function(t){return t.getPageSize()})),s.take(1))})))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:o.DomainEventBus},{type:ot}]},t}();var Ur=function(t,e){this.after=t,this.before=e};var Qr=function(t){function e(e,n,r){var i=t.call(this,e,"StructureSourceItemEditedEvent")||this;return i.beforeItem=n,i.afterItem=r,i}return g(e,t),e.prototype.getBeforeItem=function(){return this.beforeItem},e.prototype.getAfterItem=function(){return this.afterItem},e}(o.DomainEvent);var Wr=function(){function t(t){this.domainEventBus=t}return t.prototype.onSourceEdited=function(t){return this.domainEventBus.ofEvent(Qr).pipe(s.filter((function(e){return e.aggregateId.toString()===t.toString()})),s.map((function(t){var e=t.getAfterItem().getData(),n=t.getBeforeItem().getData();return new Ur(e,n)})))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:o.DomainEventBus}]},t}();var Gr=function(t){function e(e){return t.call(this,e,"SelectedRowToggledEvent")||this}return g(e,t),e}(o.DomainEvent),Kr=function(){function t(t,e){this.domainEventBus=t,this.structureQueryService=e}return t.prototype.onItemSelected=function(t){var e=this;return this.domainEventBus.ofEvent(Gr).pipe(s.filter((function(e){return e.aggregateId.toString()===t.toString()})),s.switchMap((function(n){return e.structureQueryService.onStructure(t).pipe(s.take(1),s.map((function(t){return t.getSelectedEntities()})),s.map((function(t){return t.map((function(t){return t.getData()}))})))})))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:o.DomainEventBus},{type:pr}]},t}();var Xr=function(){function t(t,e,n,r){void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===n&&(n=!1),void 0===r&&(r=!1),this.enabled=t,this.sort=e,this.filter=n,this.columns=r}return t.default=function(){return new t},t.fromConfig=function(e){return new t(e.enabled,e.sort,e.filter,e.columns)},t.prototype.isEnabled=function(){return this.enabled&&(this.sort||this.filter||this.columns)},t.prototype.isMainEnabled=function(){return this.sort},t.prototype.isSort=function(){return this.sort},t.prototype.isFilter=function(){return this.filter},t.prototype.isColumns=function(){return this.columns},t.prototype.getMenus=function(){var t=[];return this.isMainEnabled()&&t.push(this.getMainMenu()),this.isFilter()&&t.push(this.getFilterMenu()),this.isColumns()&&t.push(this.getColumnMenu()),t},t.prototype.getActiveMenu=function(){return this.getMenus()[0]},t.prototype.getMainMenu=function(){return t.MAIN},t.prototype.getFilterMenu=function(){return t.FILTER},t.prototype.getColumnMenu=function(){return t.COLUMNS},t.MAIN="Menu",t.FILTER="Filter",t.COLUMNS="Columns",t}();var Jr=function(t){function n(){return t.call(this,Xr.default())||this}return g(n,t),n.prototype.nextConfig=function(t){var e=Xr.fromConfig(t);this.next(e)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[]},n}(Ir);function Yr(t){return new rt("gui-"+t.generateId())}function qr(t){return new Ze("gui-"+t.generateId())}var Zr=m([{provide:rt,useFactory:Yr,deps:[mn]},{provide:Ze,useFactory:qr,deps:[mn]}],Ar,[Er,Sr,wr,Dr,Pr,Tr,Or,Jr]),_r=function(t){function n(e,n,r,i,o,a,s,u,c,g,p,l,d,h,f,m,y,v,b,C,A,E,I,S,w){var D=t.call(this,e,n,p,r,i,o,a,s,u,c,g,l,d,h,f,m,y)||this;return D.elementRef=v,D.changeDetectorRef=b,D.renderer=C,D.structureDefinition=A,D.structureQueryService=E,D.compositionQueryService=I,D.schemaReadModelService=S,D.schemaStylesManager=w,D.loaderEnabled=!1,D.circleLoaderEnabled=!0,D.initialLoaderAnimation=!1,D.structureCommandService.init(),u.init(),D}return g(n,t),n.prototype.ngOnChanges=function(e){t.prototype.ngOnChanges.call(this,e)},n.prototype.ngOnInit=function(){var e=this;t.prototype.ngOnInit.call(this),this.schemaReadModelService.onHeight().pipe(this.takeUntil()).subscribe((function(t){e.structureHeight=t})),this.schemaReadModelService.onColumnHeader().pipe(this.takeUntil()).subscribe((function(t){e.columnHeader=t})),this.structureQueryService.onStructure().pipe(this.takeUntil()).subscribe((function(t){e.structure=t,e.loaderEnabled=t.getSource().isLoading(),e.circleLoaderEnabled=t.isLoaderVisible(),e.loaderEnabled&&!e.initialLoaderAnimation&&(e.initialLoaderAnimation=!0)}))},n.prototype.ngAfterViewInit=function(){var t=this,e=this.elementRef.nativeElement.offsetWidth;e>0?this.compositionCommandService.setContainerWidth(e):a.timer(0).pipe(this.takeUntil()).subscribe((function(){(e=t.elementRef.nativeElement.offsetWidth)>0&&t.compositionCommandService.setContainerWidth(e)})),this.schemaStylesManager.init(this.elementRef,this.structureId),this.compositionQueryService.onWidth().pipe(this.takeUntil()).subscribe((function(e){t.renderer.setStyle(t.elementRef.nativeElement,"width",e+"px")}))},n.prototype.isBorderEnabled=function(){return this.structureDefinition.isBorderEnabled()},n.prototype.getStructureId=function(){return this.structureId},n.decorators=[{type:e.Component,args:[{selector:"gui-structure",template:'<gui-structure-blueprint></gui-structure-blueprint>\n\n\x3c!---------- LOADING ----------\x3e\n<div [ngClass]="{\'gui-loader-visible\': loaderEnabled, \'gui-loader-hidden\': !loaderEnabled && initialLoaderAnimation}"\n\t class="gui-loading">\n\t<gui-spinner *ngIf="circleLoaderEnabled"\n\t\t\t\t [primary]="true"\n\t\t\t\t [diameter]="120">\n\t</gui-spinner>\n</div>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None,host:{"[class]":'"gui-structure"',"[class.gui-structure-border]":"isBorderEnabled()","[id]":"structureId.toString()"},providers:m(Zr,[{provide:Nr,useExisting:n}]),styles:[".gui-bold{font-weight:700}.gui-italic{font-style:italic}",'gui-structure input{font-family:Arial;font-size:13px}.gui-header{background:#f2f3f4;border-bottom:1px solid #d6d6d6;height:32px}.gui-header .gui-header-cell{border-right:1px solid transparent;box-sizing:border-box;cursor:pointer;line-height:1em;overflow:hidden;padding:0 16px 0 8px;position:relative;white-space:nowrap;text-overflow:ellipsis;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.gui-header .gui-header-cell:last-of-type{border-right:0}.gui-header .gui-header-cell .gui-header-menu{display:-webkit-box;display:-ms-flexbox;display:flex}.gui-header .gui-header-cell .gui-header-menu .gui-header-menu-icon{display:none;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABj0lEQVQ4ja2T261UMQxFV2znxdwvyqASOpgzf0jUQC1UQSkUgUQFCHHPnCQOPzeH+R8sRZHysLaXt8O2bT9ijC8hBFFVQgiUUmitcblcXFUZYwCQc8bMfIxBjJHW2m8D3o8xXswMgDknvXfM7PwoIsw5AWitEWNcd8mAz6pqIQTcnRgjMUYA3J0QwrkASimIyErQeTbC7Xb7JCICYGaICCklzIw5JyKCqhJjRFXJOTPnJKVECMHN3b+KSBERROSU6u6oKiklFshHLsdxMOfczcx+ikgBGGOQUmLOSQgBVT3BvolkjIGI0HtHRPanGTwdYdu272ZWgBNUjBEzo9bKvu/knFHVs81rb63tBnwAirufta94fX0lpQT849B7J+dM7x13383dv4wxLMZ4gltGWQ5cHZlzYmYcx0FKCXf/D0a6Xq8fxxip1irLsrXW1UJXVWqt9N65XC7s++5Lbe+925zzWynlHcCaxiXdzFBVWmuICPf7nfXurcRfpqp/eu/ySPdxCtf5mtaU0gKIiBx/ARsJ0yTj9LIKAAAAAElFTkSuQmCC);height:16px;width:16px;margin-right:8px;opacity:.8}.gui-header .gui-header-cell .gui-header-menu .gui-header-menu-icon:hover{box-shadow:0 0 2px 0 #999;opacity:1}.gui-header .gui-header-cell .gui-header-menu .gui-sort{display:none;height:16px;width:16px}.gui-header .gui-header-cell .gui-header-menu .gui-sort-asc{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAFnElEQVR4Xu2dO6slRRSFvxF8gIiZiI9ERgMFB00MTNRf4DMTTUxEMBcRFRFzUTMDxUwZnD8wGoggqIyCBiomPjFTUHyAypY+eBjuub27q6qratfq7HJ3n+5a6+u9uoruc06gbWgFTgw9eg0eATA4BAJAAAyuwODDVwcQAIMrMPjw1QEEwOAKDD58dQABMKwCVwG3wn9rIR8CP4yoxIgd4ErgFeDuyXzz/R/gDPAo8ONIIIwGwEngLHDtAZO/Ae4CvhoFgpEAMPPfBa6eMfdb4M5RIBgFAK/5OzaGgWAEAJaaPxQE0QFYa/4wEEQGINX8ISCICkAu88NDEBGA3OaHhiAaAKXMDwtBJACuB95xzPNT13i+A+6Isk4QBYCtzN/BEwaCCABsbX4oCHoHoJb5YSDoGYDa5oeAoFcAWjG/ewh6BKA187uGoDcAUsy3hz68411Suz+t7G524BUkde6cY/8U878HXgaed57Ik8BjgD02tnTrCoJeAEg13x7wuBl40+nmA8Cn08JSaAh6AMDMtyd51hhhV76Z/wVw/0IA3gJuSITAjv2lE7oqZa0DkMt8E3cNALZfaAhaBiCn+SkAhIagVQBym58KQFgIWgSghPk5AAgJQWsAlDI/FwDhIGgJgJLm5wQgFAStAFDa/NwAhIGgBQC2ML8EACEgqA1Ayhx7f5HHs4iydh1g7rNTx2CPl1VbLKoJQKpwuxW+OYN2/y8FQGonMJCrQVALgK3NLxUB+/CljqkKBDUASBVq6ZW/RQfYHSN1bJtDsDUAqQKtNX+LDtAlBFsCUNP8LQHo6p5gKwBqm781AN1AsAUALZhfA4AuICgNQCvm1wKgeQhKAtCS+TUByAFBys3vseskpQC4GPgIuMm7SrNXt3SFz3uIkgtBnnNIuSA+m77T8E/PgZbUlALgGeDpJScy1ZYyv3YHyDFFNE2fXaFplQ5wDji18GRLmt8KAClxYJreslDT2fISHeAC4Hfgwtmj/19Q2vyWAFgLwV/AJcDfC3SdLS0BgB3UXo7wPsa9hfmtAbAGAtP0mllHFxaUAuA0cI/jXLYyv0UAlkJgmt7n0HRRSSkA7O7fZgE2Gzi0bWl+qwB4IfhjmgV8vshdR3EpAOzQjwAvHYDApjX3Tm/sOE4zS0ntaeBxg7Apol3hR02bzXx7T/HVLCqc9yElAbBD3Qg8B9wGXAGY8W8DLwDZ57QzArUMgJ36RcAT09fYGwg/AR8ATwHZr/ydVqUB2PfEZgdZ72AXXhGtA1BFqy0BWOhX9vKeAMg++EMfKACOVsZeD7e3g8NvAkAAhId8N0BFwBFWqwOoA6gDHKGA7gECYqEIUAQs+pIozQKCdQF1AHUAdYDzGdAsQLOAYI3+8HAUAYoARYAiwNfwtA7g06mrKkWAIkARoAjwNS1FgE+nrqoUAYoARYAiwNe0FAE+nbqqUgQoAhQBigBf01IE+HTqqkoRoAhQBCgCfE1LEeDTqasqRYAiQBGgCPA1LUWAT6euqhQBigBFgCLA17QUAT6duqpSBCgCFAGKAF/TUgT4dOqqShGgCFAEKAJ8TUsR4NOpqypFgCJAEaAI8DUtRYBPp66qFAGKAEWAIsDXtBQBPp26qlIEKAIUAYoAX9NSBPh06qpKEaAIUAQoAnxNSxHg06mrKkWAIkARMHIE3A685+xZVvu+s7brspG+KvZS4BfAfr3suM1+2ewy4LeunXWe/EgAmCSvAQ/NaPM68LBTv+7LRgPgcuBj4LoDzn09/UTrz9076xzAaACYLAbBi8CDe3Fgbf8N4HFgGPNNjBEB2F0bdk9wavrjE+BX50UTqmxkAEIZuXYwAmCtckH2EwBBjFw7DAGwVrkg+wmAIEauHYYAWKtckP0EQBAj1w5DAKxVLsh+AiCIkWuHIQDWKhdkv38BCBOikK5+TTcAAAAASUVORK5CYII=) center/contain no-repeat;display:block}.gui-header .gui-header-cell .gui-header-menu .gui-sort-desc{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAFcElEQVR4Xu2dPatcVRSGnwhRQUIqwc8mqIVC/ECwsFH/gEk0nWhjpZJeFFREf4AoNjaKnSL+Ak0hgo2EgBZGbJKIYJWA4gcksmAGhuvcO+t87H322us97aw7s9f7PrPec/acO3MIHakVOJS6ezWPAEgOgQAQAMkVSN6+JoAASK5A8vY1AQRAcgWSt68JIADSKnAL8NCq+3PAHxmVyDgBjgLvAc8BN6xMvwZ8CpwBrmQCIRsAZv73wLF9TP4FeCQTBNkA+Bh4fsc7/BPghSxTIBMAlvlXN8b+fh5bHBwB/swAQSYAHge+cZpqtd86a0OXZQLgWeAzp1ungc+dtaHLBMB2+wRAaKy3L14TYIsumgCaAB2+1zUB3KZqAmgCuGGJXqhzAJ0D6DJwLwOKAEVA9MnuXr8iQBGgCFAE+AaGdgJ9OoWqUgQoAhQBigDf0FIE+HQKVaUIUAQoAhQBvqGlCPDpFKpKEaAIUAQoAnxDSxHg0ylUlSJAEaAIUAT4hpYiwKdTqCpFgCJAEaAI8A0tRYBPp1BVigBFgCJAEeAbWooAn06hqhQBigBFgCLAN7QUAT6dQlUpAhQBigBFgG9oKQJ8OoWqUgQoAhQBigDf0FIE+HQKVaUIUAQoAhQBvqGlCPDpFKpKEaAIUAQoAnxDSxHg0ylUlSJAEaAIUAT4hpYiwKdTqCpFgCJAEaAI8A0tRYBPp1BVioCFI8B+pNF+kWupIxIA1bQq/WXRDwBvA48BtwI/Al8C7wL/VCahdQBuAl4FTgD3A78D3wGvr3QrIldJAF4E3gessb3HD8Ap4KciXW1/0pYBuA/4ArA3zN7jb+AV4KMSWpUCwBqxn2i98YBF/wo8WRGCVgEw878G7jhAK4PAftLWJuisRykAjOaTjpXWhKBFADzmr2U0TZ9xaDqopBQAl3cQvbnIWhC0BsAQ800v0/SuQe46iksAYGewfwGHHa+/LqkBQUsADDXfdPoXuHnuK6kSANhizwEPDgDASktD0AoAY8xfa/rwQE13lpcC4E3gjZ2v/v+CkhC0AMBY800p0/StEZoe+CelALCzf7sK2HZZs6uHUhAsDcAU8+2y2a4CZt87KQWAmTyl4RIQLAnAVC2eAC7seueMebwkAK1BsBQAzZpvBpUGoCUIlgCgafNrAdAKBLUBaN78mgC0AEFNAEKYXxuApSGoBUAY85cAYEkIagAQyvylAFgKgtIAhDN/SQCWgKAkACHNXxqA2hCUAmCK+fYJn90TUWSTx7MxVGMfYNc67gXODvj4ePP5huwYlgAgtPktTIC1mTUgmBuA8Oa3BICtpTQEcwLQhfmtAVAagrkA6Mb8FgEoCcEcAHRlfqsAlIJgKgDdmd8yACUgmAJAl+a3DsDcEIwFoFvzIwCwhsD+ceLOXRsKWx7f3CcYA8BU8+1Onp9HrLvan7SwEeRp1i4Rp0JwHAZ9P8B5x3/s7Ld22+Fr3vwoE2Bzs2gKBB8A73hoA14DXh65OxnG/GgATI2D6wNugRtSu8lUKPMjAjAVAucAGFUWzvyoALQIQUjzIwPQEgRhzY8OQAsQhDa/BwCWhCC8+b0AsAQEXZjfEwDWyz2rO4vG7BgOOe2/tLqNq+kdPm9DUXYCvf2UhqAr83ubAGtISkHQnfm9AlAiDro0v2cA5oSgW/N7B2AOCLo2PwMAUyDo3vwsAIyBIIX5mQAYAkEa87MBsIbgK+DufTYWLgJPtX4bl3dTxFPX20aQp+fbgA+BpzduELEbQOxr7F8CfvM8SS81GQFYe3c78Chg5tt3GtoNpOmOzACkM3tbwwIgOQYCQAAkVyB5+5oAAiC5Asnb1wQQAMkVSN6+JoAASK5A8vb/A4djo5Dd1KQLAAAAAElFTkSuQmCC) center/contain no-repeat;display:block}.gui-header .gui-header-cell:hover{background:#e6e7e8}.gui-header .gui-header-cell:hover .gui-header-menu .gui-header-menu-icon{display:block}.gui-header-bottom .gui-header{border-bottom:0;border-top:1px solid #d6d6d6}gui-structure{background:#fff;box-sizing:border-box;color:#333;display:block;font-family:Arial;font-size:14px;position:relative}gui-structure *{box-sizing:border-box}gui-structure gui-structure-header{display:block;height:100%;width:100%}gui-structure gui-structure-header gui-structure-header-filters.gui-header{height:32px}gui-structure gui-structure-header gui-structure-header-filters.gui-header .gui-header-cell{padding:4px}gui-structure gui-structure-header gui-structure-header-filters.gui-header .gui-header-cell input{position:relative;box-sizing:border-box;font-size:13px;padding:2px;height:100%;width:100%;border:1px solid #d6d6d6}gui-structure-top-panel{display:block;padding:8px;border-bottom:1px solid #d6d6d6}gui-structure-search-bar{display:block;width:60%;margin-right:auto}gui-structure-search-bar form{display:-webkit-box;display:-ms-flexbox;display:flex;background:#fff;height:30px;position:relative}gui-structure-search-bar form .gui-search-icon{position:absolute;top:6px;left:10px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEgSURBVDhPrdM9SwNBFIXhVTF2kkbSSiCF2GkRlBR+kMJGrO1t7WxsLEQQC8HCThQRLETIT4gEtNQ6aCUKYgpBLAIW+p47E5LsJuugHniYuTB7d2aZjWKZwyWe8OV94BQFpGYE23hBFTOYQB4rOIEabqFvdqEGC1b1zjSa6NloFmqwaFV6itCOEker4MhNg3IMHa8rr1h206Bo7ZubtqPtjbtpULRWz4xZRQb9OOrHkLTWZvxoTR5RsiosU7jHs1U++7hz0x8zjBvsWNWRLD6xblV6NtBAzqpYdN31sfasSkYvOoBeltj1gB8V3Uj9N3rgHA94hy5YGfqfatjEFebRN6s4xDV0/gssQc2VNWjX+sf+lH9vdDZk5e9yi3oURZPfGPU3vvdwgY8AAAAASUVORK5CYII=);width:17px;height:17px}gui-structure-search-bar form input{border:1px solid #d6d6d6;border-radius:4px;padding:6px 6px 6px 38px;height:100%;width:100%}gui-structure-container{display:block;height:100%;overflow:auto;overflow-x:hidden;position:relative;width:100%}gui-structure-container .gui-structure-container{box-sizing:border-box;height:100%;position:absolute;width:100%}gui-structure-container .gui-structure-container .gui-content{height:100%;position:relative}gui-structure-container .gui-structure-container .gui-content .gui-row{height:30px;position:absolute;width:100%}gui-structure-container .gui-structure-container .gui-content .gui-row:hover{background:#f6f7f8}gui-structure-container .gui-structure-container .gui-content .gui-row.selected{background:#d0e8fb}gui-structure-container .gui-structure-container .gui-content .gui-row .gui-cell{border-right:1px solid transparent;box-sizing:border-box;line-height:1em;overflow:hidden;padding:0;white-space:nowrap}gui-structure-container .gui-structure-container .gui-content .gui-row .gui-cell .gui-button{padding:0}gui-structure-container .gui-structure-container .gui-content .gui-row .gui-cell .gui-cell-boolean{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}gui-structure-container .gui-structure-container .gui-content .gui-row .gui-cell .gui-checkbox{position:absolute;top:4px;padding-left:22px;line-height:0}gui-structure-container .gui-structure-container .gui-content .gui-row .gui-cell .gui-chip{margin:0;padding:2px 8px}gui-structure-container .gui-structure-container .gui-content .gui-row .gui-cell .gui-badge{padding:0}gui-structure-container .gui-structure-container .gui-content .gui-row .gui-cell .gui-input{background:0 0;font-size:14px;border-style:none;border-radius:0;padding:0}gui-structure-container gui-structure-cell{display:inline-block}gui-structure-container gui-structure-cell>span{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;padding:0 8px;height:100%;width:100%}gui-structure-container gui-structure-cell .gui-cell-edit-mode{border:2px solid #2185d0;height:100%;padding:6px}gui-structure-container gui-structure-cell .gui-cell-edit-mode gui-boolean-edit{margin-left:calc(50% - 11px)}gui-structure-container gui-structure-cell .gui-cell-edit-mode input:focus{outline:0;box-shadow:none}.gui-structure-empty-source{display:block;padding:24px 8px}.gui-vertical-grid .gui-structure-aggregation-cell,.gui-vertical-grid gui-structure-container .gui-content .gui-row .gui-cell,.gui-vertical-grid gui-structure-header .gui-header .gui-header-cell{border-right:1px solid #d6d6d6}.gui-vertical-grid .gui-structure-aggregation-cell:last-of-type,.gui-vertical-grid gui-structure-container .gui-content .gui-row .gui-cell:last-of-type,.gui-vertical-grid gui-structure-header .gui-header .gui-header-cell:last-of-type{border-right:0}.gui-horizontal-grid gui-structure-container .gui-row .gui-cell{border-bottom:1px solid #d6d6d6}.gui-horizontal-grid gui-structure-container .gui-row:last-of-type .gui-cell{border-bottom:0}.gui-rows-even .gui-row.even,.gui-rows-odd .gui-row.odd{background:#f7f8f9}gui-structure-info-panel{box-sizing:border-box;background:#f2f3f4;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:0 6px;width:100%;line-height:30px;border-top:1px solid #d6d6d6}gui-structure-info-panel p{margin:0}gui-structure-info-panel p b{font-weight:700}gui-structure-info-panel div{color:#333;cursor:pointer}gui-structure-info-panel div button{background:#999;border-radius:50%;color:#fff;cursor:pointer;font-weight:700;font-family:"Comic Sans MS",cursive,sans-serif;width:16px;height:16px;line-height:14px;padding:0;border:1px solid transparent}gui-structure-info-panel div button:focus{outline:0;box-shadow:0 0 4px #999}.gui-structure-info-modal{box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:160px;padding:16px;font-size:16px;font-family:Roboto,sans-serif}.gui-structure-info-modal ul{list-style:none;margin:0;padding-left:10px}.gui-structure-info-modal ul li{line-height:24px}.gui-structure-info-modal p{font-weight:700;margin:0;color:#333}.gui-structure-info-modal p:nth-child(2){margin:0 0 12px}.gui-structure-info-modal p:nth-child(5){margin:8px 0 0}.gui-structure-info-modal a{text-decoration:none;color:#2185d0;margin:0 0 8px}.gui-structure-info-modal a:hover{color:#59a9e5}.gui-structure-border{border:1px solid #d6d6d6}gui-structure-aggregation-panel{background:#f2f3f4;display:-webkit-box;display:-ms-flexbox;display:flex}gui-structure-aggregation-panel.gui-structure-aggregation-panel-bottom .gui-structure-aggregation-cell{border-top:1px solid #d6d6d6}gui-structure-aggregation-panel.gui-structure-aggregation-panel-top .gui-structure-aggregation-cell{border-bottom:1px solid #d6d6d6}gui-structure-aggregation-panel .gui-structure-aggregation-cell{font-size:14px}gui-structure-aggregation-panel .gui-structure-aggregation-value{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;line-height:1em;height:30px;padding:8px 6px;overflow:hidden}gui-structure-aggregation-panel .gui-structure-aggregation-value div .gui-math-symbol{position:relative;top:-1px}gui-structure-aggregation-panel .gui-structure-aggregation-value .gui-mean,gui-structure-aggregation-panel .gui-structure-aggregation-value .gui-median{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}gui-structure-aggregation-panel .gui-structure-aggregation-value .gui-mean span:nth-child(1){position:absolute;top:-15px;left:1px}gui-structure-aggregation-panel .gui-structure-aggregation-value .gui-median span:nth-child(1){position:absolute;top:-8px;left:1px}@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@-webkit-keyframes fadeOut{from{opacity:1}to{opacity:0}}@keyframes fadeOut{from{opacity:1}to{opacity:0}}.gui-loading{-webkit-animation-duration:.2s;animation-duration:.2s;-ms-flex-line-pack:center;align-content:center;background:rgba(255,255,255,.8);border:1px solid transparent;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;left:0;opacity:0;position:absolute;top:0;width:100%;visibility:hidden}.gui-loading gui-spinner{-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center}.gui-loading.gui-loader-hidden{-webkit-animation-name:fadeOut;animation-name:fadeOut;opacity:0;visibility:visible;z-index:-1}.gui-loading.gui-loader-visible{-webkit-animation-name:fadeIn;animation-name:fadeIn;opacity:1;visibility:visible;z-index:1}.gui-header-menu-tab hr{margin:0}.gui-header-menu-tab .gui-header-text-bold{font-weight:700}.gui-header-menu-tab .gui-tab .gui-tab-menu .gui-tab-menu-item{color:#333}.gui-header-menu-tab .gui-tab .gui-tab-menu .gui-tab-menu-item:hover{background:#f6f7f8}.gui-header-menu-tab .gui-tab .gui-tab-content{padding:0;width:225px}.gui-header-menu-tab .gui-tab-item-dropdown .gui-header-menu-dropdown.gui-dropdown .gui-dropdown-container{border:none;border-radius:0}.gui-header-menu-tab .gui-tab-item-dropdown .gui-header-menu-dropdown.gui-dropdown .gui-dropdown-container:hover{background:#f6f7f8}.gui-header-menu-tab .gui-tab-item-dropdown .gui-header-menu-dropdown.gui-dropdown .gui-item{color:#333;background:#fff}.gui-header-menu-tab .gui-tab-item-dropdown .gui-header-menu-dropdown.gui-dropdown .gui-item:hover{background:#f6f7f8}.gui-header-menu-tab .gui-header-menu-item{cursor:pointer;color:#333;padding:8px 12px}.gui-header-menu-tab .gui-header-menu-item:hover{background:#f6f7f8}',"gui-structure-paging{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:4px}gui-structure-paging>*{padding-left:16px}gui-structure-paging gui-structure-paging-select span{display:inline-block;margin:0 6px 0 0}gui-structure-paging gui-structure-paging-navigator button{margin-right:6px}gui-structure-paging gui-structure-paging-navigator button:last-of-type{margin-right:0}gui-structure-paging gui-structure-paging-stats span{display:inline-block;margin:0 2px 0 0}gui-structure-paging gui-structure-alternative-paging-navigator{display:-webkit-box;display:-ms-flexbox;display:flex;padding:0 8px;line-height:34px}gui-structure-paging gui-structure-alternative-paging-navigator gui-structure-alternative-paging-pages{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}gui-structure-paging gui-structure-alternative-paging-navigator gui-structure-alternative-paging-pages .gui-paging-page{display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}gui-structure-paging gui-structure-alternative-paging-navigator gui-structure-alternative-paging-pages .gui-paging-visible-page .gui-paging-page{display:block;cursor:pointer;padding:0 8px}gui-structure-paging gui-structure-alternative-paging-navigator gui-structure-alternative-paging-pages .gui-paging-active-page{font-weight:700;color:#000;box-shadow:0 1px 0 0 #000}gui-structure-paging gui-structure-alternative-paging-navigator .gui-button{margin:0 4px;background:0 0;padding:0}gui-structure-paging gui-structure-alternative-paging-navigator .gui-button:hover{background:0 0}gui-structure-paging.gui-structure-paging-bottom{border-top:1px solid #d6d6d6}gui-structure-paging.gui-structure-paging-top{border-bottom:1px solid #d6d6d6}","@media (max-width:500px){gui-structure-paging gui-structure-paging-stats,gui-structure-paging>*{padding-left:4px}}",".gui-header{display:-webkit-box;display:-ms-flexbox;display:flex}.gui-header .gui-header-cell{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex}.gui-content{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.gui-content .gui-row{display:-webkit-box;display:-ms-flexbox;display:flex}.gui-content .gui-row .gui-cell{display:inline-block}",".gui-cell .gui-checkbox{display:block}.gui-cell .gui-chip{margin:0;padding:2px 8px}.gui-cell .gui-input{font-size:11px;display:block;padding:2px 4px;width:86%}.gui-cell .gui-button{padding:2px 8px}.gui-cell .gui-cell-number{display:block;text-align:right;width:100%}.gui-cell .gui-cell-boolean{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;text-align:center;width:100%}",'.gui-material .gui-header,.gui-material.gui-structure{font-family:Roboto,"Helvetica Neue",sans-serif}.gui-material .gui-structure-header .gui-header{font-weight:700;color:grey}.gui-material .gui-structure-header .gui-header .gui-header-cell{border-right:1px solid transparent}.gui-material .gui-cell .gui-badge,.gui-material .gui-cell .gui-button{padding:0}.gui-material.gui-vertical-grid gui-structure-container .gui-row .gui-cell{border-right:none}',".gui-dark .gui-header,.gui-dark.gui-structure{background:#383838;color:#ccc}.gui-dark .gui-structure-border{border:none;box-shadow:5px 5px 10px 2px #1f1f1f}.gui-dark .gui-structure-header .gui-header{color:#bdbdbd;border-bottom-color:#666}.gui-dark .gui-structure-header .gui-header .gui-header-cell{border-right:1px solid transparent}.gui-dark .gui-structure-header .gui-header .gui-header-cell:hover,.gui-dark gui-structure-container .gui-structure-container .gui-content .gui-row:hover{background:#525252}.gui-dark gui-structure-container .gui-structure-container .gui-content .gui-row.selected{background:#7cb9f652}.gui-dark.gui-rows-even .gui-row.even,.gui-dark.gui-rows-odd .gui-row.odd{background:#2c2c2c}.gui-dark .gui-horizontal-grid gui-structure-container .gui-row .gui-cell{border-bottom-color:#666}.gui-dark.gui-vertical-grid gui-structure-container .gui-row .gui-cell{border-right:none}.gui-dark gui-structure-paging.gui-structure-paging-bottom{border-top-color:#666}.gui-dark gui-structure-paging.gui-structure-paging-top{border-bottom-color:#666}.gui-dark ::-webkit-scrollbar{width:15px}.gui-dark ::-webkit-scrollbar-track{background:#616161}.gui-dark ::-webkit-scrollbar-thumb{background:#424242}.gui-dark ::-webkit-scrollbar-thumb:hover{background:#212121}.gui-dark .gui-structure-aggregation-cell{background:#383838;color:#ccc}.gui-dark .gui-structure-aggregation-panel-bottom .gui-structure-aggregation-cell{border-top-color:#666}.gui-dark .gui-structure-aggregation-panel-top .gui-structure-aggregation-cell{border-bottom-color:#666}.gui-dark gui-structure-info-panel{background:#383838;border-top-color:#666}.gui-dark gui-structure-info-panel div{color:#ccc}.gui-dark gui-structure-info-panel div button{background:#616161}.gui-dark .gui-header .gui-header-cell .gui-header-menu .gui-sort-asc{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAABFoSURBVHhe7V35b1TXFbbxAsbGHmbFK6AECJRGVEUhBa/gNFKkSKkIi8mi9C+J8nPbHypUpND8kqYBYhPMGioIae0E0kAoi7ENNmZsMNjGeLwvzIzH/b7rd6eDg2fceDzbvZ/09O7ce9/zved859xz3uKXpKGhoaGhoaGhoaGhoaGhoaGhBpKNvVKYmppKPnjwYOrIyEiqz+dblJ2dPZWenu7LzMz07N69e9LopgSUIgAVX1NTk7ZixYqcDRs2FLe1tb3q9XrtbEtNTe1as2bNpdbW1u87OjoGVCGCMgSg8hsbG5dbLJatUHB5Wlrar1C9EVsGNsphDN6gEfsfi4qKvna5XN+vX79+GL8TGkoQQCrfarWW9fT07JmcnCzBlr1o0aKlXALYB2UUfRMpKSmDKH9TWFh4qKurq37jxo0j4iQJioQnAJXf3NxsttlsJZ2dnfs8Hk8Fqs3JycnUOBUv+sky+vvQ1o8l4Tw8wWePHz/+NpE9QUITQCrfZDLR8nfB6rdD0VZYuVA+loEk1Im+qEtyu91ij7opkOEJtnMFBQVHQIZvzWbzoOiYYEhoAjx69MgGJRZ3d3dXwfLLQQgLLZ+Wjn0S6pIQ/ZMo/jIJwd/YptCnD4S4kJeXdxht/0pEEkz7vwTE7du3rdiVwIXvRqRfirJQPtsMBbPoVzhBryCBvjQOC+oq4T2qcI6S/v5+03Rr4iAhPQAtH7uSJ0+e7H369GkZylap/P8XhidwYbn42uFwJJwnSDgPgEDPArdd0tfX9/bExEQp9Gf7ucon6AngBcw41w54k704XzGIlW00xz0SigDGml8GRVWNj4/vgLLs+D1vL8dz4FwWeJPXHj58+B7KFS0tLQlBgoQhwODgoAU7afklMFw7rXe6dX6Awpkd+D0BiFZlsVhKEoEECUEAKn94eHgrgrSddPuocrCe+qfywgXDm1iQLpZ3dXXtQXoZ9ySIewIMDQ3ZRkdHy0CCvSABL/LkM82TYF4/XwSew/AEdvzN15FevhvvJIhrAtDyR0ZGmJ69PTY2Vgbl5NLipdWHywPwHJJUTBVJAsAOb7Md8cYeLAfFt27dyhId4gxxmwbS8ql8RORVCM5KoCQR8FHpzO2pMFnmPlCJBH+zPhAz66hsHmMoXbTLOoK/gZ7Fixf/Mz8//7OBgYGLL7zwQlyliHHpAZjqUfkul2sXlM813x/tBypaliUBApU787fsIxHYxnPINnlugn2wOTCGSgaGy5YtK25ubl5mNMcF/jfLOACUkAxB84peKVM9j8fjt3yjy08gFU3FSW/ATXqJQLAv62jlgccQ/D0beBy23iVLllyIN08QVx4AObg5NTW1lJaPSLwUippTqkcFSchyqMMCj5kjbEwRkR0IT9DW1pZj1Mc04sIDQBnJVD4ssty4vFtM5eM3F32j1+yQyuQ6Lq2b++eBVs/+3Hu93p94idnAY3BOXjYWnsButx8ZHx+vX7169YDRJSYRFx7g/v37Jlp+b28v1/wyCFson0KXyp0NVDY3KlOSRR4nf0sEno9tc3H/hDwOQ2JHeoLXenp69mVnZ2+L9ZggtPlEERCqeJJnxYoV5Qj8quj2oQxxY4cWPBfrNBTqhTJ96J+Gsn/OM4+f4RVw6JQb+zT0C+pp2CaP5TlZxrEuZAfnCwsLP4fXqlu7du2Q6BBjiFkPEKD8Ml5149U3CPaZu3oUfDDFEDjPU7j+bqzLTpaxCUZQUYHHsiwJwT74W2M5OTl34Xkeo8orGoKAx/LU3Hgu7M0YcyWI+47Vai2NVU8QkwSA8JKvX7+e43A4irH274FL5cMc5rS0NOH2aWFQjNhLN02wTYJlbG4ooy0jI6PGZDKdQvkhyMCnfaSSntkkCXBuH/p1gAC1IM4p1HWgfZJ9As7tL3MM3MsYgzDGZ2aKSO+Vl5dXEosXi+Z/nTTM+PDDDxdZLBYT0qkyKH8vUr0dUAxTPzFWKklCKpF7bhS+LEMpbiiuDUr5/OrVq38EefpRrsRhDrT7TyL7zwCDuQ70/xMUd2N0dDQFMQSvMvJBUmE0gX+X5ecBXXniDIwlb2hoKAtzGnz//fe7Dhw4wKUlJhBTHgCCTN65c2dObm5uGa2Gykc17/Lx2qvoQwSW+VwfQSukBVIZOM6Ncjutd926dec++OCDwb6+vnEc93xNzQJY7Pjly5evrly58nBmZuZxHN8Ot+7j3+DfkoSjtcsxcS/LBMriVjLG9NsHDx68g7mVxpIniBkCUPl0+7C4clj+Pgh6OwWHpqBjlEsAhU7FYBOWv3Tp0hMFBQVH6+rqGqgD0elnoKKiwov1+2ZRUdERkKAW525HtVgO5N+Ubn82kATGcsDnCd6NJRLEBAEgxOSGhgYTFCaifbjb7ahm3v+M5T8PVADBfhCyhwqC5Z8EkY6eOXPmxhtvvPFUdJgHNm/e7IEnuAZPcASp3XFUtePvTsqxyTHMBvaDx6AnsILYr0sSgPCZRpeoIeoE4JpP5UvLh6usgFUvp/JpWaGEi37SCqn8u7R8RN1fXrt27ebu3bvDttbSEzidzgYo7ggIVgulduBvCvfDMQSDMT5BAs6N1wlIAqSIZdH2BFElAATzzJoP6+Cab4agRLRPwYbyAAZJvOh7D1H7CVr+lStXbkJhE0aXsGHjxo3uu3fvXofiSAIRE0ChGELIJcBPVJIAsIAEjAmEJ4hmihg1AlD5huVXIM/nms9ULweC8o+JgVYoAuAYD/q0wPJP2mw2YfnhcPuzgcsBYwK+MCJjAowhKAM4B85FAscwJlguYwKku2XReqgkKgSg8nmRh24fls9r+2LNR0SfwqAO7SKy5uVbaV2s4ybLBmj5dwzLr7l06VLDQlj+TBgkuI7A8HBWVhY9QRvGJLIDicAy58C5cE6s5+/09HTKnoHh6/AE7/G9xWh4gogTAALwX+ED+5nn0/KXQ4hizZcWH6h4WSfL3FDm1Tkq/7jdbj8Gy29YSMufCZLgq6++usXsgGNA1T2MWQzaGB+Lz5TlnAiW6e3QZmK6yxQxGp4gogTAZP1v6RprPi3fQkFIJUsFyzLzfCk4ulF6CGy0/Nsmk+kEhH+sqampMRKWPxMMMplpYByCBBjTPVg6LyP713yWOYfZ5se5o58ZJKikJ1i+fHl5JD1BxAhA5RuXd8XrWnB9vLZvRlPQMUjlU1g4B02J6VcrBH4S634tgrLbW7duHRedogCSAKRuQlB4lCTA2JwYM68k+hUt5xAEIjuATMTzBFjOSiJFgogQgMrHhMwInEqMGzsVqOMbPCHv51N47EOhAnx1uwWCPgXlH3v06FFTNJUvQe+DFPEmlqKa7OzskzBqJxQq/L4xdtFvNrAPZYF+jAl23L9/f5/FYolIdhARAkDpVrPZXMpon0/NQDg2TnjaoIODrpTKh5AoxRa4SN6gqb5z504j1uGx6V7RB4mIIPQG0rrDxnWCNoO0Yg7BwD7cIBNmB9bx8XHxyDkIVbrQr6EtOAEC39IFuysgGCvXvenW6ckHg2FJvOByByQSbh+W3xyNNT8UGIQyDUWA+wXiApKAgaEgQTDQA0hANPgprhOIu4g4vqS3t3fBPMGCEgCKssFiS/v6+vZiQttp+VL5FErgTZTngZJDu3D7OM9x3tZtb2+PKcufCRLz3Llz9AQMDI9hunehxJBBgEwRCZIAh5AEwhPgN5+DXJBnDBeMAGCveFcPli/e0kXZhkmKJ3kI8gCEEOXnwVA+O7TCmk7T8nGuqAZ8cwUDQ6aIjAmwHJzAPJyYzqwkoOIpC2Y5BGUEWdEySAK+iyjeSl4IT7AgBKDlI/Up6+/vr+IEMHjx9C4g2rnnxolyY5lCCCwD9J20/GOZmZnC8jdt2jQqThAHIAnoCRD4MiY4hirGBOJikZw7yzQEOXeCbRKMCbCz0hMgfhKeINzXCRaEAHBX68DW3yGYEW/p0qVJxcoJysmT9SwT/G0Ihnk+LZ/R/nFYfnM8WP5MSE9QWFh4FCQ4ibkzRSTEXAmWKQP+lnKQMiJQL0jA191hWG+j/6rplvAg7ARAXk6FbwZrX8GExD9hDAZOlkLgnhtcIa/t8wpfLSz/KCz/VjxZ/kyQBHV1dTdAgsOMCTA3egJxK5mbnHswoJ0gCV7Fz2IEmmH7VzVhJ8Do6OhLXq+3mMo32DsryHiufQHW4IE1tCKXPmW1Wmvp9uPR8meC2cGZM2ca8vPz6QnEM4YkAds492CxUCAgm1xkUmWLFy9+yaiaN8JKAKxTdgzylxjky9iHZClYLTYSAQJ5inIrBHQcgqpGTn0zEZQvQU/Q3Nx8raio6JAREzgxb/+TRaGAPnygJNvj8WyCbF9xOp1h8QJhJQAs/xcI/sT/5ZmLa5Og5cMS7tE6kEPX1tfXN0Xyxk6kwBtI9ASYY01WVhavGIoni4zmkKBMgRXwGCUorxWV80RYCYCcNXd4ePglMDSHgw3l2sh+9OEzfK0QSK1h+RG9qxdpGNkBbyUf4vMEqGqHrPyPnM8GypNeAMgeGxtbiyA712iaF8JKgIyMDBd2vdjcvAM2B7iR795DpH8KQVItI+ZEVr6EsRzcxJyrQQJ6gg4oNujLJ2gXdxVBlFH074asw/I/jMNKgA0bNjQigKuHVZME/hSPGycQCDCaL210YCKnVq1a9SVcY1if4Yt1cDnAOn4Dc/8CMuDFovuQ0zMukzKTnoGyhFx5q7kbpKkvKChoEQ3zRFgJAGY+wCDrYdVNbrd7BIMXt0UDCYCyB7t+un2s+bUrV66s5j11lZQvwWcM4Qn+s2bNGi4HxyCbNsiJ/1eAl7+fMRpD+f3wAo0Isn8wm82dRtO8EFYCEHBrt20221GkKv9GUDiAST2FsjkBKn4Qk2rHJM5j+xQsrlHN8meCnuDixYvXecUQMvsExnMBMqM3GIbM6BHoAsZR7EtPT/8esq3Ny8trhhyDBw1zRNgJgGCue8mSJWeQxx/EvhrKv4HqHrgwvqZ1For/K9zenzs6Ov4C5V9TWfkSFRUVXniAay6Xaz8C4T9A0QdAhH9Adu1QdA/2VyHLQxaL5VN4gfP79+/vMg6dN+aWp/0MVFdXp1RWVuZPTEyUIWLdgAm4wPJvUX8dk434t3lOnz79a6Rfn8CyXoZQQxGfY7va2dn5+7feeqtpuioywPiSz549m75t27ZNXV1d5XD3JofDcQuK/+7jjz9+iC6+jz76KOTdxbliwQgggUGn8eNMWLOmYPlest1oiijihQASfGEGMkvDMroIy+pkY2OjN5yKl1hwAsQK4o0AkULYYwCN+IImgOLQBFAcmgCKQxNAcWgCKA5NAMWhCaA4NAEUhyaA4tAEUByaAIpDE0BxaAIoDk0AxaEJoDg0ARSHJoDi0ARQHJoAikMTQHFoAigOTQDFoQmgODQBFIcmgOLQBFAcmgCKQxNAcWgCKA5NAMWhCaA4NAEUhyaA4tAEUByaAIpDE0BxaAIoDk0AxaEJoDg0ARSHJoDi0ARQHJoAikMTQHFoAigOTQDFoQmgODQBFIcmgOLQBFAcyhFgKuBLpnIv62UdN1WgDAGgVK/P5+NHLIV2pbIDy5IM2E9NTk6Oe73esH+lK9agDAHS09OHsN0GAfjRZSqYn7r1WzzL0x/qTPKlpKQMLF269A76j7EikaEMAYqKip7k5uZegBdwQtE+Kj3w49aSDLD6SWxtDofja7vdPmAcnrBQhgDr168fbm1tvQT3/iMUz0+v+j9uDZ/PLvxg81BqaurDtLS0Hy9evHhly5Ytw2xIZCgVBPK7xvAEh6Hkv/FDzG63uxvWPgiTH/B4PI9Q9x3I8ff8/Pxam83Wx1jAODRhocyXQyX4SdY333xz2erVq3/jdDq3wAnYWQ9lP37xxRd/aGpqutzZ2Tm4a9cuegRNgEQFiZCXl5cyMTEhvKDL5aKy+WHmqHzbWENDQ0NDQ0NDQyNCSEr6L2/pkdEk0sbTAAAAAElFTkSuQmCC) center/contain no-repeat}.gui-dark .gui-header .gui-header-cell .gui-header-menu .gui-sort-desc{background:url(data:image/png;base64,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) center/contain no-repeat}.gui-dark .gui-structure-info-panel p{color:#ccc}",'.gui-light .gui-header,.gui-light.gui-structure{background:#fff;color:#333;font-family:Roboto,"Helvetica Neue",sans-serif}.gui-light.gui-structure-border{border-color:#ccc transparent}.gui-light .gui-structure-header .gui-header{color:#333;font-weight:700}.gui-light .gui-structure-header .gui-header .gui-header-cell{border-right:1px solid transparent}.gui-light .gui-structure-header .gui-header .gui-header-cell:hover,.gui-light gui-structure-container .gui-structure-container .gui-content .gui-row:hover{background:#f0f0f0}.gui-light gui-structure-container .gui-structure-container .gui-content .gui-row.selected{background:#7cb9f652}.gui-light.gui-rows-even .gui-row.even,.gui-light.gui-rows-odd .gui-row.odd{background:#f7f7f7}.gui-light.gui-vertical-grid gui-structure-container .gui-row .gui-cell{border-right:none}']}]}],n.ctorParameters=function(){return[{type:rt},{type:Ze},{type:pt},{type:Vr},{type:mr},{type:Wr},{type:Nn},{type:tn},{type:qe},{type:Kr},{type:cr},{type:Dr},{type:Sr},{type:Pr},{type:Or},{type:wr},{type:Jr},{type:e.ElementRef},{type:e.ChangeDetectorRef},{type:e.Renderer2},{type:W},{type:pr},{type:$e},{type:On},{type:Er}]},n}(Hr);var $r=function(t){function n(e,n,r,o,a){var s=t.call(this)||this;return s.changeDetectorRef=e,s.structureCommandService=n,s.compositionReadModelService=r,s.structureColumnMenuConfigArchive=o,s.column=a,s.status=Gt,s.placement=i.Placement.Right,s}return g(n,t),n.prototype.ngOnInit=function(){var t=this;this.sortStatus=this.column.getSortStatus(),this.compositionReadModelService.onSortOrder(this.column.getFieldId()).pipe(this.takeUntil()).subscribe((function(e){t.sortStatus=e,t.changeDetectorRef.detectChanges()})),this.structureColumnMenuConfigArchive.onValue().pipe(this.takeUntil()).subscribe((function(e){t.config=e,t.changeDetectorRef.detectChanges()}))},n.prototype.isEnabled=function(){return this.config&&this.config.isEnabled()},n.prototype.toggleSort=function(){this.structureCommandService.toggleSort(this.column.getFieldId())},n.prototype.isAscSort=function(){return this.sortStatus===Gt.ASC},n.prototype.isDescSort=function(){return this.sortStatus===Gt.DESC},n.prototype.isNoneSort=function(){return this.sortStatus===Gt.NONE},n.prototype.setSortOrder=function(t){this.structureCommandService.setSortOrder(this.column.getFieldId(),t)},n.decorators=[{type:e.Component,args:[{template:'\n\t\t<div *ngIf="isEnabled()"\n\t\t\t class="gui-header-menu-tab">\n\n\t\t\t<gui-tab [menu]="config.getMenus()" [active]="config.getActiveMenu()">\n\n\t\t\t\t<ng-container *ngIf="config.isMainEnabled()">\n\n\t\t\t\t\t<gui-tab-item class="gui-tab-item-dropdown" [tab]="config.getMainMenu()">\n\t\t\t\t\t\t<div >\n\t\t\t\t\t\t\t<gui-dropdown [placement]="placement"\n\t\t\t\t\t\t\t\t\t\t  [dropdownText]="\'Column Sort\'"\n\t\t\t\t\t\t\t\t\t\t  [width]="225"\n\t\t\t\t\t\t\t\t\t\t  [showOnHover]="true"\n\t\t\t\t\t\t\t\t\t\t  class="gui-header-menu-dropdown">\n\n\t\t\t\t\t\t\t\t<gui-dropdown-item (click)="setSortOrder(status.ASC)"\n\t\t\t\t\t\t\t\t\t\t\t\t   [class.gui-header-text-bold]="isAscSort()">\n\t\t\t\t\t\t\t\t\tAscending\n\t\t\t\t\t\t\t\t</gui-dropdown-item>\n\n\t\t\t\t\t\t\t\t<gui-dropdown-item (click)="setSortOrder(status.DESC)"\n\t\t\t\t\t\t\t\t\t\t\t\t   [class.gui-header-text-bold]="isDescSort()">\n\t\t\t\t\t\t\t\t\tDescending\n\t\t\t\t\t\t\t\t</gui-dropdown-item>\n\n\t\t\t\t\t\t\t\t<gui-dropdown-item (click)="setSortOrder(status.NONE)"\n\t\t\t\t\t\t\t\t\t\t\t\t   [class.gui-header-text-bold]="isNoneSort()">\n\t\t\t\t\t\t\t\t\tTurned off\n\t\t\t\t\t\t\t\t</gui-dropdown-item>\n\n\t\t\t\t\t\t\t</gui-dropdown>\n\t\t\t\t\t\t</div>\n\x3c!--\t\t\t\t\t\t<div class="gui-header-menu-item">Autosize This Column</div>--\x3e\n\x3c!--\t\t\t\t\t\t<div class="gui-header-menu-item">Autosize All Column</div>--\x3e\n\x3c!--\t\t\t\t\t\t<div class="gui-header-menu-item">Reset Columns</div>--\x3e\n\x3c!--\t\t\t\t\t\t<hr>--\x3e\n\x3c!--\t\t\t\t\t\t<div class="gui-header-menu-item">GenericUI is Great</div>--\x3e\n\t\t\t\t\t</gui-tab-item>\n\n\t\t\t\t</ng-container>\n\n\t\t\t\t<ng-container *ngIf="config.isFilter()">\n\t\t\t\t\t\n\t\t\t\t\t<gui-tab-item [tab]="config.getFilterMenu()">\n\t\t\t\t\t\t<div class="gui-header-menu-item">{{config.getFilterMenu()}}</div>\n\t\t\t\t\t</gui-tab-item>\n\t\t\t\t\t\n\t\t\t\t</ng-container>\n\n\t\t\t\t<ng-container *ngIf="config.isColumns()">\n\t\t\t\t\t\n\t\t\t\t\t<gui-tab-item [tab]="config.getColumnMenu()">\n\t\t\t\t\t\t<div class="gui-header-menu-item">{{config.getColumnMenu()}}</div>\n\t\t\t\t\t</gui-tab-item>\n\t\t\t\t\t\n\t\t\t\t</ng-container>\n\n\t\t\t</gui-tab>\n\t\t</div>\n\t'}]}],n.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:cr},{type:$e},{type:Jr},{type:ce,decorators:[{type:e.Inject,args:["column"]}]}]},n.propDecorators={headerSortMenu:[{type:e.ViewChild,args:["headerSortMenu",{static:!1}]}]},n}(tt);var ti=function(){function t(t,e){this.injector=t,this.inlineDialogService=e}return t.prototype.open=function(t,n){var r=e.Injector.create({providers:[{provide:"column",useValue:n}],parent:this.injector});this.inlineDialogService.open(t,$r,r,i.InlineDialogPlacement.Top,-8)},t.prototype.close=function(){this.inlineDialogService.close()},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.Injector},{type:i.FabricInlineDialogService}]},t}();var ei=function(){function t(t,e,n){this.elementRef=t,this.injector=e,this.structureCommandService=n}return t.prototype.toggleSort=function(t){this.structureCommandService.toggleSort(t.getFieldId())},t.prototype.isSortAsc=function(t){return t.getSortStatus()===Gt.ASC},t.prototype.isSortDesc=function(t){return t.getSortStatus()===Gt.DESC},t.decorators=[{type:e.Component,args:[{selector:"gui-structure-header-columns",template:'<div *ngFor="let column of columns"\n\t [style.width.px]="column.width"\n\t (click)="toggleSort(column)"\n\t class="gui-header-cell">\n\n\t<span>\n\t\t<ng-container\n\t\t\t*ngTemplateOutlet="column.viewTemplate;\n\t\t\t\t\t\t\t\t   context: column.context">\n\t\t</ng-container>\n\t</span>\n\n\t<div class="gui-header-menu">\n\n\t\t<gui-structure-column-config-trigger\n\t\t\t[column]="column">\n\t\t</gui-structure-column-config-trigger>\n\n\t\t<div [ngClass]="{\'gui-sort-asc\': isSortAsc(column), \'gui-sort-desc\':  isSortDesc(column)}"\n\t\t\t class="gui-sort">\n\t\t</div>\n\t</div>\n</div>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None,providers:[ti]}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Injector},{type:cr}]},t.propDecorators={columns:[{type:e.Input}]},t}();var ni=function(){function t(){this.enabled=new Map,this.enabled$=new a.ReplaySubject}return t.prototype.setEnabled=function(t,e){this.enabled.set(e.toString(),t),this.enabled$.next(this.enabled)},t.prototype.selectFilterEnabled=function(t){return this.enabled$.asObservable().pipe(s.map((function(e){return e.get(t.toString())})),s.distinctUntilChanged())},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[]},t}();var ri=function(){function t(){this.enabled=new Map,this.enabled$=new a.ReplaySubject}return t.prototype.setEnabled=function(t,e){this.enabled.set(e.toString(),t),this.enabled$.next(this.enabled)},t.prototype.selectQuickFilterEnabled=function(t){return this.enabled$.asObservable().pipe(s.map((function(e){return e.get(t.toString())})),s.distinctUntilChanged())},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[]},t}();var ii=function(){function t(t,e){this.structureFilterRepository=t,this.structureQuickFilterRepository=e}return t.prototype.onFilteringEnabled=function(t){return this.structureFilterRepository.selectFilterEnabled(t)},t.prototype.onQuickFiltersEnabled=function(t){return this.structureQuickFilterRepository.selectQuickFilterEnabled(t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:ni},{type:ri}]},t}();var oi=function(t){function n(e,n,r,i,o,a){var s=t.call(this)||this;return s.changeDetectorRef=e,s.renderer=n,s.eventBus=r,s.structureId=i,s.structureFilterReadModelRepository=o,s.compositionQueryService=a,s.headerColumns=[],s.filterRowEnabled=!1,s}return g(n,t),n.prototype.ngOnInit=function(){var t=this;this.compositionQueryService.onHeaderColumns().pipe(this.takeUntil()).subscribe((function(e){t.headerColumns=e,t.changeDetectorRef.detectChanges()})),this.compositionQueryService.onContainerWidth().pipe(this.takeUntil()).subscribe((function(e){t.renderer.setStyle(t.containerRef.nativeElement,"width",e+"px")})),this.structureFilterReadModelRepository.onFilteringEnabled(this.structureId).pipe(this.takeUntil()).subscribe((function(e){t.filterRowEnabled=e,t.changeDetectorRef.detectChanges()}))},n.decorators=[{type:e.Component,args:[{selector:"gui-structure-header",template:'<gui-structure-header-columns\n\t[columns]="headerColumns"\n\tclass="gui-header">\n</gui-structure-header-columns>\n\n<gui-structure-header-filters\n\t*ngIf="filterRowEnabled"\n\t[columns]="headerColumns"\n\tclass="gui-header">\n</gui-structure-header-filters>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:e.Renderer2},{type:o.DomainEventBus},{type:rt},{type:ii},{type:$e}]},n.propDecorators={containerRef:[{type:e.ViewChild,args:[ei,{read:e.ElementRef,static:!0}]}]},n}(tt);var ai=function(){function t(t,n,r,i){var o;this.structureFilterCommandService=t,this.formBuilder=n,this.cd=r,this.structureId=i,this.closed=new e.EventEmitter,this.filterFieldName="phrase",this.filterMode=!1,this.filterForm=this.formBuilder.group(((o={})[this.filterFieldName]=[""],o))}return t.prototype.ngOnInit=function(){var t=this;this.filterForm.valueChanges.subscribe((function(e){t.filter(e[t.filterFieldName])}))},t.prototype.filter=function(t){null==t&&(t=""),this.structureFilterCommandService.addFilter(this.columns[0].getFieldId(),"1",t,this.structureId)},t.prototype.clearFilters=function(){this.filterForm.reset()},t.prototype.turnOnFilterMode=function(){this.filterMode=!0,this.cd.detectChanges()},t.prototype.turnOffFilterMode=function(){this.filterMode=!1,this.cd.detectChanges()},t.decorators=[{type:e.Component,args:[{selector:"gui-structure-header-filters",template:'\n\t\t\n\t\t<ng-container *ngIf="!filterMode">\n\n\t\t\t<div *ngFor="let cell of columns"\n\t\t\t\t [style.width.px]="cell.width"\n\t\t\t\t class="gui-header-cell">\n\n\t\t\t\t\x3c!--\t\t\t\t<gui-structure-header-filter [column]="cell">--\x3e\n\t\t\t\t\x3c!--\t\t\t\t</gui-structure-header-filter>--\x3e\n\n\t\t\t\t<button (click)="turnOnFilterMode()">Add Filter</button>\n\n\t\t\t</div>\n\n\t\t</ng-container>\n\n\t\t<ng-container *ngIf="filterMode">\n\n\t\t\t<gui-select [options]="[\'has value\', \'is the same as\', \'starts with\', \'ends with\']" [selected]="\'has value\'" >\n\n\t\t\t</gui-select>\n\n\t\t\t<form [formGroup]="filterForm">\n\t\t\t\t<input type="text" [formControlName]="filterFieldName" gui-input/>\n\t\t\t</form>\n\n\t\t\t<button gui-button (click)="clearFilters()">Clear All</button>\n\t\t\t<button gui-button (click)="turnOffFilterMode()">Close</button>\n\n\t\t</ng-container>\n\n\t',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],t.ctorParameters=function(){return[{type:Jn},{type:r.FormBuilder},{type:e.ChangeDetectorRef},{type:rt}]},t.propDecorators={columns:[{type:e.Input}],closed:[{type:e.Output}]},t}();var si=function(t){function n(e,n){var r=t.call(this)||this;return r.structureFilterCommandService=e,r.structureId=n,r.sub=new Tt,r.editContext={changes:r.sub},r}return g(n,t),n.prototype.ngOnInit=function(){var t=this;this.sub.select().subscribe((function(e){return t.filter(e)}))},n.prototype.filter=function(t){this.structureFilterCommandService.addFilter(this.column.getFieldId(),"1",t,this.structureId)},n.decorators=[{type:e.Component,args:[{selector:"gui-structure-header-filter",template:'\n\t\t\n\x3c!--\t\t<ng-container--\x3e\n\x3c!--\t\t\t\t*ngTemplateOutlet="column.editTemplate; context: editContext">--\x3e\n\x3c!--\t\t</ng-container>--\x3e\n\t\t\n\t\t<button gui-button [primary]="true" >Add Filter</button>\n\n\t',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[{type:Jn},{type:rt}]},n.propDecorators={column:[{type:e.Input}]},n}(tt);var ui=function(t){function r(e,n,r,i,o,a,s,u){var c=t.call(this)||this;return c.platformId=e,c.renderer=n,c.elementRef=r,c.changeDetectorRef=i,c.formationCommandService=o,c.structureCellEditArchive=a,c.structureEditModeArchive=s,c.formationQueryService=u,c.editMode=!1,c.cellEditing=!1,c}return g(r,t),r.prototype.ngOnInit=function(){var t=this;this.formationQueryService.onSelectedRows().pipe(this.takeUntil()).subscribe((function(e){t.clearSelectedRows(),e.getIds().forEach((function(e){var n="gui"+e.replace(/-/g,""),r=t.elementRef.nativeElement.querySelector("#"+n);r&&t.renderer.addClass(r,"selected")}))})),this.structureEditModeArchive.onValue().pipe(this.takeUntil()).subscribe((function(e){t.editMode=e,t.changeDetectorRef.detectChanges()})),this.structureCellEditArchive.onValue().pipe(this.takeUntil()).subscribe((function(e){t.cellEditing=e,t.changeDetectorRef.detectChanges()}))},r.prototype.trackByFn=function(){return 0},r.prototype.translateY=function(t){return"translateY("+30*t+"px)"},r.prototype.toggleSelectedRow=function(t){this.formationCommandService.toggleSelectedRow(t.id)},r.prototype.clearSelectedRows=function(){var t=this,e=this.elementRef.nativeElement.querySelectorAll(".selected");n.isPlatformBrowser(this.platformId)&&e.forEach((function(e){t.renderer.removeClass(e,"selected")}))},r.decorators=[{type:e.Component,args:[{selector:"gui-structure-content",template:'<div class="gui-content">\n\n\t<gui-structure-row *ngFor="let entity of source; let index = index; trackBy: trackByFn"\n\t\t\t\t\t   [entity]="entity"\n\t\t\t\t\t   [columns]="columns"\n\t\t\t\t\t   [editMode]="editMode"\n\t\t\t\t\t   [cellEditing]="cellEditing"\n\t\t\t\t\t   [ngStyle]="{\'transform\': translateY(index)}"\n\t\t\t\t\t   [ngClass]="{\'even\': entity.isEven(), \'odd\': entity.isOdd()}"\n\t\t\t\t\t   [id]="entity.getUiId()"\n\t\t\t\t\t   (click)="toggleSelectedRow(entity)"\n\t\t\t\t\t   class="gui-row">\n\t</gui-structure-row>\n\n</div>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],r.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[e.PLATFORM_ID]}]},{type:e.Renderer2},{type:e.ElementRef},{type:e.ChangeDetectorRef},{type:Vn},{type:Sr},{type:Dr},{type:Wn}]},r.propDecorators={source:[{type:e.Input}],columns:[{type:e.Input}]},r}(tt);var ci=function(){function t(t,e,n,r){void 0===r&&(r=0),this.version=0,this.data=t,this.position=e,this.version=r,this.id=n||o.RandomStringGenerator.generate()}return t.prototype.getData=function(){return this.data},t.prototype.getUiId=function(){return"gui"+this.id.replace(/-/g,"")},t.prototype.getId=function(){return this.id},t.prototype.getVersion=function(){return this.version},t.prototype.getPosition=function(){return this.position},t.prototype.isEven=function(){return this.position%2==0},t.prototype.isOdd=function(){return this.position%2==1},t.prototype.equals=function(t){return this.id===t.id&&this.getVersion()===t.getVersion()},t.prototype.equalsById=function(t){return this.id===t},t.ctorParameters=function(){return[{type:void 0},{type:Number},{type:String},{type:Number}]},t=l([o.Entity,d("design:paramtypes",[Object,Number,String,Number])],t)}();var gi=function(){function t(){}return t.prototype.trackByFn=function(){return 0},t.decorators=[{type:e.Component,args:[{selector:"gui-structure-row",template:'<gui-structure-cell *ngFor="let column of columns; trackBy: trackByFn"\n\t\t\t\t\t[entity]="entity"\n\t\t\t\t\t[cell]="column"\n\t\t\t\t\t[cellEditingEnabled]="cellEditing"\n\t\t\t\t\t[editMode]="editMode"\n\t\t\t\t\t[style.width.px]="column.width"\n\t\t\t\t\tclass="gui-cell">\n</gui-structure-cell>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],t.propDecorators={entity:[{type:e.Input}],columns:[{type:e.Input}],editMode:[{type:e.Input}],cellEditing:[{type:e.Input}]},t}();var pi=function(t){function n(e,n,r,i){var o=t.call(this)||this;return o.changeDetectorRef=e,o.structureCellEditArchive=n,o.structureCellEditStore=r,o.sourceCommandService=i,o.inEditMode=!1,o}return g(n,t),n.prototype.ngOnChanges=function(t){void 0!==t.editMode&&(this.editMode?(this.cellEditingEnabled=!0,this.enterEditMode(!1)):this.editMode||this.exitEditMode()),this.editMode||this.exitEditMode()},n.prototype.enterEditMode=function(t){void 0===t&&(t=!0),this.cellEditingEnabled&&(this.inEditMode=!0,this.valueChanges$=new Tt,this.status$=new Tt,this.editContext={status:this.status$,valueChanges:this.valueChanges$,value:this.cell.accessor(this.entity),focus:t},this.observeFieldStatus(),this.observeValueChanges(),this.publishEditEnter(),t?this.changeDetectorRef.detectChanges():this.changeDetectorRef.markForCheck())},n.prototype.exitEditMode=function(){this.inEditMode=!1,this.changeDetectorRef.detectChanges()},n.prototype.submitChangesAndExit=function(){var t=this.entity.getId(),e=this.actualValue,n=this.cell.columnFieldId;this.sourceCommandService.editItem(new fr(t,n,e)),this.exitEditMode()},n.prototype.observeFieldStatus=function(){var t=this;this.status$.select().pipe(this.takeUntil()).subscribe((function(e){switch(e){case Mt.SUBMIT:t.submitChangesAndExit(),t.publishEditSubmit();break;case Mt.CANCEL:t.exitEditMode(),t.publishEditCancel()}}))},n.prototype.observeValueChanges=function(){var t=this;this.valueChanges$.select().pipe(this.takeUntil()).subscribe((function(e){t.actualValue=e}))},n.prototype.publishEditState=function(t){this.structureCellEditStore.next(t)},n.prototype.publishEditEnter=function(){this.publishEditState(Br.ENTER)},n.prototype.publishEditCancel=function(){this.publishEditState(Br.CANCEL)},n.prototype.publishEditSubmit=function(){this.publishEditState(Br.SUBMIT)},n.decorators=[{type:e.Component,args:[{selector:"gui-structure-cell",template:'\n\n\t\t<span *ngIf="!inEditMode"\n\t\t\t  (click)="enterEditMode()">\n\t\t\t<ng-container\n\t\t\t\t\t*ngTemplateOutlet="cell.template;\n\t\t\t\t\tcontext: { element: cell.accessor(entity) }">\n\t\t\t</ng-container>\n\t\t</span>\n\t\t\n\t\t<span *ngIf="inEditMode" class="gui-cell-edit-mode">\n\t\t\t<ng-container\n\t\t\t\t\t*ngTemplateOutlet="cell.editTemplate;\n\t\t\t\t\tcontext: editContext">\n\t\t\t</ng-container>\n\t\t</span>\n\n\t',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:Sr},{type:wr},{type:mr}]},n.propDecorators={entity:[{type:e.Input}],cell:[{type:e.Input}],editMode:[{type:e.Input}],cellEditingEnabled:[{type:e.Input}]},n}(tt);var li=function(t){function n(e,n,r,i,o,s,u,c,g,p,l,d,h,f){var m=t.call(this)||this;return m.elementRef=e,m.renderer=n,m.changeDetectorRef=r,m.ngZone=i,m.structureId=o,m.structureCommandService=s,m.structureQueryService=u,m.sourceQueryService=c,m.schemaQueryService=g,m.compositionCommandService=p,m.compositionQueryService=l,m.formationQueryService=d,m.resizeDetector=h,m.structureParent=f,m.columns=[],m.source=[],m.autoResizeWidthEnabled=!1,m.scrollObservation$=new a.Subject,m}return g(n,t),n.prototype.ngOnInit=function(){var t=this;this.sourceQueryService.onEntities().pipe(this.takeUntil()).subscribe((function(e){t.source=e,t.setHeight(30*e.length),t.changeDetectorRef.detectChanges()})),this.compositionQueryService.onTemplateColumns().pipe(this.takeUntil()).subscribe((function(e){t.columns=e,t.changeDetectorRef.detectChanges()})),this.compositionQueryService.onResizeWidth().pipe(this.takeUntil()).subscribe((function(e){t.autoResizeWidthEnabled=e})),a.combineLatest(this.sourceQueryService.onEntities(),this.schemaQueryService.onContainerHeight()).pipe(this.takeUntil()).subscribe((function(e){var n=e[0],r=e[1],i=30*n.length;i>r?t.setHeight(r):t.setHeight(i),t.changeDetectorRef.detectChanges()}))},n.prototype.ngAfterViewInit=function(){var t=this;this.structureParent&&this.resizeDetector.observe(this.structureParent.getElementRef().nativeElement).pipe(s.filter((function(){return t.autoResizeWidthEnabled})),s.map((function(t){return t.offsetWidth})),s.distinctUntilChanged(),this.takeUntil()).subscribe((function(e){t.recalculateContainer(e)})),this.compositionQueryService.onContainerWidth().pipe(this.takeUntil()).subscribe((function(e){t.renderer.setStyle(t.containerRef.nativeElement,"width",e+"px")})),this.structureQueryService.onVerticalScrollEnabled().pipe(this.takeUntil()).subscribe((function(e){e?t.enableScrollObservation():t.disableScrollObservation()})),this.structureQueryService.onStructure().pipe(s.filter((function(t){return t.isVerticalScrollEnabled()})),this.takeUntil()).subscribe((function(e){var n=e.getContainerHeight(),r=e.getTopMargin();t.renderer.setStyle(t.containerRef.nativeElement,"padding-top",r+"px"),t.renderer.setStyle(t.containerRef.nativeElement,"height",n+"px")}))},n.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this.resizeDetector.destroy(this.elementRef.nativeElement)},n.prototype.setHeight=function(t){this.height=t,this.renderer.setStyle(this.elementRef.nativeElement,"height",this.height+"px")},n.prototype.recalculateContainer=function(t){this.autoResizeWidthEnabled&&this.compositionCommandService.setContainerWidth(t)},n.prototype.enableScrollObservation=function(){var t=this;this.ngZone.runOutsideAngular((function(){a.fromEvent(t.elementRef.nativeElement,"scroll").pipe(s.takeUntil(t.scrollObservation$),t.takeUntil()).subscribe((function(e){var n=e.target.scrollTop;t.structureCommandService.setScrollPosition(n)}))}))},n.prototype.disableScrollObservation=function(){this.scrollObservation$.next(),this.scrollObservation$.complete()},n.decorators=[{type:e.Component,args:[{selector:"gui-structure-container",template:'<div #container\n\t class="gui-structure-container">\n\n\t<gui-structure-content [source]="source"\n\t\t\t\t\t\t   [columns]="columns">\n\t</gui-structure-content>\n\n</div>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer2},{type:e.ChangeDetectorRef},{type:e.NgZone},{type:rt},{type:cr},{type:pr},{type:ht},{type:On},{type:tn},{type:$e},{type:Wn},{type:i.ResizeDetector},{type:void 0,decorators:[{type:e.Optional},{type:e.Inject,args:[X]}]}]},n.propDecorators={containerRef:[{type:e.ViewChild,args:["container",{static:!1}]}]},n}(tt);var di=function(){function t(){}return t.decorators=[{type:e.Component,args:[{selector:"gui-structure-quick-fitlers",template:"\n\t\n\t\tQuickFilters\n\t\t\n\t"}]}],t}(),hi=function(){function t(){this.enabled=new Map,this.enabled$=new a.ReplaySubject}return t.prototype.setEnabled=function(t,e){this.enabled.set(e.toString(),t),this.enabled$.next(this.enabled)},t.prototype.selectSearchingEnabled=function(t){return this.enabled$.asObservable().pipe(s.map((function(e){return e.get(t.toString())})),s.distinctUntilChanged())},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[]},t}();var fi=function(){function t(t){this.structureSearchingRepository=t}return t.prototype.onSearchEnabled=function(t){return this.structureSearchingRepository.selectSearchingEnabled(t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:hi}]},t}();var mi=new e.InjectionToken("Structure - - css className"),yi=function(t){function n(e,n,r,i,o,a,s,u,c,g){var p=t.call(this)||this;return p.changeDetectorRef=e,p.structureDefinition=n,p.structureId=r,p.structureQueryService=i,p.pagingQueryService=o,p.structureInfoPanelEnabledArchive=a,p.structureAggregationArchive=s,p.structureFilterReadModelRepository=u,p.structureSearchReadModelRepository=c,p.className=g,p.searchEnabled=!1,p.topAggregationPanelEnabled=!1,p.bottomAggregationPanelEnabled=!1,p.quickFiltersEnabled=!1,p.infoPanelEnabled=!1,p.headerCssClass="gui-"+p.className+"-header",p.contentCssClass="gui-"+p.className+"-content",p}return g(n,t),n.prototype.ngOnInit=function(){var t=this;this.structureQueryService.onStructure().pipe(this.takeUntil()).subscribe((function(e){t.structure=e,t.changeDetectorRef.detectChanges()})),this.pagingQueryService.onPaging().pipe(this.takeUntil()).subscribe((function(e){t.pagingReadModel=e,t.changeDetectorRef.detectChanges()})),this.structureSearchReadModelRepository.onSearchEnabled(this.structureId).pipe(this.takeUntil()).subscribe((function(e){t.searchEnabled=e,t.changeDetectorRef.detectChanges()})),this.structureFilterReadModelRepository.onQuickFiltersEnabled(this.structureId).pipe(this.takeUntil()).subscribe((function(e){t.quickFiltersEnabled=e,t.changeDetectorRef.detectChanges()})),this.structureAggregationArchive.onValue().pipe(this.takeUntil()).subscribe((function(e){t.topAggregationPanelEnabled=e.itTopEnabled(),t.bottomAggregationPanelEnabled=e.itBottomEnabled(),t.changeDetectorRef.detectChanges()})),this.structureInfoPanelEnabledArchive.onValue().pipe(this.takeUntil()).subscribe((function(e){t.infoPanelEnabled=e,t.changeDetectorRef.detectChanges()}))},n.prototype.getHeaderTopClasses=function(){return this.headerCssClass+" gui-header-top"},n.prototype.getHeaderBottomClasses=function(){return this.headerCssClass+" gui-header-bottom"},n.prototype.isColumnHeaderTopEnabled=function(){return this.structureDefinition.isHeaderEnabled()&&this.structure&&this.structure.isTopHeaderEnabled()},n.prototype.isColumnHeaderBottomEnabled=function(){return this.structureDefinition.isHeaderEnabled()&&this.structure&&this.structure.isBottomHeaderEnabled()},n.prototype.isPagingTopEnabled=function(){return this.structureDefinition.getTopPaging().isEnabled()&&this.pagingReadModel&&this.pagingReadModel.isPagerTop()},n.prototype.isPagingBottomEnabled=function(){return this.structureDefinition.getBottomPaging().isEnabled()&&this.pagingReadModel&&this.pagingReadModel.isPagerBottom()},n.prototype.isSourceEmpty=function(){return this.structure&&0===this.structure.getEntities().length},n.decorators=[{type:e.Component,args:[{selector:"gui-structure-blueprint",template:'\x3c!---------- TOP ----------\x3e\n<gui-structure-top-panel *ngIf="searchEnabled"></gui-structure-top-panel>\n\n<gui-structure-quick-fitlers *ngIf="quickFiltersEnabled">\n</gui-structure-quick-fitlers>\n\n<gui-structure-paging *ngIf="isPagingTopEnabled()"\n\t\t\t\t\t  class="gui-structure-paging-top">\n</gui-structure-paging>\n\n<gui-structure-aggregation-panel [enabled]="topAggregationPanelEnabled"\n\t\t\t\t\t\t\t\t class="gui-structure-aggregation-panel-top">\n</gui-structure-aggregation-panel>\n\n<gui-structure-header *ngIf="isColumnHeaderTopEnabled()"\n\t\t\t\t\t  [ngClass]="getHeaderTopClasses()">\n</gui-structure-header>\n\n\n\x3c!---------- MAIN ----------\x3e\n<gui-structure-container [ngClass]="contentCssClass">\n</gui-structure-container>\n\n<gui-structure-empty-source *ngIf="isSourceEmpty()">\n</gui-structure-empty-source>\n\n\n\x3c!---------- BOTTOM ----------\x3e\n<gui-structure-header *ngIf="isColumnHeaderBottomEnabled()"\n\t\t\t\t\t  [ngClass]="getHeaderBottomClasses()">\n</gui-structure-header>\n\n<gui-structure-aggregation-panel [enabled]="bottomAggregationPanelEnabled"\n\t\t\t\t\t\t\t\t class="gui-structure-aggregation-panel-bottom">\n</gui-structure-aggregation-panel>\n\n<gui-structure-paging *ngIf="isPagingBottomEnabled()"\n\t\t\t\t\t  class="gui-structure-paging-bottom">\n</gui-structure-paging>\n\n<gui-structure-info-panel *ngIf="infoPanelEnabled"></gui-structure-info-panel>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:W},{type:rt},{type:pr},{type:ot},{type:Pr},{type:Tr},{type:ii},{type:fi},{type:String,decorators:[{type:e.Inject,args:[mi]}]}]},n}(tt);var vi=function(t){function e(e,n){var r=t.call(this,e,"StructureAggregationsChangedEvent")||this;return r.values=n,r}return g(e,t),e.prototype.getAggregations=function(){return this.values},e}(o.DomainEvent);var bi=function(){function t(t){this.domainEventBus=t}return t.prototype.onAggregationsChanged=function(t){return this.domainEventBus.pipe(s.filter((function(t){return t instanceof vi})),s.filter((function(e){return e.aggregateId.toString()===t.toString()})))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:o.DomainEventBus}]},t}();var Ci=function(t){function n(e,n,r,i,o){var a=t.call(this)||this;return a.changeDetectorRef=e,a.structureId=n,a.structureAggregationUiEventsRepository=r,a.sourceReadModelService=i,a.compositionQueryService=o,a.sourceEmpty=!1,a.structureAggregationUiEventsRepository.onAggregationsChanged(a.structureId).pipe(a.takeUntil()).subscribe((function(t){a.aggregations=t.getAggregations(),a.changeDetectorRef.detectChanges()})),a}return g(n,t),n.prototype.ngOnInit=function(){var t=this;this.sourceReadModelService.onEntitiesSize().pipe(this.takeUntil()).subscribe((function(e){t.sourceEmpty=0===e,t.changeDetectorRef.detectChanges()})),this.compositionQueryService.onHeaderColumns().pipe(this.takeUntil()).subscribe((function(e){t.headerColumns=e,t.changeDetectorRef.detectChanges()}))},n.prototype.isAggregateTypePresent=function(t){return null!=t},n.decorators=[{type:e.Component,args:[{selector:"gui-structure-aggregation-panel",template:'\n\n\t\t<ng-container *ngIf="enabled && aggregations && !sourceEmpty">\n\n\t\t\t<div *ngFor="let column of headerColumns"\n\t\t\t\t [style.width.px]="column.width"\n\t\t\t\t class="gui-header-cell gui-structure-aggregation-cell">\n\n\t\t\t\t<ng-container *ngIf="aggregations && !!aggregations.get(column.getFieldId().getId())">\n\n\t\t\t\t\t<div *ngIf="isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).count)" class="gui-structure-aggregation-value">\n\t\t\t\t\t\tCount: <span>{{ aggregations.get(column.getFieldId().getId()).count }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div *ngIf="isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).distinct)" class="gui-structure-aggregation-value">\n\t\t\t\t\t\tDistinct: <span>{{ aggregations.get(column.getFieldId().getId()).distinct }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div *ngIf=" isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).sum)" class="gui-structure-aggregation-value">\n\n\t\t\t\t\t\t<div><span class="gui-math-symbol">&sum;</span> Sum</div>\n\t\t\t\t\t\t<span>{{ aggregations.get(column.getFieldId().getId()).sum }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div *ngIf="isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).average)" class="gui-structure-aggregation-value">\n\n\t\t\t\t\t\t<div class="gui-mean"><span>_</span><span>X Average</span></div>\n\t\t\t\t\t\t<span>{{ aggregations.get(column.getFieldId().getId()).average }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div *ngIf=" isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).min)" class="gui-structure-aggregation-value">\n\n\t\t\t\t\t\t<div><span class="gui-math-symbol">&and;</span> Min</div>\n\t\t\t\t\t\t<span>{{ aggregations.get(column.getFieldId().getId()).min }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div *ngIf=" isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).max)" class="gui-structure-aggregation-value">\n\n\t\t\t\t\t\t<div><span class="gui-math-symbol">&or;</span> Max</div>\n\t\t\t\t\t\t<span>{{ aggregations.get(column.getFieldId().getId()).max }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div *ngIf="isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).median)" class="gui-structure-aggregation-value">\n\n\t\t\t\t\t\t<div class="gui-median"><span>~</span><span>X Median</span></div>\n\t\t\t\t\t\t<span>{{ aggregations.get(column.getFieldId().getId()).median }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div *ngIf="isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).truthy)" class="gui-structure-aggregation-value">\n\t\t\t\t\t\tTruthy: <span>{{ aggregations.get(column.getFieldId().getId()).truthy }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div *ngIf="isAggregateTypePresent(aggregations.get(column.getFieldId().getId()).falsy)" class="gui-structure-aggregation-value">\n\t\t\t\t\t\tFalsy: <span>{{ aggregations.get(column.getFieldId().getId()).falsy }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t</ng-container>\n\t\t\t</div>\n\n\t\t</ng-container>\n\n\t',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:rt},{type:bi},{type:ht},{type:$e}]},n.propDecorators={enabled:[{type:e.Input}]},n}(tt);var Ai=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return g(n,t),n.decorators=[{type:e.Injectable}],n}(o.InMemoryStore),Ei=function(t){function n(e,n){return t.call(this,e,n)||this}return g(n,t),n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ai},{type:o.AggregateStoreRegister}]},n}(o.InMemoryAggregateStore),Ii=function(){};var Si=function(t){function n(e){var n=t.call(this)||this;return n.inMemoryStructureAggregateStore=e,n}return g(n,t),n.prototype.getById=function(t){var e=this.inMemoryStructureAggregateStore.getById(t);return e.clearEvents(),e},n.prototype.save=function(t){this.inMemoryStructureAggregateStore.save(t)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ei}]},n}(Ii);var wi=function(){function t(t){this.rowIds=t}return t.prototype.isRowSelected=function(t){return!!this.rowIds.find((function(e){return t.equalsById(e)}))},t.prototype.getIds=function(){return this.rowIds},t}();var Di=function(){function t(t){this.selectedRowsList=new wi(t)}return t.prototype.getSelectedRows=function(){return this.selectedRowsList},t}();var Pi=function(){function t(){}return t.prototype.convert=function(t){var e=t.getSelectedRows();return new Di(e)},t.decorators=[{type:e.Injectable}],t}(),Ri=function(){function t(t,e,n,r){this.verticalGrid=t,this.horizontalGrid=e,this.theme=n,this.rowColoring=r}return t.prototype.getRowColoring=function(){return this.rowColoring},t}();var Ti=function(){function t(t,e,n,r,i,o,a,s){this.width=t,this.height=e,this.containerHeight=n,this.verticalGridEnabled=r,this.horizontalGridEnabled=i,this.theme=o,this.columnHeader=a,this.rowColoring=s}return t.prototype.getRowColoring=function(){return this.rowColoring},t.prototype.getTheme=function(){return this.theme},t.prototype.getHeight=function(){return this.height},t.prototype.getContainerHeight=function(){return this.containerHeight},t.prototype.getWidth=function(){return this.width},t.prototype.isVerticalGridEnabled=function(){return this.verticalGridEnabled},t.prototype.isHorizontalGridEnabled=function(){return this.horizontalGridEnabled},t.prototype.getColumnHeader=function(){return this.columnHeader},t.prototype.getCssClasses=function(){return new Ri(this.isVerticalGridEnabled(),this.isHorizontalGridEnabled(),this.getTheme(),this.getRowColoring())},t}();var Mi=function(){function t(t,e){this.top=t,this.bottom=e}return t.prototype.isTopHeaderEnabled=function(){return this.top},t.prototype.isBottomHeaderEnabled=function(){return this.bottom},t}();var xi=function(){function t(){}return t.prototype.convert=function(t){var e=t.getColumnHeader();return new Ti(t.getWidth(),t.getHeight(),t.getContainerHeight(),t.isVerticalGridEnabled(),t.isHorizontalGridEnabled(),t.getTheme(),this.convertColumnHeader(e),t.getRowColoring())},t.prototype.convertColumnHeader=function(t){return new Mi(t.isHeaderOnTop(),t.isHeaderOnBottom())},t.decorators=[{type:e.Injectable}],t}(),Fi=function(){function t(){}return t.prototype.convert=function(t){return new mt(t.isEnabled(),t.getPage(),t.getPageSize(),t.getPageSizes(),t.isPagerTop(),t.isPagerBottom(),t.isNextPageDisabled(),t.isPrevPageDisabled(),t.calculateStart(),t.calculateEnd(),t.getSourceSize())},t.decorators=[{type:e.Injectable}],t}(),Oi=function(){function t(t){this.loading=t}return t.prototype.isLoading=function(){return this.loading},t}();var Ni=function(){function t(){}return t.prototype.convert=function(t){return new Oi(t.isLoading())},t.decorators=[{type:e.Injectable}],t}(),Bi=function(){function t(t,e,n,r){this.enabled=t,this.topMargin=e,this.containerHeight=n,this.viewportHeight=r}return t.prototype.isEnabled=function(){return this.enabled},t.prototype.getTopMargin=function(){return this.topMargin},t.prototype.getContainerHeight=function(){return this.containerHeight},t.prototype.getViewPortHeight=function(){return this.viewportHeight},t}();var Hi=function(){function t(){}return t.prototype.convert=function(t){var e=t.isEnabled(),n=t.getTopMargin(),r=t.calcFullHeight(),i=t.getViewPortHeight();return new Bi(e,n,r,i)},t.decorators=[{type:e.Injectable}],t}(),ki=function(t){function e(e,n,r,i,o,a,s){var u=t.call(this,e)||this;return u.formation=n,u.schema=r,u.paging=i,u.entities=o,u.source=a,u.verticalFormation=s,u}return g(e,t),e.prototype.getFormation=function(){return this.formation},e.prototype.getSchema=function(){return this.schema},e.prototype.getPaging=function(){return this.paging},e.prototype.getEntities=function(){return this.entities},e.prototype.getSource=function(){return this.source},e.prototype.getSelectedEntities=function(){var t=this.formation.getSelectedRows().getIds();return this.entities.filter((function(e){return t.some((function(t){return e.equalsById(t)}))}))},e.prototype.getTopMargin=function(){return this.verticalFormation.getTopMargin()},e.prototype.getContainerHeight=function(){return this.verticalFormation.getContainerHeight()},e.prototype.isLoaderVisible=function(){return this.getSchema().getHeight()>150&&this.getSource().isLoading()},e.prototype.isTopHeaderEnabled=function(){return this.schema.getColumnHeader().isTopHeaderEnabled()},e.prototype.isBottomHeaderEnabled=function(){return this.schema.getColumnHeader().isBottomHeaderEnabled()},e.prototype.isReadyToDisplay=function(){return this.entities.length>0},e.prototype.isVerticalScrollEnabled=function(){return this.verticalFormation.isEnabled()},e}(o.ReadModel);var Li=function(){function t(t,e,n,r,i){this.formationConverter=t,this.schemaConverter=e,this.pagingConverter=n,this.sourceConverter=r,this.verticalFormationConverter=i}return t.prototype.convert=function(t){var e=t.getFormation(),n=t.getSchema(),r=t.getPaging(),i=t.getEntities(),o=t.getSource(),a=t.getVerticalFormation();return new ki(t.getId(),this.formationConverter.convert(e),this.schemaConverter.convert(n),this.pagingConverter.convert(r),this.convertSource(i),this.sourceConverter.convert(o),this.verticalFormationConverter.convert(a))},t.prototype.convertSource=function(t){return t.map((function(t){return new ci(t.rawData,t.getPosition(),t.id,t.getVersion())}))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:Pi},{type:xi},{type:Fi},{type:Ni},{type:Hi}]},t}();var zi=function(t){function n(e,n){var r=t.call(this,e)||this;return r.inMemoryProjectStore=e,r.structureConverter=n,r}return g(n,t),n.prototype.toReadModel=function(t){return this.structureConverter.convert(t)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ai},{type:Li}]},n}(o.InMemoryReadModelStore);var ji=function(t){function e(e){return t.call(this,e,"StructureInitedEvent")||this}return g(e,t),e}(o.DomainEvent),Vi=function(t){function e(e){return t.call(this,e,"SetSourceLoadingEvent")||this}return g(e,t),e}(o.DomainEvent),Ui=function(t){function e(e){return t.call(this,e,"SchemaSetEvent")||this}return g(e,t),e}(o.DomainEvent),Qi=function(t){function e(e){return t.call(this,e,"SchemaThemeSetEvent")||this}return g(e,t),e}(o.DomainEvent),Wi=function(t){function e(e){return t.call(this,e,"SchemaHorizontalGridSetEvent")||this}return g(e,t),e}(o.DomainEvent),Gi=function(t){function e(e){return t.call(this,e,"SchemaVerticalGridSetEvent")||this}return g(e,t),e}(o.DomainEvent),Ki=function(t){function e(e){return t.call(this,e,"SchemaTopHeaderChangedEvent")||this}return g(e,t),e}(o.DomainEvent),Xi=function(t){function e(e){return t.call(this,e,"SchemaBottomHeaderChangedEvent")||this}return g(e,t),e}(o.DomainEvent),Ji=function(t){function e(e){return t.call(this,e,"RowColoringSetEvent")||this}return g(e,t),e}(o.DomainEvent),Yi=function(t){function e(e){return t.call(this,e,"PagingSetEvent")||this}return g(e,t),e}(o.DomainEvent),qi=function(t){function e(e){return t.call(this,e,"FormationSetEvent")||this}return g(e,t),e}(o.DomainEvent),Zi=function(t){function e(e){return t.call(this,e,"VerticalScrollEnabledSetEvent")||this}return g(e,t),e}(o.DomainEvent),_i=function(t){function e(e){return t.call(this,e,"ScrollPositionSetEvent")||this}return g(e,t),e}(o.DomainEvent),$i=function(t){function e(e,n){var r=t.call(this,e,"OriginSetEvent")||this;return r.origin=n,r}return g(e,t),e.prototype.getOrigin=function(){return this.origin},e}(o.DomainEvent);var to=function(t){function e(e){return t.call(this,e,"StructureFilterToggledEvent")||this}return g(e,t),e}(o.DomainEvent),eo=function(t){function e(e){return t.call(this,e,"StructureSearchPhraseSetDomainEvent")||this}return g(e,t),e}(o.DomainEvent),no=function(t){function n(e,n){var r=t.call(this)||this;return r.domainEventBus=e,r.inMemoryStructureQueryStore=n,r.structureIdToStructure=new Map,r.structure$=new a.ReplaySubject(1),r.unsubscribe$=new a.Subject,r.domainEventBus.ofEvent(ji,Vi,Ui,Qi,Wi,Gi,Ki,Xi,Ji,Yi,Lr,kr,jr,qi,Gr,Zi,_i,en,to,eo,on,$i).pipe(s.takeUntil(r.unsubscribe$)).subscribe((function(t){var e=t.aggregateId,n=r.inMemoryStructureQueryStore.getById(e),i=n.getId().toString();r.structureIdToStructure.set(i,n),r.structure$.next(r.structureIdToStructure)})),r}return g(n,t),n.prototype.onStructure=function(t){return this.structure$.asObservable().pipe(s.filter((function(e){var n=t.getId();return e.has(n)})),s.map((function(e){return e.get(t.getId())})))},n.prototype.ngOnDestroy=function(){this.unsubscribe$.next(),this.unsubscribe$.complete()},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:o.DomainEventBus},{type:zi}]},n}(et);var ro=[Ei,{provide:Ii,useClass:Si}],io=[zi,{provide:et,useClass:no}],oo=[Ai],ao=function(){function t(t,e,n,r){void 0===r&&(r=0),this.id=t,this.rawData=e,this.position=n,this.version=r}return t.prototype.getData=function(){return this.rawData},t.prototype.getVersion=function(){return this.version},t.prototype.getPosition=function(){return this.position},t.prototype.bumpVersion=function(){this.version+=1},t.prototype.setPosition=function(t){this.position=t},t.prototype.clone=function(){var e=p({},this.rawData);return new t(this.id,e,this.version)},t}();var so=function(t){function e(e,n,r){var i=t.call(this,e,"StructureSourceItemEditedAggregateEvent")||this;return i.beforeItem=n,i.afterItem=r,i}return g(e,t),e.prototype.getBeforeItem=function(){return this.beforeItem},e.prototype.getAfterItem=function(){return this.afterItem},e}(o.AggregateEvent);var uo=function(t){function e(e,n){var r=t.call(this,e,"StructureOriginChangedAggregateEvent")||this;return r.origin=n,r}return g(e,t),e.prototype.getOrigin=function(){return this.origin},e}(o.AggregateEvent);var co=function(){function t(){this.loading=!1,this.fetched=!1,this.entities=[],this.preparedEntities=[],this.slicedEntities=[]}return t.prototype.isLoading=function(){return this.loading},t.prototype.isFetched=function(){return this.fetched},t.prototype.setLoading=function(t){this.loading=t},t.prototype.setEntities=function(t){this.entities=t,this.recalculatePositions()},t.prototype.getEntities=function(){return this.entities},t.prototype.setPreparedEntities=function(){this.preparedEntities=m(this.entities)},t.prototype.getPreparedEntities=function(){return this.preparedEntities},t.prototype.setSlicedEntities=function(t){this.slicedEntities=t},t.prototype.getSlicedEntities=function(){return this.slicedEntities},t.prototype.setOrigin=function(t,e){return void 0===t&&(t=[]),this.origin=this.convertItems(t),this.createOriginChangedEvent(e)},t.prototype.setConvertedOrigin=function(t,e){return void 0===t&&(t=[]),this.origin=t,this.createOriginChangedEvent(e)},t.prototype.getOrigin=function(){return this.origin},t.prototype.getOriginSize=function(){return this.origin.length},t.prototype.editOriginItem=function(t,e,n,r){var i=this.findOriginItem(t),o=i.clone();return i&&(i.rawData[n.getAccessor()]=e,i.bumpVersion()),[new so(r,o,i.clone()),this.createOriginChangedEvent(r)]},t.prototype.removeOriginItem=function(t,e){var n=this.findOriginItemIndex(t);return n>-1?(this.origin.splice(n,1),[this.createOriginChangedEvent(e)]):[]},t.prototype.convertItems=function(t){return t.map((function(t,e){return new ao(o.RandomStringGenerator.generate(),t,e)}))},t.prototype.createOriginChangedEvent=function(t){return new uo(t,this.origin)},t.prototype.findOriginItem=function(t){return this.origin.find((function(e){return e.id===t}))},t.prototype.findOriginItemIndex=function(t){return this.origin.findIndex((function(e){return e.id===t}))},t.prototype.recalculatePositions=function(){this.entities.forEach((function(t,e){t.setPosition(e)}))},t}();var go=function(){function t(){}return t.prototype.createDefault=function(){return new co},t.prototype.create=function(){return new co},t.decorators=[{type:e.Injectable}],t}(),po=function(){function t(t,e){this.start=t,this.end=e}return t.prototype.getStart=function(){return this.start},t.prototype.getEnd=function(){return this.end},t}();var lo=function(){function t(t,e,n,r,i,o,a){void 0===t&&(t=!1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.enabled=t,this.rowHeight=30,this.hiddenItemsTop=0,this.hiddenItemsBottom=1,this.viewportHeight=e,this.sourceSize=n,this.scrollPosition=r,Number.isInteger(i)&&(this.rowHeight=i),Number.isInteger(o)&&(this.hiddenItemsTop=o),Number.isInteger(a)&&(this.hiddenItemsBottom=a),this.calculateRange()}return t.prototype.isEnabled=function(){return this.enabled&&this.viewportHeight>0&&this.sourceSize>0},t.prototype.getRange=function(){return this.range},t.prototype.getTopMargin=function(){return this.range.getStart()*this.rowHeight},t.prototype.calculateRange=function(){if(!(this.calcFullHeight()<=this.viewportHeight)){var t=Math.floor(this.viewportHeight/this.rowHeight),e=Math.floor(this.scrollPosition/this.rowHeight),n=Math.abs(e-this.hiddenItemsTop)*this.rowHeight,r=e-this.hiddenItemsTop,i=r+Math.ceil(this.viewportHeight/this.rowHeight)+this.hiddenItemsBottom;return i>this.sourceSize&&(r=(i=this.sourceSize)-t),this.range=new po(r,i),{start:r,end:i,topMargin:n}}this.range=new po(0,this.sourceSize)},t.prototype.setEnabled=function(t){this.enabled=t,this.enabled&&0===this.viewportHeight&&this.logger.warn("Height needs to be specified in order for virtual scroll to work."),this.calculateRange()},t.prototype.setSourceSize=function(t){void 0===t&&(t=0),this.sourceSize=t,this.calculateRange()},t.prototype.setTopHiddenItemsCount=function(t){this.hiddenItemsTop=t,this.calculateRange()},t.prototype.setBottomHiddenItemsCount=function(t){this.hiddenItemsBottom=t,this.calculateRange()},t.prototype.setScrollPosition=function(t){this.scrollPosition=t,this.calculateRange()},t.prototype.setViewportHeight=function(t){this.viewportHeight=t,this.calculateRange()},t.prototype.setRowHeight=function(t){this.rowHeight=t},t.prototype.setLogger=function(t){this.logger=t},t.prototype.calcFullHeight=function(){return this.sourceSize*this.rowHeight},t.prototype.getViewPortHeight=function(){return this.viewportHeight},t}();var ho=function(){function t(t){this.logger=t}return t.prototype.create=function(t,e,n,r,i,o,a){void 0===t&&(t=!1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0);var s=new lo(t,e,n,r,i,o,a);return s.setLogger(this.logger),s},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:yn}]},t}();var fo="GUI - Aggregation Calculators",mo=function(t){function e(e,n){var r=t.call(this,e,"StructureAggregationsChangedAggregateEvent")||this;return r.aggregatedValues=n,r}return g(e,t),e.prototype.getAggregations=function(){return this.aggregatedValues},e}(o.AggregateEvent);var yo=function(){function t(t,e){this.calculators=e,this.enabled=!1,this.values=new Map,this.structureId=t}return t.prototype.calculate=function(t,e){if(!this.enabled)return[];var n=new Map;return this.calculators.forEach((function(r){var i=r.calculate(t,e);i&&Array.from(i.keys()).forEach((function(t){n.set(t,i.get(t))}))})),n.size>0?[new mo(this.structureId,n)]:[]},t.prototype.setEnabled=function(t){this.enabled=t},t.prototype.add=function(){},t.prototype.remove=function(){},t.prototype.update=function(){},t}();var vo=function(){function t(t){this.calculators=t}return t.prototype.create=function(t){return new yo(t,this.calculators)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:Array,decorators:[{type:e.Inject,args:[fo]}]}]},t}();var bo=function(){function t(t,e,n){this.filterId=t,this.field=e,this.filterValue=n}return t.prototype.getFieldId=function(){return this.field.getId()},t.prototype.getFilterValue=function(){return this.filterValue},t.prototype.setFilterValue=function(t){this.filterValue=t},t.prototype.filter=function(t){var e=this;return 0===t.length?t:t.filter((function(t){return e.field.getDataType()===w.STRING?e.filterString(t):e.field.getDataType()===w.NUMBER?e.filterNumber(t):e.field.getDataType()!==w.BOOLEAN||e.filterBoolean(t)}))},t.prototype.filterString=function(t){var e=this.field.getValue(t);return"string"!=typeof e||e.toLowerCase().indexOf(this.filterValue.toLowerCase())>-1},t.prototype.filterNumber=function(t){return this.field.getValue(t)>this.filterValue},t.prototype.filterBoolean=function(t){return this.field.getValue(t)===this.filterValue},t}();var Co=function(){function t(t,e){var n=t.getId().toString();this.id=n+"@"+e}return t.prototype.getId=function(){return this.id},t}();var Ao=function(){function t(t,e,n){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===n&&(n=!1),this.filteringEnabled=!1,this.searchEnabled=!1,this.quickFiltersEnabled=!1,this.filteringEnabled=t,this.searchEnabled=e,this.quickFiltersEnabled=n}return t.prototype.isFilteringEnabled=function(){return this.filteringEnabled},t.prototype.isQuickFilteringEnabled=function(){return this.quickFiltersEnabled},t.prototype.isSearchingEnabled=function(){return this.searchEnabled},t.prototype.setFilterConfig=function(t){t&&void 0!==t.enabled&&null!==t.enabled&&(this.filteringEnabled=t.enabled)},t.prototype.setSearchingConfig=function(t){t&&void 0!==t.enabled&&null!==t.enabled&&(this.searchEnabled=t.enabled)},t.prototype.setQuickFiltersConfig=function(t){t&&void 0!==t.enabled&&null!==t.enabled&&(this.quickFiltersEnabled=t.enabled)},t}();var Eo=function(){function t(){this.filterSettings=new Ao,this.filters=new Map}return t.prototype.getAll=function(){return Array.from(this.filters).map((function(t){return t[1]}))},t.prototype.getSettings=function(){return this.filterSettings},t.prototype.addFilter=function(t,e,n){var r=new Co(t,e),i=new bo(r,t,n);""===n?this.filters.delete(r.getId()):this.filters.set(r.getId(),i)},t.prototype.filter=function(t){var e,n,r=this.getAll(),i=m(t);try{for(var o=h(r),a=o.next();!a.done;a=o.next()){i=a.value.filter(i)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},t}();var Io=function(){function t(){}return t.prototype.create=function(t){return void 0===t&&(t=!1),new Eo},t.decorators=[{type:e.Injectable}],t}(),So=function(){function t(){}return t.prototype.generateId=function(){var t=o.RandomStringGenerator.generate();return new pe(t)},t}(),wo=function(){function t(t,e,n,r){this.aggregationEnabled=!0,this.id=t,this.accessor=e,this.dataType=n,"string"==typeof e?this.accessorMethod=function(t){return t.getData()[e]}:"function"==typeof e&&(this.accessorMethod=function(t){return e(t.getData())}),this.possibleAggregations=this.assignPossibleAggregations(),this.assignAggregations(r)}return t.prototype.getId=function(){return this.id},t.prototype.getKey=function(){return this.getId().getId()},t.prototype.getDataType=function(){return this.dataType},t.prototype.getAccessor=function(){return this.accessor},t.prototype.getAccessorMethod=function(){return this.accessorMethod},t.prototype.getValue=function(t){return this.accessorMethod(t)},t.prototype.isAggregation=function(t){return!!this.isAggregationEnabled()&&!!(this.aggregations&t)},t.prototype.isAggregationEnabled=function(){return this.aggregationEnabled},t.prototype.setAggregationEnabled=function(t){this.aggregationEnabled=t},t.prototype.assignAggregations=function(t){var e=this;t&&0!==Object.keys(t).length?(t.enabled&&(this.aggregationEnabled=!!t.enabled),t.aggregationTypes?(this.aggregations=0,t.aggregationTypes.forEach((function(t){e.aggregations|=t}))):this.aggregations=this.assignDefaultAggregations()):this.aggregations=this.assignDefaultAggregations()},t}();var Do=function(t){function e(e,n,r){return t.call(this,e,n,w.UNKNOWN,r)||this}return g(e,t),e.prototype.assignDefaultAggregations=function(){return 0},e.prototype.assignPossibleAggregations=function(){return P.COUNT|P.DISTINCT},e}(wo),Po=function(t){function e(e,n,r){return t.call(this,e,n,w.NUMBER,r)||this}return g(e,t),e.prototype.assignDefaultAggregations=function(){return 0},e.prototype.assignPossibleAggregations=function(){return P.COUNT|P.DISTINCT|P.SUM|P.MIN|P.MAX|P.AVERAGE|P.MEDIAN},e}(wo),Ro=function(t){function e(e,n,r){return t.call(this,e,n,w.STRING,r)||this}return g(e,t),e.prototype.assignDefaultAggregations=function(){return 0},e.prototype.assignPossibleAggregations=function(){return P.COUNT|P.DISTINCT},e}(wo),To=function(t){function e(e,n,r){return t.call(this,e,n,w.BOOLEAN,r)||this}return g(e,t),e.prototype.assignDefaultAggregations=function(){return 0},e.prototype.assignPossibleAggregations=function(){return P.COUNT|P.DISTINCT|P.TRUTHY|P.FALSY},e}(wo),Mo=function(t){function e(e,n,r){return t.call(this,e,n,w.DATE,r)||this}return g(e,t),e.prototype.assignDefaultAggregations=function(){return 0},e.prototype.assignPossibleAggregations=function(){return P.COUNT|P.DISTINCT},e}(wo),xo=function(){function t(t){this.fieldIdGenerator=t}return t.prototype.create=function(t){var e=t.type;return void 0===e&&(e=w.STRING),e===w.UNKNOWN?new Do(this.fieldIdGenerator.generateId(),t.field,t.aggregation):e===w.NUMBER?new Po(this.fieldIdGenerator.generateId(),t.field,t.aggregation):e===w.STRING?new Ro(this.fieldIdGenerator.generateId(),t.field):e===w.BOOLEAN?new To(this.fieldIdGenerator.generateId(),t.field):e===w.DATE?new Mo(this.fieldIdGenerator.generateId(),t.field):void 0},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:So}]},t}();var Fo=function(){function t(t){this.fieldFactory=t,this.fields=new Map}return t.prototype.getField=function(t){return null===t?this.getAllFields()[0]:this.fields.get(t.getId())},t.prototype.getAllFieldIds=function(){return Array.from(this.fields.keys())},t.prototype.getAllFields=function(){return Array.from(this.fields.values())},t.prototype.initFields=function(t){var e=this;t&&t.forEach((function(t){var n=e.fieldFactory.create(t);e.addField(n)}))},t.prototype.addFields=function(t){var e,n;try{for(var r=h(t),i=r.next();!i.done;i=r.next()){var o=i.value;this.addField(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.addField=function(t){this.fields.set(t.getId().toString(),t)},t}();var Oo=function(){function t(t){this.fieldFactory=t}return t.prototype.create=function(){return new Fo(this.fieldFactory)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:xo}]},t}();var No=function(){function t(t,e,n){void 0===n&&(n=!0),this.rank=1,this.sorterId=t,this.field=e,this.direction=n}return t.prototype.getId=function(){return this.sorterId},t.prototype.getRank=function(){return this.rank},t.prototype.getField=function(){return this.field},t.prototype.hasDirection=function(){return this.direction},t.prototype.changeDirection=function(){this.direction=!this.direction},t.prototype.setDirection=function(t){this.direction=t},t.prototype.sort=function(t){var e=this;return 0===t.length?t:t.sort((function(t,n){var r=e.direction?e.field.getValue(t):e.field.getValue(n),i=e.direction?e.field.getValue(n):e.field.getValue(t);return e.field.getDataType()===w.NUMBER?e.sortNumber(r,i):e.field.getDataType()===w.BOOLEAN?e.sortBoolean(r,i):e.field.getDataType()===w.STRING?e.sortString(r,i):e.sortUnknown(r,i)}))},t.prototype.sortString=function(t,e){return(""+t).localeCompare(""+e)},t.prototype.sortNumber=function(t,e){return+t-+e},t.prototype.sortBoolean=function(t,e){var n=!!e;return!!t===n?0:n?-1:1},t.prototype.sortUnknown=function(t,e){return 0},t}();var Bo=function(){function t(t){this.sorterId=t}return t.prototype.getId=function(){return this.sorterId},t}();var Ho=function(){function t(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this.sorters=new Map,this.enabled=t,this.multi=e}return t.prototype.setConfig=function(t){t&&void 0!==t.enabled&&null!==t.enabled&&(this.enabled=t.enabled),t&&void 0!==t.multiSorting&&null!==t.multiSorting&&(this.multi=t.multiSorting,this.sorters.clear())},t.prototype.toggle=function(t){var e=t.getId(),n=this.sorters.get(e.getId());n?n.hasDirection()?n.changeDirection():this.delete(e):this.add(t)},t.prototype.setSortOrder=function(t,e){var n=t.getId();this.sorters.get(n.getId());if(e===Gt.NONE)this.delete(n);else if(e===Gt.ASC||e===Gt.DESC){this.delete(n);var r=e===Gt.ASC;this.add(t,r)}},t.prototype.add=function(t,e){void 0===e&&(e=!0),this.addSorter(t.getId(),new No(new Bo(o.RandomStringGenerator.generate()),t,e))},t.prototype.addSorter=function(t,e){this.multi||this.sorters.clear(),this.sorters.set(t.getId(),e)},t.prototype.delete=function(t){this.sorters.delete(t.getId())},t.prototype.update=function(){},t.prototype.sort=function(t){var e,n,r=this.getAll(),i=m(t);try{for(var o=h(r),a=o.next();!a.done;a=o.next()){i=a.value.sort(i)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},t.prototype.getAll=function(){return this.enabled?Array.from(this.sorters).map((function(t){return t[1]})).sort((function(t,e){return t.getRank()-e.getRank()})).reverse():[]},t}();var ko=function(){function t(t){this.selectedRows=t}return t.prototype.getSelectedRows=function(){return this.selectedRows},t.prototype.toggleRow=function(t){this.selectedRows.length>0&&this.selectedRows[0]===t?this.selectedRows=[]:this.selectedRows=[t]},t}();var Lo=function(){function t(t,e){this.top=t,this.bottom=e}return t.prototype.setHeaderTop=function(t){this.top=t},t.prototype.setHeaderBottom=function(t){this.bottom=t},t.prototype.isHeaderOnTop=function(){return this.top},t.prototype.isHeaderOnBottom=function(){return this.bottom},t}();var zo=function(){function t(t,e){this.width=t,this.height=e,this.headerHeight=28,this.pagerHeight=35,this.active=!1,this.horizontalGrid=!0,this.verticalGrid=!0,this.columnHeader=new Lo(!0,!1),this.theme=F.FABRIC,this.rowColoring=Bn.EVEN,this.calculateContainerHeight()}return t.prototype.getRowColoring=function(){return this.rowColoring},t.prototype.setHeight=function(t){this.height=t,this.calculateContainerHeight()},t.prototype.setTheme=function(t){this.theme=t},t.prototype.setRowColoring=function(t){this.rowColoring=t},t.prototype.getTheme=function(){return this.theme},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getContainerHeight=function(){return this.height},t.prototype.getColumnHeader=function(){return this.columnHeader},t.prototype.setHeaderTop=function(t){this.getColumnHeader().setHeaderTop(t)},t.prototype.setHeaderBottom=function(t){this.getColumnHeader().setHeaderBottom(t)},t.prototype.setVerticalGrid=function(t){this.verticalGrid=t},t.prototype.setHorizontalGrid=function(t){this.horizontalGrid=t},t.prototype.isVerticalGridEnabled=function(){return this.verticalGrid},t.prototype.isHorizontalGridEnabled=function(){return this.horizontalGrid},t.prototype.getHeaderHeight=function(){return this.headerHeight},t.prototype.getPagerHeight=function(){return this.pagerHeight},t.prototype.calculateContainerHeight=function(){this.height?(this.active=!0,this.containerHeight=this.height-this.getHeaderHeight()-this.getPagerHeight()):this.active=!1},t}();var jo=function(){function t(){this.searchFields=[]}return t.prototype.addSearchPhrase=function(t,e){if(e){var n=t.filter((function(t){return t.getDataType()===w.STRING}));0!==n.length&&(this.searchFields=n,this.searchPhrase=e)}else this.searchFields=[]},t.prototype.removeSearchFilters=function(){this.searchFields=[]},t.prototype.search=function(t){var e,n;if(0===t.length||0===this.searchFields.length)return t;for(var r=new Set,i=0;i<t.length;i+=1)try{for(var o=(e=void 0,h(this.searchFields)),a=o.next();!a.done;a=o.next()){var s=a.value;this.filterString(t[i],s)&&r.add(t[i])}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return Array.from(r)},t.prototype.filterString=function(t,e){var n=e.getValue(t);return"string"!=typeof n||n.toLowerCase().indexOf(this.searchPhrase.toLowerCase())>-1},t.prototype.filterNumber=function(t,e){return e.getValue(t)>this.searchPhrase},t.prototype.filterBoolean=function(t,e){return e.getValue(t)===this.searchPhrase},t}();var Vo=function(t){function e(e,n){var r=t.call(this,e,"StructurePreparedEntitiesSetAggregateEvent")||this;return r.preparedItems=n,r}return g(e,t),e.prototype.getPreparedItems=function(){return this.preparedItems},e}(o.AggregateEvent);var Uo=function(t){function e(e,n,r,i,o,a,s,u,c,g,p){var l=t.call(this,e)||this;return l.pagingAggregate=n,l.formationAggregate=r,l.sourceManager=i,l.verticalFormation=o,l.aggregationManager=a,l.sorterCollection=s,l.filterManager=u,l.searchManager=c,l.fieldCollection=g,l.schema=p,l}return g(e,t),e.prototype.getVerticalFormation=function(){return this.verticalFormation},e.prototype.setAggregationEnabled=function(t){return this.aggregationManager.setEnabled(t),this.calculateSource(),this.getEvents()},e.prototype.setOrigin=function(t){return this.addEvent(this.sourceManager.setOrigin(t,this.getId())),this.calculateSource(),this.getEvents()},e.prototype.editItem=function(t){var e=this,n=t.getItemId(),r=t.getColumnFieldId(),i=this.fieldCollection.getField(r),o=t.getValue();return this.sourceManager.editOriginItem(n,o,i,this.getId()).forEach((function(t){return e.addEvent(t)})),this.calculateSource(),this.getEvents()},e.prototype.setHeight=function(t){this.getSchema().setHeight(t);var e=this.getSchema().getContainerHeight();this.verticalFormation.setViewportHeight(e),this.calculateSourceBasedOnVirtualScroll()},e.prototype.setFormation=function(t){this.formationAggregate=t},e.prototype.setScrollPosition=function(t){this.verticalFormation.setScrollPosition(t),this.calculateSourceBasedOnVirtualScroll()},e.prototype.getFormation=function(){return this.formationAggregate},e.prototype.setSchema=function(t){this.schema=t},e.prototype.getSchema=function(){return this.schema},e.prototype.getPaging=function(){return this.pagingAggregate},e.prototype.changePaging=function(t){this.pagingAggregate.change(t),this.calculateSource()},e.prototype.setPaging=function(t){this.pagingAggregate=t,this.calculateSource()},e.prototype.nextPage=function(){this.pagingAggregate.nextPage(),this.calculateSource()},e.prototype.prevPage=function(){this.pagingAggregate.prevPage(),this.calculateSource()},e.prototype.changePageSize=function(t){var e=this;return this.pagingAggregate.changePageSize(t).forEach((function(t){e.addEvent(t)})),this.calculateSource(),this.getEvents()},e.prototype.getEntities=function(){return this.sourceManager.getSlicedEntities()},e.prototype.getSource=function(){return this.sourceManager},e.prototype.createFields=function(t){return this.fieldCollection.initFields(t),this.fieldCollection.getAllFields()},e.prototype.setSortingConfig=function(t){this.sorterCollection.setConfig(t)},e.prototype.toggleSort=function(t){var e=this.fieldCollection.getField(t);return this.sorterCollection.toggle(e),this.calculateSource(),this.sorterCollection.getAll()},e.prototype.setSortOrder=function(t,e){var n=this.fieldCollection.getField(t);return this.sorterCollection.setSortOrder(n,e),this.calculateSource(),this.sorterCollection.getAll()},e.prototype.setFilterConfig=function(t){this.filterManager.getSettings().setFilterConfig(t)},e.prototype.setSearchingConfig=function(t){this.filterManager.getSettings().setSearchingConfig(t)},e.prototype.setQuickFiltersConfig=function(t){this.filterManager.getSettings().setQuickFiltersConfig(t)},e.prototype.toggleFilter=function(t,e,n){var r=this.fieldCollection.getField(t);return void 0===r?[]:(this.filterManager.addFilter(r,e,n),this.calculateSource(),[])},e.prototype.addSearchPhrase=function(t){var e=this.fieldCollection.getAllFields();return this.searchManager.addSearchPhrase(e,t),this.calculateSource(),[]},e.prototype.removeSearchPhrase=function(){return this.searchManager.removeSearchFilters(),this.calculateSource(),[]},e.prototype.calculateSource=function(){var t=this;if(this.sourceManager.getOrigin()&&this.pagingAggregate){this.sourceManager.setEntities(this.sourceManager.getOrigin()),this.sourceManager.setEntities(this.filterManager.filter(this.sourceManager.getEntities()));var e=this.searchManager.search(this.sourceManager.getEntities());this.sourceManager.setEntities(e);var n=this.sorterCollection.sort(this.sourceManager.getEntities());this.sourceManager.setEntities(n),this.sourceManager.setPreparedEntities(),this.pagingAggregate.setSourceSize(this.sourceManager.getPreparedEntities().length),this.addEvent(new Vo(this.getId(),n)),this.aggregationManager.calculate(this.fieldCollection.getAllFields(),this.sourceManager.getEntities()).forEach((function(e){t.addEvent(e)})),this.sourceManager.setEntities(this.pagingAggregate.sample(this.sourceManager.getEntities())),this.verticalFormation.setSourceSize(this.sourceManager.getEntities().length),this.calculateSourceBasedOnVirtualScroll()}},e.prototype.calculateSourceBasedOnVirtualScroll=function(){if(this.verticalFormation.isEnabled()){var t=this.verticalFormation.getRange();this.sourceManager.setSlicedEntities(this.sourceManager.getEntities().slice(t.getStart(),t.getEnd()))}else this.sourceManager.setSlicedEntities(this.sourceManager.getEntities())},e.ctorParameters=function(){return[{type:rt},{type:Cn},{type:ko},{type:co},{type:lo},{type:yo},{type:Ho},{type:Eo},{type:jo},{type:Fo},{type:zo}]},e=l([o.RootAggregate,d("design:paramtypes",[rt,Cn,ko,co,lo,yo,Ho,Eo,jo,Fo,zo])],e)}(o.Aggregate);var Qo=function(){function t(){}return t.prototype.create=function(){return new zo},t.decorators=[{type:e.Injectable}],t}(),Wo=function(){function t(){}return t.prototype.create=function(){return new ko([])},t.decorators=[{type:e.Injectable}],t}(),Go=function(){function t(){}return t.prototype.create=function(){return new jo},t.decorators=[{type:e.Injectable}],t}(),Ko=function(){function t(t,e,n,r,i,o,a,s,u){this.pagingAggregateFactory=t,this.sourceManagerFactory=e,this.formationAggregateFactory=n,this.verticalFormationFactory=r,this.aggregationManagerFactory=i,this.filterManagerFactory=o,this.searchManagerFactory=a,this.fieldCollectionFactory=s,this.schemaAggregateFactory=u}return t.prototype.create=function(t){var e=this.pagingAggregateFactory.createDefault(),n=this.sourceManagerFactory.createDefault(),r=this.verticalFormationFactory.create(),i=this.formationAggregateFactory.create(),o=new Ho,a=this.filterManagerFactory.create(!1),s=this.fieldCollectionFactory.create(),u=this.aggregationManagerFactory.create(t),c=this.schemaAggregateFactory.create(),g=this.searchManagerFactory.create();return new Uo(t,e,i,n,r,u,o,a,g,s,c)},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:An},{type:go},{type:Wo},{type:ho},{type:vo},{type:Io},{type:Go},{type:Oo},{type:Qo}]},t}();var Xo=function(t){function n(e,n,r){var i=t.call(this,$n,ji,r)||this;return i.structureAggregateRepository=e,i.structureAggregateFactory=n,i}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=this.structureAggregateFactory.create(e);this.structureAggregateRepository.save(n)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:Ko},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var Jo=function(t){function n(e,n){var r=t.call(this,tr)||this;return r.structureAggregateRepository=e,r.domainEventPublisher=n,r}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=t.enabled,r=this.structureAggregateRepository.getById(e);r.getVerticalFormation().setEnabled(n),this.structureAggregateRepository.save(r),this.domainEventPublisher.publish(new Zi(e))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var Yo=function(t){function n(e,n){var r=t.call(this,er)||this;return r.structureAggregateRepository=e,r.domainEventPublisher=n,r}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=t.position,r=this.structureAggregateRepository.getById(e);r.setScrollPosition(n),this.structureAggregateRepository.save(r),this.domainEventPublisher.publish(new _i(e))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var qo=function(t){function n(e,n,r){var i=t.call(this,ar)||this;return i.structureAggregateRepository=e,i.structureAggregateFactory=n,i.domainEventPublisher=r,i}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=t.compositionId,r=t.columns,i=this.structureAggregateRepository.getById(e),o=i.createFields(r);this.structureAggregateRepository.save(i),this.domainEventPublisher.publish(new sn(e,n,r,o))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:Ko},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var Zo=function(t){function n(e,n){var r=t.call(this,rr)||this;return r.structureAggregateRepository=e,r.domainEventPublisher=n,r}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=t.getCompositionId(),r=t.getFieldId(),i=this.structureAggregateRepository.getById(e),o=i.toggleSort(r);this.structureAggregateRepository.save(i),this.publishSortEvent(e,n,r,o)},n.prototype.publishSortEvent=function(t,e,n,r){var i=r.map((function(t){return{direction:t.hasDirection(),fieldId:t.getField().getId()}}));this.domainEventPublisher.publish(new en(t,e,i))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var _o=function(t){function e(e){return t.call(this,e,"SortingSetEvent")||this}return g(e,t),e}(o.DomainEvent),$o=function(t){function n(e,n){var r=t.call(this,nr)||this;return r.structureAggregateRepository=e,r.domainEventPublisher=n,r}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=t.getSortingConfig(),r=this.structureAggregateRepository.getById(e);r.setSortingConfig(n),this.structureAggregateRepository.save(r),this.domainEventPublisher.publish(new _o(e))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var ta=function(t){function e(e,n){var r=t.call(this,e,"StructureConfigFilterSetEvent")||this;return r.enabled=n,r}return g(e,t),e.prototype.getEnabled=function(){return this.enabled},e}(o.DomainEvent);var ea=function(t){function n(e,n){var r=t.call(this,Kn)||this;return r.structureAggregateRepository=e,r.domainEventPublisher=n,r}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=t.getConfig(),r=this.structureAggregateRepository.getById(e);r.setFilterConfig(n),this.structureAggregateRepository.save(r),this.domainEventPublisher.publish(new ta(e,n.enabled))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var na=function(t){function e(e,n){var r=t.call(this,e,"StructureConfigSearchingSetEvent")||this;return r.enabled=n,r}return g(e,t),e.prototype.getEnabled=function(){return this.enabled},e}(o.DomainEvent);var ra=function(t){function n(e,n){var r=t.call(this,or)||this;return r.structureAggregateRepository=e,r.domainEventPublisher=n,r}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=t.getConfig(),r=this.structureAggregateRepository.getById(e);r.setSearchingConfig(n),this.structureAggregateRepository.save(r),this.domainEventPublisher.publish(new na(e,n.enabled))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var ia=function(t){function e(e,n){var r=t.call(this,e,"StructureConfigQuickFilterSetEvent")||this;return r.enabled=n,r}return g(e,t),e.prototype.getEnabled=function(){return this.enabled},e}(o.DomainEvent);var oa=function(t){function n(e,n){var r=t.call(this,ir)||this;return r.structureAggregateRepository=e,r.domainEventPublisher=n,r}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=t.getConfig(),r=this.structureAggregateRepository.getById(e);r.setQuickFiltersConfig(n),this.structureAggregateRepository.save(r),this.domainEventPublisher.publish(new ia(e,n.enabled))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var aa=function(t){function n(e,n){var r=t.call(this,Xn)||this;return r.structureAggregateRepository=e,r.domainEventPublisher=n,r}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=t.fieldId,r=t.externalFilterId,i=t.filterValue,o=this.structureAggregateRepository.getById(e);o.toggleFilter(n,r,i),this.structureAggregateRepository.save(o),this.domainEventPublisher.publish(new to(e))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var sa=function(t){function e(e,n){var r=t.call(this,e,"StructurePreparedEntitiesSetEvent")||this;return r.preparedItems=n,r}return g(e,t),e.prototype.getPreparedItems=function(){return this.preparedItems},e}(o.DomainEvent);var ua=function(){function t(t){this.domainEventPublisher=t}return t.prototype.publish=function(t){var e=this;t.forEach((function(t){e.publishEvent(t)}))},t.prototype.publishEvent=function(t){if("StructureOriginChangedAggregateEvent"===t.getType()){var e=t,n=new $i(e.getAggregateId(),e.getOrigin());this.domainEventPublisher.publish(n)}if("StructureSourceItemEditedAggregateEvent"===t.getType()){var r=t;n=new Qr(r.getAggregateId(),r.getBeforeItem(),r.getAfterItem());this.domainEventPublisher.publish(n)}if("StructureAggregationsChangedAggregateEvent"===t.getType()){var i=t;n=new vi(i.getAggregateId(),i.getAggregations());this.domainEventPublisher.publish(n)}if("StructurePreparedEntitiesSetAggregateEvent"===t.getType()){var o=t;n=new sa(o.getAggregateId(),o.getPreparedItems());this.domainEventPublisher.publish(n)}},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:o.DomainEventPublisher}]},t}();var ca=function(t){function e(e,n){var r=t.call(this,e,"StructureAggregationEnabledSetEvent")||this;return r.enabled=n,r}return g(e,t),e}(o.DomainEvent);var ga=function(t){function n(e,n,r,i){var o=t.call(this,xr)||this;return o.structureAggregateRepository=e,o.structureAggregateFactory=n,o.structureSourceDomainEventPublisher=r,o.domainEventPublisher=i,o}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=t.enabled,r=this.structureAggregateRepository.getById(e),i=r.setAggregationEnabled(n);this.structureAggregateRepository.save(r),this.domainEventPublisher.publish(new ca(e,n)),this.structureSourceDomainEventPublisher.publish(i)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:Ko},{type:ua},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var pa=function(){function t(){}return t.prototype.calculate=function(t,e){var n=this,r=t.filter((function(t){return n.forDataType(t.getDataType())}));if(!r||0===r.length||0===e.length)return null;var i=new Map,o=new Map;r.forEach((function(t){var e=t.getKey();i.set(e,0),o.set(e,new Set),n.prepare(t)})),e.forEach((function(t){r.forEach((function(e){var r=e.getKey(),a=e.getValue(t);if(null!==a||void 0!==a||""!==a){if(e.isAggregation(P.COUNT)){var s=i.get(r);i.set(r,s+1)}if(e.isAggregation(P.DISTINCT))o.get(r).add(a)}n.aggregate(e,a)}))})),r.forEach((function(t){n.postCalculate(t,e)}));var a=new Map;return r.forEach((function(t){var e=t.getId().getId(),r=n.generateAggregatedValues(t);t.isAggregation(P.COUNT)&&r.setCount(i.get(e)),t.isAggregation(P.DISTINCT)&&r.setDistinct(o.get(e).size),a.set(e,r)})),a},t}();var la=function(){function t(){}return t.prototype.setCount=function(t){this.count=t},t.prototype.setDistinct=function(t){this.distinct=t},t}();var da=function(t){function e(e,n){var r=t.call(this)||this;return r.truthy=e,r.falsy=n,r}return g(e,t),e}(la);var ha=function(t){function n(){var e=t.call(this)||this;return e.truthy=new Map,e.falsy=new Map,e}return g(n,t),n.prototype.forDataType=function(t){return t===w.BOOLEAN},n.prototype.aggregate=function(t,e){var n=e,r=t.getKey(),i=this.truthy.get(r),o=this.falsy.get(r);n?t.isAggregation(P.TRUTHY)&&this.truthy.set(r,i+1):t.isAggregation(P.FALSY)&&this.falsy.set(r,o+1)},n.prototype.generateAggregatedValues=function(t){var e=t.getKey();return new da(this.truthy.get(e),this.falsy.get(e))},n.prototype.prepare=function(t){var e=t.getKey();t.isAggregation(P.TRUTHY)&&this.truthy.set(e,0),t.isAggregation(P.FALSY)&&this.falsy.set(e,0)},n.prototype.postCalculate=function(t,e){},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[]},n}(pa);var fa=function(t){function e(){return t.call(this)||this}return g(e,t),e}(la),ma=function(t){function n(){return t.call(this)||this}return g(n,t),n.prototype.forDataType=function(t){return t===w.DATE},n.prototype.aggregate=function(t,e){},n.prototype.generateAggregatedValues=function(t){return new fa},n.prototype.prepare=function(t){},n.prototype.postCalculate=function(t,e){},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[]},n}(pa),ya=function(t){function e(e,n,r,i,o){var a=t.call(this)||this;return a.sum=a.setValueWithPrecision(e),a.min=a.setValueWithPrecision(n),a.max=a.setValueWithPrecision(r),a.average=a.setValueWithPrecision(i),a.median=a.setValueWithPrecision(o),a}return g(e,t),e.prototype.setValueWithPrecision=function(t){return t||0===t?0===t?0:+t.toFixed(2):null},e}(la);var va=function(t){function n(){var e=t.call(this)||this;return e.sum=new Map,e.min=new Map,e.max=new Map,e.average=new Map,e.median=new Map,e}return g(n,t),n.prototype.forDataType=function(t){return t===w.NUMBER},n.prototype.aggregate=function(t,e){var n=+e,r=t.getKey(),i=this.sum.get(r),o=this.min.get(r),a=this.max.get(r);(t.isAggregation(P.SUM)||t.isAggregation(P.AVERAGE))&&this.sum.set(r,i+n),t.isAggregation(P.MIN)&&o>n&&this.min.set(r,n),t.isAggregation(P.MAX)&&a<n&&this.max.set(r,n)},n.prototype.generateAggregatedValues=function(t){var e=t.getKey(),n=t.isAggregation(P.SUM)?this.sum.get(e):void 0,r=t.isAggregation(P.MIN)?this.min.get(e):void 0,i=t.isAggregation(P.MAX)?this.max.get(e):void 0,o=t.isAggregation(P.AVERAGE)?this.average.get(e):void 0,a=t.isAggregation(P.MEDIAN)?this.median.get(e):void 0;return new ya(n,r,i,o,a)},n.prototype.prepare=function(t){var e=t.getKey();this.sum.set(e,0),this.min.set(e,Number.MAX_SAFE_INTEGER),this.max.set(e,0)},n.prototype.postCalculate=function(t,e){var n=t.getKey();t.isAggregation(P.AVERAGE)&&this.average.set(n,this.sum.get(n)/e.length),t.isAggregation(P.MEDIAN)&&this.median.set(n,t.getValue(e[Math.floor(e.length/2)]))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[]},n}(pa);var ba=function(t){function e(){return t.call(this)||this}return g(e,t),e}(la),Ca=function(t){function n(){return t.call(this)||this}return g(n,t),n.prototype.forDataType=function(t){return t===w.STRING},n.prototype.aggregate=function(t,e){},n.prototype.generateAggregatedValues=function(t){return new ba},n.prototype.prepare=function(t){},n.prototype.postCalculate=function(t,e){},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[]},n}(pa),Aa=function(t){function e(){return t.call(this)||this}return g(e,t),e}(la),Ea=function(t){function n(){return t.call(this)||this}return g(n,t),n.prototype.forDataType=function(t){return t===w.UNKNOWN},n.prototype.aggregate=function(t,e){},n.prototype.generateAggregatedValues=function(t){return new Aa},n.prototype.prepare=function(t){},n.prototype.postCalculate=function(t,e){},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[]},n}(pa);function Ia(t){return{provide:fo,useClass:t,multi:!0}}var Sa=[Ia(ha),Ia(ma),Ia(va),Ia(Ca),Ia(Ea),vo],wa=function(t){function n(e){var n=t.call(this)||this;return n.structureFilterRepository=e,n}return g(n,t),n.prototype.handle=function(t){t instanceof ta&&this.structureFilterRepository.setEnabled(t.getEnabled(),t.getAggregateId())},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:ni}]},n}(o.DomainEventHandler);var Da=function(t){function n(e){var n=t.call(this)||this;return n.structureSearchingRepository=e,n}return g(n,t),n.prototype.handle=function(t){t instanceof na&&this.structureSearchingRepository.setEnabled(t.getEnabled(),t.getAggregateId())},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:hi}]},n}(o.DomainEventHandler);var Pa=function(t){function n(e){var n=t.call(this)||this;return n.structureQuickFilterRepository=e,n}return g(n,t),n.prototype.handle=function(t){t instanceof ia&&this.structureQuickFilterRepository.setEnabled(t.getEnabled(),t.getAggregateId())},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:ri}]},n}(o.DomainEventHandler);var Ra=function(){function t(t,e){this.id=t,this.dataType=e}return t.prototype.getId=function(){return this.id.getId()},t.prototype.getDataType=function(){return this.dataType},t}();var Ta=function(){function t(){}return t.prototype.convert=function(t){var e=this;return t.map((function(t){return e.convertOne(t)}))},t.prototype.convertOne=function(t){return new Ra(t.getId(),t.getDataType())},t.decorators=[{type:e.Injectable}],t}(),Ma=function(t){function n(e,n){var r=t.call(this)||this;return r.structureFieldsRepository=e,r.structureFieldUiConverter=n,r}return g(n,t),n.prototype.handle=function(t){if(t instanceof sn){var e=this.structureFieldUiConverter.convert(t.getFields());this.structureFieldsRepository.next(t.getAggregateId(),e)}},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:dr},{type:Ta}]},n}(o.DomainEventHandler);var xa=function(t){function n(e,n){var r=t.call(this,at,Yi,n)||this;return r.structureAggregateRepository=e,r}return g(n,t),n.prototype.handle=function(t){var e=t.payload,n=t.structureId,r=this.structureAggregateRepository.getById(n);r.changePaging(e),this.structureAggregateRepository.save(r)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var Fa=function(t){function n(e,n){var r=t.call(this,ut,kr,n)||this;return r.structureAggregateRepository=e,r}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=this.structureAggregateRepository.getById(e);n.nextPage(),this.structureAggregateRepository.save(n)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var Oa=function(t){function n(e,n){var r=t.call(this,ct,Lr,n)||this;return r.structureAggregateRepository=e,r}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=this.structureAggregateRepository.getById(e);n.prevPage(),this.structureAggregateRepository.save(n)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var Na=function(t){function n(e,n){var r=t.call(this,st)||this;return r.structureAggregateRepository=e,r.domainEventPublisher=n,r}return g(n,t),n.prototype.handle=function(t){var e=t.pageSize,n=t.structureId,r=this.structureAggregateRepository.getById(n),i=r.changePageSize(e);this.structureAggregateRepository.save(r),i.forEach((function(t){t.aggregateId=n})),this.publishAggregateEvents(i,t)},n.prototype.publishAggregateEvents=function(t,e){var n,r;try{for(var i=h(t),o=i.next();!o.done;o=i.next()){var a=o.value;this.publishAggregateEvent(a,e)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},n.prototype.publishAggregateEvent=function(t,e){switch(t.getType()){case"PageChangedAggregateEvent":var n=new zr(e.getAggregateId());this.domainEventPublisher.publish(n);break;case"PagesizeChangedAggregateEvent":var r=new jr(e.getAggregateId());this.domainEventPublisher.publish(r)}},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var Ba=m([gt,{provide:o.COMMAND_HANDLERS,useClass:xa,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:Fa,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:Oa,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:Na,multi:!0}],[nt],[An,Fi,pt,ot,Vr]),Ha=function(t){function n(e,n){var r=t.call(this,wn,Gi,n)||this;return r.structureAggregateRepository=e,r}return g(n,t),n.prototype.handle=function(t){var e=t.enabled,n=t.structureId,r=this.structureAggregateRepository.getById(n);r.getSchema().setVerticalGrid(e),this.structureAggregateRepository.save(r)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var ka=function(t){function n(e,n){var r=t.call(this,Dn,Wi,n)||this;return r.structureAggregateRepository=e,r}return g(n,t),n.prototype.handle=function(t){var e=t.enabled,n=t.structureId,r=this.structureAggregateRepository.getById(n);r.getSchema().setHorizontalGrid(e),this.structureAggregateRepository.save(r)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var La=function(t){function n(e,n){var r=t.call(this,Pn,Qi,n)||this;return r.structureAggregateRepository=e,r}return g(n,t),n.prototype.handle=function(t){var e=t.theme,n=t.structureId,r=this.structureAggregateRepository.getById(n);r.getSchema().setTheme(e),this.structureAggregateRepository.save(r)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var za=function(t){function n(e,n){var r=t.call(this,Mn,Xi,n)||this;return r.structureAggregateRepository=e,r}return g(n,t),n.prototype.handle=function(t){var e=t.enabled,n=t.structureId,r=this.structureAggregateRepository.getById(n);r.getSchema().setHeaderBottom(e),this.structureAggregateRepository.save(r)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var ja=function(t){function n(e,n){var r=t.call(this,Tn,Ki,n)||this;return r.structureAggregateRepository=e,r}return g(n,t),n.prototype.handle=function(t){var e=t.enabled,n=t.structureId,r=this.structureAggregateRepository.getById(n);r.getSchema().setHeaderTop(e),this.structureAggregateRepository.save(r)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var Va=function(t){function n(e,n){var r=t.call(this,Rn,Ji,n)||this;return r.structureAggregateRepository=e,r}return g(n,t),n.prototype.handle=function(t){var e=t.coloring,n=t.structureId,r=this.structureAggregateRepository.getById(n);r.getSchema().setRowColoring(e),this.structureAggregateRepository.save(r)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var Ua=function(t){function n(e,n){var r=t.call(this,Sn,Ui,n)||this;return r.structureAggregateRepository=e,r}return g(n,t),n.prototype.handle=function(t){var e=t.height,n=t.structureId,r=this.structureAggregateRepository.getById(n);r.setHeight(e),this.structureAggregateRepository.save(r)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var Qa=m([xn,{provide:o.COMMAND_HANDLERS,useClass:Ua,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:Ha,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:ka,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:La,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:za,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:ja,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:Va,multi:!0},Qo],[Fn],[xi,Nn,On]),Wa=function(t){function n(e,n){var r=t.call(this,Ln,qi,n)||this;return r.structureAggregateRepository=e,r}return g(n,t),n.prototype.handle=function(t){t.payload;var e=t.structureId,n=this.structureAggregateRepository.getById(e);this.structureAggregateRepository.save(n)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var Ga=function(t){function n(e,n){var r=t.call(this,zn,Gr,n)||this;return r.structureAggregateRepository=e,r}return g(n,t),n.prototype.handle=function(t){var e=t.selectedRow,n=t.structureId,r=this.structureAggregateRepository.getById(n);r?(r.getFormation().toggleRow(e),this.structureAggregateRepository.save(r)):console.error("There is no aggregate 'Structure' for aggregateId: "+n)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var Ka=m([jn,{provide:o.COMMAND_HANDLERS,useClass:Wa,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:Ga,multi:!0},Wo],[Qn],[Kr,Pi,Vn,Wn]),Xa=function(t){function n(e,n){var r=t.call(this,qn)||this;return r.structureAggregateRepository=e,r.structureSourceDomainEventPublisher=n,r}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=t.items,r=this.structureAggregateRepository.getById(e);if(r){var i=r.setOrigin(n);this.structureAggregateRepository.save(r),this.structureSourceDomainEventPublisher.publish(i)}else console.error("There is no aggregate 'Structure' for aggregateId: "+e)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:ua}]},n}(o.CommandHandler);var Ja=function(t){function n(e,n,r){var i=t.call(this,Zn)||this;return i.structureAggregateRepository=e,i.domainEventPublisher=n,i.structureSourceDomainEventPublisher=r,i}return g(n,t),n.prototype.handle=function(t){var e=t.getAggregateId(),n=t.getParams(),r=this.structureAggregateRepository.getById(e),i=r.editItem(n);this.structureAggregateRepository.save(r),this.structureSourceDomainEventPublisher.publish(i)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher},{type:ua}]},n}(o.CommandHandler);var Ya=function(t){function n(e){var n=t.call(this)||this;return n.structureSourceOriginRepository=e,n}return g(n,t),n.prototype.handle=function(t){if(t instanceof $i){var e=t.getOrigin();this.structureSourceOriginRepository.setOrigin(e,t.getAggregateId())}},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:lt}]},n}(o.DomainEventHandler);var qa=function(){function t(t){this.structureRepository=t}return t.prototype.select=function(t){return this.structureRepository.onStructure(t).pipe(s.filter((function(e){return e.getId().toString()===t.toString()})),s.map((function(t){return t.getSchema()})))},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:et}]},t}();var Za=function(t){function n(e,n){var r=t.call(this,Yn,Vi,n)||this;return r.structureAggregateRepository=e,r}return g(n,t),n.prototype.handle=function(t){var e=t.enabled,n=t.structureId,r=this.structureAggregateRepository.getById(n);r.getSource().setLoading(e),this.structureAggregateRepository.save(r)},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var _a=function(t){function n(e){var n=t.call(this)||this;return n.structurePreparedItemsRepository=e,n}return g(n,t),n.prototype.handle=function(t){if(t instanceof sa){var e=t.getPreparedItems();this.structurePreparedItemsRepository.setItems(e,t.getAggregateId())}},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:dt}]},n}(o.DomainEventHandler);var $a=m([_n,go,{provide:o.COMMAND_HANDLERS,useClass:Za,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:Xa,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:Ja,multi:!0},ua],[qa,{provide:o.DOMAIN_EVENT_HANDLERS,useClass:Ya,multi:!0},{provide:o.DOMAIN_EVENT_HANDLERS,useClass:_a,multi:!0},lt,dt],[Ni,mr,ht,Wr]),ts=function(t){function n(e,n,r){var i=t.call(this,sr)||this;return i.structureAggregateRepository=e,i.structureSourceDomainEventPublisher=n,i.domainEventPublisher=r,i}return g(n,t),n.prototype.handle=function(t){var e=t.structureId,n=t.phrase,r=this.structureAggregateRepository.getById(e);r.addSearchPhrase(n),this.structureAggregateRepository.save(r),this.domainEventPublisher.publish(new eo(e)),this.structureSourceDomainEventPublisher.publish(r.getEvents())},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:ua},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var es=function(t){function n(e,n){var r=t.call(this,ur)||this;return r.structureAggregateRepository=e,r.domainEventPublisher=n,r}return g(n,t),n.prototype.handle=function(t){var e=t.getAggregateId(),n=t.getCompositionId(),r=t.getFieldId(),i=t.getSortOrder(),o=this.structureAggregateRepository.getById(e),a=o.setSortOrder(r,i);this.structureAggregateRepository.save(o),this.publishSortEvent(e,n,r,a)},n.prototype.publishSortEvent=function(t,e,n,r){var i=r.map((function(t){return{direction:t.hasDirection(),fieldId:t.getField().getId()}}));this.domainEventPublisher.publish(new on(t,e,i))},n.decorators=[{type:e.Injectable}],n.ctorParameters=function(){return[{type:Ii},{type:o.DomainEventPublisher}]},n}(o.CommandHandler);var ns=m(ro,[{provide:o.COMMAND_HANDLERS,useClass:Xo,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:Jo,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:Yo,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:qo,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:Zo,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:$o,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:ea,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:ra,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:oa,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:aa,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:ga,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:ts,multi:!0},{provide:o.COMMAND_HANDLERS,useClass:es,multi:!0},ho,Oo,Io,Go,So,Jn,xo],Sa),rs=m([{provide:o.DOMAIN_EVENT_HANDLERS,useClass:wa,multi:!0},{provide:o.DOMAIN_EVENT_HANDLERS,useClass:Da,multi:!0},{provide:o.DOMAIN_EVENT_HANDLERS,useClass:Pa,multi:!0},{provide:o.DOMAIN_EVENT_HANDLERS,useClass:Ma,multi:!0}],io,[Hi,ii,ni,ri,hi,fi,dr,Ta,hr]),is=m(oo,ns,rs,[Fr,bi,Ko,Li,pr,cr],Ba,Qa,Ka,$a),os=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.warn=function(t){console.warn(t)},e.prototype.error=function(t){console.error(t)},e}(yn),as=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{providers:[{provide:yn,useClass:os}]}]}],t}(),ss=function(){function t(){}return t.prototype.create=function(t){return Array.isArray(t)?this.createEntities(t):this.createEntity(t)},t.prototype.createEntities=function(t){var e=this;return t.map((function(t){return e.createEntity(t)}))},t.prototype.createEntity=function(t){return t instanceof ao?new ci(t.rawData,t.getPosition(),t.id,t.getVersion()):new ci(t,0)},t.decorators=[{type:e.Injectable}],t}(),us=function(t){function n(){return t.call(this)||this}return g(n,t),n.decorators=[{type:e.Component,args:[{selector:"gui-structure-top-panel",template:"\n\t\t\n\t\t<gui-structure-search-bar></gui-structure-search-bar>\n\t\t\n\t\t\n\t",changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[]},n}(tt),cs=function(t){function n(e,n){var r=t.call(this)||this;return r.formBuilder=e,r.structureCommandService=n,r.searchForm=r.formBuilder.group({searchPhrase:""}),r}return g(n,t),n.prototype.ngOnInit=function(){this.observeChanges()},n.prototype.observeChanges=function(){var t=this;this.searchForm.controls.searchPhrase.valueChanges.pipe(s.debounceTime(200),this.takeUntil()).subscribe((function(e){t.structureCommandService.search(e)}))},n.decorators=[{type:e.Component,args:[{selector:"gui-structure-search-bar",template:'\n\t\t<form [formGroup]="searchForm">\n\t\t\t<div class="gui-search-icon"></div>\n\t\t\t<input formControlName="searchPhrase" [placeholder]="\'Search ...\'">\n\t\t</form>\n\t',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None}]}],n.ctorParameters=function(){return[{type:r.FormBuilder},{type:cr}]},n}(tt);var gs=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule,r.ReactiveFormsModule],declarations:[us,cs],exports:[us,cs]}]}],t}(),ps=function(t){function n(e,n,r,i,o){var a=t.call(this)||this;return a.elementRef=e,a.changeDetectorRef=n,a.structureCommandService=r,a.structureColumnMenuConfigArchive=i,a.structureColumnConfigService=o,a}return g(n,t),n.prototype.ngOnInit=function(){var t=this;this.structureColumnMenuConfigArchive.onValue().pipe(this.takeUntil()).subscribe((function(e){t.config=e,t.changeDetectorRef.detectChanges()}))},n.prototype.openConfigDialog=function(){this.structureColumnConfigService.open(this.headerDialogContainer,this.column)},n.prototype.closeConfigDialog=function(){this.structureColumnConfigService.close()},n.prototype.isEnabled=function(){return this.config&&this.config.isEnabled()},n.decorators=[{type:e.Component,args:[{selector:"gui-structure-column-config-trigger",template:'\n\t\t<div #headerDialogContainer\n\t\t\t *ngIf="isEnabled()"\n\t\t\t class="gui-header-menu-icon"\n\t\t\t (click)="openConfigDialog()">\n\t\t</div>\n\t'}]}],n.ctorParameters=function(){return[{type:e.ElementRef},{type:e.ChangeDetectorRef},{type:cr},{type:Jr},{type:ti}]},n.propDecorators={headerDialogContainer:[{type:e.ViewChild,args:["headerDialogContainer",{static:!1}]}],column:[{type:e.Input}]},n}(tt);var ls=function(){function t(){}return t.decorators=[{type:e.Component,args:[{selector:"gui-structure-empty-source",template:"There are no items to show.\n",changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None,host:{"[class.gui-structure-empty-source]":"true"}}]}],t}();function ds(){return(new W.DefaultBuilder).build()}var hs=m([n.CommonModule,r.ReactiveFormsModule,o.HermesModule],_,[Et,Pt,gs,fn,as]),fs=[_r,oi,ei,ai,si,ui,gi,pi,li,ls,di,yi,Ci,$r,ps],ms=[$r],ys=m([{provide:mi,useValue:"structure"},{provide:W,useFactory:ds},ss,ht,mn,Mr],is),vs=m([i.FabricModule,_r,oi,ui,gi,li],_,[Et]),bs=function(){function t(t){this.platformId=t,n.isPlatformBrowser(this.platformId)&&(window.hermesApi.loggers=!1)}return t.withConfig=function(e){return void 0===e&&(e={cssClassName:"",hermesModuleConfig:{loggers:!1}}),{ngModule:t,providers:m([{provide:mi,useValue:e.cssClassName},{provide:o.COMMAND_LOGGER_ENABLED,useValue:e.hermesModuleConfig.loggers},{provide:o.EVENT_LOGGER_ENABLED,useValue:e.hermesModuleConfig.loggers}],ys)}},t.exportDeclarations=m(vs),t.decorators=[{type:e.NgModule,args:[{imports:hs,declarations:fs,exports:vs,entryComponents:ms}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[e.PLATFORM_ID]}]}]},t}();var Cs=[bs.withConfig({cssClassName:"grid",hermesModuleConfig:{loggers:!0}})],As=[Z],Es=[J,Y],Is=[Z],Ss=[],ws=[Z],Ds=function(){function t(){}return t.entryComponents=m(Ss),t.exportDeclarations=m(Is),t.elementComponents=m(ws),t.decorators=[{type:e.NgModule,args:[{imports:Cs,declarations:As,providers:Es,exports:Is,entryComponents:Ss}]}],t}();t.GridComponent=Z,t.GridModule=Ds,t.GuiBooleanCellView=A,t.GuiCellView=v,t.GuiDataType=y,t.GuiDateCellView=E,t.GuiNumberCellView=b,t.GuiRowColoring=S,t.GuiStringCellView=C,t.GuiTheme=I,t.ɵa="gui-grid",t.ɵb=ds,t.ɵba=gs,t.ɵbb=us,t.ɵbc=cs,t.ɵbd=cr,t.ɵbe=Jn,t.ɵbf=_n,t.ɵbg=fn,t.ɵbh=ln,t.ɵbi=De,t.ɵbj=Pe,t.ɵbk=Re,t.ɵbl=te,t.ɵbm=ee,t.ɵbn=Nt,t.ɵbo=ne,t.ɵbp=re,t.ɵbq=He,t.ɵbr=Te,t.ɵbs=ke,t.ɵbt=Qe,t.ɵbu=Ue,t.ɵbv=We,t.ɵbw=Jt,t.ɵbx=Ge,t.ɵby=Ke,t.ɵbz=Xe,t.ɵc=bs,t.ɵca=Ye,t.ɵcb=ye,t.ɵcc=me,t.ɵcd=he,t.ɵce=ae,t.ɵcf=oe,t.ɵcg=ie,t.ɵch=ue,t.ɵci=se,t.ɵcj=ve,t.ɵck=we,t.ɵcl=cn,t.ɵcm=an,t.ɵcn=tn,t.ɵco=$e,t.ɵcp=qe,t.ɵcq=Rt,t.ɵcr=Ht,t.ɵcs=Bt,t.ɵct=Ft,t.ɵcu=xt,t.ɵcv=Ot,t.ɵcw=kt,t.ɵcx=Lt,t.ɵcy=zt,t.ɵcz=as,t.ɵd=_,t.ɵda=yn,t.ɵdb=os,t.ɵdc=Yr,t.ɵdd=qr,t.ɵde=Zr,t.ɵdf=_r,t.ɵdg=Hr,t.ɵdh=rt,t.ɵdi=Ze,t.ɵdj=Vr,t.ɵdk=mr,t.ɵdl=hr,t.ɵdm=dr,t.ɵdn=Wr,t.ɵdo=Nn,t.ɵdp=xn,t.ɵdq=On,t.ɵdr=Fn,t.ɵds=Kr,t.ɵdt=pr,t.ɵdu=Dr,t.ɵdv=Ir,t.ɵdw=Sr,t.ɵdx=Pr,t.ɵdy=Or,t.ɵdz=Mr,t.ɵe=Et,t.ɵea=Tr,t.ɵeb=Fr,t.ɵec=wr,t.ɵed=Jr,t.ɵee=mn,t.ɵef=Ar,t.ɵeg=En,t.ɵeh=An,t.ɵei=In,t.ɵej=Hn,t.ɵek=kn,t.ɵel=Vn,t.ɵem=jn,t.ɵen=Un,t.ɵeo=Wn,t.ɵep=Qn,t.ɵeq=Gn,t.ɵer=gr,t.ɵes=lr,t.ɵet=yr,t.ɵeu=vr,t.ɵev=br,t.ɵew=Cr,t.ɵex=Er,t.ɵey=Nr,t.ɵez=W,t.ɵf=ft,t.ɵfa=V,t.ɵfb=oi,t.ɵfc=ei,t.ɵfd=ti,t.ɵfe=ii,t.ɵff=ni,t.ɵfg=ri,t.ɵfh=ai,t.ɵfi=si,t.ɵfj=ui,t.ɵfk=gi,t.ɵfl=pi,t.ɵfm=li,t.ɵfn=X,t.ɵfo=ls,t.ɵfp=di,t.ɵfq=yi,t.ɵfr=mi,t.ɵfs=fi,t.ɵft=hi,t.ɵfu=Ci,t.ɵfv=bi,t.ɵfw=$r,t.ɵfx=ce,t.ɵfy=ge,t.ɵfz=pe,t.ɵg=tt,t.ɵga=Gt,t.ɵgb=ps,t.ɵgc=ss,t.ɵgd=is,t.ɵge=ro,t.ɵgf=io,t.ɵgg=oo,t.ɵgh=Ai,t.ɵgi=Ei,t.ɵgj=Ii,t.ɵgk=Si,t.ɵgl=Xo,t.ɵgm=Ko,t.ɵgn=go,t.ɵgo=Wo,t.ɵgp=ho,t.ɵgq=vo,t.ɵgr=fo,t.ɵgs=pa,t.ɵgt=Io,t.ɵgu=Go,t.ɵgv=Oo,t.ɵgw=xo,t.ɵgx=So,t.ɵgy=Qo,t.ɵgz=Jo,t.ɵh=$,t.ɵha=Yo,t.ɵhb=qo,t.ɵhc=Zo,t.ɵhd=$o,t.ɵhe=ea,t.ɵhf=ra,t.ɵhg=oa,t.ɵhh=aa,t.ɵhi=ga,t.ɵhj=ua,t.ɵhk=ts,t.ɵhl=es,t.ɵhm=Ia,t.ɵhn=Sa,t.ɵho=ha,t.ɵhp=ma,t.ɵhq=va,t.ɵhr=Ca,t.ɵhs=Ea,t.ɵht=wa,t.ɵhu=Da,t.ɵhv=Pa,t.ɵhw=Ma,t.ɵhx=Ta,t.ɵhy=zi,t.ɵhz=Li,t.ɵi=ot,t.ɵia=Pi,t.ɵib=xi,t.ɵic=Fi,t.ɵid=Ni,t.ɵie=Hi,t.ɵif=no,t.ɵig=Ba,t.ɵih=xa,t.ɵii=Fa,t.ɵij=Oa,t.ɵik=Na,t.ɵil=Qa,t.ɵim=Ua,t.ɵin=Ha,t.ɵio=ka,t.ɵip=La,t.ɵiq=za,t.ɵir=ja,t.ɵis=Va,t.ɵit=Ka,t.ɵiu=Wa,t.ɵiv=Ga,t.ɵiw=$a,t.ɵix=Za,t.ɵiy=Xa,t.ɵiz=Ja,t.ɵj=nt,t.ɵja=qa,t.ɵjb=Ya,t.ɵjc=_a,t.ɵjd=k,t.ɵje=K,t.ɵjf=G,t.ɵjg=Y,t.ɵjh=J,t.ɵk=et,t.ɵl=pt,t.ɵm=gt,t.ɵn=ht,t.ɵo=dt,t.ɵp=lt,t.ɵq=yt,t.ɵr=vt,t.ɵs=bt,t.ɵt=Ct,t.ɵu=At,t.ɵv=Pt,t.ɵw=St,t.ɵx=It,t.ɵy=Dt,t.ɵz=wt,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=generic-ui-ngx-grid.umd.min.js.map