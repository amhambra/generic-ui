import { Component, Inject, Input, PLATFORM_ID, ViewChild, ViewEncapsulation } from '@angular/core';
import { isPlatformBrowser } from '@angular/common';
import { GuiGridGateway } from './gui.grid-gateway';
import { structureParentComponent } from '../../../../feature-view/grid-view/src/structure/parent/structure-parent-component';
import { GuiGridApiProvider } from './api/gui.grid.api-provider';
import { GuiGridThemeCommandInvoker } from './theme/gui.grid.theme.command-invoker';
import { ClassModifier } from '../../../../feature/common/component/src/dom/class/class-modifier';
import { AttributeModifier } from '../../../../feature/common/component/src/dom/attribute/attribute-modifier';
import { StructureDefinition } from '../../../../feature-view/grid-view/src/structure/structure-definition';
import { guiGridStructureDefinition } from './gui.grid-structure-definition';
import * as i0 from "@angular/core";
import * as i1 from "./register/gui.grid.register";
import * as i2 from "../../../../feature-view/grid-view/src/structure/structure-id.generator";
import * as i3 from "../../../../core/structure/formation/src/api/formation.publisher";
import * as i4 from "../../../../core/structure/formation/src/api/formation.warehouse";
import * as i5 from "../../../../core/composition/src/api/composition.publisher";
import * as i6 from "../../../../core/composition/src/api/composition.warehouse";
import * as i7 from "../../../../core/structure/filter/src/api-integration/filter.integration";
import * as i8 from "../../../../core/structure/source/src/api/source.publisher";
import * as i9 from "../../../../core/structure/search/src/api/search.publisher";
import * as i10 from "../../../../core/schema/src/api/schema.publisher";
import * as i11 from "../../../../core/structure/structure-core/src/api/structure.publisher";
import * as i12 from "../../../../core/structure/summaries/src/api/summaries.publisher";
import * as i13 from "../../../../core/structure/sorting/src/api/sorting.publisher";
import * as i14 from "../../../../core/structure/paging/src/api/paging.publisher";
import * as i15 from "../../../../feature-view/grid-view/src/structure/structure.component";
import * as i16 from "../../../../feature-view/grid-view/src/structure/gate/column/header/structure-column-header.gate";
import * as i17 from "../../../../feature-view/grid-view/src/structure/gate/paging/structure-paging.gate";
import * as i18 from "../../../../feature-view/grid-view/src/structure/gate/searching/structure-searching.gate";
import * as i19 from "../../../../feature-view/grid-view/src/structure/gate/source/structure-selection.gate";
import * as i20 from "../../../../feature-view/grid-view/src/structure/gate/l10n/structure-l10n.gate";
import * as i21 from "../../../../feature-view/grid-view/src/structure/gate/panel/structure-panel.gate";
import * as i22 from "../../../../feature-view/grid-view/src/structure/gate/row/detail/structure-row-detail.gate";
import * as i23 from "../../../../feature-view/grid-view/src/structure/gate/column/menu/structure-column-menu.gate";
import * as i24 from "../../../../feature/structure/summaries/src/gate/structure-summaries.gate";
import * as i25 from "../../../../feature-view/grid-view/src/structure/gate/panel/info/structure-info-panel.gate";
import * as i26 from "../../../../feature-view/grid-view/src/structure/gate/row/class/structure-row-class.gate";
import * as i27 from "../../../../feature-view/grid-view/src/structure/gate/row/style/structure-row-style.gate";
import * as i28 from "../../../../feature-view/grid-view/src/structure/gate/row/coloring/structure-row-coloring.gate";
import * as i29 from "../../../../feature/schema/src/gate/grid/theme-grid.gate";
import * as i30 from "../../../../feature/structure/sorting/src/gate/structure-sorting.gate";
import * as i31 from "../../../../feature-view/grid-view/src/structure/gate/source/source-loading.gate";
import * as i32 from "../../../../feature/structure/filter/src/gate/structure-filter.gate";
import * as i33 from "../../../../feature/structure/filter/src/gate/structure-quick-filters.gate";
import * as i34 from "../../../../feature/structure/vertical-formation/src/gate/vertical-formation.gate";
export class GuiGridComponent extends GuiGridGateway {
    platformId;
    elementRef;
    changeDetectorRef;
    gridRegister;
    structureIdGenerator;
    formationCommandDispatcher;
    formationWarehouse;
    compositionCommandInvoker;
    compositionWarehouse;
    filterIntegration;
    sourceCommandDispatcher;
    searchCommandInvoker;
    schemaCommandInvoker;
    structureCommandDispatcher;
    summariesCommandInvoker;
    sortingCommandInvoker;
    pagingCommandInvoker;
    static GUI_GRID_ID = 'gui-grid-id';
    structureRef;
    gridId; // can be set once
    api;
    localGridId;
    gridThemeCommandInvoker;
    classModifier;
    attributeModifier;
    constructor(platformId, elementRef, changeDetectorRef, gridRegister, structureIdGenerator, 
    // delegate
    formationCommandDispatcher, formationWarehouse, compositionCommandInvoker, compositionWarehouse, filterIntegration, sourceCommandDispatcher, searchCommandInvoker, schemaCommandInvoker, structureCommandDispatcher, summariesCommandInvoker, sortingCommandInvoker, pagingCommandInvoker) {
        super();
        this.platformId = platformId;
        this.elementRef = elementRef;
        this.changeDetectorRef = changeDetectorRef;
        this.gridRegister = gridRegister;
        this.structureIdGenerator = structureIdGenerator;
        this.formationCommandDispatcher = formationCommandDispatcher;
        this.formationWarehouse = formationWarehouse;
        this.compositionCommandInvoker = compositionCommandInvoker;
        this.compositionWarehouse = compositionWarehouse;
        this.filterIntegration = filterIntegration;
        this.sourceCommandDispatcher = sourceCommandDispatcher;
        this.searchCommandInvoker = searchCommandInvoker;
        this.schemaCommandInvoker = schemaCommandInvoker;
        this.structureCommandDispatcher = structureCommandDispatcher;
        this.summariesCommandInvoker = summariesCommandInvoker;
        this.sortingCommandInvoker = sortingCommandInvoker;
        this.pagingCommandInvoker = pagingCommandInvoker;
        this.gridThemeCommandInvoker = new GuiGridThemeCommandInvoker(this.schemaCommandInvoker, this.gridThemeConverter, this.gridRowColoringConverter);
        this.classModifier = new ClassModifier(this.elementRef.nativeElement);
        this.attributeModifier = new AttributeModifier(this.elementRef.nativeElement);
    }
    ngOnInit() {
        this.classModifier.getHost().add('gui-grid');
        this.initApi();
        let gridId = this.gridId;
        if (gridId === undefined) {
            // gridId = this.gridIdGenerator.generateId();
            gridId = 'gui-grid-' + this.structureIdGenerator.generateId();
        }
        this.localGridId = gridId;
        this.exposeGridId();
        // register
        this.gridRegister.register(gridId, this, this.structureRef.getStructureId());
        if (isPlatformBrowser(this.platformId)) {
            window['getGuiGrid'] = (gridId) => {
                const gridConsoleConfig = this.gridRegister.getValues(gridId);
                if (gridConsoleConfig) {
                    return this.api;
                }
                else {
                    return undefined;
                }
            };
        }
    }
    ngOnDestroy() {
        this.gridRegister.unregister(this.localGridId);
    }
    getElementRef() {
        return this.elementRef;
    }
    detectChanges() {
        this.changeDetectorRef.detectChanges();
    }
    exposeGridId() {
        this.attributeModifier.getHost().setAttribute(GuiGridComponent.GUI_GRID_ID, this.localGridId);
    }
    initApi() {
        this.api = new GuiGridApiProvider(this.structureRef.structureId, this.structureRef.compositionId, this.structureRef.schemaReadModelRootId, this.formationCommandDispatcher, this.formationWarehouse, this.compositionCommandInvoker, this.compositionWarehouse, this.filterIntegration, this.sourceCommandDispatcher, this.searchCommandInvoker, this.gridThemeCommandInvoker, this.structureCommandDispatcher, this.summariesCommandInvoker, this.sortingCommandInvoker, this.pagingCommandInvoker).provide();
    }
    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: GuiGridComponent, deps: [{ token: PLATFORM_ID }, { token: i0.ElementRef }, { token: i0.ChangeDetectorRef }, { token: i1.GuiGridRegister }, { token: i2.StructureIdGenerator }, { token: i3.FormationPublisher }, { token: i4.FormationWarehouse }, { token: i5.CompositionPublisher }, { token: i6.CompositionWarehouse }, { token: i7.FilterIntegration }, { token: i8.SourcePublisher }, { token: i9.SearchPublisher }, { token: i10.SchemaPublisher }, { token: i11.StructurePublisher }, { token: i12.SummariesPublisher }, { token: i13.SortingPublisher }, { token: i14.PagingPublisher }], target: i0.ɵɵFactoryTarget.Component });
    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: GuiGridComponent, selector: "gui-grid", inputs: { gridId: "gridId" }, providers: [
            {
                provide: StructureDefinition,
                useValue: guiGridStructureDefinition
            },
            {
                provide: structureParentComponent,
                useExisting: GuiGridComponent
            }
        ], viewQueries: [{ propertyName: "structureRef", first: true, predicate: ["structure"], descendants: true, static: true }], usesInheritance: true, ngImport: i0, template: "<gui-structure\n\t#structure\n\t(cellEditCanceled)=\"onCellEditCancel()\"\n\t(cellEditEntered)=\"onCellEditEnter()\"\n\t(cellEditSubmitted)=\"onCellEditSubmit()\"\n\t(columnsChanged)=\"onColumnsChange()\"\n\t(containerWidthChanged)=\"onContainerWidthChange($event)\"\n\t(horizontalGridChanged)=\"onHorizontalGrid($event)\"\n\t(itemsSelected)=\"onItemSelect($event)\"\n\t(pageChanged)=\"onPageChange($event)\"\n\t(pageSizeChanged)=\"onPageSizeChange($event)\"\n\t(rowColoringChanged)=\"onRowColoring($event)\"\n\t(searchPhraseChanged)=\"onSearchPhrase($event)\"\n\t(selectedRows)=\"onRowsSelect($event)\"\n\n\t(sourceEdited)=\"onSourceEdit($event)\"\n\t(themeChanged)=\"onTheme($event)\"\n\t(verticalGridChanged)=\"onVerticalGrid($event)\"\n\t[autoResizeWidth]=\"autoResizeWidth\"\n\t[cellEditing]=\"cellEditingConfig\"\n\t[columnHeaderBottom]=\"columnHeaderBottom\"\n\t[columnHeaderTop]=\"columnHeaderTop\"\n\t[columnMenu]=\"columnMenuConfig\"\n\t[columns]=\"columnsConfig\"\n\t[editMode]=\"editMode\"\n\t[filtering]=\"filtering\"\n\t[footerPanel]=\"footerPanel\"\n\t[horizontalGrid]=\"horizontalGrid\"\n\t[infoPanel]=\"infoPanel\"\n\t[loading]=\"loading\"\n\t[localization]=\"localization\"\n\t[maxHeight]=\"maxHeight\"\n\t[paging]=\"paging\"\n\t[quickFilters]=\"quickFilters\"\n\t[rowClass]=\"rowClass\"\n\t[rowColoring]=\"rowColoringConfig\"\n\t[rowDetail]=\"rowDetail\"\n\t[rowHeight]=\"rowHeight\"\n\t[rowSelection]=\"rowSelectionConfig\"\n\t[rowStyle]=\"rowStyle\"\n\t[searching]=\"searching\"\n\t[sorting]=\"sorting\"\n\t[source]=\"source\"\n\t[summaries]=\"summaries\"\n\t[theme]=\"themeConfig\"\n\t[titlePanel]=\"titlePanel\"\n\t[verticalGrid]=\"verticalGrid\"\n\t[virtualScroll]=\"virtualScroll\"\n\t[width]=\"width\"\n>\n</gui-structure>\n", styles: [".gui-grid{display:block;width:100%}\n"], dependencies: [{ kind: "component", type: i15.StructureComponent, selector: "gui-structure" }, { kind: "directive", type: i16.StructureColumnHeaderGate, selector: "gui-structure[columnHeaderTop][columnHeaderBottom], gui-structure[columnHeaderTop], gui-structure[columnHeaderBottom]", inputs: ["columnHeaderTop", "columnHeaderBottom"] }, { kind: "directive", type: i17.StructurePagingGate, selector: "gui-structure[paging]" }, { kind: "directive", type: i18.StructureSearchingGate, selector: "gui-structure[searching]" }, { kind: "directive", type: i19.StructureSelectionGate, selector: "gui-structure[rowSelection], gui-structure[selectionGate]", inputs: ["selectionGate"] }, { kind: "directive", type: i20.StructureL10nGate, selector: "gui-structure[localization]", inputs: ["localization"] }, { kind: "directive", type: i21.StructurePanelGate, selector: "gui-structure[titlePanel][footerPanel]", inputs: ["titlePanel", "footerPanel"] }, { kind: "directive", type: i22.StructureRowDetailGate, selector: "gui-structure[rowDetail]", inputs: ["rowDetail"] }, { kind: "directive", type: i23.StructureColumnMenuGate, selector: "gui-structure[columnMenu]", inputs: ["columnMenu"] }, { kind: "directive", type: i24.StructureSummariesGate, selector: "gui-structure[summaries]", inputs: ["summaries"] }, { kind: "directive", type: i25.StructureInfoPanelGate, selector: "gui-structure[infoPanel]", inputs: ["infoPanel"] }, { kind: "directive", type: i26.StructureRowClassGate, selector: "gui-structure[rowClass]", inputs: ["rowClass"] }, { kind: "directive", type: i27.StructureRowStyleGate, selector: "gui-structure[rowStyle]", inputs: ["rowStyle"] }, { kind: "directive", type: i28.StructureRowColoringGate, selector: "gui-structure[rowColoring]", inputs: ["rowColoring"], outputs: ["rowColoringChanged"] }, { kind: "directive", type: i29.ThemeGridGate, selector: "gui-structure[verticalGrid][horizontalGrid]", inputs: ["verticalGrid", "horizontalGrid"], outputs: ["horizontalGridChanged", "verticalGridChanged"] }, { kind: "directive", type: i30.StructureSortingGate, selector: "gui-structure[sorting]", inputs: ["sorting"] }, { kind: "directive", type: i31.SourceLoadingGate, selector: "gui-structure[loading]", inputs: ["loading"] }, { kind: "directive", type: i32.StructureFilterGate, selector: "gui-structure[filtering]", inputs: ["filtering"] }, { kind: "directive", type: i33.StructureQuickFiltersGate, selector: "gui-structure[quickFilters]", inputs: ["quickFilters"] }, { kind: "directive", type: i34.VerticalFormationGate, selector: "gui-structure[virtualScroll]", inputs: ["virtualScroll"] }], encapsulation: i0.ViewEncapsulation.None });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: GuiGridComponent, decorators: [{
            type: Component,
            args: [{ selector: 'gui-grid', providers: [
                        {
                            provide: StructureDefinition,
                            useValue: guiGridStructureDefinition
                        },
                        {
                            provide: structureParentComponent,
                            useExisting: GuiGridComponent
                        }
                    ], encapsulation: ViewEncapsulation.None, template: "<gui-structure\n\t#structure\n\t(cellEditCanceled)=\"onCellEditCancel()\"\n\t(cellEditEntered)=\"onCellEditEnter()\"\n\t(cellEditSubmitted)=\"onCellEditSubmit()\"\n\t(columnsChanged)=\"onColumnsChange()\"\n\t(containerWidthChanged)=\"onContainerWidthChange($event)\"\n\t(horizontalGridChanged)=\"onHorizontalGrid($event)\"\n\t(itemsSelected)=\"onItemSelect($event)\"\n\t(pageChanged)=\"onPageChange($event)\"\n\t(pageSizeChanged)=\"onPageSizeChange($event)\"\n\t(rowColoringChanged)=\"onRowColoring($event)\"\n\t(searchPhraseChanged)=\"onSearchPhrase($event)\"\n\t(selectedRows)=\"onRowsSelect($event)\"\n\n\t(sourceEdited)=\"onSourceEdit($event)\"\n\t(themeChanged)=\"onTheme($event)\"\n\t(verticalGridChanged)=\"onVerticalGrid($event)\"\n\t[autoResizeWidth]=\"autoResizeWidth\"\n\t[cellEditing]=\"cellEditingConfig\"\n\t[columnHeaderBottom]=\"columnHeaderBottom\"\n\t[columnHeaderTop]=\"columnHeaderTop\"\n\t[columnMenu]=\"columnMenuConfig\"\n\t[columns]=\"columnsConfig\"\n\t[editMode]=\"editMode\"\n\t[filtering]=\"filtering\"\n\t[footerPanel]=\"footerPanel\"\n\t[horizontalGrid]=\"horizontalGrid\"\n\t[infoPanel]=\"infoPanel\"\n\t[loading]=\"loading\"\n\t[localization]=\"localization\"\n\t[maxHeight]=\"maxHeight\"\n\t[paging]=\"paging\"\n\t[quickFilters]=\"quickFilters\"\n\t[rowClass]=\"rowClass\"\n\t[rowColoring]=\"rowColoringConfig\"\n\t[rowDetail]=\"rowDetail\"\n\t[rowHeight]=\"rowHeight\"\n\t[rowSelection]=\"rowSelectionConfig\"\n\t[rowStyle]=\"rowStyle\"\n\t[searching]=\"searching\"\n\t[sorting]=\"sorting\"\n\t[source]=\"source\"\n\t[summaries]=\"summaries\"\n\t[theme]=\"themeConfig\"\n\t[titlePanel]=\"titlePanel\"\n\t[verticalGrid]=\"verticalGrid\"\n\t[virtualScroll]=\"virtualScroll\"\n\t[width]=\"width\"\n>\n</gui-structure>\n", styles: [".gui-grid{display:block;width:100%}\n"] }]
        }], ctorParameters: function () { return [{ type: undefined, decorators: [{
                    type: Inject,
                    args: [PLATFORM_ID]
                }] }, { type: i0.ElementRef }, { type: i0.ChangeDetectorRef }, { type: i1.GuiGridRegister }, { type: i2.StructureIdGenerator }, { type: i3.FormationPublisher }, { type: i4.FormationWarehouse }, { type: i5.CompositionPublisher }, { type: i6.CompositionWarehouse }, { type: i7.FilterIntegration }, { type: i8.SourcePublisher }, { type: i9.SearchPublisher }, { type: i10.SchemaPublisher }, { type: i11.StructurePublisher }, { type: i12.SummariesPublisher }, { type: i13.SortingPublisher }, { type: i14.PagingPublisher }]; }, propDecorators: { structureRef: [{
                type: ViewChild,
                args: ['structure', { static: true }]
            }], gridId: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3VpLmdyaWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vYnVpbGQtY2xpL3Byb2plY3RzL25neC1ncmlkL3NyYy9ndWkvZ3JpZC9zcmMvZmVhdHVyZS9ndWkuZ3JpZC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9idWlsZC1jbGkvcHJvamVjdHMvbmd4LWdyaWQvc3JjL2d1aS9ncmlkL3NyYy9mZWF0dXJlL2d1aS5ncmlkLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBcUIsU0FBUyxFQUFjLE1BQU0sRUFBRSxLQUFLLEVBQXFCLFdBQVcsRUFBRSxTQUFTLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDdEosT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFcEQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBRXBELE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLG9GQUFvRixDQUFDO0FBRTlILE9BQU8sRUFBYyxrQkFBa0IsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBSzdFLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLHdDQUF3QyxDQUFDO0FBR3BGLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtRUFBbUUsQ0FBQztBQUNsRyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSwyRUFBMkUsQ0FBQztBQUk5RyxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx1RUFBdUUsQ0FBQztBQUM1RyxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBd0I3RSxNQUFNLE9BQU8sZ0JBQWlCLFNBQVEsY0FBYztJQW9CRDtJQUM5QjtJQUNBO0lBQ0E7SUFDQTtJQUVBO0lBQ0E7SUFDQTtJQUNBO0lB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QyxxQkFBcUIsRUFDMUIsSUFBSSxDQUFDLG9CQUFvQixDQUN6QixDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ2IsQ0FBQzt3R0F2SFcsZ0JBQWdCLGtCQW9CUixXQUFXOzRGQXBCbkIsZ0JBQWdCLGlFQVpqQjtZQUNWO2dCQUNDLE9BQU8sRUFBRSxtQkFBbUI7Z0JBQzVCLFFBQVEsRUFBRSwwQkFBMEI7YUFDcEM7WUFDRDtnQkFDQyxPQUFPLEVBQUUsd0JBQXdCO2dCQUNqQyxXQUFXLEVBQUUsZ0JBQWdCO2FBQzdCO1NBQ0QsMEtDMUNGLHd0REFtREE7OzRGRE5hLGdCQUFnQjtrQkFsQjVCLFNBQVM7K0JBQ0MsVUFBVSxhQUtUO3dCQUNWOzRCQUNDLE9BQU8sRUFBRSxtQkFBbUI7NEJBQzVCLFFBQVEsRUFBRSwwQkFBMEI7eUJBQ3BDO3dCQUNEOzRCQUNDLE9BQU8sRUFBRSx3QkFBd0I7NEJBQ2pDLFdBQVcsa0JBQWtCO3lCQUM3QjtxQkFDRCxpQkFDYyxpQkFBaUIsQ0FBQyxJQUFJOzswQkFzQnhCLE1BQU07MkJBQUMsV0FBVzs0aUJBZi9CLFlBQVk7c0JBRFgsU0FBUzt1QkFBQyxXQUFXLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO2dCQUl4QyxNQUFNO3NCQURMLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBJbmplY3QsIElucHV0LCBPbkRlc3Ryb3ksIE9uSW5pdCwgUExBVEZPUk1fSUQsIFZpZXdDaGlsZCwgVmlld0VuY2Fwc3VsYXRpb24gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGlzUGxhdGZvcm1Ccm93c2VyIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcblxuaW1wb3J0IHsgR3VpR3JpZEdhdGV3YXkgfSBmcm9tICcuL2d1aS5ncmlkLWdhdGV3YXknO1xuXG5pbXBvcnQgeyBzdHJ1Y3R1cmVQYXJlbnRDb21wb25lbnQgfSBmcm9tICcuLi8uLi8uLi8uLi9mZWF0dXJlLXZpZXcvZ3JpZC12aWV3L3NyYy9zdHJ1Y3R1cmUvcGFyZW50L3N0cnVjdHVyZS1wYXJlbnQtY29tcG9uZW50JztcbmltcG9ydCB7IEd1aUdyaWRSZWdpc3RlciB9IGZyb20gJy4vcmVnaXN0ZXIvZ3VpLmdyaWQucmVnaXN0ZXInO1xuaW1wb3J0IHsgR3VpR3JpZEFwaSwgR3VpR3JpZEFwaVByb3ZpZGVyIH0gZnJvbSAnLi9hcGkvZ3VpLmdyaWQuYXBpLXByb3ZpZGVyJztcbmltcG9ydCB7IEZvcm1hdGlvblB1Ymxpc2hlciB9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvc3RydWN0dXJlL2Zvcm1hdGlvbi9zcmMvYXBpL2Zvcm1hdGlvbi5wdWJsaXNoZXInO1xuaW1wb3J0IHsgU291cmNlUHVibGlzaGVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9zdHJ1Y3R1cmUvc291cmNlL3NyYy9hcGkvc291cmNlLnB1Ymxpc2hlcic7XG5pbXBvcnQgeyBGb3JtYXRpb25XYXJlaG91c2UgfSBmcm9tICcuLi8uLi8uLi8uLi9jb3JlL3N0cnVjdHVyZS9mb3JtYXRpb24vc3JjL2FwaS9mb3JtYXRpb24ud2FyZWhvdXNlJztcbmltcG9ydCB7IFNlYXJjaFB1Ymxpc2hlciB9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvc3RydWN0dXJlL3NlYXJjaC9zcmMvYXBpL3NlYXJjaC5wdWJsaXNoZXInO1xuaW1wb3J0IHsgR3VpR3JpZFRoZW1lQ29tbWFuZEludm9rZXIgfSBmcm9tICcuL3RoZW1lL2d1aS5ncmlkLnRoZW1lLmNvbW1hbmQtaW52b2tlcic7XG5pbXBvcnQgeyBTY2hlbWFQdWJsaXNoZXIgfSBmcm9tICcuLi8uLi8uLi8uLi9jb3JlL3NjaGVtYS9zcmMvYXBpL3NjaGVtYS5wdWJsaXNoZXInO1xuaW1wb3J0IHsgU3RydWN0dXJlUHVibGlzaGVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9zdHJ1Y3R1cmUvc3RydWN0dXJlLWNvcmUvc3JjL2FwaS9zdHJ1Y3R1cmUucHVibGlzaGVyJztcbmltcG9ydCB7IENsYXNzTW9kaWZpZXIgfSBmcm9tICcuLi8uLi8uLi8uLi9mZWF0dXJlL2NvbW1vbi9jb21wb25lbnQvc3JjL2RvbS9jbGFzcy9jbGFzcy1tb2RpZmllcic7XG5pbXBvcnQgeyBBdHRyaWJ1dGVNb2RpZmllciB9IGZyb20gJy4uLy4uLy4uLy4uL2ZlYXR1cmUvY29tbW9uL2NvbXBvbmVudC9zcmMvZG9tL2F0dHJpYnV0ZS9hdHRyaWJ1dGUtbW9kaWZpZXInO1xuaW1wb3J0IHsgUGFnaW5nUHVibGlzaGVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9zdHJ1Y3R1cmUvcGFnaW5nL3NyYy9hcGkvcGFnaW5nLnB1Ymxpc2hlcic7XG5pbXBvcnQgeyBTdW1tYXJpZXNQdWJsaXNoZXIgfSBmcm9tICcuLi8uLi8uLi8uLi9jb3JlL3N0cnVjdHVyZS9zdW1tYXJpZXMvc3JjL2FwaS9zdW1tYXJpZXMucHVibGlzaGVyJztcbmltcG9ydCB7IFNvcnRpbmdQdWJsaXNoZXIgfSBmcm9tICcuLi8uLi8uLi8uLi9jb3JlL3N0cnVjdHVyZS9zb3J0aW5nL3NyYy9hcGkvc29ydGluZy5wdWJsaXNoZXInO1xuaW1wb3J0IHsgU3RydWN0dXJlRGVmaW5pdGlvbiB9IGZyb20gJy4uLy4uLy4uLy4uL2ZlYXR1cmUtdmlldy9ncmlkLXZpZXcvc3JjL3N0cnVjdHVyZS9zdHJ1Y3R1cmUtZGVmaW5pdGlvbic7XG5pbXBvcnQgeyBndWlHcmlkU3RydWN0dXJlRGVmaW5pdGlvbiB9IGZyb20gJy4vZ3VpLmdyaWQtc3RydWN0dXJlLWRlZmluaXRpb24nO1xuaW1wb3J0IHsgQ29tcG9zaXRpb25QdWJsaXNoZXIgfSBmcm9tICcuLi8uLi8uLi8uLi9jb3JlL2NvbXBvc2l0aW9uL3NyYy9hcGkvY29tcG9zaXRpb24ucHVibGlzaGVyJztcbmltcG9ydCB7IENvbXBvc2l0aW9uV2FyZWhvdXNlIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9jb21wb3NpdGlvbi9zcmMvYXBpL2NvbXBvc2l0aW9uLndhcmVob3VzZSc7XG5pbXBvcnQgeyBGaWx0ZXJJbnRlZ3JhdGlvbiB9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvc3RydWN0dXJlL2ZpbHRlci9zcmMvYXBpLWludGVncmF0aW9uL2ZpbHRlci5pbnRlZ3JhdGlvbic7XG5pbXBvcnQgeyBTdHJ1Y3R1cmVJZEdlbmVyYXRvciB9IGZyb20gJy4uLy4uLy4uLy4uL2ZlYXR1cmUtdmlldy9ncmlkLXZpZXcvc3JjL3N0cnVjdHVyZS9zdHJ1Y3R1cmUtaWQuZ2VuZXJhdG9yJztcblxuQENvbXBvbmVudCh7XG5cdHNlbGVjdG9yOiAnZ3VpLWdyaWQnLFxuXHR0ZW1wbGF0ZVVybDogJy4vZ3VpLmdyaWQuY29tcG9uZW50Lmh0bWwnLFxuXHRzdHlsZVVybHM6IFtcblx0XHQnLi9ndWkuZ3JpZC5uZ3guc2Nzcydcblx0XSxcblx0cHJvdmlkZXJzOiBbXG5cdFx0e1xuXHRcdFx0cHJvdmlkZTogU3RydWN0dXJlRGVmaW5pdGlvbixcblx0XHRcdHVzZVZhbHVlOiBndWlHcmlkU3RydWN0dXJlRGVmaW5pdGlvblxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0cHJvdmlkZTogc3RydWN0dXJlUGFyZW50Q29tcG9uZW50LFxuXHRcdFx0dXNlRXhpc3Rpbmc6IEd1aUdyaWRDb21wb25lbnRcblx0XHR9XG5cdF0sXG5cdGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcbn0pXG5leHBvcnQgY2xhc3MgR3VpR3JpZENvbXBvbmVudCBleHRlbmRzIEd1aUdyaWRHYXRld2F5IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xuXG5cdHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IEdVSV9HUklEX0lEID0gJ2d1aS1ncmlkLWlkJztcblxuXHRAVmlld0NoaWxkKCdzdHJ1Y3R1cmUnLCB7IHN0YXRpYzogdHJ1ZSB9KVxuXHRzdHJ1Y3R1cmVSZWY6IGFueTtcblxuXHRASW5wdXQoKVxuXHRncmlkSWQ6IHN0cmluZzsgLy8gY2FuIGJlIHNldCBvbmNlXG5cblx0cHVibGljIGFwaTogR3VpR3JpZEFwaTtcblxuXHRwcml2YXRlIGxvY2FsR3JpZElkOiBzdHJpbmc7XG5cblx0cHJpdmF0ZSByZWFkb25seSBncmlkVGhlbWVDb21tYW5kSW52b2tlcjogR3VpR3JpZFRoZW1lQ29tbWFuZEludm9rZXI7XG5cblx0cHJpdmF0ZSByZWFkb25seSBjbGFzc01vZGlmaWVyOiBDbGFzc01vZGlmaWVyO1xuXG5cdHByaXZhdGUgcmVhZG9ubHkgYXR0cmlidXRlTW9kaWZpZXI6IEF0dHJpYnV0ZU1vZGlmaWVyO1xuXG5cdGNvbnN0cnVjdG9yKEBJbmplY3QoUExBVEZPUk1fSUQpIHByaXZhdGUgcmVhZG9ubHkgcGxhdGZvcm1JZDogYW55LFxuXHRcdFx0XHRwcml2YXRlIHJlYWRvbmx5IGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXG5cdFx0XHRcdHByaXZhdGUgcmVhZG9ubHkgY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmLFxuXHRcdFx0XHRwcml2YXRlIHJlYWRvbmx5IGdyaWRSZWdpc3RlcjogR3VpR3JpZFJlZ2lzdGVyLFxuXHRcdFx0XHRwcml2YXRlIHJlYWRvbmx5IHN0cnVjdHVyZUlkR2VuZXJhdG9yOiBTdHJ1Y3R1cmVJZEdlbmVyYXRvcixcblx0XHRcdFx0Ly8gZGVsZWdhdGVcblx0XHRcdFx0cHJpdmF0ZSByZWFkb25seSBmb3JtYXRpb25Db21tYW5kRGlzcGF0Y2hlcjogRm9ybWF0aW9uUHVibGlzaGVyLFxuXHRcdFx0XHRwcml2YXRlIHJlYWRvbmx5IGZvcm1hdGlvbldhcmVob3VzZTogRm9ybWF0aW9uV2FyZWhvdXNlLFxuXHRcdFx0XHRwcml2YXRlIHJlYWRvbmx5IGNvbXBvc2l0aW9uQ29tbWFuZEludm9rZXI6IENvbXBvc2l0aW9uUHVibGlzaGVyLFxuXHRcdFx0XHRwcml2YXRlIHJlYWRvbmx5IGNvbXBvc2l0aW9uV2FyZWhvdXNlOiBDb21wb3NpdGlvbldhcmVob3VzZSxcblx0XHRcdFx0cHJpdmF0ZSByZWFkb25seSBmaWx0ZXJJbnRlZ3JhdGlvbjogRmlsdGVySW50ZWdyYXRpb24sXG5cdFx0XHRcdHByaXZhdGUgcmVhZG9ubHkgc291cmNlQ29tbWFuZERpc3BhdGNoZXI6IFNvdXJjZVB1Ymxpc2hlcixcblx0XHRcdFx0cHJpdmF0ZSByZWFkb25seSBzZWFyY2hDb21tYW5kSW52b2tlcjogU2VhcmNoUHVibGlzaGVyLFxuXHRcdFx0XHRwcml2YXRlIHJlYWRvbmx5IHNjaGVtYUNvbW1hbmRJbnZva2VyOiBTY2hlbWFQdWJsaXNoZXIsXG5cdFx0XHRcdHByaXZhdGUgcmVhZG9ubHkgc3RydWN0dXJlQ29tbWFuZERpc3BhdGNoZXI6IFN0cnVjdHVyZVB1Ymxpc2hlcixcblx0XHRcdFx0cHJpdmF0ZSByZWFkb25seSBzdW1tYXJpZXNDb21tYW5kSW52b2tlcjogU3VtbWFyaWVzUHVibGlzaGVyLFxuXHRcdFx0XHRwcml2YXRlIHJlYWRvbmx5IHNvcnRpbmdDb21tYW5kSW52b2tlcjogU29ydGluZ1B1Ymxpc2hlcixcblx0XHRcdFx0cHJpdmF0ZSByZWFkb25seSBwYWdpbmdDb21tYW5kSW52b2tlcjogUGFnaW5nUHVibGlzaGVyXG5cdCkge1xuXHRcdHN1cGVyKCk7XG5cblx0XHR0aGlzLmdyaWRUaGVtZUNvbW1hbmRJbnZva2VyID0gbmV3IEd1aUdyaWRUaGVtZUNvbW1hbmRJbnZva2VyKFxuXHRcdFx0dGhpcy5zY2hlbWFDb21tYW5kSW52b2tlcixcblx0XHRcdHRoaXMuZ3JpZFRoZW1lQ29udmVydGVyLFxuXHRcdFx0dGhpcy5ncmlkUm93Q29sb3JpbmdDb252ZXJ0ZXJcblx0XHQpO1xuXG5cdFx0dGhpcy5jbGFzc01vZGlmaWVyID0gbmV3IENsYXNzTW9kaWZpZXIodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQpO1xuXHRcdHRoaXMuYXR0cmlidXRlTW9kaWZpZXIgPSBuZXcgQXR0cmlidXRlTW9kaWZpZXIodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQpO1xuXHR9XG5cblx0bmdPbkluaXQoKSB7XG5cblx0XHR0aGlzLmNsYXNzTW9kaWZpZXIuZ2V0SG9zdCgpLmFkZCgnZ3VpLWdyaWQnKTtcblxuXHRcdHRoaXMuaW5pdEFwaSgpO1xuXG5cdFx0bGV0IGdyaWRJZCA9IHRoaXMuZ3JpZElkO1xuXG5cdFx0aWYgKGdyaWRJZCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHQvLyBncmlkSWQgPSB0aGlzLmdyaWRJZEdlbmVyYXRvci5nZW5lcmF0ZUlkKCk7XG5cdFx0XHRncmlkSWQgPSAnZ3VpLWdyaWQtJyArIHRoaXMuc3RydWN0dXJlSWRHZW5lcmF0b3IuZ2VuZXJhdGVJZCgpO1xuXHRcdH1cblxuXHRcdHRoaXMubG9jYWxHcmlkSWQgPSBncmlkSWQ7XG5cblx0XHR0aGlzLmV4cG9zZUdyaWRJZCgpO1xuXG5cdFx0Ly8gcmVnaXN0ZXJcblx0XHR0aGlzLmdyaWRSZWdpc3Rlci5yZWdpc3RlcihncmlkSWQsIHRoaXMsIHRoaXMuc3RydWN0dXJlUmVmLmdldFN0cnVjdHVyZUlkKCkpO1xuXG5cdFx0aWYgKGlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm1JZCkpIHtcblx0XHRcdHdpbmRvd1snZ2V0R3VpR3JpZCddID0gKGdyaWRJZDogc3RyaW5nKSA9PiB7XG5cblx0XHRcdFx0Y29uc3QgZ3JpZENvbnNvbGVDb25maWcgPSB0aGlzLmdyaWRSZWdpc3Rlci5nZXRWYWx1ZXMoZ3JpZElkKTtcblxuXHRcdFx0XHRpZiAoZ3JpZENvbnNvbGVDb25maWcpIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5hcGk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblxuXHRuZ09uRGVzdHJveSgpIHtcblx0XHR0aGlzLmdyaWRSZWdpc3Rlci51bnJlZ2lzdGVyKHRoaXMubG9jYWxHcmlkSWQpO1xuXHR9XG5cblx0Z2V0RWxlbWVudFJlZigpOiBFbGVtZW50UmVmIHtcblx0XHRyZXR1cm4gdGhpcy5lbGVtZW50UmVmO1xuXHR9XG5cblx0ZGV0ZWN0Q2hhbmdlcygpOiB2b2lkIHtcblx0XHR0aGlzLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcblx0fVxuXG5cdHByaXZhdGUgZXhwb3NlR3JpZElkKCk6IHZvaWQge1xuXHRcdHRoaXMuYXR0cmlidXRlTW9kaWZpZXIuZ2V0SG9zdCgpLnNldEF0dHJpYnV0ZShHdWlHcmlkQ29tcG9uZW50LkdVSV9HUklEX0lELCB0aGlzLmxvY2FsR3JpZElkKTtcblx0fVxuXG5cdHByaXZhdGUgaW5pdEFwaSgpOiB2b2lkIHtcblx0XHR0aGlzLmFwaSA9IG5ldyBHdWlHcmlkQXBpUHJvdmlkZXIoXG5cdFx0XHR0aGlzLnN0cnVjdHVyZVJlZi5zdHJ1Y3R1cmVJZCxcblx0XHRcdHRoaXMuc3RydWN0dXJlUmVmLmNvbXBvc2l0aW9uSWQsXG5cdFx0XHR0aGlzLnN0cnVjdHVyZVJlZi5zY2hlbWFSZWFkTW9kZWxSb290SWQsXG5cdFx0XHR0aGlzLmZvcm1hdGlvbkNvbW1hbmREaXNwYXRjaGVyLFxuXHRcdFx0dGhpcy5mb3JtYXRpb25XYXJlaG91c2UsXG5cdFx0XHR0aGlzLmNvbXBvc2l0aW9uQ29tbWFuZEludm9rZXIsXG5cdFx0XHR0aGlzLmNvbXBvc2l0aW9uV2FyZWhvdXNlLFxuXHRcdFx0dGhpcy5maWx0ZXJJbnRlZ3JhdGlvbixcblx0XHRcdHRoaXMuc291cmNlQ29tbWFuZERpc3BhdGNoZXIsXG5cdFx0XHR0aGlzLnNlYXJjaENvbW1hbmRJbnZva2VyLFxuXHRcdFx0dGhpcy5ncmlkVGhlbWVDb21tYW5kSW52b2tlcixcblx0XHRcdHRoaXMuc3RydWN0dXJlQ29tbWFuZERpc3BhdGNoZXIsXG5cdFx0XHR0aGlzLnN1bW1hcmllc0NvbW1hbmRJbnZva2VyLFxuXHRcdFx0dGhpcy5zb3J0aW5nQ29tbWFuZEludm9rZXIsXG5cdFx0XHR0aGlzLnBhZ2luZ0NvbW1hbmRJbnZva2VyXG5cdFx0KS5wcm92aWRlKCk7XG5cdH1cblxufVxuIiwiPGd1aS1zdHJ1Y3R1cmVcblx0I3N0cnVjdHVyZVxuXHQoY2VsbEVkaXRDYW5jZWxlZCk9XCJvbkNlbGxFZGl0Q2FuY2VsKClcIlxuXHQoY2VsbEVkaXRFbnRlcmVkKT1cIm9uQ2VsbEVkaXRFbnRlcigpXCJcblx0KGNlbGxFZGl0U3VibWl0dGVkKT1cIm9uQ2VsbEVkaXRTdWJtaXQoKVwiXG5cdChjb2x1bW5zQ2hhbmdlZCk9XCJvbkNvbHVtbnNDaGFuZ2UoKVwiXG5cdChjb250YWluZXJXaWR0aENoYW5nZWQpPVwib25Db250YWluZXJXaWR0aENoYW5nZSgkZXZlbnQpXCJcblx0KGhvcml6b250YWxHcmlkQ2hhbmdlZCk9XCJvbkhvcml6b250YWxHcmlkKCRldmVudClcIlxuXHQoaXRlbXNTZWxlY3RlZCk9XCJvbkl0ZW1TZWxlY3QoJGV2ZW50KVwiXG5cdChwYWdlQ2hhbmdlZCk9XCJvblBhZ2VDaGFuZ2UoJGV2ZW50KVwiXG5cdChwYWdlU2l6ZUNoYW5nZWQpPVwib25QYWdlU2l6ZUNoYW5nZSgkZXZlbnQpXCJcblx0KHJvd0NvbG9yaW5nQ2hhbmdlZCk9XCJvblJvd0NvbG9yaW5nKCRldmVudClcIlxuXHQoc2VhcmNoUGhyYXNlQ2hhbmdlZCk9XCJvblNlYXJjaFBocmFzZSgkZXZlbnQpXCJcblx0KHNlbGVjdGVkUm93cyk9XCJvblJvd3NTZWxlY3QoJGV2ZW50KVwiXG5cblx0KHNvdXJjZUVkaXRlZCk9XCJvblNvdXJjZUVkaXQoJGV2ZW50KVwiXG5cdCh0aGVtZUNoYW5nZWQpPVwib25UaGVtZSgkZXZlbnQpXCJcblx0KHZlcnRpY2FsR3JpZENoYW5nZWQpPVwib25WZXJ0aWNhbEdyaWQoJGV2ZW50KVwiXG5cdFthdXRvUmVzaXplV2lkdGhdPVwiYXV0b1Jlc2l6ZVdpZHRoXCJcblx0W2NlbGxFZGl0aW5nXT1cImNlbGxFZGl0aW5nQ29uZmlnXCJcblx0W2NvbHVtbkhlYWRlckJvdHRvbV09XCJjb2x1bW5IZWFkZXJCb3R0b21cIlxuXHRbY29sdW1uSGVhZGVyVG9wXT1cImNvbHVtbkhlYWRlclRvcFwiXG5cdFtjb2x1bW5NZW51XT1cImNvbHVtbk1lbnVDb25maWdcIlxuXHRbY29sdW1uc109XCJjb2x1bW5zQ29uZmlnXCJcblx0W2VkaXRNb2RlXT1cImVkaXRNb2RlXCJcblx0W2ZpbHRlcmluZ109XCJmaWx0ZXJpbmdcIlxuXHRbZm9vdGVyUGFuZWxdPVwiZm9vdGVyUGFuZWxcIlxuXHRbaG9yaXpvbnRhbEdyaWRdPVwiaG9yaXpvbnRhbEdyaWRcIlxuXHRbaW5mb1BhbmVsXT1cImluZm9QYW5lbFwiXG5cdFtsb2FkaW5nXT1cImxvYWRpbmdcIlxuXHRbbG9jYWxpemF0aW9uXT1cImxvY2FsaXphdGlvblwiXG5cdFttYXhIZWlnaHRdPVwibWF4SGVpZ2h0XCJcblx0W3BhZ2luZ109XCJwYWdpbmdcIlxuXHRbcXVpY2tGaWx0ZXJzXT1cInF1aWNrRmlsdGVyc1wiXG5cdFtyb3dDbGFzc109XCJyb3dDbGFzc1wiXG5cdFtyb3dDb2xvcmluZ109XCJyb3dDb2xvcmluZ0NvbmZpZ1wiXG5cdFtyb3dEZXRhaWxdPVwicm93RGV0YWlsXCJcblx0W3Jvd0hlaWdodF09XCJyb3dIZWlnaHRcIlxuXHRbcm93U2VsZWN0aW9uXT1cInJvd1NlbGVjdGlvbkNvbmZpZ1wiXG5cdFtyb3dTdHlsZV09XCJyb3dTdHlsZVwiXG5cdFtzZWFyY2hpbmddPVwic2VhcmNoaW5nXCJcblx0W3NvcnRpbmddPVwic29ydGluZ1wiXG5cdFtzb3VyY2VdPVwic291cmNlXCJcblx0W3N1bW1hcmllc109XCJzdW1tYXJpZXNcIlxuXHRbdGhlbWVdPVwidGhlbWVDb25maWdcIlxuXHRbdGl0bGVQYW5lbF09XCJ0aXRsZVBhbmVsXCJcblx0W3ZlcnRpY2FsR3JpZF09XCJ2ZXJ0aWNhbEdyaWRcIlxuXHRbdmlydHVhbFNjcm9sbF09XCJ2aXJ0dWFsU2Nyb2xsXCJcblx0W3dpZHRoXT1cIndpZHRoXCJcbj5cbjwvZ3VpLXN0cnVjdHVyZT5cbiJdfQ==